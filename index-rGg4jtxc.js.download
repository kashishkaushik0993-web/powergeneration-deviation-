var WN=t=>{throw TypeError(t)};var F1=(t,e,n)=>e.has(t)||WN("Cannot "+n);var ae=(t,e,n)=>(F1(t,e,"read from private field"),n?n.call(t):e.get(t)),it=(t,e,n)=>e.has(t)?WN("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Be=(t,e,n,r)=>(F1(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Yn=(t,e,n)=>(F1(t,e,"access private method"),n);var Sg=(t,e,n,r)=>({set _(o){Be(t,e,o,n)},get _(){return ae(t,e,r)}});function $F(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in t)){const i=Object.getOwnPropertyDescriptor(r,o);i&&Object.defineProperty(t,o,i.get?i:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var Io=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ht(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function U8(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var o=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return t[r]}})}),n}var kF={exports:{}},V0={},IF={exports:{}},Xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lp=Symbol.for("react.element"),G8=Symbol.for("react.portal"),H8=Symbol.for("react.fragment"),K8=Symbol.for("react.strict_mode"),q8=Symbol.for("react.profiler"),X8=Symbol.for("react.provider"),Y8=Symbol.for("react.context"),Q8=Symbol.for("react.forward_ref"),Z8=Symbol.for("react.suspense"),J8=Symbol.for("react.memo"),eK=Symbol.for("react.lazy"),VN=Symbol.iterator;function tK(t){return t===null||typeof t!="object"?null:(t=VN&&t[VN]||t["@@iterator"],typeof t=="function"?t:null)}var TF={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},EF=Object.assign,NF={};function Wd(t,e,n){this.props=t,this.context=e,this.refs=NF,this.updater=n||TF}Wd.prototype.isReactComponent={};Wd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Wd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function AF(){}AF.prototype=Wd.prototype;function Tk(t,e,n){this.props=t,this.context=e,this.refs=NF,this.updater=n||TF}var Ek=Tk.prototype=new AF;Ek.constructor=Tk;EF(Ek,Wd.prototype);Ek.isPureReactComponent=!0;var UN=Array.isArray,OF=Object.prototype.hasOwnProperty,Nk={current:null},_F={key:!0,ref:!0,__self:!0,__source:!0};function RF(t,e,n){var r,o={},i=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(i=""+e.key),e)OF.call(e,r)&&!_F.hasOwnProperty(r)&&(o[r]=e[r]);var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];o.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)o[r]===void 0&&(o[r]=a[r]);return{$$typeof:Lp,type:t,key:i,ref:s,props:o,_owner:Nk.current}}function nK(t,e){return{$$typeof:Lp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ak(t){return typeof t=="object"&&t!==null&&t.$$typeof===Lp}function rK(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var GN=/\/+/g;function L1(t,e){return typeof t=="object"&&t!==null&&t.key!=null?rK(""+t.key):e.toString(36)}function xy(t,e,n,r,o){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Lp:case G8:s=!0}}if(s)return s=t,o=o(s),t=r===""?"."+L1(s,0):r,UN(o)?(n="",t!=null&&(n=t.replace(GN,"$&/")+"/"),xy(o,e,n,"",function(u){return u})):o!=null&&(Ak(o)&&(o=nK(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(GN,"$&/")+"/")+t)),e.push(o)),1;if(s=0,r=r===""?".":r+":",UN(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+L1(i,a);s+=xy(i,e,n,l,o)}else if(l=tK(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+L1(i,a++),s+=xy(i,e,n,l,o);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Cg(t,e,n){if(t==null)return t;var r=[],o=0;return xy(t,r,"","",function(i){return e.call(n,i,o++)}),r}function oK(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var kr={current:null},by={transition:null},iK={ReactCurrentDispatcher:kr,ReactCurrentBatchConfig:by,ReactCurrentOwner:Nk};function PF(){throw Error("act(...) is not supported in production builds of React.")}Xe.Children={map:Cg,forEach:function(t,e,n){Cg(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Cg(t,function(){e++}),e},toArray:function(t){return Cg(t,function(e){return e})||[]},only:function(t){if(!Ak(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Xe.Component=Wd;Xe.Fragment=H8;Xe.Profiler=q8;Xe.PureComponent=Tk;Xe.StrictMode=K8;Xe.Suspense=Z8;Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iK;Xe.act=PF;Xe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=EF({},t.props),o=t.key,i=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,s=Nk.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)OF.call(e,l)&&!_F.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Lp,type:t.type,key:o,ref:i,props:r,_owner:s}};Xe.createContext=function(t){return t={$$typeof:Y8,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:X8,_context:t},t.Consumer=t};Xe.createElement=RF;Xe.createFactory=function(t){var e=RF.bind(null,t);return e.type=t,e};Xe.createRef=function(){return{current:null}};Xe.forwardRef=function(t){return{$$typeof:Q8,render:t}};Xe.isValidElement=Ak;Xe.lazy=function(t){return{$$typeof:eK,_payload:{_status:-1,_result:t},_init:oK}};Xe.memo=function(t,e){return{$$typeof:J8,type:t,compare:e===void 0?null:e}};Xe.startTransition=function(t){var e=by.transition;by.transition={};try{t()}finally{by.transition=e}};Xe.unstable_act=PF;Xe.useCallback=function(t,e){return kr.current.useCallback(t,e)};Xe.useContext=function(t){return kr.current.useContext(t)};Xe.useDebugValue=function(){};Xe.useDeferredValue=function(t){return kr.current.useDeferredValue(t)};Xe.useEffect=function(t,e){return kr.current.useEffect(t,e)};Xe.useId=function(){return kr.current.useId()};Xe.useImperativeHandle=function(t,e,n){return kr.current.useImperativeHandle(t,e,n)};Xe.useInsertionEffect=function(t,e){return kr.current.useInsertionEffect(t,e)};Xe.useLayoutEffect=function(t,e){return kr.current.useLayoutEffect(t,e)};Xe.useMemo=function(t,e){return kr.current.useMemo(t,e)};Xe.useReducer=function(t,e,n){return kr.current.useReducer(t,e,n)};Xe.useRef=function(t){return kr.current.useRef(t)};Xe.useState=function(t){return kr.current.useState(t)};Xe.useSyncExternalStore=function(t,e,n){return kr.current.useSyncExternalStore(t,e,n)};Xe.useTransition=function(){return kr.current.useTransition()};Xe.version="18.3.1";IF.exports=Xe;var R=IF.exports;const B=ht(R),DF=$F({__proto__:null,default:B},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sK=R,aK=Symbol.for("react.element"),lK=Symbol.for("react.fragment"),uK=Object.prototype.hasOwnProperty,cK=sK.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dK={key:!0,ref:!0,__self:!0,__source:!0};function MF(t,e,n){var r,o={},i=null,s=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)uK.call(e,r)&&!dK.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:aK,type:t,key:i,ref:s,props:o,_owner:cK.current}}V0.Fragment=lK;V0.jsx=MF;V0.jsxs=MF;kF.exports=V0;var D=kF.exports,FF={exports:{}},uo={},LF={exports:{}},BF={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,O){var j=A.length;A.push(O);e:for(;0<j;){var V=j-1>>>1,z=A[V];if(0<o(z,O))A[V]=O,A[j]=z,j=V;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var O=A[0],j=A.pop();if(j!==O){A[0]=j;e:for(var V=0,z=A.length,U=z>>>1;V<U;){var Z=2*(V+1)-1,te=A[Z],se=Z+1,ue=A[se];if(0>o(te,j))se<z&&0>o(ue,te)?(A[V]=ue,A[se]=j,V=se):(A[V]=te,A[Z]=j,V=Z);else if(se<z&&0>o(ue,j))A[V]=ue,A[se]=j,V=se;else break e}}return O}function o(A,O){var j=A.sortIndex-O.sortIndex;return j!==0?j:A.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],u=[],c=1,d=null,f=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(A){for(var O=n(u);O!==null;){if(O.callback===null)r(u);else if(O.startTime<=A)r(u),O.sortIndex=O.expirationTime,e(l,O);else break;O=n(u)}}function b(A){if(m=!1,x(A),!p)if(n(l)!==null)p=!0,F(w);else{var O=n(u);O!==null&&L(b,O.startTime-A)}}function w(A,O){p=!1,m&&(m=!1,y(C),C=-1),h=!0;var j=f;try{for(x(O),d=n(l);d!==null&&(!(d.expirationTime>O)||A&&!T());){var V=d.callback;if(typeof V=="function"){d.callback=null,f=d.priorityLevel;var z=V(d.expirationTime<=O);O=t.unstable_now(),typeof z=="function"?d.callback=z:d===n(l)&&r(l),x(O)}else r(l);d=n(l)}if(d!==null)var U=!0;else{var Z=n(u);Z!==null&&L(b,Z.startTime-O),U=!1}return U}finally{d=null,f=j,h=!1}}var S=!1,$=null,C=-1,k=5,I=-1;function T(){return!(t.unstable_now()-I<k)}function E(){if($!==null){var A=t.unstable_now();I=A;var O=!0;try{O=$(!0,A)}finally{O?_():(S=!1,$=null)}}else S=!1}var _;if(typeof v=="function")_=function(){v(E)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,P=N.port2;N.port1.onmessage=E,_=function(){P.postMessage(null)}}else _=function(){g(E,0)};function F(A){$=A,S||(S=!0,_())}function L(A,O){C=g(function(){A(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,F(w))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(A){switch(f){case 1:case 2:case 3:var O=3;break;default:O=f}var j=f;f=O;try{return A()}finally{f=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,O){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var j=f;f=A;try{return O()}finally{f=j}},t.unstable_scheduleCallback=function(A,O,j){var V=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?V+j:V):j=V,A){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=j+z,A={id:c++,callback:O,priorityLevel:A,startTime:j,expirationTime:z,sortIndex:-1},j>V?(A.sortIndex=j,e(u,A),n(l)===null&&A===n(u)&&(m?(y(C),C=-1):m=!0,L(b,j-V))):(A.sortIndex=z,e(l,A),p||h||(p=!0,F(w))),A},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(A){var O=f;return function(){var j=f;f=O;try{return A.apply(this,arguments)}finally{f=j}}}})(BF);LF.exports=BF;var fK=LF.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hK=R,so=fK;function he(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zF=new Set,Sh={};function Ru(t,e){Zc(t,e),Zc(t+"Capture",e)}function Zc(t,e){for(Sh[t]=e,t=0;t<e.length;t++)zF.add(e[t])}var Ps=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cS=Object.prototype.hasOwnProperty,pK=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,HN={},KN={};function mK(t){return cS.call(KN,t)?!0:cS.call(HN,t)?!1:pK.test(t)?KN[t]=!0:(HN[t]=!0,!1)}function gK(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function yK(t,e,n,r){if(e===null||typeof e>"u"||gK(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ir(t,e,n,r,o,i,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=s}var Vn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Vn[t]=new Ir(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Vn[e]=new Ir(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Vn[t]=new Ir(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Vn[t]=new Ir(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Vn[t]=new Ir(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Vn[t]=new Ir(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Vn[t]=new Ir(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Vn[t]=new Ir(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Vn[t]=new Ir(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ok=/[\-:]([a-z])/g;function _k(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ok,_k);Vn[e]=new Ir(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ok,_k);Vn[e]=new Ir(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ok,_k);Vn[e]=new Ir(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Vn[t]=new Ir(t,1,!1,t.toLowerCase(),null,!1,!1)});Vn.xlinkHref=new Ir("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Vn[t]=new Ir(t,1,!1,t.toLowerCase(),null,!0,!0)});function Rk(t,e,n,r){var o=Vn.hasOwnProperty(e)?Vn[e]:null;(o!==null?o.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(yK(e,n,o,r)&&(n=null),r||o===null?mK(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,r=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var qs=hK.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$g=Symbol.for("react.element"),cc=Symbol.for("react.portal"),dc=Symbol.for("react.fragment"),Pk=Symbol.for("react.strict_mode"),dS=Symbol.for("react.profiler"),jF=Symbol.for("react.provider"),WF=Symbol.for("react.context"),Dk=Symbol.for("react.forward_ref"),fS=Symbol.for("react.suspense"),hS=Symbol.for("react.suspense_list"),Mk=Symbol.for("react.memo"),ua=Symbol.for("react.lazy"),VF=Symbol.for("react.offscreen"),qN=Symbol.iterator;function $f(t){return t===null||typeof t!="object"?null:(t=qN&&t[qN]||t["@@iterator"],typeof t=="function"?t:null)}var Kt=Object.assign,B1;function qf(t){if(B1===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);B1=e&&e[1]||""}return`
`+B1+t}var z1=!1;function j1(t,e){if(!t||z1)return"";z1=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var o=u.stack.split(`
`),i=r.stack.split(`
`),s=o.length-1,a=i.length-1;1<=s&&0<=a&&o[s]!==i[a];)a--;for(;1<=s&&0<=a;s--,a--)if(o[s]!==i[a]){if(s!==1||a!==1)do if(s--,a--,0>a||o[s]!==i[a]){var l=`
`+o[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{z1=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?qf(t):""}function vK(t){switch(t.tag){case 5:return qf(t.type);case 16:return qf("Lazy");case 13:return qf("Suspense");case 19:return qf("SuspenseList");case 0:case 2:case 15:return t=j1(t.type,!1),t;case 11:return t=j1(t.type.render,!1),t;case 1:return t=j1(t.type,!0),t;default:return""}}function pS(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case dc:return"Fragment";case cc:return"Portal";case dS:return"Profiler";case Pk:return"StrictMode";case fS:return"Suspense";case hS:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case WF:return(t.displayName||"Context")+".Consumer";case jF:return(t._context.displayName||"Context")+".Provider";case Dk:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Mk:return e=t.displayName||null,e!==null?e:pS(t.type)||"Memo";case ua:e=t._payload,t=t._init;try{return pS(t(e))}catch{}}return null}function xK(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pS(e);case 8:return e===Pk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Va(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function UF(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function bK(t){var e=UF(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(s){r=""+s,i.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function kg(t){t._valueTracker||(t._valueTracker=bK(t))}function GF(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=UF(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function My(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function mS(t,e){var n=e.checked;return Kt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function XN(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Va(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function HF(t,e){e=e.checked,e!=null&&Rk(t,"checked",e,!1)}function gS(t,e){HF(t,e);var n=Va(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?yS(t,e.type,n):e.hasOwnProperty("defaultValue")&&yS(t,e.type,Va(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function YN(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function yS(t,e,n){(e!=="number"||My(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Xf=Array.isArray;function Ic(t,e,n,r){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Va(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,r&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function vS(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(he(91));return Kt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function QN(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(he(92));if(Xf(n)){if(1<n.length)throw Error(he(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Va(n)}}function KF(t,e){var n=Va(e.value),r=Va(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ZN(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function qF(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xS(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?qF(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ig,XF=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ig=Ig||document.createElement("div"),Ig.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ig.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ch(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ih={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wK=["Webkit","ms","Moz","O"];Object.keys(ih).forEach(function(t){wK.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ih[e]=ih[t]})});function YF(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ih.hasOwnProperty(t)&&ih[t]?(""+e).trim():e+"px"}function QF(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=YF(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,o):t[n]=o}}var SK=Kt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bS(t,e){if(e){if(SK[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(he(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(he(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(he(61))}if(e.style!=null&&typeof e.style!="object")throw Error(he(62))}}function wS(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var SS=null;function Fk(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var CS=null,Tc=null,Ec=null;function JN(t){if(t=jp(t)){if(typeof CS!="function")throw Error(he(280));var e=t.stateNode;e&&(e=q0(e),CS(t.stateNode,t.type,e))}}function ZF(t){Tc?Ec?Ec.push(t):Ec=[t]:Tc=t}function JF(){if(Tc){var t=Tc,e=Ec;if(Ec=Tc=null,JN(t),e)for(t=0;t<e.length;t++)JN(e[t])}}function eL(t,e){return t(e)}function tL(){}var W1=!1;function nL(t,e,n){if(W1)return t(e,n);W1=!0;try{return eL(t,e,n)}finally{W1=!1,(Tc!==null||Ec!==null)&&(tL(),JF())}}function $h(t,e){var n=t.stateNode;if(n===null)return null;var r=q0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(he(231,e,typeof n));return n}var $S=!1;if(Ps)try{var kf={};Object.defineProperty(kf,"passive",{get:function(){$S=!0}}),window.addEventListener("test",kf,kf),window.removeEventListener("test",kf,kf)}catch{$S=!1}function CK(t,e,n,r,o,i,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var sh=!1,Fy=null,Ly=!1,kS=null,$K={onError:function(t){sh=!0,Fy=t}};function kK(t,e,n,r,o,i,s,a,l){sh=!1,Fy=null,CK.apply($K,arguments)}function IK(t,e,n,r,o,i,s,a,l){if(kK.apply(this,arguments),sh){if(sh){var u=Fy;sh=!1,Fy=null}else throw Error(he(198));Ly||(Ly=!0,kS=u)}}function Pu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function rL(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function eA(t){if(Pu(t)!==t)throw Error(he(188))}function TK(t){var e=t.alternate;if(!e){if(e=Pu(t),e===null)throw Error(he(188));return e!==t?null:t}for(var n=t,r=e;;){var o=n.return;if(o===null)break;var i=o.alternate;if(i===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return eA(o),t;if(i===r)return eA(o),e;i=i.sibling}throw Error(he(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s){for(a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s)throw Error(he(189))}}if(n.alternate!==r)throw Error(he(190))}if(n.tag!==3)throw Error(he(188));return n.stateNode.current===n?t:e}function oL(t){return t=TK(t),t!==null?iL(t):null}function iL(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=iL(t);if(e!==null)return e;t=t.sibling}return null}var sL=so.unstable_scheduleCallback,tA=so.unstable_cancelCallback,EK=so.unstable_shouldYield,NK=so.unstable_requestPaint,rn=so.unstable_now,AK=so.unstable_getCurrentPriorityLevel,Lk=so.unstable_ImmediatePriority,aL=so.unstable_UserBlockingPriority,By=so.unstable_NormalPriority,OK=so.unstable_LowPriority,lL=so.unstable_IdlePriority,U0=null,qi=null;function _K(t){if(qi&&typeof qi.onCommitFiberRoot=="function")try{qi.onCommitFiberRoot(U0,t,void 0,(t.current.flags&128)===128)}catch{}}var vi=Math.clz32?Math.clz32:DK,RK=Math.log,PK=Math.LN2;function DK(t){return t>>>=0,t===0?32:31-(RK(t)/PK|0)|0}var Tg=64,Eg=4194304;function Yf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function zy(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,o=t.suspendedLanes,i=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~o;a!==0?r=Yf(a):(i&=s,i!==0&&(r=Yf(i)))}else s=n&~o,s!==0?r=Yf(s):i!==0&&(r=Yf(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&o)&&(o=r&-r,i=e&-e,o>=i||o===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vi(e),o=1<<n,r|=t[n],e&=~o;return r}function MK(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function FK(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,o=t.expirationTimes,i=t.pendingLanes;0<i;){var s=31-vi(i),a=1<<s,l=o[s];l===-1?(!(a&n)||a&r)&&(o[s]=MK(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function IS(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function uL(){var t=Tg;return Tg<<=1,!(Tg&4194240)&&(Tg=64),t}function V1(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Bp(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vi(e),t[e]=n}function LK(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-vi(n),i=1<<o;e[o]=0,r[o]=-1,t[o]=-1,n&=~i}}function Bk(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vi(n),o=1<<r;o&e|t[r]&e&&(t[r]|=e),n&=~o}}var gt=0;function cL(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var dL,zk,fL,hL,pL,TS=!1,Ng=[],Ea=null,Na=null,Aa=null,kh=new Map,Ih=new Map,ha=[],BK="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nA(t,e){switch(t){case"focusin":case"focusout":Ea=null;break;case"dragenter":case"dragleave":Na=null;break;case"mouseover":case"mouseout":Aa=null;break;case"pointerover":case"pointerout":kh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ih.delete(e.pointerId)}}function If(t,e,n,r,o,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},e!==null&&(e=jp(e),e!==null&&zk(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function zK(t,e,n,r,o){switch(e){case"focusin":return Ea=If(Ea,t,e,n,r,o),!0;case"dragenter":return Na=If(Na,t,e,n,r,o),!0;case"mouseover":return Aa=If(Aa,t,e,n,r,o),!0;case"pointerover":var i=o.pointerId;return kh.set(i,If(kh.get(i)||null,t,e,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,Ih.set(i,If(Ih.get(i)||null,t,e,n,r,o)),!0}return!1}function mL(t){var e=Ll(t.target);if(e!==null){var n=Pu(e);if(n!==null){if(e=n.tag,e===13){if(e=rL(n),e!==null){t.blockedOn=e,pL(t.priority,function(){fL(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function wy(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ES(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);SS=r,n.target.dispatchEvent(r),SS=null}else return e=jp(n),e!==null&&zk(e),t.blockedOn=n,!1;e.shift()}return!0}function rA(t,e,n){wy(t)&&n.delete(e)}function jK(){TS=!1,Ea!==null&&wy(Ea)&&(Ea=null),Na!==null&&wy(Na)&&(Na=null),Aa!==null&&wy(Aa)&&(Aa=null),kh.forEach(rA),Ih.forEach(rA)}function Tf(t,e){t.blockedOn===e&&(t.blockedOn=null,TS||(TS=!0,so.unstable_scheduleCallback(so.unstable_NormalPriority,jK)))}function Th(t){function e(o){return Tf(o,t)}if(0<Ng.length){Tf(Ng[0],t);for(var n=1;n<Ng.length;n++){var r=Ng[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ea!==null&&Tf(Ea,t),Na!==null&&Tf(Na,t),Aa!==null&&Tf(Aa,t),kh.forEach(e),Ih.forEach(e),n=0;n<ha.length;n++)r=ha[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ha.length&&(n=ha[0],n.blockedOn===null);)mL(n),n.blockedOn===null&&ha.shift()}var Nc=qs.ReactCurrentBatchConfig,jy=!0;function WK(t,e,n,r){var o=gt,i=Nc.transition;Nc.transition=null;try{gt=1,jk(t,e,n,r)}finally{gt=o,Nc.transition=i}}function VK(t,e,n,r){var o=gt,i=Nc.transition;Nc.transition=null;try{gt=4,jk(t,e,n,r)}finally{gt=o,Nc.transition=i}}function jk(t,e,n,r){if(jy){var o=ES(t,e,n,r);if(o===null)J1(t,e,r,Wy,n),nA(t,r);else if(zK(o,t,e,n,r))r.stopPropagation();else if(nA(t,r),e&4&&-1<BK.indexOf(t)){for(;o!==null;){var i=jp(o);if(i!==null&&dL(i),i=ES(t,e,n,r),i===null&&J1(t,e,r,Wy,n),i===o)break;o=i}o!==null&&r.stopPropagation()}else J1(t,e,r,null,n)}}var Wy=null;function ES(t,e,n,r){if(Wy=null,t=Fk(r),t=Ll(t),t!==null)if(e=Pu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=rL(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Wy=t,null}function gL(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(AK()){case Lk:return 1;case aL:return 4;case By:case OK:return 16;case lL:return 536870912;default:return 16}default:return 16}}var wa=null,Wk=null,Sy=null;function yL(){if(Sy)return Sy;var t,e=Wk,n=e.length,r,o="value"in wa?wa.value:wa.textContent,i=o.length;for(t=0;t<n&&e[t]===o[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===o[i-r];r++);return Sy=o.slice(t,1<r?1-r:void 0)}function Cy(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ag(){return!0}function oA(){return!1}function co(t){function e(n,r,o,i,s){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ag:oA,this.isPropagationStopped=oA,this}return Kt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ag)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ag)},persist:function(){},isPersistent:Ag}),e}var Vd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vk=co(Vd),zp=Kt({},Vd,{view:0,detail:0}),UK=co(zp),U1,G1,Ef,G0=Kt({},zp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uk,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ef&&(Ef&&t.type==="mousemove"?(U1=t.screenX-Ef.screenX,G1=t.screenY-Ef.screenY):G1=U1=0,Ef=t),U1)},movementY:function(t){return"movementY"in t?t.movementY:G1}}),iA=co(G0),GK=Kt({},G0,{dataTransfer:0}),HK=co(GK),KK=Kt({},zp,{relatedTarget:0}),H1=co(KK),qK=Kt({},Vd,{animationName:0,elapsedTime:0,pseudoElement:0}),XK=co(qK),YK=Kt({},Vd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),QK=co(YK),ZK=Kt({},Vd,{data:0}),sA=co(ZK),JK={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eq={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tq={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nq(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=tq[t])?!!e[t]:!1}function Uk(){return nq}var rq=Kt({},zp,{key:function(t){if(t.key){var e=JK[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Cy(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?eq[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uk,charCode:function(t){return t.type==="keypress"?Cy(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Cy(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),oq=co(rq),iq=Kt({},G0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),aA=co(iq),sq=Kt({},zp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uk}),aq=co(sq),lq=Kt({},Vd,{propertyName:0,elapsedTime:0,pseudoElement:0}),uq=co(lq),cq=Kt({},G0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),dq=co(cq),fq=[9,13,27,32],Gk=Ps&&"CompositionEvent"in window,ah=null;Ps&&"documentMode"in document&&(ah=document.documentMode);var hq=Ps&&"TextEvent"in window&&!ah,vL=Ps&&(!Gk||ah&&8<ah&&11>=ah),lA=" ",uA=!1;function xL(t,e){switch(t){case"keyup":return fq.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bL(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var fc=!1;function pq(t,e){switch(t){case"compositionend":return bL(e);case"keypress":return e.which!==32?null:(uA=!0,lA);case"textInput":return t=e.data,t===lA&&uA?null:t;default:return null}}function mq(t,e){if(fc)return t==="compositionend"||!Gk&&xL(t,e)?(t=yL(),Sy=Wk=wa=null,fc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return vL&&e.locale!=="ko"?null:e.data;default:return null}}var gq={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cA(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!gq[t.type]:e==="textarea"}function wL(t,e,n,r){ZF(r),e=Vy(e,"onChange"),0<e.length&&(n=new Vk("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var lh=null,Eh=null;function yq(t){_L(t,0)}function H0(t){var e=mc(t);if(GF(e))return t}function vq(t,e){if(t==="change")return e}var SL=!1;if(Ps){var K1;if(Ps){var q1="oninput"in document;if(!q1){var dA=document.createElement("div");dA.setAttribute("oninput","return;"),q1=typeof dA.oninput=="function"}K1=q1}else K1=!1;SL=K1&&(!document.documentMode||9<document.documentMode)}function fA(){lh&&(lh.detachEvent("onpropertychange",CL),Eh=lh=null)}function CL(t){if(t.propertyName==="value"&&H0(Eh)){var e=[];wL(e,Eh,t,Fk(t)),nL(yq,e)}}function xq(t,e,n){t==="focusin"?(fA(),lh=e,Eh=n,lh.attachEvent("onpropertychange",CL)):t==="focusout"&&fA()}function bq(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return H0(Eh)}function wq(t,e){if(t==="click")return H0(e)}function Sq(t,e){if(t==="input"||t==="change")return H0(e)}function Cq(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ci=typeof Object.is=="function"?Object.is:Cq;function Nh(t,e){if(Ci(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!cS.call(e,o)||!Ci(t[o],e[o]))return!1}return!0}function hA(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function pA(t,e){var n=hA(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hA(n)}}function $L(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?$L(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function kL(){for(var t=window,e=My();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=My(t.document)}return e}function Hk(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function $q(t){var e=kL(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&$L(n.ownerDocument.documentElement,n)){if(r!==null&&Hk(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=r.end===void 0?i:Math.min(r.end,o),!t.extend&&i>r&&(o=r,r=i,i=o),o=pA(n,i);var s=pA(n,r);o&&s&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var kq=Ps&&"documentMode"in document&&11>=document.documentMode,hc=null,NS=null,uh=null,AS=!1;function mA(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;AS||hc==null||hc!==My(r)||(r=hc,"selectionStart"in r&&Hk(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),uh&&Nh(uh,r)||(uh=r,r=Vy(NS,"onSelect"),0<r.length&&(e=new Vk("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=hc)))}function Og(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var pc={animationend:Og("Animation","AnimationEnd"),animationiteration:Og("Animation","AnimationIteration"),animationstart:Og("Animation","AnimationStart"),transitionend:Og("Transition","TransitionEnd")},X1={},IL={};Ps&&(IL=document.createElement("div").style,"AnimationEvent"in window||(delete pc.animationend.animation,delete pc.animationiteration.animation,delete pc.animationstart.animation),"TransitionEvent"in window||delete pc.transitionend.transition);function K0(t){if(X1[t])return X1[t];if(!pc[t])return t;var e=pc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in IL)return X1[t]=e[n];return t}var TL=K0("animationend"),EL=K0("animationiteration"),NL=K0("animationstart"),AL=K0("transitionend"),OL=new Map,gA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function il(t,e){OL.set(t,e),Ru(e,[t])}for(var Y1=0;Y1<gA.length;Y1++){var Q1=gA[Y1],Iq=Q1.toLowerCase(),Tq=Q1[0].toUpperCase()+Q1.slice(1);il(Iq,"on"+Tq)}il(TL,"onAnimationEnd");il(EL,"onAnimationIteration");il(NL,"onAnimationStart");il("dblclick","onDoubleClick");il("focusin","onFocus");il("focusout","onBlur");il(AL,"onTransitionEnd");Zc("onMouseEnter",["mouseout","mouseover"]);Zc("onMouseLeave",["mouseout","mouseover"]);Zc("onPointerEnter",["pointerout","pointerover"]);Zc("onPointerLeave",["pointerout","pointerover"]);Ru("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ru("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ru("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ru("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ru("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ru("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Eq=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qf));function yA(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,IK(r,e,void 0,t),t.currentTarget=null}function _L(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],o=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&o.isPropagationStopped())break e;yA(o,a,u),i=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&o.isPropagationStopped())break e;yA(o,a,u),i=l}}}if(Ly)throw t=kS,Ly=!1,kS=null,t}function Pt(t,e){var n=e[DS];n===void 0&&(n=e[DS]=new Set);var r=t+"__bubble";n.has(r)||(RL(e,t,2,!1),n.add(r))}function Z1(t,e,n){var r=0;e&&(r|=4),RL(n,t,r,e)}var _g="_reactListening"+Math.random().toString(36).slice(2);function Ah(t){if(!t[_g]){t[_g]=!0,zF.forEach(function(n){n!=="selectionchange"&&(Eq.has(n)||Z1(n,!1,t),Z1(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[_g]||(e[_g]=!0,Z1("selectionchange",!1,e))}}function RL(t,e,n,r){switch(gL(e)){case 1:var o=WK;break;case 4:o=VK;break;default:o=jk}n=o.bind(null,e,n,t),o=void 0,!$S||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function J1(t,e,n,r,o){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===o||l.nodeType===8&&l.parentNode===o))return;s=s.return}for(;a!==null;){if(s=Ll(a),s===null)return;if(l=s.tag,l===5||l===6){r=i=s;continue e}a=a.parentNode}}r=r.return}nL(function(){var u=i,c=Fk(n),d=[];e:{var f=OL.get(t);if(f!==void 0){var h=Vk,p=t;switch(t){case"keypress":if(Cy(n)===0)break e;case"keydown":case"keyup":h=oq;break;case"focusin":p="focus",h=H1;break;case"focusout":p="blur",h=H1;break;case"beforeblur":case"afterblur":h=H1;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=iA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=HK;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=aq;break;case TL:case EL:case NL:h=XK;break;case AL:h=uq;break;case"scroll":h=UK;break;case"wheel":h=dq;break;case"copy":case"cut":case"paste":h=QK;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=aA}var m=(e&4)!==0,g=!m&&t==="scroll",y=m?f!==null?f+"Capture":null:f;m=[];for(var v=u,x;v!==null;){x=v;var b=x.stateNode;if(x.tag===5&&b!==null&&(x=b,y!==null&&(b=$h(v,y),b!=null&&m.push(Oh(v,b,x)))),g)break;v=v.return}0<m.length&&(f=new h(f,p,null,n,c),d.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==SS&&(p=n.relatedTarget||n.fromElement)&&(Ll(p)||p[Ds]))break e;if((h||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=u,p=p?Ll(p):null,p!==null&&(g=Pu(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=u),h!==p)){if(m=iA,b="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(m=aA,b="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?f:mc(h),x=p==null?f:mc(p),f=new m(b,v+"leave",h,n,c),f.target=g,f.relatedTarget=x,b=null,Ll(c)===u&&(m=new m(y,v+"enter",p,n,c),m.target=x,m.relatedTarget=g,b=m),g=b,h&&p)t:{for(m=h,y=p,v=0,x=m;x;x=ec(x))v++;for(x=0,b=y;b;b=ec(b))x++;for(;0<v-x;)m=ec(m),v--;for(;0<x-v;)y=ec(y),x--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=ec(m),y=ec(y)}m=null}else m=null;h!==null&&vA(d,f,h,m,!1),p!==null&&g!==null&&vA(d,g,p,m,!0)}}e:{if(f=u?mc(u):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var w=vq;else if(cA(f))if(SL)w=Sq;else{w=bq;var S=xq}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(w=wq);if(w&&(w=w(t,u))){wL(d,w,n,c);break e}S&&S(t,f,u),t==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&yS(f,"number",f.value)}switch(S=u?mc(u):window,t){case"focusin":(cA(S)||S.contentEditable==="true")&&(hc=S,NS=u,uh=null);break;case"focusout":uh=NS=hc=null;break;case"mousedown":AS=!0;break;case"contextmenu":case"mouseup":case"dragend":AS=!1,mA(d,n,c);break;case"selectionchange":if(kq)break;case"keydown":case"keyup":mA(d,n,c)}var $;if(Gk)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else fc?xL(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(vL&&n.locale!=="ko"&&(fc||C!=="onCompositionStart"?C==="onCompositionEnd"&&fc&&($=yL()):(wa=c,Wk="value"in wa?wa.value:wa.textContent,fc=!0)),S=Vy(u,C),0<S.length&&(C=new sA(C,t,null,n,c),d.push({event:C,listeners:S}),$?C.data=$:($=bL(n),$!==null&&(C.data=$)))),($=hq?pq(t,n):mq(t,n))&&(u=Vy(u,"onBeforeInput"),0<u.length&&(c=new sA("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=$))}_L(d,e)})}function Oh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vy(t,e){for(var n=e+"Capture",r=[];t!==null;){var o=t,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=$h(t,n),i!=null&&r.unshift(Oh(t,i,o)),i=$h(t,e),i!=null&&r.push(Oh(t,i,o))),t=t.return}return r}function ec(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function vA(t,e,n,r,o){for(var i=e._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,o?(l=$h(n,i),l!=null&&s.unshift(Oh(n,l,a))):o||(l=$h(n,i),l!=null&&s.push(Oh(n,l,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var Nq=/\r\n?/g,Aq=/\u0000|\uFFFD/g;function xA(t){return(typeof t=="string"?t:""+t).replace(Nq,`
`).replace(Aq,"")}function Rg(t,e,n){if(e=xA(e),xA(t)!==e&&n)throw Error(he(425))}function Uy(){}var OS=null,_S=null;function RS(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var PS=typeof setTimeout=="function"?setTimeout:void 0,Oq=typeof clearTimeout=="function"?clearTimeout:void 0,bA=typeof Promise=="function"?Promise:void 0,_q=typeof queueMicrotask=="function"?queueMicrotask:typeof bA<"u"?function(t){return bA.resolve(null).then(t).catch(Rq)}:PS;function Rq(t){setTimeout(function(){throw t})}function ew(t,e){var n=e,r=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){t.removeChild(o),Th(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);Th(e)}function Oa(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function wA(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ud=Math.random().toString(36).slice(2),Ui="__reactFiber$"+Ud,_h="__reactProps$"+Ud,Ds="__reactContainer$"+Ud,DS="__reactEvents$"+Ud,Pq="__reactListeners$"+Ud,Dq="__reactHandles$"+Ud;function Ll(t){var e=t[Ui];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ds]||n[Ui]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=wA(t);t!==null;){if(n=t[Ui])return n;t=wA(t)}return e}t=n,n=t.parentNode}return null}function jp(t){return t=t[Ui]||t[Ds],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function mc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(he(33))}function q0(t){return t[_h]||null}var MS=[],gc=-1;function sl(t){return{current:t}}function Ft(t){0>gc||(t.current=MS[gc],MS[gc]=null,gc--)}function Tt(t,e){gc++,MS[gc]=t.current,t.current=e}var Ua={},ur=sl(Ua),Br=sl(!1),au=Ua;function Jc(t,e){var n=t.type.contextTypes;if(!n)return Ua;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in n)o[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function zr(t){return t=t.childContextTypes,t!=null}function Gy(){Ft(Br),Ft(ur)}function SA(t,e,n){if(ur.current!==Ua)throw Error(he(168));Tt(ur,e),Tt(Br,n)}function PL(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in e))throw Error(he(108,xK(t)||"Unknown",o));return Kt({},n,r)}function Hy(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ua,au=ur.current,Tt(ur,t),Tt(Br,Br.current),!0}function CA(t,e,n){var r=t.stateNode;if(!r)throw Error(he(169));n?(t=PL(t,e,au),r.__reactInternalMemoizedMergedChildContext=t,Ft(Br),Ft(ur),Tt(ur,t)):Ft(Br),Tt(Br,n)}var vs=null,X0=!1,tw=!1;function DL(t){vs===null?vs=[t]:vs.push(t)}function Mq(t){X0=!0,DL(t)}function al(){if(!tw&&vs!==null){tw=!0;var t=0,e=gt;try{var n=vs;for(gt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}vs=null,X0=!1}catch(o){throw vs!==null&&(vs=vs.slice(t+1)),sL(Lk,al),o}finally{gt=e,tw=!1}}return null}var yc=[],vc=0,Ky=null,qy=0,Co=[],$o=0,lu=null,Ss=1,Cs="";function El(t,e){yc[vc++]=qy,yc[vc++]=Ky,Ky=t,qy=e}function ML(t,e,n){Co[$o++]=Ss,Co[$o++]=Cs,Co[$o++]=lu,lu=t;var r=Ss;t=Cs;var o=32-vi(r)-1;r&=~(1<<o),n+=1;var i=32-vi(e)+o;if(30<i){var s=o-o%5;i=(r&(1<<s)-1).toString(32),r>>=s,o-=s,Ss=1<<32-vi(e)+o|n<<o|r,Cs=i+t}else Ss=1<<i|n<<o|r,Cs=t}function Kk(t){t.return!==null&&(El(t,1),ML(t,1,0))}function qk(t){for(;t===Ky;)Ky=yc[--vc],yc[vc]=null,qy=yc[--vc],yc[vc]=null;for(;t===lu;)lu=Co[--$o],Co[$o]=null,Cs=Co[--$o],Co[$o]=null,Ss=Co[--$o],Co[$o]=null}var ro=null,to=null,jt=!1,di=null;function FL(t,e){var n=To(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function $A(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ro=t,to=Oa(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ro=t,to=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=lu!==null?{id:Ss,overflow:Cs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=To(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ro=t,to=null,!0):!1;default:return!1}}function FS(t){return(t.mode&1)!==0&&(t.flags&128)===0}function LS(t){if(jt){var e=to;if(e){var n=e;if(!$A(t,e)){if(FS(t))throw Error(he(418));e=Oa(n.nextSibling);var r=ro;e&&$A(t,e)?FL(r,n):(t.flags=t.flags&-4097|2,jt=!1,ro=t)}}else{if(FS(t))throw Error(he(418));t.flags=t.flags&-4097|2,jt=!1,ro=t}}}function kA(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ro=t}function Pg(t){if(t!==ro)return!1;if(!jt)return kA(t),jt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!RS(t.type,t.memoizedProps)),e&&(e=to)){if(FS(t))throw LL(),Error(he(418));for(;e;)FL(t,e),e=Oa(e.nextSibling)}if(kA(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(he(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){to=Oa(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}to=null}}else to=ro?Oa(t.stateNode.nextSibling):null;return!0}function LL(){for(var t=to;t;)t=Oa(t.nextSibling)}function ed(){to=ro=null,jt=!1}function Xk(t){di===null?di=[t]:di.push(t)}var Fq=qs.ReactCurrentBatchConfig;function Nf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(he(309));var r=n.stateNode}if(!r)throw Error(he(147,t));var o=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(s){var a=o.refs;s===null?delete a[i]:a[i]=s},e._stringRef=i,e)}if(typeof t!="string")throw Error(he(284));if(!n._owner)throw Error(he(290,t))}return t}function Dg(t,e){throw t=Object.prototype.toString.call(e),Error(he(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function IA(t){var e=t._init;return e(t._payload)}function BL(t){function e(y,v){if(t){var x=y.deletions;x===null?(y.deletions=[v],y.flags|=16):x.push(v)}}function n(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function o(y,v){return y=Da(y,v),y.index=0,y.sibling=null,y}function i(y,v,x){return y.index=x,t?(x=y.alternate,x!==null?(x=x.index,x<v?(y.flags|=2,v):x):(y.flags|=2,v)):(y.flags|=1048576,v)}function s(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,v,x,b){return v===null||v.tag!==6?(v=lw(x,y.mode,b),v.return=y,v):(v=o(v,x),v.return=y,v)}function l(y,v,x,b){var w=x.type;return w===dc?c(y,v,x.props.children,b,x.key):v!==null&&(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===ua&&IA(w)===v.type)?(b=o(v,x.props),b.ref=Nf(y,v,x),b.return=y,b):(b=Ay(x.type,x.key,x.props,null,y.mode,b),b.ref=Nf(y,v,x),b.return=y,b)}function u(y,v,x,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=uw(x,y.mode,b),v.return=y,v):(v=o(v,x.children||[]),v.return=y,v)}function c(y,v,x,b,w){return v===null||v.tag!==7?(v=tu(x,y.mode,b,w),v.return=y,v):(v=o(v,x),v.return=y,v)}function d(y,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=lw(""+v,y.mode,x),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case $g:return x=Ay(v.type,v.key,v.props,null,y.mode,x),x.ref=Nf(y,null,v),x.return=y,x;case cc:return v=uw(v,y.mode,x),v.return=y,v;case ua:var b=v._init;return d(y,b(v._payload),x)}if(Xf(v)||$f(v))return v=tu(v,y.mode,x,null),v.return=y,v;Dg(y,v)}return null}function f(y,v,x,b){var w=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return w!==null?null:a(y,v,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case $g:return x.key===w?l(y,v,x,b):null;case cc:return x.key===w?u(y,v,x,b):null;case ua:return w=x._init,f(y,v,w(x._payload),b)}if(Xf(x)||$f(x))return w!==null?null:c(y,v,x,b,null);Dg(y,x)}return null}function h(y,v,x,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return y=y.get(x)||null,a(v,y,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case $g:return y=y.get(b.key===null?x:b.key)||null,l(v,y,b,w);case cc:return y=y.get(b.key===null?x:b.key)||null,u(v,y,b,w);case ua:var S=b._init;return h(y,v,x,S(b._payload),w)}if(Xf(b)||$f(b))return y=y.get(x)||null,c(v,y,b,w,null);Dg(v,b)}return null}function p(y,v,x,b){for(var w=null,S=null,$=v,C=v=0,k=null;$!==null&&C<x.length;C++){$.index>C?(k=$,$=null):k=$.sibling;var I=f(y,$,x[C],b);if(I===null){$===null&&($=k);break}t&&$&&I.alternate===null&&e(y,$),v=i(I,v,C),S===null?w=I:S.sibling=I,S=I,$=k}if(C===x.length)return n(y,$),jt&&El(y,C),w;if($===null){for(;C<x.length;C++)$=d(y,x[C],b),$!==null&&(v=i($,v,C),S===null?w=$:S.sibling=$,S=$);return jt&&El(y,C),w}for($=r(y,$);C<x.length;C++)k=h($,y,C,x[C],b),k!==null&&(t&&k.alternate!==null&&$.delete(k.key===null?C:k.key),v=i(k,v,C),S===null?w=k:S.sibling=k,S=k);return t&&$.forEach(function(T){return e(y,T)}),jt&&El(y,C),w}function m(y,v,x,b){var w=$f(x);if(typeof w!="function")throw Error(he(150));if(x=w.call(x),x==null)throw Error(he(151));for(var S=w=null,$=v,C=v=0,k=null,I=x.next();$!==null&&!I.done;C++,I=x.next()){$.index>C?(k=$,$=null):k=$.sibling;var T=f(y,$,I.value,b);if(T===null){$===null&&($=k);break}t&&$&&T.alternate===null&&e(y,$),v=i(T,v,C),S===null?w=T:S.sibling=T,S=T,$=k}if(I.done)return n(y,$),jt&&El(y,C),w;if($===null){for(;!I.done;C++,I=x.next())I=d(y,I.value,b),I!==null&&(v=i(I,v,C),S===null?w=I:S.sibling=I,S=I);return jt&&El(y,C),w}for($=r(y,$);!I.done;C++,I=x.next())I=h($,y,C,I.value,b),I!==null&&(t&&I.alternate!==null&&$.delete(I.key===null?C:I.key),v=i(I,v,C),S===null?w=I:S.sibling=I,S=I);return t&&$.forEach(function(E){return e(y,E)}),jt&&El(y,C),w}function g(y,v,x,b){if(typeof x=="object"&&x!==null&&x.type===dc&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case $g:e:{for(var w=x.key,S=v;S!==null;){if(S.key===w){if(w=x.type,w===dc){if(S.tag===7){n(y,S.sibling),v=o(S,x.props.children),v.return=y,y=v;break e}}else if(S.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===ua&&IA(w)===S.type){n(y,S.sibling),v=o(S,x.props),v.ref=Nf(y,S,x),v.return=y,y=v;break e}n(y,S);break}else e(y,S);S=S.sibling}x.type===dc?(v=tu(x.props.children,y.mode,b,x.key),v.return=y,y=v):(b=Ay(x.type,x.key,x.props,null,y.mode,b),b.ref=Nf(y,v,x),b.return=y,y=b)}return s(y);case cc:e:{for(S=x.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(y,v.sibling),v=o(v,x.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else e(y,v);v=v.sibling}v=uw(x,y.mode,b),v.return=y,y=v}return s(y);case ua:return S=x._init,g(y,v,S(x._payload),b)}if(Xf(x))return p(y,v,x,b);if($f(x))return m(y,v,x,b);Dg(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(y,v.sibling),v=o(v,x),v.return=y,y=v):(n(y,v),v=lw(x,y.mode,b),v.return=y,y=v),s(y)):n(y,v)}return g}var td=BL(!0),zL=BL(!1),Xy=sl(null),Yy=null,xc=null,Yk=null;function Qk(){Yk=xc=Yy=null}function Zk(t){var e=Xy.current;Ft(Xy),t._currentValue=e}function BS(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ac(t,e){Yy=t,Yk=xc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Dr=!0),t.firstContext=null)}function Fo(t){var e=t._currentValue;if(Yk!==t)if(t={context:t,memoizedValue:e,next:null},xc===null){if(Yy===null)throw Error(he(308));xc=t,Yy.dependencies={lanes:0,firstContext:t}}else xc=xc.next=t;return e}var Bl=null;function Jk(t){Bl===null?Bl=[t]:Bl.push(t)}function jL(t,e,n,r){var o=e.interleaved;return o===null?(n.next=n,Jk(e)):(n.next=o.next,o.next=n),e.interleaved=n,Ms(t,r)}function Ms(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ca=!1;function eI(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function WL(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Es(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function _a(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ot&2){var o=r.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),r.pending=e,Ms(t,n)}return o=r.interleaved,o===null?(e.next=e,Jk(r)):(e.next=o.next,o.next=e),r.interleaved=e,Ms(t,n)}function $y(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Bk(t,n)}}function TA(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?o=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?o=i=e:i=i.next=e}else o=i=e;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Qy(t,e,n,r){var o=t.updateQueue;ca=!1;var i=o.firstBaseUpdate,s=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?i=u:s.next=u,s=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==s&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(i!==null){var d=o.baseState;s=0,c=u=l=null,a=i;do{var f=a.lane,h=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(f=e,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=Kt({},d,f);break e;case 2:ca=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=o.effects,f===null?o.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=h,l=d):c=c.next=h,s|=f;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;f=a,a=f.next,f.next=null,o.lastBaseUpdate=f,o.shared.pending=null}}while(!0);if(c===null&&(l=d),o.baseState=l,o.firstBaseUpdate=u,o.lastBaseUpdate=c,e=o.shared.interleaved,e!==null){o=e;do s|=o.lane,o=o.next;while(o!==e)}else i===null&&(o.shared.lanes=0);cu|=s,t.lanes=s,t.memoizedState=d}}function EA(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(he(191,o));o.call(r)}}}var Wp={},Xi=sl(Wp),Rh=sl(Wp),Ph=sl(Wp);function zl(t){if(t===Wp)throw Error(he(174));return t}function tI(t,e){switch(Tt(Ph,e),Tt(Rh,t),Tt(Xi,Wp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xS(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xS(e,t)}Ft(Xi),Tt(Xi,e)}function nd(){Ft(Xi),Ft(Rh),Ft(Ph)}function VL(t){zl(Ph.current);var e=zl(Xi.current),n=xS(e,t.type);e!==n&&(Tt(Rh,t),Tt(Xi,n))}function nI(t){Rh.current===t&&(Ft(Xi),Ft(Rh))}var Gt=sl(0);function Zy(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var nw=[];function rI(){for(var t=0;t<nw.length;t++)nw[t]._workInProgressVersionPrimary=null;nw.length=0}var ky=qs.ReactCurrentDispatcher,rw=qs.ReactCurrentBatchConfig,uu=0,Ht=null,wn=null,On=null,Jy=!1,ch=!1,Dh=0,Lq=0;function Qn(){throw Error(he(321))}function oI(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ci(t[n],e[n]))return!1;return!0}function iI(t,e,n,r,o,i){if(uu=i,Ht=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ky.current=t===null||t.memoizedState===null?Wq:Vq,t=n(r,o),ch){i=0;do{if(ch=!1,Dh=0,25<=i)throw Error(he(301));i+=1,On=wn=null,e.updateQueue=null,ky.current=Uq,t=n(r,o)}while(ch)}if(ky.current=ev,e=wn!==null&&wn.next!==null,uu=0,On=wn=Ht=null,Jy=!1,e)throw Error(he(300));return t}function sI(){var t=Dh!==0;return Dh=0,t}function Di(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return On===null?Ht.memoizedState=On=t:On=On.next=t,On}function Lo(){if(wn===null){var t=Ht.alternate;t=t!==null?t.memoizedState:null}else t=wn.next;var e=On===null?Ht.memoizedState:On.next;if(e!==null)On=e,wn=t;else{if(t===null)throw Error(he(310));wn=t,t={memoizedState:wn.memoizedState,baseState:wn.baseState,baseQueue:wn.baseQueue,queue:wn.queue,next:null},On===null?Ht.memoizedState=On=t:On=On.next=t}return On}function Mh(t,e){return typeof e=="function"?e(t):e}function ow(t){var e=Lo(),n=e.queue;if(n===null)throw Error(he(311));n.lastRenderedReducer=t;var r=wn,o=r.baseQueue,i=n.pending;if(i!==null){if(o!==null){var s=o.next;o.next=i.next,i.next=s}r.baseQueue=o=i,n.pending=null}if(o!==null){i=o.next,r=r.baseState;var a=s=null,l=null,u=i;do{var c=u.lane;if((uu&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,s=r):l=l.next=d,Ht.lanes|=c,cu|=c}u=u.next}while(u!==null&&u!==i);l===null?s=r:l.next=a,Ci(r,e.memoizedState)||(Dr=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){o=t;do i=o.lane,Ht.lanes|=i,cu|=i,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function iw(t){var e=Lo(),n=e.queue;if(n===null)throw Error(he(311));n.lastRenderedReducer=t;var r=n.dispatch,o=n.pending,i=e.memoizedState;if(o!==null){n.pending=null;var s=o=o.next;do i=t(i,s.action),s=s.next;while(s!==o);Ci(i,e.memoizedState)||(Dr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function UL(){}function GL(t,e){var n=Ht,r=Lo(),o=e(),i=!Ci(r.memoizedState,o);if(i&&(r.memoizedState=o,Dr=!0),r=r.queue,aI(qL.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||On!==null&&On.memoizedState.tag&1){if(n.flags|=2048,Fh(9,KL.bind(null,n,r,o,e),void 0,null),Rn===null)throw Error(he(349));uu&30||HL(n,e,o)}return o}function HL(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ht.updateQueue,e===null?(e={lastEffect:null,stores:null},Ht.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function KL(t,e,n,r){e.value=n,e.getSnapshot=r,XL(e)&&YL(t)}function qL(t,e,n){return n(function(){XL(e)&&YL(t)})}function XL(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ci(t,n)}catch{return!0}}function YL(t){var e=Ms(t,1);e!==null&&xi(e,t,1,-1)}function NA(t){var e=Di();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mh,lastRenderedState:t},e.queue=t,t=t.dispatch=jq.bind(null,Ht,t),[e.memoizedState,t]}function Fh(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ht.updateQueue,e===null?(e={lastEffect:null,stores:null},Ht.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function QL(){return Lo().memoizedState}function Iy(t,e,n,r){var o=Di();Ht.flags|=t,o.memoizedState=Fh(1|e,n,void 0,r===void 0?null:r)}function Y0(t,e,n,r){var o=Lo();r=r===void 0?null:r;var i=void 0;if(wn!==null){var s=wn.memoizedState;if(i=s.destroy,r!==null&&oI(r,s.deps)){o.memoizedState=Fh(e,n,i,r);return}}Ht.flags|=t,o.memoizedState=Fh(1|e,n,i,r)}function AA(t,e){return Iy(8390656,8,t,e)}function aI(t,e){return Y0(2048,8,t,e)}function ZL(t,e){return Y0(4,2,t,e)}function JL(t,e){return Y0(4,4,t,e)}function e3(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function t3(t,e,n){return n=n!=null?n.concat([t]):null,Y0(4,4,e3.bind(null,e,t),n)}function lI(){}function n3(t,e){var n=Lo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&oI(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function r3(t,e){var n=Lo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&oI(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function o3(t,e,n){return uu&21?(Ci(n,e)||(n=uL(),Ht.lanes|=n,cu|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Dr=!0),t.memoizedState=n)}function Bq(t,e){var n=gt;gt=n!==0&&4>n?n:4,t(!0);var r=rw.transition;rw.transition={};try{t(!1),e()}finally{gt=n,rw.transition=r}}function i3(){return Lo().memoizedState}function zq(t,e,n){var r=Pa(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},s3(t))a3(e,n);else if(n=jL(t,e,n,r),n!==null){var o=wr();xi(n,t,r,o),l3(n,e,r)}}function jq(t,e,n){var r=Pa(t),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(s3(t))a3(e,o);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var s=e.lastRenderedState,a=i(s,n);if(o.hasEagerState=!0,o.eagerState=a,Ci(a,s)){var l=e.interleaved;l===null?(o.next=o,Jk(e)):(o.next=l.next,l.next=o),e.interleaved=o;return}}catch{}finally{}n=jL(t,e,o,r),n!==null&&(o=wr(),xi(n,t,r,o),l3(n,e,r))}}function s3(t){var e=t.alternate;return t===Ht||e!==null&&e===Ht}function a3(t,e){ch=Jy=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function l3(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Bk(t,n)}}var ev={readContext:Fo,useCallback:Qn,useContext:Qn,useEffect:Qn,useImperativeHandle:Qn,useInsertionEffect:Qn,useLayoutEffect:Qn,useMemo:Qn,useReducer:Qn,useRef:Qn,useState:Qn,useDebugValue:Qn,useDeferredValue:Qn,useTransition:Qn,useMutableSource:Qn,useSyncExternalStore:Qn,useId:Qn,unstable_isNewReconciler:!1},Wq={readContext:Fo,useCallback:function(t,e){return Di().memoizedState=[t,e===void 0?null:e],t},useContext:Fo,useEffect:AA,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Iy(4194308,4,e3.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Iy(4194308,4,t,e)},useInsertionEffect:function(t,e){return Iy(4,2,t,e)},useMemo:function(t,e){var n=Di();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Di();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=zq.bind(null,Ht,t),[r.memoizedState,t]},useRef:function(t){var e=Di();return t={current:t},e.memoizedState=t},useState:NA,useDebugValue:lI,useDeferredValue:function(t){return Di().memoizedState=t},useTransition:function(){var t=NA(!1),e=t[0];return t=Bq.bind(null,t[1]),Di().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ht,o=Di();if(jt){if(n===void 0)throw Error(he(407));n=n()}else{if(n=e(),Rn===null)throw Error(he(349));uu&30||HL(r,e,n)}o.memoizedState=n;var i={value:n,getSnapshot:e};return o.queue=i,AA(qL.bind(null,r,i,t),[t]),r.flags|=2048,Fh(9,KL.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Di(),e=Rn.identifierPrefix;if(jt){var n=Cs,r=Ss;n=(r&~(1<<32-vi(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Dh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Lq++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Vq={readContext:Fo,useCallback:n3,useContext:Fo,useEffect:aI,useImperativeHandle:t3,useInsertionEffect:ZL,useLayoutEffect:JL,useMemo:r3,useReducer:ow,useRef:QL,useState:function(){return ow(Mh)},useDebugValue:lI,useDeferredValue:function(t){var e=Lo();return o3(e,wn.memoizedState,t)},useTransition:function(){var t=ow(Mh)[0],e=Lo().memoizedState;return[t,e]},useMutableSource:UL,useSyncExternalStore:GL,useId:i3,unstable_isNewReconciler:!1},Uq={readContext:Fo,useCallback:n3,useContext:Fo,useEffect:aI,useImperativeHandle:t3,useInsertionEffect:ZL,useLayoutEffect:JL,useMemo:r3,useReducer:iw,useRef:QL,useState:function(){return iw(Mh)},useDebugValue:lI,useDeferredValue:function(t){var e=Lo();return wn===null?e.memoizedState=t:o3(e,wn.memoizedState,t)},useTransition:function(){var t=iw(Mh)[0],e=Lo().memoizedState;return[t,e]},useMutableSource:UL,useSyncExternalStore:GL,useId:i3,unstable_isNewReconciler:!1};function oi(t,e){if(t&&t.defaultProps){e=Kt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function zS(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Kt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Q0={isMounted:function(t){return(t=t._reactInternals)?Pu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=wr(),o=Pa(t),i=Es(r,o);i.payload=e,n!=null&&(i.callback=n),e=_a(t,i,o),e!==null&&(xi(e,t,o,r),$y(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=wr(),o=Pa(t),i=Es(r,o);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=_a(t,i,o),e!==null&&(xi(e,t,o,r),$y(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=wr(),r=Pa(t),o=Es(n,r);o.tag=2,e!=null&&(o.callback=e),e=_a(t,o,r),e!==null&&(xi(e,t,r,n),$y(e,t,r))}};function OA(t,e,n,r,o,i,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,s):e.prototype&&e.prototype.isPureReactComponent?!Nh(n,r)||!Nh(o,i):!0}function u3(t,e,n){var r=!1,o=Ua,i=e.contextType;return typeof i=="object"&&i!==null?i=Fo(i):(o=zr(e)?au:ur.current,r=e.contextTypes,i=(r=r!=null)?Jc(t,o):Ua),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Q0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=i),e}function _A(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Q0.enqueueReplaceState(e,e.state,null)}function jS(t,e,n,r){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},eI(t);var i=e.contextType;typeof i=="object"&&i!==null?o.context=Fo(i):(i=zr(e)?au:ur.current,o.context=Jc(t,i)),o.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(zS(t,e,i,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&Q0.enqueueReplaceState(o,o.state,null),Qy(t,n,o,r),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function rd(t,e){try{var n="",r=e;do n+=vK(r),r=r.return;while(r);var o=n}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:o,digest:null}}function sw(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function WS(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Gq=typeof WeakMap=="function"?WeakMap:Map;function c3(t,e,n){n=Es(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){nv||(nv=!0,ZS=r),WS(t,e)},n}function d3(t,e,n){n=Es(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;n.payload=function(){return r(o)},n.callback=function(){WS(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){WS(t,e),typeof r!="function"&&(Ra===null?Ra=new Set([this]):Ra.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function RA(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Gq;var o=new Set;r.set(e,o)}else o=r.get(e),o===void 0&&(o=new Set,r.set(e,o));o.has(n)||(o.add(n),t=iX.bind(null,t,e,n),e.then(t,t))}function PA(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function DA(t,e,n,r,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Es(-1,1),e.tag=2,_a(n,e,1))),n.lanes|=1),t)}var Hq=qs.ReactCurrentOwner,Dr=!1;function mr(t,e,n,r){e.child=t===null?zL(e,null,n,r):td(e,t.child,n,r)}function MA(t,e,n,r,o){n=n.render;var i=e.ref;return Ac(e,o),r=iI(t,e,n,r,i,o),n=sI(),t!==null&&!Dr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Fs(t,e,o)):(jt&&n&&Kk(e),e.flags|=1,mr(t,e,r,o),e.child)}function FA(t,e,n,r,o){if(t===null){var i=n.type;return typeof i=="function"&&!gI(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,f3(t,e,i,r,o)):(t=Ay(n.type,null,r,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&o)){var s=i.memoizedProps;if(n=n.compare,n=n!==null?n:Nh,n(s,r)&&t.ref===e.ref)return Fs(t,e,o)}return e.flags|=1,t=Da(i,r),t.ref=e.ref,t.return=e,e.child=t}function f3(t,e,n,r,o){if(t!==null){var i=t.memoizedProps;if(Nh(i,r)&&t.ref===e.ref)if(Dr=!1,e.pendingProps=r=i,(t.lanes&o)!==0)t.flags&131072&&(Dr=!0);else return e.lanes=t.lanes,Fs(t,e,o)}return VS(t,e,n,r,o)}function h3(t,e,n){var r=e.pendingProps,o=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tt(wc,Yr),Yr|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Tt(wc,Yr),Yr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Tt(wc,Yr),Yr|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Tt(wc,Yr),Yr|=r;return mr(t,e,o,n),e.child}function p3(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function VS(t,e,n,r,o){var i=zr(n)?au:ur.current;return i=Jc(e,i),Ac(e,o),n=iI(t,e,n,r,i,o),r=sI(),t!==null&&!Dr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Fs(t,e,o)):(jt&&r&&Kk(e),e.flags|=1,mr(t,e,n,o),e.child)}function LA(t,e,n,r,o){if(zr(n)){var i=!0;Hy(e)}else i=!1;if(Ac(e,o),e.stateNode===null)Ty(t,e),u3(e,n,r),jS(e,n,r,o),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=Fo(u):(u=zr(n)?au:ur.current,u=Jc(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==u)&&_A(e,s,r,u),ca=!1;var f=e.memoizedState;s.state=f,Qy(e,r,s,o),l=e.memoizedState,a!==r||f!==l||Br.current||ca?(typeof c=="function"&&(zS(e,n,c,r),l=e.memoizedState),(a=ca||OA(e,n,a,r,f,l,u))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,WL(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:oi(e.type,a),s.props=u,d=e.pendingProps,f=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Fo(l):(l=zr(n)?au:ur.current,l=Jc(e,l));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||f!==l)&&_A(e,s,r,l),ca=!1,f=e.memoizedState,s.state=f,Qy(e,r,s,o);var p=e.memoizedState;a!==d||f!==p||Br.current||ca?(typeof h=="function"&&(zS(e,n,h,r),p=e.memoizedState),(u=ca||OA(e,n,u,r,f,p,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,p,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,p,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),s.props=r,s.state=p,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return US(t,e,n,r,i,o)}function US(t,e,n,r,o,i){p3(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return o&&CA(e,n,!1),Fs(t,e,i);r=e.stateNode,Hq.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=td(e,t.child,null,i),e.child=td(e,null,a,i)):mr(t,e,a,i),e.memoizedState=r.state,o&&CA(e,n,!0),e.child}function m3(t){var e=t.stateNode;e.pendingContext?SA(t,e.pendingContext,e.pendingContext!==e.context):e.context&&SA(t,e.context,!1),tI(t,e.containerInfo)}function BA(t,e,n,r,o){return ed(),Xk(o),e.flags|=256,mr(t,e,n,r),e.child}var GS={dehydrated:null,treeContext:null,retryLane:0};function HS(t){return{baseLanes:t,cachePool:null,transitions:null}}function g3(t,e,n){var r=e.pendingProps,o=Gt.current,i=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(o&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),Tt(Gt,o&1),t===null)return LS(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,i?(r=e.mode,i=e.child,s={mode:"hidden",children:s},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=ex(s,r,0,null),t=tu(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=HS(n),e.memoizedState=GS,t):uI(e,s));if(o=t.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return Kq(t,e,s,r,a,o,n);if(i){i=r.fallback,s=e.mode,o=t.child,a=o.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==o?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Da(o,l),r.subtreeFlags=o.subtreeFlags&14680064),a!==null?i=Da(a,i):(i=tu(i,s,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,s=t.child.memoizedState,s=s===null?HS(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=t.childLanes&~n,e.memoizedState=GS,r}return i=t.child,t=i.sibling,r=Da(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function uI(t,e){return e=ex({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Mg(t,e,n,r){return r!==null&&Xk(r),td(e,t.child,null,n),t=uI(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Kq(t,e,n,r,o,i,s){if(n)return e.flags&256?(e.flags&=-257,r=sw(Error(he(422))),Mg(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,o=e.mode,r=ex({mode:"visible",children:r.children},o,0,null),i=tu(i,o,s,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&td(e,t.child,null,s),e.child.memoizedState=HS(s),e.memoizedState=GS,i);if(!(e.mode&1))return Mg(t,e,s,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(he(419)),r=sw(i,r,void 0),Mg(t,e,s,r)}if(a=(s&t.childLanes)!==0,Dr||a){if(r=Rn,r!==null){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|s)?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,Ms(t,o),xi(r,t,o,-1))}return mI(),r=sw(Error(he(421))),Mg(t,e,s,r)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=sX.bind(null,t),o._reactRetry=e,null):(t=i.treeContext,to=Oa(o.nextSibling),ro=e,jt=!0,di=null,t!==null&&(Co[$o++]=Ss,Co[$o++]=Cs,Co[$o++]=lu,Ss=t.id,Cs=t.overflow,lu=e),e=uI(e,r.children),e.flags|=4096,e)}function zA(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),BS(t.return,e,n)}function aw(t,e,n,r,o){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function y3(t,e,n){var r=e.pendingProps,o=r.revealOrder,i=r.tail;if(mr(t,e,r.children,n),r=Gt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&zA(t,n,e);else if(t.tag===19)zA(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Tt(Gt,r),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&Zy(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),aw(e,!1,o,n,i);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&Zy(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}aw(e,!0,n,null,i);break;case"together":aw(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ty(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Fs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),cu|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(he(153));if(e.child!==null){for(t=e.child,n=Da(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Da(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function qq(t,e,n){switch(e.tag){case 3:m3(e),ed();break;case 5:VL(e);break;case 1:zr(e.type)&&Hy(e);break;case 4:tI(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,o=e.memoizedProps.value;Tt(Xy,r._currentValue),r._currentValue=o;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Tt(Gt,Gt.current&1),e.flags|=128,null):n&e.child.childLanes?g3(t,e,n):(Tt(Gt,Gt.current&1),t=Fs(t,e,n),t!==null?t.sibling:null);Tt(Gt,Gt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return y3(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Tt(Gt,Gt.current),r)break;return null;case 22:case 23:return e.lanes=0,h3(t,e,n)}return Fs(t,e,n)}var v3,KS,x3,b3;v3=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};KS=function(){};x3=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,zl(Xi.current);var i=null;switch(n){case"input":o=mS(t,o),r=mS(t,r),i=[];break;case"select":o=Kt({},o,{value:void 0}),r=Kt({},r,{value:void 0}),i=[];break;case"textarea":o=vS(t,o),r=vS(t,r),i=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Uy)}bS(n,r);var s;n=null;for(u in o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&o[u]!=null)if(u==="style"){var a=o[u];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Sh.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=o!=null?o[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Sh.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Pt("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};b3=function(t,e,n,r){n!==r&&(e.flags|=4)};function Af(t,e){if(!jt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Zn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Xq(t,e,n){var r=e.pendingProps;switch(qk(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zn(e),null;case 1:return zr(e.type)&&Gy(),Zn(e),null;case 3:return r=e.stateNode,nd(),Ft(Br),Ft(ur),rI(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Pg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,di!==null&&(tC(di),di=null))),KS(t,e),Zn(e),null;case 5:nI(e);var o=zl(Ph.current);if(n=e.type,t!==null&&e.stateNode!=null)x3(t,e,n,r,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(he(166));return Zn(e),null}if(t=zl(Xi.current),Pg(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Ui]=e,r[_h]=i,t=(e.mode&1)!==0,n){case"dialog":Pt("cancel",r),Pt("close",r);break;case"iframe":case"object":case"embed":Pt("load",r);break;case"video":case"audio":for(o=0;o<Qf.length;o++)Pt(Qf[o],r);break;case"source":Pt("error",r);break;case"img":case"image":case"link":Pt("error",r),Pt("load",r);break;case"details":Pt("toggle",r);break;case"input":XN(r,i),Pt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Pt("invalid",r);break;case"textarea":QN(r,i),Pt("invalid",r)}bS(n,i),o=null;for(var s in i)if(i.hasOwnProperty(s)){var a=i[s];s==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Rg(r.textContent,a,t),o=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Rg(r.textContent,a,t),o=["children",""+a]):Sh.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Pt("scroll",r)}switch(n){case"input":kg(r),YN(r,i,!0);break;case"textarea":kg(r),ZN(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Uy)}r=o,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=qF(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Ui]=e,t[_h]=r,v3(t,e,!1,!1),e.stateNode=t;e:{switch(s=wS(n,r),n){case"dialog":Pt("cancel",t),Pt("close",t),o=r;break;case"iframe":case"object":case"embed":Pt("load",t),o=r;break;case"video":case"audio":for(o=0;o<Qf.length;o++)Pt(Qf[o],t);o=r;break;case"source":Pt("error",t),o=r;break;case"img":case"image":case"link":Pt("error",t),Pt("load",t),o=r;break;case"details":Pt("toggle",t),o=r;break;case"input":XN(t,r),o=mS(t,r),Pt("invalid",t);break;case"option":o=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=Kt({},r,{value:void 0}),Pt("invalid",t);break;case"textarea":QN(t,r),o=vS(t,r),Pt("invalid",t);break;default:o=r}bS(n,o),a=o;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?QF(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&XF(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ch(t,l):typeof l=="number"&&Ch(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Sh.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Pt("scroll",t):l!=null&&Rk(t,i,l,s))}switch(n){case"input":kg(t),YN(t,r,!1);break;case"textarea":kg(t),ZN(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Va(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ic(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ic(t,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=Uy)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Zn(e),null;case 6:if(t&&e.stateNode!=null)b3(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(he(166));if(n=zl(Ph.current),zl(Xi.current),Pg(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ui]=e,(i=r.nodeValue!==n)&&(t=ro,t!==null))switch(t.tag){case 3:Rg(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Rg(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ui]=e,e.stateNode=r}return Zn(e),null;case 13:if(Ft(Gt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(jt&&to!==null&&e.mode&1&&!(e.flags&128))LL(),ed(),e.flags|=98560,i=!1;else if(i=Pg(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(he(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(he(317));i[Ui]=e}else ed(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Zn(e),i=!1}else di!==null&&(tC(di),di=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Gt.current&1?kn===0&&(kn=3):mI())),e.updateQueue!==null&&(e.flags|=4),Zn(e),null);case 4:return nd(),KS(t,e),t===null&&Ah(e.stateNode.containerInfo),Zn(e),null;case 10:return Zk(e.type._context),Zn(e),null;case 17:return zr(e.type)&&Gy(),Zn(e),null;case 19:if(Ft(Gt),i=e.memoizedState,i===null)return Zn(e),null;if(r=(e.flags&128)!==0,s=i.rendering,s===null)if(r)Af(i,!1);else{if(kn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Zy(t),s!==null){for(e.flags|=128,Af(i,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,t=s.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Tt(Gt,Gt.current&1|2),e.child}t=t.sibling}i.tail!==null&&rn()>od&&(e.flags|=128,r=!0,Af(i,!1),e.lanes=4194304)}else{if(!r)if(t=Zy(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Af(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!jt)return Zn(e),null}else 2*rn()-i.renderingStartTime>od&&n!==1073741824&&(e.flags|=128,r=!0,Af(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(n=i.last,n!==null?n.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=rn(),e.sibling=null,n=Gt.current,Tt(Gt,r?n&1|2:n&1),e):(Zn(e),null);case 22:case 23:return pI(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Yr&1073741824&&(Zn(e),e.subtreeFlags&6&&(e.flags|=8192)):Zn(e),null;case 24:return null;case 25:return null}throw Error(he(156,e.tag))}function Yq(t,e){switch(qk(e),e.tag){case 1:return zr(e.type)&&Gy(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return nd(),Ft(Br),Ft(ur),rI(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return nI(e),null;case 13:if(Ft(Gt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(he(340));ed()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ft(Gt),null;case 4:return nd(),null;case 10:return Zk(e.type._context),null;case 22:case 23:return pI(),null;case 24:return null;default:return null}}var Fg=!1,rr=!1,Qq=typeof WeakSet=="function"?WeakSet:Set,$e=null;function bc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Xt(t,e,r)}else n.current=null}function qS(t,e,n){try{n()}catch(r){Xt(t,e,r)}}var jA=!1;function Zq(t,e){if(OS=jy,t=kL(),Hk(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,u=0,c=0,d=t,f=null;t:for(;;){for(var h;d!==n||o!==0&&d.nodeType!==3||(a=s+o),d!==i||r!==0&&d.nodeType!==3||(l=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++u===o&&(a=s),f===i&&++c===r&&(l=s),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(_S={focusedElem:t,selectionRange:n},jy=!1,$e=e;$e!==null;)if(e=$e,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$e=t;else for(;$e!==null;){e=$e;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:oi(e.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(he(163))}}catch(b){Xt(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,$e=t;break}$e=e.return}return p=jA,jA=!1,p}function dh(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var i=o.destroy;o.destroy=void 0,i!==void 0&&qS(e,n,i)}o=o.next}while(o!==r)}}function Z0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function XS(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function w3(t){var e=t.alternate;e!==null&&(t.alternate=null,w3(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ui],delete e[_h],delete e[DS],delete e[Pq],delete e[Dq])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function S3(t){return t.tag===5||t.tag===3||t.tag===4}function WA(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||S3(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function YS(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Uy));else if(r!==4&&(t=t.child,t!==null))for(YS(t,e,n),t=t.sibling;t!==null;)YS(t,e,n),t=t.sibling}function QS(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(QS(t,e,n),t=t.sibling;t!==null;)QS(t,e,n),t=t.sibling}var zn=null,li=!1;function ia(t,e,n){for(n=n.child;n!==null;)C3(t,e,n),n=n.sibling}function C3(t,e,n){if(qi&&typeof qi.onCommitFiberUnmount=="function")try{qi.onCommitFiberUnmount(U0,n)}catch{}switch(n.tag){case 5:rr||bc(n,e);case 6:var r=zn,o=li;zn=null,ia(t,e,n),zn=r,li=o,zn!==null&&(li?(t=zn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):zn.removeChild(n.stateNode));break;case 18:zn!==null&&(li?(t=zn,n=n.stateNode,t.nodeType===8?ew(t.parentNode,n):t.nodeType===1&&ew(t,n),Th(t)):ew(zn,n.stateNode));break;case 4:r=zn,o=li,zn=n.stateNode.containerInfo,li=!0,ia(t,e,n),zn=r,li=o;break;case 0:case 11:case 14:case 15:if(!rr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var i=o,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&qS(n,e,s),o=o.next}while(o!==r)}ia(t,e,n);break;case 1:if(!rr&&(bc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Xt(n,e,a)}ia(t,e,n);break;case 21:ia(t,e,n);break;case 22:n.mode&1?(rr=(r=rr)||n.memoizedState!==null,ia(t,e,n),rr=r):ia(t,e,n);break;default:ia(t,e,n)}}function VA(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Qq),e.forEach(function(r){var o=aX.bind(null,t,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Jo(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var i=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:zn=a.stateNode,li=!1;break e;case 3:zn=a.stateNode.containerInfo,li=!0;break e;case 4:zn=a.stateNode.containerInfo,li=!0;break e}a=a.return}if(zn===null)throw Error(he(160));C3(i,s,o),zn=null,li=!1;var l=o.alternate;l!==null&&(l.return=null),o.return=null}catch(u){Xt(o,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)$3(e,t),e=e.sibling}function $3(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Jo(e,t),Ri(t),r&4){try{dh(3,t,t.return),Z0(3,t)}catch(m){Xt(t,t.return,m)}try{dh(5,t,t.return)}catch(m){Xt(t,t.return,m)}}break;case 1:Jo(e,t),Ri(t),r&512&&n!==null&&bc(n,n.return);break;case 5:if(Jo(e,t),Ri(t),r&512&&n!==null&&bc(n,n.return),t.flags&32){var o=t.stateNode;try{Ch(o,"")}catch(m){Xt(t,t.return,m)}}if(r&4&&(o=t.stateNode,o!=null)){var i=t.memoizedProps,s=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&HF(o,i),wS(a,s);var u=wS(a,i);for(s=0;s<l.length;s+=2){var c=l[s],d=l[s+1];c==="style"?QF(o,d):c==="dangerouslySetInnerHTML"?XF(o,d):c==="children"?Ch(o,d):Rk(o,c,d,u)}switch(a){case"input":gS(o,i);break;case"textarea":KF(o,i);break;case"select":var f=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var h=i.value;h!=null?Ic(o,!!i.multiple,h,!1):f!==!!i.multiple&&(i.defaultValue!=null?Ic(o,!!i.multiple,i.defaultValue,!0):Ic(o,!!i.multiple,i.multiple?[]:"",!1))}o[_h]=i}catch(m){Xt(t,t.return,m)}}break;case 6:if(Jo(e,t),Ri(t),r&4){if(t.stateNode===null)throw Error(he(162));o=t.stateNode,i=t.memoizedProps;try{o.nodeValue=i}catch(m){Xt(t,t.return,m)}}break;case 3:if(Jo(e,t),Ri(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Th(e.containerInfo)}catch(m){Xt(t,t.return,m)}break;case 4:Jo(e,t),Ri(t);break;case 13:Jo(e,t),Ri(t),o=t.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(fI=rn())),r&4&&VA(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(rr=(u=rr)||c,Jo(e,t),rr=u):Jo(e,t),Ri(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for($e=t,c=t.child;c!==null;){for(d=$e=c;$e!==null;){switch(f=$e,h=f.child,f.tag){case 0:case 11:case 14:case 15:dh(4,f,f.return);break;case 1:bc(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Xt(r,n,m)}}break;case 5:bc(f,f.return);break;case 22:if(f.memoizedState!==null){GA(d);continue}}h!==null?(h.return=f,$e=h):GA(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{o=d.stateNode,u?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=YF("display",s))}catch(m){Xt(t,t.return,m)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){Xt(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Jo(e,t),Ri(t),r&4&&VA(t);break;case 21:break;default:Jo(e,t),Ri(t)}}function Ri(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(S3(n)){var r=n;break e}n=n.return}throw Error(he(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Ch(o,""),r.flags&=-33);var i=WA(t);QS(t,i,o);break;case 3:case 4:var s=r.stateNode.containerInfo,a=WA(t);YS(t,a,s);break;default:throw Error(he(161))}}catch(l){Xt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Jq(t,e,n){$e=t,k3(t)}function k3(t,e,n){for(var r=(t.mode&1)!==0;$e!==null;){var o=$e,i=o.child;if(o.tag===22&&r){var s=o.memoizedState!==null||Fg;if(!s){var a=o.alternate,l=a!==null&&a.memoizedState!==null||rr;a=Fg;var u=rr;if(Fg=s,(rr=l)&&!u)for($e=o;$e!==null;)s=$e,l=s.child,s.tag===22&&s.memoizedState!==null?HA(o):l!==null?(l.return=s,$e=l):HA(o);for(;i!==null;)$e=i,k3(i),i=i.sibling;$e=o,Fg=a,rr=u}UA(t)}else o.subtreeFlags&8772&&i!==null?(i.return=o,$e=i):UA(t)}}function UA(t){for(;$e!==null;){var e=$e;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:rr||Z0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!rr)if(n===null)r.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:oi(e.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&EA(e,i,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}EA(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Th(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(he(163))}rr||e.flags&512&&XS(e)}catch(f){Xt(e,e.return,f)}}if(e===t){$e=null;break}if(n=e.sibling,n!==null){n.return=e.return,$e=n;break}$e=e.return}}function GA(t){for(;$e!==null;){var e=$e;if(e===t){$e=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$e=n;break}$e=e.return}}function HA(t){for(;$e!==null;){var e=$e;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Z0(4,e)}catch(l){Xt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var o=e.return;try{r.componentDidMount()}catch(l){Xt(e,o,l)}}var i=e.return;try{XS(e)}catch(l){Xt(e,i,l)}break;case 5:var s=e.return;try{XS(e)}catch(l){Xt(e,s,l)}}}catch(l){Xt(e,e.return,l)}if(e===t){$e=null;break}var a=e.sibling;if(a!==null){a.return=e.return,$e=a;break}$e=e.return}}var eX=Math.ceil,tv=qs.ReactCurrentDispatcher,cI=qs.ReactCurrentOwner,Po=qs.ReactCurrentBatchConfig,ot=0,Rn=null,dn=null,Wn=0,Yr=0,wc=sl(0),kn=0,Lh=null,cu=0,J0=0,dI=0,fh=null,Rr=null,fI=0,od=1/0,ys=null,nv=!1,ZS=null,Ra=null,Lg=!1,Sa=null,rv=0,hh=0,JS=null,Ey=-1,Ny=0;function wr(){return ot&6?rn():Ey!==-1?Ey:Ey=rn()}function Pa(t){return t.mode&1?ot&2&&Wn!==0?Wn&-Wn:Fq.transition!==null?(Ny===0&&(Ny=uL()),Ny):(t=gt,t!==0||(t=window.event,t=t===void 0?16:gL(t.type)),t):1}function xi(t,e,n,r){if(50<hh)throw hh=0,JS=null,Error(he(185));Bp(t,n,r),(!(ot&2)||t!==Rn)&&(t===Rn&&(!(ot&2)&&(J0|=n),kn===4&&pa(t,Wn)),jr(t,r),n===1&&ot===0&&!(e.mode&1)&&(od=rn()+500,X0&&al()))}function jr(t,e){var n=t.callbackNode;FK(t,e);var r=zy(t,t===Rn?Wn:0);if(r===0)n!==null&&tA(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&tA(n),e===1)t.tag===0?Mq(KA.bind(null,t)):DL(KA.bind(null,t)),_q(function(){!(ot&6)&&al()}),n=null;else{switch(cL(r)){case 1:n=Lk;break;case 4:n=aL;break;case 16:n=By;break;case 536870912:n=lL;break;default:n=By}n=R3(n,I3.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function I3(t,e){if(Ey=-1,Ny=0,ot&6)throw Error(he(327));var n=t.callbackNode;if(Oc()&&t.callbackNode!==n)return null;var r=zy(t,t===Rn?Wn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ov(t,r);else{e=r;var o=ot;ot|=2;var i=E3();(Rn!==t||Wn!==e)&&(ys=null,od=rn()+500,eu(t,e));do try{rX();break}catch(a){T3(t,a)}while(!0);Qk(),tv.current=i,ot=o,dn!==null?e=0:(Rn=null,Wn=0,e=kn)}if(e!==0){if(e===2&&(o=IS(t),o!==0&&(r=o,e=eC(t,o))),e===1)throw n=Lh,eu(t,0),pa(t,r),jr(t,rn()),n;if(e===6)pa(t,r);else{if(o=t.current.alternate,!(r&30)&&!tX(o)&&(e=ov(t,r),e===2&&(i=IS(t),i!==0&&(r=i,e=eC(t,i))),e===1))throw n=Lh,eu(t,0),pa(t,r),jr(t,rn()),n;switch(t.finishedWork=o,t.finishedLanes=r,e){case 0:case 1:throw Error(he(345));case 2:Nl(t,Rr,ys);break;case 3:if(pa(t,r),(r&130023424)===r&&(e=fI+500-rn(),10<e)){if(zy(t,0)!==0)break;if(o=t.suspendedLanes,(o&r)!==r){wr(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=PS(Nl.bind(null,t,Rr,ys),e);break}Nl(t,Rr,ys);break;case 4:if(pa(t,r),(r&4194240)===r)break;for(e=t.eventTimes,o=-1;0<r;){var s=31-vi(r);i=1<<s,s=e[s],s>o&&(o=s),r&=~i}if(r=o,r=rn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*eX(r/1960))-r,10<r){t.timeoutHandle=PS(Nl.bind(null,t,Rr,ys),r);break}Nl(t,Rr,ys);break;case 5:Nl(t,Rr,ys);break;default:throw Error(he(329))}}}return jr(t,rn()),t.callbackNode===n?I3.bind(null,t):null}function eC(t,e){var n=fh;return t.current.memoizedState.isDehydrated&&(eu(t,e).flags|=256),t=ov(t,e),t!==2&&(e=Rr,Rr=n,e!==null&&tC(e)),t}function tC(t){Rr===null?Rr=t:Rr.push.apply(Rr,t)}function tX(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!Ci(i(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function pa(t,e){for(e&=~dI,e&=~J0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vi(e),r=1<<n;t[n]=-1,e&=~r}}function KA(t){if(ot&6)throw Error(he(327));Oc();var e=zy(t,0);if(!(e&1))return jr(t,rn()),null;var n=ov(t,e);if(t.tag!==0&&n===2){var r=IS(t);r!==0&&(e=r,n=eC(t,r))}if(n===1)throw n=Lh,eu(t,0),pa(t,e),jr(t,rn()),n;if(n===6)throw Error(he(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Nl(t,Rr,ys),jr(t,rn()),null}function hI(t,e){var n=ot;ot|=1;try{return t(e)}finally{ot=n,ot===0&&(od=rn()+500,X0&&al())}}function du(t){Sa!==null&&Sa.tag===0&&!(ot&6)&&Oc();var e=ot;ot|=1;var n=Po.transition,r=gt;try{if(Po.transition=null,gt=1,t)return t()}finally{gt=r,Po.transition=n,ot=e,!(ot&6)&&al()}}function pI(){Yr=wc.current,Ft(wc)}function eu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Oq(n)),dn!==null)for(n=dn.return;n!==null;){var r=n;switch(qk(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Gy();break;case 3:nd(),Ft(Br),Ft(ur),rI();break;case 5:nI(r);break;case 4:nd();break;case 13:Ft(Gt);break;case 19:Ft(Gt);break;case 10:Zk(r.type._context);break;case 22:case 23:pI()}n=n.return}if(Rn=t,dn=t=Da(t.current,null),Wn=Yr=e,kn=0,Lh=null,dI=J0=cu=0,Rr=fh=null,Bl!==null){for(e=0;e<Bl.length;e++)if(n=Bl[e],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,i=n.pending;if(i!==null){var s=i.next;i.next=o,r.next=s}n.pending=r}Bl=null}return t}function T3(t,e){do{var n=dn;try{if(Qk(),ky.current=ev,Jy){for(var r=Ht.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Jy=!1}if(uu=0,On=wn=Ht=null,ch=!1,Dh=0,cI.current=null,n===null||n.return===null){kn=1,Lh=e,dn=null;break}e:{var i=t,s=n.return,a=n,l=e;if(e=Wn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=PA(s);if(h!==null){h.flags&=-257,DA(h,s,a,i,e),h.mode&1&&RA(i,u,e),e=h,l=u;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){RA(i,u,e),mI();break e}l=Error(he(426))}}else if(jt&&a.mode&1){var g=PA(s);if(g!==null){!(g.flags&65536)&&(g.flags|=256),DA(g,s,a,i,e),Xk(rd(l,a));break e}}i=l=rd(l,a),kn!==4&&(kn=2),fh===null?fh=[i]:fh.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=c3(i,l,e);TA(i,y);break e;case 1:a=l;var v=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ra===null||!Ra.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var b=d3(i,a,e);TA(i,b);break e}}i=i.return}while(i!==null)}A3(n)}catch(w){e=w,dn===n&&n!==null&&(dn=n=n.return);continue}break}while(!0)}function E3(){var t=tv.current;return tv.current=ev,t===null?ev:t}function mI(){(kn===0||kn===3||kn===2)&&(kn=4),Rn===null||!(cu&268435455)&&!(J0&268435455)||pa(Rn,Wn)}function ov(t,e){var n=ot;ot|=2;var r=E3();(Rn!==t||Wn!==e)&&(ys=null,eu(t,e));do try{nX();break}catch(o){T3(t,o)}while(!0);if(Qk(),ot=n,tv.current=r,dn!==null)throw Error(he(261));return Rn=null,Wn=0,kn}function nX(){for(;dn!==null;)N3(dn)}function rX(){for(;dn!==null&&!EK();)N3(dn)}function N3(t){var e=_3(t.alternate,t,Yr);t.memoizedProps=t.pendingProps,e===null?A3(t):dn=e,cI.current=null}function A3(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Yq(n,e),n!==null){n.flags&=32767,dn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{kn=6,dn=null;return}}else if(n=Xq(n,e,Yr),n!==null){dn=n;return}if(e=e.sibling,e!==null){dn=e;return}dn=e=t}while(e!==null);kn===0&&(kn=5)}function Nl(t,e,n){var r=gt,o=Po.transition;try{Po.transition=null,gt=1,oX(t,e,n,r)}finally{Po.transition=o,gt=r}return null}function oX(t,e,n,r){do Oc();while(Sa!==null);if(ot&6)throw Error(he(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(he(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(LK(t,i),t===Rn&&(dn=Rn=null,Wn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Lg||(Lg=!0,R3(By,function(){return Oc(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Po.transition,Po.transition=null;var s=gt;gt=1;var a=ot;ot|=4,cI.current=null,Zq(t,n),$3(n,t),$q(_S),jy=!!OS,_S=OS=null,t.current=n,Jq(n),NK(),ot=a,gt=s,Po.transition=i}else t.current=n;if(Lg&&(Lg=!1,Sa=t,rv=o),i=t.pendingLanes,i===0&&(Ra=null),_K(n.stateNode),jr(t,rn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(nv)throw nv=!1,t=ZS,ZS=null,t;return rv&1&&t.tag!==0&&Oc(),i=t.pendingLanes,i&1?t===JS?hh++:(hh=0,JS=t):hh=0,al(),null}function Oc(){if(Sa!==null){var t=cL(rv),e=Po.transition,n=gt;try{if(Po.transition=null,gt=16>t?16:t,Sa===null)var r=!1;else{if(t=Sa,Sa=null,rv=0,ot&6)throw Error(he(331));var o=ot;for(ot|=4,$e=t.current;$e!==null;){var i=$e,s=i.child;if($e.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for($e=u;$e!==null;){var c=$e;switch(c.tag){case 0:case 11:case 15:dh(8,c,i)}var d=c.child;if(d!==null)d.return=c,$e=d;else for(;$e!==null;){c=$e;var f=c.sibling,h=c.return;if(w3(c),c===u){$e=null;break}if(f!==null){f.return=h,$e=f;break}$e=h}}}var p=i.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}$e=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,$e=s;else e:for(;$e!==null;){if(i=$e,i.flags&2048)switch(i.tag){case 0:case 11:case 15:dh(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,$e=y;break e}$e=i.return}}var v=t.current;for($e=v;$e!==null;){s=$e;var x=s.child;if(s.subtreeFlags&2064&&x!==null)x.return=s,$e=x;else e:for(s=v;$e!==null;){if(a=$e,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Z0(9,a)}}catch(w){Xt(a,a.return,w)}if(a===s){$e=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,$e=b;break e}$e=a.return}}if(ot=o,al(),qi&&typeof qi.onPostCommitFiberRoot=="function")try{qi.onPostCommitFiberRoot(U0,t)}catch{}r=!0}return r}finally{gt=n,Po.transition=e}}return!1}function qA(t,e,n){e=rd(n,e),e=c3(t,e,1),t=_a(t,e,1),e=wr(),t!==null&&(Bp(t,1,e),jr(t,e))}function Xt(t,e,n){if(t.tag===3)qA(t,t,n);else for(;e!==null;){if(e.tag===3){qA(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ra===null||!Ra.has(r))){t=rd(n,t),t=d3(e,t,1),e=_a(e,t,1),t=wr(),e!==null&&(Bp(e,1,t),jr(e,t));break}}e=e.return}}function iX(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=wr(),t.pingedLanes|=t.suspendedLanes&n,Rn===t&&(Wn&n)===n&&(kn===4||kn===3&&(Wn&130023424)===Wn&&500>rn()-fI?eu(t,0):dI|=n),jr(t,e)}function O3(t,e){e===0&&(t.mode&1?(e=Eg,Eg<<=1,!(Eg&130023424)&&(Eg=4194304)):e=1);var n=wr();t=Ms(t,e),t!==null&&(Bp(t,e,n),jr(t,n))}function sX(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),O3(t,n)}function aX(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(he(314))}r!==null&&r.delete(e),O3(t,n)}var _3;_3=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Br.current)Dr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Dr=!1,qq(t,e,n);Dr=!!(t.flags&131072)}else Dr=!1,jt&&e.flags&1048576&&ML(e,qy,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ty(t,e),t=e.pendingProps;var o=Jc(e,ur.current);Ac(e,n),o=iI(null,e,r,t,o,n);var i=sI();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,zr(r)?(i=!0,Hy(e)):i=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,eI(e),o.updater=Q0,e.stateNode=o,o._reactInternals=e,jS(e,r,t,n),e=US(null,e,r,!0,i,n)):(e.tag=0,jt&&i&&Kk(e),mr(null,e,o,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ty(t,e),t=e.pendingProps,o=r._init,r=o(r._payload),e.type=r,o=e.tag=uX(r),t=oi(r,t),o){case 0:e=VS(null,e,r,t,n);break e;case 1:e=LA(null,e,r,t,n);break e;case 11:e=MA(null,e,r,t,n);break e;case 14:e=FA(null,e,r,oi(r.type,t),n);break e}throw Error(he(306,r,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:oi(r,o),VS(t,e,r,o,n);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:oi(r,o),LA(t,e,r,o,n);case 3:e:{if(m3(e),t===null)throw Error(he(387));r=e.pendingProps,i=e.memoizedState,o=i.element,WL(t,e),Qy(e,r,null,n);var s=e.memoizedState;if(r=s.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){o=rd(Error(he(423)),e),e=BA(t,e,r,n,o);break e}else if(r!==o){o=rd(Error(he(424)),e),e=BA(t,e,r,n,o);break e}else for(to=Oa(e.stateNode.containerInfo.firstChild),ro=e,jt=!0,di=null,n=zL(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ed(),r===o){e=Fs(t,e,n);break e}mr(t,e,r,n)}e=e.child}return e;case 5:return VL(e),t===null&&LS(e),r=e.type,o=e.pendingProps,i=t!==null?t.memoizedProps:null,s=o.children,RS(r,o)?s=null:i!==null&&RS(r,i)&&(e.flags|=32),p3(t,e),mr(t,e,s,n),e.child;case 6:return t===null&&LS(e),null;case 13:return g3(t,e,n);case 4:return tI(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=td(e,null,r,n):mr(t,e,r,n),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:oi(r,o),MA(t,e,r,o,n);case 7:return mr(t,e,e.pendingProps,n),e.child;case 8:return mr(t,e,e.pendingProps.children,n),e.child;case 12:return mr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,o=e.pendingProps,i=e.memoizedProps,s=o.value,Tt(Xy,r._currentValue),r._currentValue=s,i!==null)if(Ci(i.value,s)){if(i.children===o.children&&!Br.current){e=Fs(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){s=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Es(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),BS(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)s=i.type===e.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(he(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),BS(s,n,e),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===e){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}mr(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,r=e.pendingProps.children,Ac(e,n),o=Fo(o),r=r(o),e.flags|=1,mr(t,e,r,n),e.child;case 14:return r=e.type,o=oi(r,e.pendingProps),o=oi(r.type,o),FA(t,e,r,o,n);case 15:return f3(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:oi(r,o),Ty(t,e),e.tag=1,zr(r)?(t=!0,Hy(e)):t=!1,Ac(e,n),u3(e,r,o),jS(e,r,o,n),US(null,e,r,!0,t,n);case 19:return y3(t,e,n);case 22:return h3(t,e,n)}throw Error(he(156,e.tag))};function R3(t,e){return sL(t,e)}function lX(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function To(t,e,n,r){return new lX(t,e,n,r)}function gI(t){return t=t.prototype,!(!t||!t.isReactComponent)}function uX(t){if(typeof t=="function")return gI(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Dk)return 11;if(t===Mk)return 14}return 2}function Da(t,e){var n=t.alternate;return n===null?(n=To(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ay(t,e,n,r,o,i){var s=2;if(r=t,typeof t=="function")gI(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case dc:return tu(n.children,o,i,e);case Pk:s=8,o|=8;break;case dS:return t=To(12,n,e,o|2),t.elementType=dS,t.lanes=i,t;case fS:return t=To(13,n,e,o),t.elementType=fS,t.lanes=i,t;case hS:return t=To(19,n,e,o),t.elementType=hS,t.lanes=i,t;case VF:return ex(n,o,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case jF:s=10;break e;case WF:s=9;break e;case Dk:s=11;break e;case Mk:s=14;break e;case ua:s=16,r=null;break e}throw Error(he(130,t==null?t:typeof t,""))}return e=To(s,n,e,o),e.elementType=t,e.type=r,e.lanes=i,e}function tu(t,e,n,r){return t=To(7,t,r,e),t.lanes=n,t}function ex(t,e,n,r){return t=To(22,t,r,e),t.elementType=VF,t.lanes=n,t.stateNode={isHidden:!1},t}function lw(t,e,n){return t=To(6,t,null,e),t.lanes=n,t}function uw(t,e,n){return e=To(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function cX(t,e,n,r,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=V1(0),this.expirationTimes=V1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=V1(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function yI(t,e,n,r,o,i,s,a,l){return t=new cX(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=To(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},eI(i),t}function dX(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function P3(t){if(!t)return Ua;t=t._reactInternals;e:{if(Pu(t)!==t||t.tag!==1)throw Error(he(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(zr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(he(171))}if(t.tag===1){var n=t.type;if(zr(n))return PL(t,n,e)}return e}function D3(t,e,n,r,o,i,s,a,l){return t=yI(n,r,!0,t,o,i,s,a,l),t.context=P3(null),n=t.current,r=wr(),o=Pa(n),i=Es(r,o),i.callback=e??null,_a(n,i,o),t.current.lanes=o,Bp(t,o,r),jr(t,r),t}function tx(t,e,n,r){var o=e.current,i=wr(),s=Pa(o);return n=P3(n),e.context===null?e.context=n:e.pendingContext=n,e=Es(i,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=_a(o,e,s),t!==null&&(xi(t,o,s,i),$y(t,o,s)),s}function iv(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function XA(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function vI(t,e){XA(t,e),(t=t.alternate)&&XA(t,e)}function fX(){return null}var M3=typeof reportError=="function"?reportError:function(t){console.error(t)};function xI(t){this._internalRoot=t}nx.prototype.render=xI.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(he(409));tx(t,e,null,null)};nx.prototype.unmount=xI.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;du(function(){tx(null,t,null,null)}),e[Ds]=null}};function nx(t){this._internalRoot=t}nx.prototype.unstable_scheduleHydration=function(t){if(t){var e=hL();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ha.length&&e!==0&&e<ha[n].priority;n++);ha.splice(n,0,t),n===0&&mL(t)}};function bI(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function rx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function YA(){}function hX(t,e,n,r,o){if(o){if(typeof r=="function"){var i=r;r=function(){var u=iv(s);i.call(u)}}var s=D3(e,r,t,0,null,!1,!1,"",YA);return t._reactRootContainer=s,t[Ds]=s.current,Ah(t.nodeType===8?t.parentNode:t),du(),s}for(;o=t.lastChild;)t.removeChild(o);if(typeof r=="function"){var a=r;r=function(){var u=iv(l);a.call(u)}}var l=yI(t,0,!1,null,null,!1,!1,"",YA);return t._reactRootContainer=l,t[Ds]=l.current,Ah(t.nodeType===8?t.parentNode:t),du(function(){tx(e,l,n,r)}),l}function ox(t,e,n,r,o){var i=n._reactRootContainer;if(i){var s=i;if(typeof o=="function"){var a=o;o=function(){var l=iv(s);a.call(l)}}tx(e,s,t,o)}else s=hX(n,e,t,o,r);return iv(s)}dL=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Yf(e.pendingLanes);n!==0&&(Bk(e,n|1),jr(e,rn()),!(ot&6)&&(od=rn()+500,al()))}break;case 13:du(function(){var r=Ms(t,1);if(r!==null){var o=wr();xi(r,t,1,o)}}),vI(t,1)}};zk=function(t){if(t.tag===13){var e=Ms(t,134217728);if(e!==null){var n=wr();xi(e,t,134217728,n)}vI(t,134217728)}};fL=function(t){if(t.tag===13){var e=Pa(t),n=Ms(t,e);if(n!==null){var r=wr();xi(n,t,e,r)}vI(t,e)}};hL=function(){return gt};pL=function(t,e){var n=gt;try{return gt=t,e()}finally{gt=n}};CS=function(t,e,n){switch(e){case"input":if(gS(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var o=q0(r);if(!o)throw Error(he(90));GF(r),gS(r,o)}}}break;case"textarea":KF(t,n);break;case"select":e=n.value,e!=null&&Ic(t,!!n.multiple,e,!1)}};eL=hI;tL=du;var pX={usingClientEntryPoint:!1,Events:[jp,mc,q0,ZF,JF,hI]},Of={findFiberByHostInstance:Ll,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mX={bundleType:Of.bundleType,version:Of.version,rendererPackageName:Of.rendererPackageName,rendererConfig:Of.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=oL(t),t===null?null:t.stateNode},findFiberByHostInstance:Of.findFiberByHostInstance||fX,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bg.isDisabled&&Bg.supportsFiber)try{U0=Bg.inject(mX),qi=Bg}catch{}}uo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pX;uo.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bI(e))throw Error(he(200));return dX(t,e,null,n)};uo.createRoot=function(t,e){if(!bI(t))throw Error(he(299));var n=!1,r="",o=M3;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=yI(t,1,!1,null,null,n,!1,r,o),t[Ds]=e.current,Ah(t.nodeType===8?t.parentNode:t),new xI(e)};uo.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(he(188)):(t=Object.keys(t).join(","),Error(he(268,t)));return t=oL(e),t=t===null?null:t.stateNode,t};uo.flushSync=function(t){return du(t)};uo.hydrate=function(t,e,n){if(!rx(e))throw Error(he(200));return ox(null,t,e,!0,n)};uo.hydrateRoot=function(t,e,n){if(!bI(t))throw Error(he(405));var r=n!=null&&n.hydratedSources||null,o=!1,i="",s=M3;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=D3(e,null,t,1,n??null,o,!1,i,s),t[Ds]=e.current,Ah(t),r)for(t=0;t<r.length;t++)n=r[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new nx(e)};uo.render=function(t,e,n){if(!rx(e))throw Error(he(200));return ox(null,t,e,!1,n)};uo.unmountComponentAtNode=function(t){if(!rx(t))throw Error(he(40));return t._reactRootContainer?(du(function(){ox(null,null,t,!1,function(){t._reactRootContainer=null,t[Ds]=null})}),!0):!1};uo.unstable_batchedUpdates=hI;uo.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!rx(n))throw Error(he(200));if(t==null||t._reactInternals===void 0)throw Error(he(38));return ox(t,e,n,!1,r)};uo.version="18.3.1-next-f1338f8080-20240426";function F3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(F3)}catch(t){console.error(t)}}F3(),FF.exports=uo;var Vp=FF.exports;const L3=ht(Vp);var B3,QA=Vp;B3=QA.createRoot,QA.hydrateRoot;const gX=1,yX=1e6;let cw=0;function vX(){return cw=(cw+1)%Number.MAX_SAFE_INTEGER,cw.toString()}const dw=new Map,ZA=t=>{if(dw.has(t))return;const e=setTimeout(()=>{dw.delete(t),ph({type:"REMOVE_TOAST",toastId:t})},yX);dw.set(t,e)},xX=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,gX)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?ZA(n):t.toasts.forEach(r=>{ZA(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Oy=[];let _y={toasts:[]};function ph(t){_y=xX(_y,t),Oy.forEach(e=>{e(_y)})}function bX({...t}){const e=vX(),n=o=>ph({type:"UPDATE_TOAST",toast:{...o,id:e}}),r=()=>ph({type:"DISMISS_TOAST",toastId:e});return ph({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:o=>{o||r()}}}),{id:e,dismiss:r,update:n}}function wX(){const[t,e]=R.useState(_y);return R.useEffect(()=>(Oy.push(e),()=>{const n=Oy.indexOf(e);n>-1&&Oy.splice(n,1)}),[t]),{...t,toast:bX,dismiss:n=>ph({type:"DISMISS_TOAST",toastId:n})}}function Sn(t,e,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t==null||t(o),n===!1||!o.defaultPrevented)return e==null?void 0:e(o)}}function JA(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function z3(...t){return e=>{let n=!1;const r=t.map(o=>{const i=JA(o,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let o=0;o<r.length;o++){const i=r[o];typeof i=="function"?i():JA(t[o],null)}}}}function $i(...t){return R.useCallback(z3(...t),t)}function Up(t,e=[]){let n=[];function r(i,s){const a=R.createContext(s),l=n.length;n=[...n,s];const u=d=>{var y;const{scope:f,children:h,...p}=d,m=((y=f==null?void 0:f[t])==null?void 0:y[l])||a,g=R.useMemo(()=>p,Object.values(p));return D.jsx(m.Provider,{value:g,children:h})};u.displayName=i+"Provider";function c(d,f){var m;const h=((m=f==null?void 0:f[t])==null?void 0:m[l])||a,p=R.useContext(h);if(p)return p;if(s!==void 0)return s;throw new Error(`\`${d}\` must be used within \`${i}\``)}return[u,c]}const o=()=>{const i=n.map(s=>R.createContext(s));return function(a){const l=(a==null?void 0:a[t])||i;return R.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return o.scopeName=t,[r,SX(o,...e)]}function SX(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(i){const s=r.reduce((a,{useScope:l,scopeName:u})=>{const d=l(i)[`__scope${u}`];return{...a,...d}},{});return R.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return n.scopeName=e.scopeName,n}function sv(t){const e=$X(t),n=R.forwardRef((r,o)=>{const{children:i,...s}=r,a=R.Children.toArray(i),l=a.find(IX);if(l){const u=l.props.children,c=a.map(d=>d===l?R.Children.count(u)>1?R.Children.only(null):R.isValidElement(u)?u.props.children:null:d);return D.jsx(e,{...s,ref:o,children:R.isValidElement(u)?R.cloneElement(u,void 0,c):null})}return D.jsx(e,{...s,ref:o,children:i})});return n.displayName=`${t}.Slot`,n}var CX=sv("Slot");function $X(t){const e=R.forwardRef((n,r)=>{const{children:o,...i}=n;if(R.isValidElement(o)){const s=EX(o),a=TX(i,o.props);return o.type!==R.Fragment&&(a.ref=r?z3(r,s):s),R.cloneElement(o,a)}return R.Children.count(o)>1?R.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var j3=Symbol("radix.slottable");function kX(t){const e=({children:n})=>D.jsx(D.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=j3,e}function IX(t){return R.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===j3}function TX(t,e){const n={...e};for(const r in e){const o=t[r],i=e[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...a)=>{const l=i(...a);return o(...a),l}:o&&(n[r]=o):r==="style"?n[r]={...o,...i}:r==="className"&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...t,...n}}function EX(t){var r,o;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function NX(t){const e=t+"CollectionProvider",[n,r]=Up(e),[o,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),s=m=>{const{scope:g,children:y}=m,v=B.useRef(null),x=B.useRef(new Map).current;return D.jsx(o,{scope:g,itemMap:x,collectionRef:v,children:y})};s.displayName=e;const a=t+"CollectionSlot",l=sv(a),u=B.forwardRef((m,g)=>{const{scope:y,children:v}=m,x=i(a,y),b=$i(g,x.collectionRef);return D.jsx(l,{ref:b,children:v})});u.displayName=a;const c=t+"CollectionItemSlot",d="data-radix-collection-item",f=sv(c),h=B.forwardRef((m,g)=>{const{scope:y,children:v,...x}=m,b=B.useRef(null),w=$i(g,b),S=i(c,y);return B.useEffect(()=>(S.itemMap.set(b,{ref:b,...x}),()=>void S.itemMap.delete(b))),D.jsx(f,{[d]:"",ref:w,children:v})});h.displayName=c;function p(m){const g=i(t+"CollectionConsumer",m);return B.useCallback(()=>{const v=g.collectionRef.current;if(!v)return[];const x=Array.from(v.querySelectorAll(`[${d}]`));return Array.from(g.itemMap.values()).sort((S,$)=>x.indexOf(S.ref.current)-x.indexOf($.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:s,Slot:u,ItemSlot:h},p,r]}var AX=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],dr=AX.reduce((t,e)=>{const n=sv(`Primitive.${e}`),r=R.forwardRef((o,i)=>{const{asChild:s,...a}=o,l=s?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),D.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function W3(t,e){t&&Vp.flushSync(()=>t.dispatchEvent(e))}function Ga(t){const e=R.useRef(t);return R.useEffect(()=>{e.current=t}),R.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function OX(t,e=globalThis==null?void 0:globalThis.document){const n=Ga(t);R.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var _X="DismissableLayer",nC="dismissableLayer.update",RX="dismissableLayer.pointerDownOutside",PX="dismissableLayer.focusOutside",eO,V3=R.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),wI=R.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:i,onInteractOutside:s,onDismiss:a,...l}=t,u=R.useContext(V3),[c,d]=R.useState(null),f=(c==null?void 0:c.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=R.useState({}),p=$i(e,$=>d($)),m=Array.from(u.layers),[g]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=m.indexOf(g),v=c?m.indexOf(c):-1,x=u.layersWithOutsidePointerEventsDisabled.size>0,b=v>=y,w=MX($=>{const C=$.target,k=[...u.branches].some(I=>I.contains(C));!b||k||(o==null||o($),s==null||s($),$.defaultPrevented||a==null||a())},f),S=FX($=>{const C=$.target;[...u.branches].some(I=>I.contains(C))||(i==null||i($),s==null||s($),$.defaultPrevented||a==null||a())},f);return OX($=>{v===u.layers.size-1&&(r==null||r($),!$.defaultPrevented&&a&&($.preventDefault(),a()))},f),R.useEffect(()=>{if(c)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(eO=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(c)),u.layers.add(c),tO(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=eO)}},[c,f,n,u]),R.useEffect(()=>()=>{c&&(u.layers.delete(c),u.layersWithOutsidePointerEventsDisabled.delete(c),tO())},[c,u]),R.useEffect(()=>{const $=()=>h({});return document.addEventListener(nC,$),()=>document.removeEventListener(nC,$)},[]),D.jsx(dr.div,{...l,ref:p,style:{pointerEvents:x?b?"auto":"none":void 0,...t.style},onFocusCapture:Sn(t.onFocusCapture,S.onFocusCapture),onBlurCapture:Sn(t.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Sn(t.onPointerDownCapture,w.onPointerDownCapture)})});wI.displayName=_X;var DX="DismissableLayerBranch",U3=R.forwardRef((t,e)=>{const n=R.useContext(V3),r=R.useRef(null),o=$i(e,r);return R.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),D.jsx(dr.div,{...t,ref:o})});U3.displayName=DX;function MX(t,e=globalThis==null?void 0:globalThis.document){const n=Ga(t),r=R.useRef(!1),o=R.useRef(()=>{});return R.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){G3(RX,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=l,e.addEventListener("click",o.current,{once:!0})):l()}else e.removeEventListener("click",o.current);r.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",i),e.removeEventListener("click",o.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function FX(t,e=globalThis==null?void 0:globalThis.document){const n=Ga(t),r=R.useRef(!1);return R.useEffect(()=>{const o=i=>{i.target&&!r.current&&G3(PX,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function tO(){const t=new CustomEvent(nC);document.dispatchEvent(t)}function G3(t,e,n,{discrete:r}){const o=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),r?W3(o,i):o.dispatchEvent(i)}var LX=wI,BX=U3,Ha=globalThis!=null&&globalThis.document?R.useLayoutEffect:()=>{},zX="Portal",H3=R.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[o,i]=R.useState(!1);Ha(()=>i(!0),[]);const s=n||o&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return s?L3.createPortal(D.jsx(dr.div,{...r,ref:e}),s):null});H3.displayName=zX;function jX(t,e){return R.useReducer((n,r)=>e[n][r]??n,t)}var SI=t=>{const{present:e,children:n}=t,r=WX(e),o=typeof n=="function"?n({present:r.isPresent}):R.Children.only(n),i=$i(r.ref,VX(o));return typeof n=="function"||r.isPresent?R.cloneElement(o,{ref:i}):null};SI.displayName="Presence";function WX(t){const[e,n]=R.useState(),r=R.useRef(null),o=R.useRef(t),i=R.useRef("none"),s=t?"mounted":"unmounted",[a,l]=jX(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return R.useEffect(()=>{const u=zg(r.current);i.current=a==="mounted"?u:"none"},[a]),Ha(()=>{const u=r.current,c=o.current;if(c!==t){const f=i.current,h=zg(u);t?l("MOUNT"):h==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(c&&f!==h?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,l]),Ha(()=>{if(e){let u;const c=e.ownerDocument.defaultView??window,d=h=>{const m=zg(r.current).includes(h.animationName);if(h.target===e&&m&&(l("ANIMATION_END"),!o.current)){const g=e.style.animationFillMode;e.style.animationFillMode="forwards",u=c.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=g)})}},f=h=>{h.target===e&&(i.current=zg(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{c.clearTimeout(u),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:R.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function zg(t){return(t==null?void 0:t.animationName)||"none"}function VX(t){var r,o;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var UX=DF[" useInsertionEffect ".trim().toString()]||Ha;function GX({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[o,i,s]=HX({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:o;{const c=R.useRef(t!==void 0);R.useEffect(()=>{const d=c.current;d!==a&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),c.current=a},[a,r])}const u=R.useCallback(c=>{var d;if(a){const f=KX(c)?c(t):c;f!==t&&((d=s.current)==null||d.call(s,f))}else i(c)},[a,t,i,s]);return[l,u]}function HX({defaultProp:t,onChange:e}){const[n,r]=R.useState(t),o=R.useRef(n),i=R.useRef(e);return UX(()=>{i.current=e},[e]),R.useEffect(()=>{var s;o.current!==n&&((s=i.current)==null||s.call(i,n),o.current=n)},[n,o]),[n,r,i]}function KX(t){return typeof t=="function"}var qX=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),XX="VisuallyHidden",ix=R.forwardRef((t,e)=>D.jsx(dr.span,{...t,ref:e,style:{...qX,...t.style}}));ix.displayName=XX;var YX=ix,CI="ToastProvider",[$I,QX,ZX]=NX("Toast"),[K3,eqe]=Up("Toast",[ZX]),[JX,sx]=K3(CI),q3=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:o="right",swipeThreshold:i=50,children:s}=t,[a,l]=R.useState(null),[u,c]=R.useState(0),d=R.useRef(!1),f=R.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${CI}\`. Expected non-empty \`string\`.`),D.jsx($I.Provider,{scope:e,children:D.jsx(JX,{scope:e,label:n,duration:r,swipeDirection:o,swipeThreshold:i,toastCount:u,viewport:a,onViewportChange:l,onToastAdd:R.useCallback(()=>c(h=>h+1),[]),onToastRemove:R.useCallback(()=>c(h=>h-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:s})})};q3.displayName=CI;var X3="ToastViewport",e7=["F8"],rC="toast.viewportPause",oC="toast.viewportResume",Y3=R.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=e7,label:o="Notifications ({hotkey})",...i}=t,s=sx(X3,n),a=QX(n),l=R.useRef(null),u=R.useRef(null),c=R.useRef(null),d=R.useRef(null),f=$i(e,d,s.onViewportChange),h=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=s.toastCount>0;R.useEffect(()=>{const g=y=>{var x;r.length!==0&&r.every(b=>y[b]||y.code===b)&&((x=d.current)==null||x.focus())};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[r]),R.useEffect(()=>{const g=l.current,y=d.current;if(p&&g&&y){const v=()=>{if(!s.isClosePausedRef.current){const S=new CustomEvent(rC);y.dispatchEvent(S),s.isClosePausedRef.current=!0}},x=()=>{if(s.isClosePausedRef.current){const S=new CustomEvent(oC);y.dispatchEvent(S),s.isClosePausedRef.current=!1}},b=S=>{!g.contains(S.relatedTarget)&&x()},w=()=>{g.contains(document.activeElement)||x()};return g.addEventListener("focusin",v),g.addEventListener("focusout",b),g.addEventListener("pointermove",v),g.addEventListener("pointerleave",w),window.addEventListener("blur",v),window.addEventListener("focus",x),()=>{g.removeEventListener("focusin",v),g.removeEventListener("focusout",b),g.removeEventListener("pointermove",v),g.removeEventListener("pointerleave",w),window.removeEventListener("blur",v),window.removeEventListener("focus",x)}}},[p,s.isClosePausedRef]);const m=R.useCallback(({tabbingDirection:g})=>{const v=a().map(x=>{const b=x.ref.current,w=[b,...h7(b)];return g==="forwards"?w:w.reverse()});return(g==="forwards"?v.reverse():v).flat()},[a]);return R.useEffect(()=>{const g=d.current;if(g){const y=v=>{var w,S,$;const x=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!x){const C=document.activeElement,k=v.shiftKey;if(v.target===g&&k){(w=u.current)==null||w.focus();return}const E=m({tabbingDirection:k?"backwards":"forwards"}),_=E.findIndex(N=>N===C);fw(E.slice(_+1))?v.preventDefault():k?(S=u.current)==null||S.focus():($=c.current)==null||$.focus()}};return g.addEventListener("keydown",y),()=>g.removeEventListener("keydown",y)}},[a,m]),D.jsxs(BX,{ref:l,role:"region","aria-label":o.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:p?void 0:"none"},children:[p&&D.jsx(iC,{ref:u,onFocusFromOutsideViewport:()=>{const g=m({tabbingDirection:"forwards"});fw(g)}}),D.jsx($I.Slot,{scope:n,children:D.jsx(dr.ol,{tabIndex:-1,...i,ref:f})}),p&&D.jsx(iC,{ref:c,onFocusFromOutsideViewport:()=>{const g=m({tabbingDirection:"backwards"});fw(g)}})]})});Y3.displayName=X3;var Q3="ToastFocusProxy",iC=R.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...o}=t,i=sx(Q3,n);return D.jsx(ix,{"aria-hidden":!0,tabIndex:0,...o,ref:e,style:{position:"fixed"},onFocus:s=>{var u;const a=s.relatedTarget;!((u=i.viewport)!=null&&u.contains(a))&&r()}})});iC.displayName=Q3;var Gp="Toast",t7="toast.swipeStart",n7="toast.swipeMove",r7="toast.swipeCancel",o7="toast.swipeEnd",Z3=R.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:o,onOpenChange:i,...s}=t,[a,l]=GX({prop:r,defaultProp:o??!0,onChange:i,caller:Gp});return D.jsx(SI,{present:n||a,children:D.jsx(a7,{open:a,...s,ref:e,onClose:()=>l(!1),onPause:Ga(t.onPause),onResume:Ga(t.onResume),onSwipeStart:Sn(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Sn(t.onSwipeMove,u=>{const{x:c,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${c}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:Sn(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Sn(t.onSwipeEnd,u=>{const{x:c,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${c}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});Z3.displayName=Gp;var[i7,s7]=K3(Gp,{onClose(){}}),a7=R.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:o,open:i,onClose:s,onEscapeKeyDown:a,onPause:l,onResume:u,onSwipeStart:c,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:h,...p}=t,m=sx(Gp,n),[g,y]=R.useState(null),v=$i(e,N=>y(N)),x=R.useRef(null),b=R.useRef(null),w=o||m.duration,S=R.useRef(0),$=R.useRef(w),C=R.useRef(0),{onToastAdd:k,onToastRemove:I}=m,T=Ga(()=>{var P;(g==null?void 0:g.contains(document.activeElement))&&((P=m.viewport)==null||P.focus()),s()}),E=R.useCallback(N=>{!N||N===1/0||(window.clearTimeout(C.current),S.current=new Date().getTime(),C.current=window.setTimeout(T,N))},[T]);R.useEffect(()=>{const N=m.viewport;if(N){const P=()=>{E($.current),u==null||u()},F=()=>{const L=new Date().getTime()-S.current;$.current=$.current-L,window.clearTimeout(C.current),l==null||l()};return N.addEventListener(rC,F),N.addEventListener(oC,P),()=>{N.removeEventListener(rC,F),N.removeEventListener(oC,P)}}},[m.viewport,w,l,u,E]),R.useEffect(()=>{i&&!m.isClosePausedRef.current&&E(w)},[i,w,m.isClosePausedRef,E]),R.useEffect(()=>(k(),()=>I()),[k,I]);const _=R.useMemo(()=>g?iB(g):null,[g]);return m.viewport?D.jsxs(D.Fragment,{children:[_&&D.jsx(l7,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:_}),D.jsx(i7,{scope:n,onClose:T,children:Vp.createPortal(D.jsx($I.ItemSlot,{scope:n,children:D.jsx(LX,{asChild:!0,onEscapeKeyDown:Sn(a,()=>{m.isFocusedToastEscapeKeyDownRef.current||T(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:D.jsx(dr.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":m.swipeDirection,...p,ref:v,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Sn(t.onKeyDown,N=>{N.key==="Escape"&&(a==null||a(N.nativeEvent),N.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,T()))}),onPointerDown:Sn(t.onPointerDown,N=>{N.button===0&&(x.current={x:N.clientX,y:N.clientY})}),onPointerMove:Sn(t.onPointerMove,N=>{if(!x.current)return;const P=N.clientX-x.current.x,F=N.clientY-x.current.y,L=!!b.current,A=["left","right"].includes(m.swipeDirection),O=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,j=A?O(0,P):0,V=A?0:O(0,F),z=N.pointerType==="touch"?10:2,U={x:j,y:V},Z={originalEvent:N,delta:U};L?(b.current=U,jg(n7,d,Z,{discrete:!1})):nO(U,m.swipeDirection,z)?(b.current=U,jg(t7,c,Z,{discrete:!1}),N.target.setPointerCapture(N.pointerId)):(Math.abs(P)>z||Math.abs(F)>z)&&(x.current=null)}),onPointerUp:Sn(t.onPointerUp,N=>{const P=b.current,F=N.target;if(F.hasPointerCapture(N.pointerId)&&F.releasePointerCapture(N.pointerId),b.current=null,x.current=null,P){const L=N.currentTarget,A={originalEvent:N,delta:P};nO(P,m.swipeDirection,m.swipeThreshold)?jg(o7,h,A,{discrete:!0}):jg(r7,f,A,{discrete:!0}),L.addEventListener("click",O=>O.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),l7=t=>{const{__scopeToast:e,children:n,...r}=t,o=sx(Gp,e),[i,s]=R.useState(!1),[a,l]=R.useState(!1);return d7(()=>s(!0)),R.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:D.jsx(H3,{asChild:!0,children:D.jsx(ix,{...r,children:i&&D.jsxs(D.Fragment,{children:[o.label," ",n]})})})},u7="ToastTitle",J3=R.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return D.jsx(dr.div,{...r,ref:e})});J3.displayName=u7;var c7="ToastDescription",eB=R.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return D.jsx(dr.div,{...r,ref:e})});eB.displayName=c7;var tB="ToastAction",nB=R.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?D.jsx(oB,{altText:n,asChild:!0,children:D.jsx(kI,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${tB}\`. Expected non-empty \`string\`.`),null)});nB.displayName=tB;var rB="ToastClose",kI=R.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,o=s7(rB,n);return D.jsx(oB,{asChild:!0,children:D.jsx(dr.button,{type:"button",...r,ref:e,onClick:Sn(t.onClick,o.onClose)})})});kI.displayName=rB;var oB=R.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...o}=t;return D.jsx(dr.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...o,ref:e})});function iB(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),f7(r)){const o=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!o)if(i){const s=r.dataset.radixToastAnnounceAlt;s&&e.push(s)}else e.push(...iB(r))}}),e}function jg(t,e,n,{discrete:r}){const o=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),r?W3(o,i):o.dispatchEvent(i)}var nO=(t,e,n=0)=>{const r=Math.abs(t.x),o=Math.abs(t.y),i=r>o;return e==="left"||e==="right"?i&&r>n:!i&&o>n};function d7(t=()=>{}){const e=Ga(t);Ha(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function f7(t){return t.nodeType===t.ELEMENT_NODE}function h7(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function fw(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var p7=q3,sB=Y3,aB=Z3,lB=J3,uB=eB,cB=nB,dB=kI;function fB(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=fB(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Ze(){for(var t,e,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=fB(t))&&(r&&(r+=" "),r+=e);return r}const rO=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,oO=Ze,hB=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return oO(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:o,defaultVariants:i}=e,s=Object.keys(o).map(u=>{const c=n==null?void 0:n[u],d=i==null?void 0:i[u];if(c===null)return null;const f=rO(c)||rO(d);return o[u][f]}),a=n&&Object.entries(n).reduce((u,c)=>{let[d,f]=c;return f===void 0||(u[d]=f),u},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,c)=>{let{class:d,className:f,...h}=c;return Object.entries(h).every(p=>{let[m,g]=p;return Array.isArray(g)?g.includes({...i,...a}[m]):{...i,...a}[m]===g})?[...u,d,f]:u},[]);return oO(t,s,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m7=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),pB=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var g7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y7=R.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:i,iconNode:s,...a},l)=>R.createElement("svg",{ref:l,...g7,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:pB("lucide",o),...a},[...s.map(([u,c])=>R.createElement(u,c)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=(t,e)=>{const n=R.forwardRef(({className:r,...o},i)=>R.createElement(y7,{ref:i,iconNode:e,className:pB(`lucide-${m7(t)}`,r),...o}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v7=Tr("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iO=Tr("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x7=Tr("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b7=Tr("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w7=Tr("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sO=Tr("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S7=Tr("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C7=Tr("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=Tr("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $7=Tr("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k7=Tr("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lO=Tr("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mB=Tr("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I7=Tr("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gB=Tr("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),II="-",T7=t=>{const e=N7(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:s=>{const a=s.split(II);return a[0]===""&&a.length!==1&&a.shift(),yB(a,e)||E7(s)},getConflictingClassGroupIds:(s,a)=>{const l=n[s]||[];return a&&r[s]?[...l,...r[s]]:l}}},yB=(t,e)=>{var s;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),o=r?yB(t.slice(1),r):void 0;if(o)return o;if(e.validators.length===0)return;const i=t.join(II);return(s=e.validators.find(({validator:a})=>a(i)))==null?void 0:s.classGroupId},uO=/^\[(.+)\]$/,E7=t=>{if(uO.test(t)){const e=uO.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},N7=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return O7(Object.entries(t.classGroups),n).forEach(([i,s])=>{sC(s,r,i,e)}),r},sC=(t,e,n,r)=>{t.forEach(o=>{if(typeof o=="string"){const i=o===""?e:cO(e,o);i.classGroupId=n;return}if(typeof o=="function"){if(A7(o)){sC(o(r),e,n,r);return}e.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([i,s])=>{sC(s,cO(e,i),n,r)})})},cO=(t,e)=>{let n=t;return e.split(II).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},A7=t=>t.isThemeGetter,O7=(t,e)=>e?t.map(([n,r])=>{const o=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([s,a])=>[e+s,a])):i);return[n,o]}):t,_7=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const o=(i,s)=>{n.set(i,s),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let s=n.get(i);if(s!==void 0)return s;if((s=r.get(i))!==void 0)return o(i,s),s},set(i,s){n.has(i)?n.set(i,s):o(i,s)}}},vB="!",R7=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,o=e[0],i=e.length,s=a=>{const l=[];let u=0,c=0,d;for(let g=0;g<a.length;g++){let y=a[g];if(u===0){if(y===o&&(r||a.slice(g,g+i)===e)){l.push(a.slice(c,g)),c=g+i;continue}if(y==="/"){d=g;continue}}y==="["?u++:y==="]"&&u--}const f=l.length===0?a:a.substring(c),h=f.startsWith(vB),p=h?f.substring(1):f,m=d&&d>c?d-c:void 0;return{modifiers:l,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:m}};return n?a=>n({className:a,parseClassName:s}):s},P7=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},D7=t=>({cache:_7(t.cacheSize),parseClassName:R7(t),...T7(t)}),M7=/\s+/,F7=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o}=e,i=[],s=t.trim().split(M7);let a="";for(let l=s.length-1;l>=0;l-=1){const u=s[l],{modifiers:c,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:h}=n(u);let p=!!h,m=r(p?f.substring(0,h):f);if(!m){if(!p){a=u+(a.length>0?" "+a:a);continue}if(m=r(f),!m){a=u+(a.length>0?" "+a:a);continue}p=!1}const g=P7(c).join(":"),y=d?g+vB:g,v=y+m;if(i.includes(v))continue;i.push(v);const x=o(m,p);for(let b=0;b<x.length;++b){const w=x[b];i.push(y+w)}a=u+(a.length>0?" "+a:a)}return a};function L7(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=xB(e))&&(r&&(r+=" "),r+=n);return r}const xB=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=xB(t[r]))&&(n&&(n+=" "),n+=e);return n};function B7(t,...e){let n,r,o,i=s;function s(l){const u=e.reduce((c,d)=>d(c),t());return n=D7(u),r=n.cache.get,o=n.cache.set,i=a,a(l)}function a(l){const u=r(l);if(u)return u;const c=F7(l,n);return o(l,c),c}return function(){return i(L7.apply(null,arguments))}}const Rt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},bB=/^\[(?:([a-z-]+):)?(.+)\]$/i,z7=/^\d+\/\d+$/,j7=new Set(["px","full","screen"]),W7=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,V7=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,U7=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,G7=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,H7=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ps=t=>_c(t)||j7.has(t)||z7.test(t),sa=t=>Gd(t,"length",e9),_c=t=>!!t&&!Number.isNaN(Number(t)),hw=t=>Gd(t,"number",_c),_f=t=>!!t&&Number.isInteger(Number(t)),K7=t=>t.endsWith("%")&&_c(t.slice(0,-1)),je=t=>bB.test(t),aa=t=>W7.test(t),q7=new Set(["length","size","percentage"]),X7=t=>Gd(t,q7,wB),Y7=t=>Gd(t,"position",wB),Q7=new Set(["image","url"]),Z7=t=>Gd(t,Q7,n9),J7=t=>Gd(t,"",t9),Rf=()=>!0,Gd=(t,e,n)=>{const r=bB.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},e9=t=>V7.test(t)&&!U7.test(t),wB=()=>!1,t9=t=>G7.test(t),n9=t=>H7.test(t),r9=()=>{const t=Rt("colors"),e=Rt("spacing"),n=Rt("blur"),r=Rt("brightness"),o=Rt("borderColor"),i=Rt("borderRadius"),s=Rt("borderSpacing"),a=Rt("borderWidth"),l=Rt("contrast"),u=Rt("grayscale"),c=Rt("hueRotate"),d=Rt("invert"),f=Rt("gap"),h=Rt("gradientColorStops"),p=Rt("gradientColorStopPositions"),m=Rt("inset"),g=Rt("margin"),y=Rt("opacity"),v=Rt("padding"),x=Rt("saturate"),b=Rt("scale"),w=Rt("sepia"),S=Rt("skew"),$=Rt("space"),C=Rt("translate"),k=()=>["auto","contain","none"],I=()=>["auto","hidden","clip","visible","scroll"],T=()=>["auto",je,e],E=()=>[je,e],_=()=>["",ps,sa],N=()=>["auto",_c,je],P=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],F=()=>["solid","dashed","dotted","double","none"],L=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],A=()=>["start","end","center","between","around","evenly","stretch"],O=()=>["","0",je],j=()=>["auto","avoid","all","avoid-page","page","left","right","column"],V=()=>[_c,je];return{cacheSize:500,separator:":",theme:{colors:[Rf],spacing:[ps,sa],blur:["none","",aa,je],brightness:V(),borderColor:[t],borderRadius:["none","","full",aa,je],borderSpacing:E(),borderWidth:_(),contrast:V(),grayscale:O(),hueRotate:V(),invert:O(),gap:E(),gradientColorStops:[t],gradientColorStopPositions:[K7,sa],inset:T(),margin:T(),opacity:V(),padding:E(),saturate:V(),scale:V(),sepia:O(),skew:V(),space:E(),translate:E()},classGroups:{aspect:[{aspect:["auto","square","video",je]}],container:["container"],columns:[{columns:[aa]}],"break-after":[{"break-after":j()}],"break-before":[{"break-before":j()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...P(),je]}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",_f,je]}],basis:[{basis:T()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",je]}],grow:[{grow:O()}],shrink:[{shrink:O()}],order:[{order:["first","last","none",_f,je]}],"grid-cols":[{"grid-cols":[Rf]}],"col-start-end":[{col:["auto",{span:["full",_f,je]},je]}],"col-start":[{"col-start":N()}],"col-end":[{"col-end":N()}],"grid-rows":[{"grid-rows":[Rf]}],"row-start-end":[{row:["auto",{span:[_f,je]},je]}],"row-start":[{"row-start":N()}],"row-end":[{"row-end":N()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",je]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",je]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...A()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...A(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...A(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[$]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[$]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",je,e]}],"min-w":[{"min-w":[je,e,"min","max","fit"]}],"max-w":[{"max-w":[je,e,"none","full","min","max","fit","prose",{screen:[aa]},aa]}],h:[{h:[je,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[je,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[je,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[je,e,"auto","min","max","fit"]}],"font-size":[{text:["base",aa,sa]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",hw]}],"font-family":[{font:[Rf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",je]}],"line-clamp":[{"line-clamp":["none",_c,hw]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ps,je]}],"list-image":[{"list-image":["none",je]}],"list-style-type":[{list:["none","disc","decimal",je]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...F(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ps,sa]}],"underline-offset":[{"underline-offset":["auto",ps,je]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",je]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",je]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...P(),Y7]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",X7]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Z7]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...F(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:F()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...F()]}],"outline-offset":[{"outline-offset":[ps,je]}],"outline-w":[{outline:[ps,sa]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:_()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[ps,sa]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",aa,J7]}],"shadow-color":[{shadow:[Rf]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...L(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":L()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",aa,je]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[c]}],invert:[{invert:[d]}],saturate:[{saturate:[x]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[c]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",je]}],duration:[{duration:V()}],ease:[{ease:["linear","in","out","in-out",je]}],delay:[{delay:V()}],animate:[{animate:["none","spin","ping","pulse","bounce",je]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[_f,je]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",je]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",je]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",je]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ps,sa,hw]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},o9=B7(r9);function Er(...t){return o9(Ze(t))}const i9=p7,SB=R.forwardRef(({className:t,...e},n)=>D.jsx(sB,{ref:n,className:Er("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));SB.displayName=sB.displayName;const s9=hB("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),CB=R.forwardRef(({className:t,variant:e,...n},r)=>D.jsx(aB,{ref:r,className:Er(s9({variant:e}),t),...n}));CB.displayName=aB.displayName;const a9=R.forwardRef(({className:t,...e},n)=>D.jsx(cB,{ref:n,className:Er("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",t),...e}));a9.displayName=cB.displayName;const $B=R.forwardRef(({className:t,...e},n)=>D.jsx(dB,{ref:n,className:Er("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:D.jsx(I7,{className:"h-4 w-4"})}));$B.displayName=dB.displayName;const kB=R.forwardRef(({className:t,...e},n)=>D.jsx(lB,{ref:n,className:Er("text-sm font-semibold",t),...e}));kB.displayName=lB.displayName;const IB=R.forwardRef(({className:t,...e},n)=>D.jsx(uB,{ref:n,className:Er("text-sm opacity-90",t),...e}));IB.displayName=uB.displayName;function l9(){const{toasts:t}=wX();return D.jsxs(i9,{children:[t.map(function({id:e,title:n,description:r,action:o,...i}){return D.jsxs(CB,{...i,children:[D.jsxs("div",{className:"grid gap-1",children:[n&&D.jsx(kB,{children:n}),r&&D.jsx(IB,{children:r})]}),o,D.jsx($B,{})]},e)}),D.jsx(SB,{})]})}var dO=["light","dark"],u9="(prefers-color-scheme: dark)",c9=R.createContext(void 0),d9={setTheme:t=>{},themes:[]},f9=()=>{var t;return(t=R.useContext(c9))!=null?t:d9};R.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:o,defaultTheme:i,value:s,attrs:a,nonce:l})=>{let u=i==="system",c=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(p=>`'${p}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,d=o?dO.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(p,m=!1,g=!0)=>{let y=s?s[p]:p,v=m?p+"|| ''":`'${y}'`,x="";return o&&g&&!m&&dO.includes(p)&&(x+=`d.style.colorScheme = '${p}';`),n==="class"?m||y?x+=`c.add(${v})`:x+="null":y&&(x+=`d[s](n,${v})`),x},h=t?`!function(){${c}${f(t)}}()`:r?`!function(){try{${c}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${u9}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${s?`var x=${JSON.stringify(s)};`:""}${f(s?"x[e]":"e",!0)}}${u?"":"else{"+f(i,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${c}var e=localStorage.getItem('${e}');if(e){${s?`var x=${JSON.stringify(s)};`:""}${f(s?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${d}}catch(t){}}();`;return R.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:h}})});var h9=t=>{switch(t){case"success":return g9;case"info":return v9;case"warning":return y9;case"error":return x9;default:return null}},p9=Array(12).fill(0),m9=({visible:t,className:e})=>B.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},B.createElement("div",{className:"sonner-spinner"},p9.map((n,r)=>B.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),g9=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),y9=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),v9=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),x9=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),b9=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},B.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),B.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),w9=()=>{let[t,e]=B.useState(document.hidden);return B.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},aC=1,S9=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,o=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:aC++,i=this.toasts.find(a=>a.id===o),s=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),i?this.toasts=this.toasts.map(a=>a.id===o?(this.publish({...a,...t,id:o,title:n}),{...a,...t,id:o,dismissible:s,title:n}):a):this.addToast({title:n,...r,dismissible:s,id:o}),o},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),o=n!==void 0,i,s=r.then(async l=>{if(i=["resolve",l],B.isValidElement(l))o=!1,this.create({id:n,type:"default",message:l});else if($9(l)&&!l.ok){o=!1;let u=typeof e.error=="function"?await e.error(`HTTP error! status: ${l.status}`):e.error,c=typeof e.description=="function"?await e.description(`HTTP error! status: ${l.status}`):e.description;this.create({id:n,type:"error",message:u,description:c})}else if(e.success!==void 0){o=!1;let u=typeof e.success=="function"?await e.success(l):e.success,c=typeof e.description=="function"?await e.description(l):e.description;this.create({id:n,type:"success",message:u,description:c})}}).catch(async l=>{if(i=["reject",l],e.error!==void 0){o=!1;let u=typeof e.error=="function"?await e.error(l):e.error,c=typeof e.description=="function"?await e.description(l):e.description;this.create({id:n,type:"error",message:u,description:c})}}).finally(()=>{var l;o&&(this.dismiss(n),n=void 0),(l=e.finally)==null||l.call(e)}),a=()=>new Promise((l,u)=>s.then(()=>i[0]==="reject"?u(i[1]):l(i[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:a}:Object.assign(n,{unwrap:a})},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||aC++;return this.create({jsx:t(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},_r=new S9,C9=(t,e)=>{let n=(e==null?void 0:e.id)||aC++;return _r.addToast({title:t,...e,id:n}),n},$9=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",k9=C9,I9=()=>_r.toasts,T9=()=>_r.getActiveToasts(),Pi=Object.assign(k9,{success:_r.success,info:_r.info,warning:_r.warning,error:_r.error,custom:_r.custom,message:_r.message,promise:_r.promise,dismiss:_r.dismiss,loading:_r.loading},{getHistory:I9,getToasts:T9});function E9(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}E9(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Wg(t){return t.label!==void 0}var N9=3,A9="32px",O9="16px",fO=4e3,_9=356,R9=14,P9=20,D9=200;function ei(...t){return t.filter(Boolean).join(" ")}function M9(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var F9=t=>{var e,n,r,o,i,s,a,l,u,c,d;let{invert:f,toast:h,unstyled:p,interacting:m,setHeights:g,visibleToasts:y,heights:v,index:x,toasts:b,expanded:w,removeToast:S,defaultRichColors:$,closeButton:C,style:k,cancelButtonStyle:I,actionButtonStyle:T,className:E="",descriptionClassName:_="",duration:N,position:P,gap:F,loadingIcon:L,expandByDefault:A,classNames:O,icons:j,closeButtonAriaLabel:V="Close toast",pauseWhenPageIsHidden:z}=t,[U,Z]=B.useState(null),[te,se]=B.useState(null),[ue,ce]=B.useState(!1),[Y,le]=B.useState(!1),[oe,J]=B.useState(!1),[be,me]=B.useState(!1),[ve,pe]=B.useState(!1),[Ee,Ce]=B.useState(0),[De,Me]=B.useState(0),mt=B.useRef(h.duration||N||fO),Ye=B.useRef(null),Ot=B.useRef(null),rt=x===0,_t=x+1<=y,We=h.type,ct=h.dismissible!==!1,ln=h.className||"",Ko=h.descriptionClassName||"",qo=B.useMemo(()=>v.findIndex(Le=>Le.toastId===h.id)||0,[v,h.id]),po=B.useMemo(()=>{var Le;return(Le=h.closeButton)!=null?Le:C},[h.closeButton,C]),hr=B.useMemo(()=>h.duration||N||fO,[h.duration,N]),Ar=B.useRef(0),Xo=B.useRef(0),wg=B.useRef(0),Ju=B.useRef(null),[z8,j8]=P.split("-"),zN=B.useMemo(()=>v.reduce((Le,xt,zt)=>zt>=qo?Le:Le+xt.height,0),[v,qo]),jN=w9(),W8=h.invert||f,M1=We==="loading";Xo.current=B.useMemo(()=>qo*F+zN,[qo,zN]),B.useEffect(()=>{mt.current=hr},[hr]),B.useEffect(()=>{ce(!0)},[]),B.useEffect(()=>{let Le=Ot.current;if(Le){let xt=Le.getBoundingClientRect().height;return Me(xt),g(zt=>[{toastId:h.id,height:xt,position:h.position},...zt]),()=>g(zt=>zt.filter(Yo=>Yo.toastId!==h.id))}},[g,h.id]),B.useLayoutEffect(()=>{if(!ue)return;let Le=Ot.current,xt=Le.style.height;Le.style.height="auto";let zt=Le.getBoundingClientRect().height;Le.style.height=xt,Me(zt),g(Yo=>Yo.find(Qo=>Qo.toastId===h.id)?Yo.map(Qo=>Qo.toastId===h.id?{...Qo,height:zt}:Qo):[{toastId:h.id,height:zt,position:h.position},...Yo])},[ue,h.title,h.description,g,h.id]);let na=B.useCallback(()=>{le(!0),Ce(Xo.current),g(Le=>Le.filter(xt=>xt.toastId!==h.id)),setTimeout(()=>{S(h)},D9)},[h,S,g,Xo]);B.useEffect(()=>{if(h.promise&&We==="loading"||h.duration===1/0||h.type==="loading")return;let Le;return w||m||z&&jN?(()=>{if(wg.current<Ar.current){let xt=new Date().getTime()-Ar.current;mt.current=mt.current-xt}wg.current=new Date().getTime()})():mt.current!==1/0&&(Ar.current=new Date().getTime(),Le=setTimeout(()=>{var xt;(xt=h.onAutoClose)==null||xt.call(h,h),na()},mt.current)),()=>clearTimeout(Le)},[w,m,h,We,z,jN,na]),B.useEffect(()=>{h.delete&&na()},[na,h.delete]);function V8(){var Le,xt,zt;return j!=null&&j.loading?B.createElement("div",{className:ei(O==null?void 0:O.loader,(Le=h==null?void 0:h.classNames)==null?void 0:Le.loader,"sonner-loader"),"data-visible":We==="loading"},j.loading):L?B.createElement("div",{className:ei(O==null?void 0:O.loader,(xt=h==null?void 0:h.classNames)==null?void 0:xt.loader,"sonner-loader"),"data-visible":We==="loading"},L):B.createElement(m9,{className:ei(O==null?void 0:O.loader,(zt=h==null?void 0:h.classNames)==null?void 0:zt.loader),visible:We==="loading"})}return B.createElement("li",{tabIndex:0,ref:Ot,className:ei(E,ln,O==null?void 0:O.toast,(e=h==null?void 0:h.classNames)==null?void 0:e.toast,O==null?void 0:O.default,O==null?void 0:O[We],(n=h==null?void 0:h.classNames)==null?void 0:n[We]),"data-sonner-toast":"","data-rich-colors":(r=h.richColors)!=null?r:$,"data-styled":!(h.jsx||h.unstyled||p),"data-mounted":ue,"data-promise":!!h.promise,"data-swiped":ve,"data-removed":Y,"data-visible":_t,"data-y-position":z8,"data-x-position":j8,"data-index":x,"data-front":rt,"data-swiping":oe,"data-dismissible":ct,"data-type":We,"data-invert":W8,"data-swipe-out":be,"data-swipe-direction":te,"data-expanded":!!(w||A&&ue),style:{"--index":x,"--toasts-before":x,"--z-index":b.length-x,"--offset":`${Y?Ee:Xo.current}px`,"--initial-height":A?"auto":`${De}px`,...k,...h.style},onDragEnd:()=>{J(!1),Z(null),Ju.current=null},onPointerDown:Le=>{M1||!ct||(Ye.current=new Date,Ce(Xo.current),Le.target.setPointerCapture(Le.pointerId),Le.target.tagName!=="BUTTON"&&(J(!0),Ju.current={x:Le.clientX,y:Le.clientY}))},onPointerUp:()=>{var Le,xt,zt,Yo;if(be||!ct)return;Ju.current=null;let Qo=Number(((Le=Ot.current)==null?void 0:Le.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),ra=Number(((xt=Ot.current)==null?void 0:xt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),$l=new Date().getTime()-((zt=Ye.current)==null?void 0:zt.getTime()),Zo=U==="x"?Qo:ra,oa=Math.abs(Zo)/$l;if(Math.abs(Zo)>=P9||oa>.11){Ce(Xo.current),(Yo=h.onDismiss)==null||Yo.call(h,h),se(U==="x"?Qo>0?"right":"left":ra>0?"down":"up"),na(),me(!0),pe(!1);return}J(!1),Z(null)},onPointerMove:Le=>{var xt,zt,Yo,Qo;if(!Ju.current||!ct||((xt=window.getSelection())==null?void 0:xt.toString().length)>0)return;let ra=Le.clientY-Ju.current.y,$l=Le.clientX-Ju.current.x,Zo=(zt=t.swipeDirections)!=null?zt:M9(P);!U&&(Math.abs($l)>1||Math.abs(ra)>1)&&Z(Math.abs($l)>Math.abs(ra)?"x":"y");let oa={x:0,y:0};U==="y"?(Zo.includes("top")||Zo.includes("bottom"))&&(Zo.includes("top")&&ra<0||Zo.includes("bottom")&&ra>0)&&(oa.y=ra):U==="x"&&(Zo.includes("left")||Zo.includes("right"))&&(Zo.includes("left")&&$l<0||Zo.includes("right")&&$l>0)&&(oa.x=$l),(Math.abs(oa.x)>0||Math.abs(oa.y)>0)&&pe(!0),(Yo=Ot.current)==null||Yo.style.setProperty("--swipe-amount-x",`${oa.x}px`),(Qo=Ot.current)==null||Qo.style.setProperty("--swipe-amount-y",`${oa.y}px`)}},po&&!h.jsx?B.createElement("button",{"aria-label":V,"data-disabled":M1,"data-close-button":!0,onClick:M1||!ct?()=>{}:()=>{var Le;na(),(Le=h.onDismiss)==null||Le.call(h,h)},className:ei(O==null?void 0:O.closeButton,(o=h==null?void 0:h.classNames)==null?void 0:o.closeButton)},(i=j==null?void 0:j.close)!=null?i:b9):null,h.jsx||R.isValidElement(h.title)?h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title:B.createElement(B.Fragment,null,We||h.icon||h.promise?B.createElement("div",{"data-icon":"",className:ei(O==null?void 0:O.icon,(s=h==null?void 0:h.classNames)==null?void 0:s.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||V8():null,h.type!=="loading"?h.icon||(j==null?void 0:j[We])||h9(We):null):null,B.createElement("div",{"data-content":"",className:ei(O==null?void 0:O.content,(a=h==null?void 0:h.classNames)==null?void 0:a.content)},B.createElement("div",{"data-title":"",className:ei(O==null?void 0:O.title,(l=h==null?void 0:h.classNames)==null?void 0:l.title)},typeof h.title=="function"?h.title():h.title),h.description?B.createElement("div",{"data-description":"",className:ei(_,Ko,O==null?void 0:O.description,(u=h==null?void 0:h.classNames)==null?void 0:u.description)},typeof h.description=="function"?h.description():h.description):null),R.isValidElement(h.cancel)?h.cancel:h.cancel&&Wg(h.cancel)?B.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||I,onClick:Le=>{var xt,zt;Wg(h.cancel)&&ct&&((zt=(xt=h.cancel).onClick)==null||zt.call(xt,Le),na())},className:ei(O==null?void 0:O.cancelButton,(c=h==null?void 0:h.classNames)==null?void 0:c.cancelButton)},h.cancel.label):null,R.isValidElement(h.action)?h.action:h.action&&Wg(h.action)?B.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||T,onClick:Le=>{var xt,zt;Wg(h.action)&&((zt=(xt=h.action).onClick)==null||zt.call(xt,Le),!Le.defaultPrevented&&na())},className:ei(O==null?void 0:O.actionButton,(d=h==null?void 0:h.classNames)==null?void 0:d.actionButton)},h.action.label):null))};function hO(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function L9(t,e){let n={};return[t,e].forEach((r,o)=>{let i=o===1,s=i?"--mobile-offset":"--offset",a=i?O9:A9;function l(u){["top","right","bottom","left"].forEach(c=>{n[`${s}-${c}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${s}-${u}`]=a:n[`${s}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):l(a)}),n}var B9=R.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:o=["altKey","KeyT"],expand:i,closeButton:s,className:a,offset:l,mobileOffset:u,theme:c="light",richColors:d,duration:f,style:h,visibleToasts:p=N9,toastOptions:m,dir:g=hO(),gap:y=R9,loadingIcon:v,icons:x,containerAriaLabel:b="Notifications",pauseWhenPageIsHidden:w}=t,[S,$]=B.useState([]),C=B.useMemo(()=>Array.from(new Set([r].concat(S.filter(z=>z.position).map(z=>z.position)))),[S,r]),[k,I]=B.useState([]),[T,E]=B.useState(!1),[_,N]=B.useState(!1),[P,F]=B.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),L=B.useRef(null),A=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),O=B.useRef(null),j=B.useRef(!1),V=B.useCallback(z=>{$(U=>{var Z;return(Z=U.find(te=>te.id===z.id))!=null&&Z.delete||_r.dismiss(z.id),U.filter(({id:te})=>te!==z.id)})},[]);return B.useEffect(()=>_r.subscribe(z=>{if(z.dismiss){$(U=>U.map(Z=>Z.id===z.id?{...Z,delete:!0}:Z));return}setTimeout(()=>{L3.flushSync(()=>{$(U=>{let Z=U.findIndex(te=>te.id===z.id);return Z!==-1?[...U.slice(0,Z),{...U[Z],...z},...U.slice(Z+1)]:[z,...U]})})})}),[]),B.useEffect(()=>{if(c!=="system"){F(c);return}if(c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?F("dark"):F("light")),typeof window>"u")return;let z=window.matchMedia("(prefers-color-scheme: dark)");try{z.addEventListener("change",({matches:U})=>{F(U?"dark":"light")})}catch{z.addListener(({matches:Z})=>{try{F(Z?"dark":"light")}catch(te){console.error(te)}})}},[c]),B.useEffect(()=>{S.length<=1&&E(!1)},[S]),B.useEffect(()=>{let z=U=>{var Z,te;o.every(se=>U[se]||U.code===se)&&(E(!0),(Z=L.current)==null||Z.focus()),U.code==="Escape"&&(document.activeElement===L.current||(te=L.current)!=null&&te.contains(document.activeElement))&&E(!1)};return document.addEventListener("keydown",z),()=>document.removeEventListener("keydown",z)},[o]),B.useEffect(()=>{if(L.current)return()=>{O.current&&(O.current.focus({preventScroll:!0}),O.current=null,j.current=!1)}},[L.current]),B.createElement("section",{ref:e,"aria-label":`${b} ${A}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},C.map((z,U)=>{var Z;let[te,se]=z.split("-");return S.length?B.createElement("ol",{key:z,dir:g==="auto"?hO():g,tabIndex:-1,ref:L,className:a,"data-sonner-toaster":!0,"data-theme":P,"data-y-position":te,"data-lifted":T&&S.length>1&&!i,"data-x-position":se,style:{"--front-toast-height":`${((Z=k[0])==null?void 0:Z.height)||0}px`,"--width":`${_9}px`,"--gap":`${y}px`,...h,...L9(l,u)},onBlur:ue=>{j.current&&!ue.currentTarget.contains(ue.relatedTarget)&&(j.current=!1,O.current&&(O.current.focus({preventScroll:!0}),O.current=null))},onFocus:ue=>{ue.target instanceof HTMLElement&&ue.target.dataset.dismissible==="false"||j.current||(j.current=!0,O.current=ue.relatedTarget)},onMouseEnter:()=>E(!0),onMouseMove:()=>E(!0),onMouseLeave:()=>{_||E(!1)},onDragEnd:()=>E(!1),onPointerDown:ue=>{ue.target instanceof HTMLElement&&ue.target.dataset.dismissible==="false"||N(!0)},onPointerUp:()=>N(!1)},S.filter(ue=>!ue.position&&U===0||ue.position===z).map((ue,ce)=>{var Y,le;return B.createElement(F9,{key:ue.id,icons:x,index:ce,toast:ue,defaultRichColors:d,duration:(Y=m==null?void 0:m.duration)!=null?Y:f,className:m==null?void 0:m.className,descriptionClassName:m==null?void 0:m.descriptionClassName,invert:n,visibleToasts:p,closeButton:(le=m==null?void 0:m.closeButton)!=null?le:s,interacting:_,position:z,style:m==null?void 0:m.style,unstyled:m==null?void 0:m.unstyled,classNames:m==null?void 0:m.classNames,cancelButtonStyle:m==null?void 0:m.cancelButtonStyle,actionButtonStyle:m==null?void 0:m.actionButtonStyle,removeToast:V,toasts:S.filter(oe=>oe.position==ue.position),heights:k.filter(oe=>oe.position==ue.position),setHeights:I,expandByDefault:i,gap:y,loadingIcon:v,expanded:T,pauseWhenPageIsHidden:w,swipeDirections:t.swipeDirections})})):null}))});const z9=({...t})=>{const{theme:e="system"}=f9();return D.jsx(B9,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})},j9=["top","right","bottom","left"],Ka=Math.min,Zr=Math.max,av=Math.round,Vg=Math.floor,Yi=t=>({x:t,y:t}),W9={left:"right",right:"left",bottom:"top",top:"bottom"},V9={start:"end",end:"start"};function lC(t,e,n){return Zr(t,Ka(e,n))}function Ls(t,e){return typeof t=="function"?t(e):t}function Bs(t){return t.split("-")[0]}function Hd(t){return t.split("-")[1]}function TI(t){return t==="x"?"y":"x"}function EI(t){return t==="y"?"height":"width"}const U9=new Set(["top","bottom"]);function Gi(t){return U9.has(Bs(t))?"y":"x"}function NI(t){return TI(Gi(t))}function G9(t,e,n){n===void 0&&(n=!1);const r=Hd(t),o=NI(t),i=EI(o);let s=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(s=lv(s)),[s,lv(s)]}function H9(t){const e=lv(t);return[uC(t),e,uC(e)]}function uC(t){return t.replace(/start|end/g,e=>V9[e])}const pO=["left","right"],mO=["right","left"],K9=["top","bottom"],q9=["bottom","top"];function X9(t,e,n){switch(t){case"top":case"bottom":return n?e?mO:pO:e?pO:mO;case"left":case"right":return e?K9:q9;default:return[]}}function Y9(t,e,n,r){const o=Hd(t);let i=X9(Bs(t),n==="start",r);return o&&(i=i.map(s=>s+"-"+o),e&&(i=i.concat(i.map(uC)))),i}function lv(t){return t.replace(/left|right|bottom|top/g,e=>W9[e])}function Q9(t){return{top:0,right:0,bottom:0,left:0,...t}}function TB(t){return typeof t!="number"?Q9(t):{top:t,right:t,bottom:t,left:t}}function uv(t){const{x:e,y:n,width:r,height:o}=t;return{width:r,height:o,top:n,left:e,right:e+r,bottom:n+o,x:e,y:n}}function gO(t,e,n){let{reference:r,floating:o}=t;const i=Gi(e),s=NI(e),a=EI(s),l=Bs(e),u=i==="y",c=r.x+r.width/2-o.width/2,d=r.y+r.height/2-o.height/2,f=r[a]/2-o[a]/2;let h;switch(l){case"top":h={x:c,y:r.y-o.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-o.width,y:d};break;default:h={x:r.x,y:r.y}}switch(Hd(e)){case"start":h[s]-=f*(n&&u?-1:1);break;case"end":h[s]+=f*(n&&u?-1:1);break}return h}const Z9=async(t,e,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:s}=n,a=i.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e));let u=await s.getElementRects({reference:t,floating:e,strategy:o}),{x:c,y:d}=gO(u,r,l),f=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:x,data:b,reset:w}=await y({x:c,y:d,initialPlacement:r,placement:f,strategy:o,middlewareData:h,rects:u,platform:s,elements:{reference:t,floating:e}});c=v??c,d=x??d,h={...h,[g]:{...h[g],...b}},w&&p<=50&&(p++,typeof w=="object"&&(w.placement&&(f=w.placement),w.rects&&(u=w.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:o}):w.rects),{x:c,y:d}=gO(u,f,l)),m=-1)}return{x:c,y:d,placement:f,strategy:o,middlewareData:h}};async function Bh(t,e){var n;e===void 0&&(e={});const{x:r,y:o,platform:i,rects:s,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=Ls(e,t),p=TB(h),g=a[f?d==="floating"?"reference":"floating":d],y=uv(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(g)))==null||n?g:g.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),v=d==="floating"?{x:r,y:o,width:s.floating.width,height:s.floating.height}:s.reference,x=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),b=await(i.isElement==null?void 0:i.isElement(x))?await(i.getScale==null?void 0:i.getScale(x))||{x:1,y:1}:{x:1,y:1},w=uv(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:x,strategy:l}):v);return{top:(y.top-w.top+p.top)/b.y,bottom:(w.bottom-y.bottom+p.bottom)/b.y,left:(y.left-w.left+p.left)/b.x,right:(w.right-y.right+p.right)/b.x}}const J9=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:o,rects:i,platform:s,elements:a,middlewareData:l}=e,{element:u,padding:c=0}=Ls(t,e)||{};if(u==null)return{};const d=TB(c),f={x:n,y:r},h=NI(o),p=EI(h),m=await s.getDimensions(u),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",x=g?"clientHeight":"clientWidth",b=i.reference[p]+i.reference[h]-f[h]-i.floating[p],w=f[h]-i.reference[h],S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(u));let $=S?S[x]:0;(!$||!await(s.isElement==null?void 0:s.isElement(S)))&&($=a.floating[x]||i.floating[p]);const C=b/2-w/2,k=$/2-m[p]/2-1,I=Ka(d[y],k),T=Ka(d[v],k),E=I,_=$-m[p]-T,N=$/2-m[p]/2+C,P=lC(E,N,_),F=!l.arrow&&Hd(o)!=null&&N!==P&&i.reference[p]/2-(N<E?I:T)-m[p]/2<0,L=F?N<E?N-E:N-_:0;return{[h]:f[h]+L,data:{[h]:P,centerOffset:N-P-L,...F&&{alignmentOffset:L}},reset:F}}}),eY=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:o,middlewareData:i,rects:s,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=Ls(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const y=Bs(o),v=Gi(a),x=Bs(a)===a,b=await(l.isRTL==null?void 0:l.isRTL(u.floating)),w=f||(x||!m?[lv(a)]:H9(a)),S=p!=="none";!f&&S&&w.push(...Y9(a,m,p,b));const $=[a,...w],C=await Bh(e,g),k=[];let I=((r=i.flip)==null?void 0:r.overflows)||[];if(c&&k.push(C[y]),d){const N=G9(o,s,b);k.push(C[N[0]],C[N[1]])}if(I=[...I,{placement:o,overflows:k}],!k.every(N=>N<=0)){var T,E;const N=(((T=i.flip)==null?void 0:T.index)||0)+1,P=$[N];if(P&&(!(d==="alignment"?v!==Gi(P):!1)||I.every(A=>A.overflows[0]>0&&Gi(A.placement)===v)))return{data:{index:N,overflows:I},reset:{placement:P}};let F=(E=I.filter(L=>L.overflows[0]<=0).sort((L,A)=>L.overflows[1]-A.overflows[1])[0])==null?void 0:E.placement;if(!F)switch(h){case"bestFit":{var _;const L=(_=I.filter(A=>{if(S){const O=Gi(A.placement);return O===v||O==="y"}return!0}).map(A=>[A.placement,A.overflows.filter(O=>O>0).reduce((O,j)=>O+j,0)]).sort((A,O)=>A[1]-O[1])[0])==null?void 0:_[0];L&&(F=L);break}case"initialPlacement":F=a;break}if(o!==F)return{reset:{placement:F}}}return{}}}};function yO(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function vO(t){return j9.some(e=>t[e]>=0)}const tY=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...o}=Ls(t,e);switch(r){case"referenceHidden":{const i=await Bh(e,{...o,elementContext:"reference"}),s=yO(i,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:vO(s)}}}case"escaped":{const i=await Bh(e,{...o,altBoundary:!0}),s=yO(i,n.floating);return{data:{escapedOffsets:s,escaped:vO(s)}}}default:return{}}}}},EB=new Set(["left","top"]);async function nY(t,e){const{placement:n,platform:r,elements:o}=t,i=await(r.isRTL==null?void 0:r.isRTL(o.floating)),s=Bs(n),a=Hd(n),l=Gi(n)==="y",u=EB.has(s)?-1:1,c=i&&l?-1:1,d=Ls(e,t);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),l?{x:h*c,y:f*u}:{x:f*u,y:h*c}}const rY=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:o,y:i,placement:s,middlewareData:a}=e,l=await nY(e,t);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:o+l.x,y:i+l.y,data:{...l,placement:s}}}}},oY=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:o}=e,{mainAxis:i=!0,crossAxis:s=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...l}=Ls(t,e),u={x:n,y:r},c=await Bh(e,l),d=Gi(Bs(o)),f=TI(d);let h=u[f],p=u[d];if(i){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=h+c[g],x=h-c[y];h=lC(v,h,x)}if(s){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=p+c[g],x=p-c[y];p=lC(v,p,x)}const m=a.fn({...e,[f]:h,[d]:p});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[f]:i,[d]:s}}}}}},iY=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:o,rects:i,middlewareData:s}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=Ls(t,e),c={x:n,y:r},d=Gi(o),f=TI(d);let h=c[f],p=c[d];const m=Ls(a,e),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const x=f==="y"?"height":"width",b=i.reference[f]-i.floating[x]+g.mainAxis,w=i.reference[f]+i.reference[x]-g.mainAxis;h<b?h=b:h>w&&(h=w)}if(u){var y,v;const x=f==="y"?"width":"height",b=EB.has(Bs(o)),w=i.reference[d]-i.floating[x]+(b&&((y=s.offset)==null?void 0:y[d])||0)+(b?0:g.crossAxis),S=i.reference[d]+i.reference[x]+(b?0:((v=s.offset)==null?void 0:v[d])||0)-(b?g.crossAxis:0);p<w?p=w:p>S&&(p=S)}return{[f]:h,[d]:p}}}},sY=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:o,rects:i,platform:s,elements:a}=e,{apply:l=()=>{},...u}=Ls(t,e),c=await Bh(e,u),d=Bs(o),f=Hd(o),h=Gi(o)==="y",{width:p,height:m}=i.floating;let g,y;d==="top"||d==="bottom"?(g=d,y=f===(await(s.isRTL==null?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(y=d,g=f==="end"?"top":"bottom");const v=m-c.top-c.bottom,x=p-c.left-c.right,b=Ka(m-c[g],v),w=Ka(p-c[y],x),S=!e.middlewareData.shift;let $=b,C=w;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(C=x),(r=e.middlewareData.shift)!=null&&r.enabled.y&&($=v),S&&!f){const I=Zr(c.left,0),T=Zr(c.right,0),E=Zr(c.top,0),_=Zr(c.bottom,0);h?C=p-2*(I!==0||T!==0?I+T:Zr(c.left,c.right)):$=m-2*(E!==0||_!==0?E+_:Zr(c.top,c.bottom))}await l({...e,availableWidth:C,availableHeight:$});const k=await s.getDimensions(a.floating);return p!==k.width||m!==k.height?{reset:{rects:!0}}:{}}}};function ax(){return typeof window<"u"}function Kd(t){return NB(t)?(t.nodeName||"").toLowerCase():"#document"}function oo(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ds(t){var e;return(e=(NB(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function NB(t){return ax()?t instanceof Node||t instanceof oo(t).Node:!1}function ki(t){return ax()?t instanceof Element||t instanceof oo(t).Element:!1}function os(t){return ax()?t instanceof HTMLElement||t instanceof oo(t).HTMLElement:!1}function xO(t){return!ax()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof oo(t).ShadowRoot}const aY=new Set(["inline","contents"]);function Hp(t){const{overflow:e,overflowX:n,overflowY:r,display:o}=Ii(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!aY.has(o)}const lY=new Set(["table","td","th"]);function uY(t){return lY.has(Kd(t))}const cY=[":popover-open",":modal"];function lx(t){return cY.some(e=>{try{return t.matches(e)}catch{return!1}})}const dY=["transform","translate","scale","rotate","perspective"],fY=["transform","translate","scale","rotate","perspective","filter"],hY=["paint","layout","strict","content"];function AI(t){const e=OI(),n=ki(t)?Ii(t):t;return dY.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||fY.some(r=>(n.willChange||"").includes(r))||hY.some(r=>(n.contain||"").includes(r))}function pY(t){let e=qa(t);for(;os(e)&&!id(e);){if(AI(e))return e;if(lx(e))return null;e=qa(e)}return null}function OI(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const mY=new Set(["html","body","#document"]);function id(t){return mY.has(Kd(t))}function Ii(t){return oo(t).getComputedStyle(t)}function ux(t){return ki(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function qa(t){if(Kd(t)==="html")return t;const e=t.assignedSlot||t.parentNode||xO(t)&&t.host||ds(t);return xO(e)?e.host:e}function AB(t){const e=qa(t);return id(e)?t.ownerDocument?t.ownerDocument.body:t.body:os(e)&&Hp(e)?e:AB(e)}function zh(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const o=AB(t),i=o===((r=t.ownerDocument)==null?void 0:r.body),s=oo(o);if(i){const a=cC(s);return e.concat(s,s.visualViewport||[],Hp(o)?o:[],a&&n?zh(a):[])}return e.concat(o,zh(o,[],n))}function cC(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function OB(t){const e=Ii(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const o=os(t),i=o?t.offsetWidth:n,s=o?t.offsetHeight:r,a=av(n)!==i||av(r)!==s;return a&&(n=i,r=s),{width:n,height:r,$:a}}function _I(t){return ki(t)?t:t.contextElement}function Rc(t){const e=_I(t);if(!os(e))return Yi(1);const n=e.getBoundingClientRect(),{width:r,height:o,$:i}=OB(e);let s=(i?av(n.width):n.width)/r,a=(i?av(n.height):n.height)/o;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const gY=Yi(0);function _B(t){const e=oo(t);return!OI()||!e.visualViewport?gY:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function yY(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==oo(t)?!1:e}function fu(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const o=t.getBoundingClientRect(),i=_I(t);let s=Yi(1);e&&(r?ki(r)&&(s=Rc(r)):s=Rc(t));const a=yY(i,n,r)?_B(i):Yi(0);let l=(o.left+a.x)/s.x,u=(o.top+a.y)/s.y,c=o.width/s.x,d=o.height/s.y;if(i){const f=oo(i),h=r&&ki(r)?oo(r):r;let p=f,m=cC(p);for(;m&&r&&h!==p;){const g=Rc(m),y=m.getBoundingClientRect(),v=Ii(m),x=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,b=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;l*=g.x,u*=g.y,c*=g.x,d*=g.y,l+=x,u+=b,p=oo(m),m=cC(p)}}return uv({width:c,height:d,x:l,y:u})}function RI(t,e){const n=ux(t).scrollLeft;return e?e.left+n:fu(ds(t)).left+n}function RB(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),o=r.left+e.scrollLeft-(n?0:RI(t,r)),i=r.top+e.scrollTop;return{x:o,y:i}}function vY(t){let{elements:e,rect:n,offsetParent:r,strategy:o}=t;const i=o==="fixed",s=ds(r),a=e?lx(e.floating):!1;if(r===s||a&&i)return n;let l={scrollLeft:0,scrollTop:0},u=Yi(1);const c=Yi(0),d=os(r);if((d||!d&&!i)&&((Kd(r)!=="body"||Hp(s))&&(l=ux(r)),os(r))){const h=fu(r);u=Rc(r),c.x=h.x+r.clientLeft,c.y=h.y+r.clientTop}const f=s&&!d&&!i?RB(s,l,!0):Yi(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+c.x+f.x,y:n.y*u.y-l.scrollTop*u.y+c.y+f.y}}function xY(t){return Array.from(t.getClientRects())}function bY(t){const e=ds(t),n=ux(t),r=t.ownerDocument.body,o=Zr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Zr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+RI(t);const a=-n.scrollTop;return Ii(r).direction==="rtl"&&(s+=Zr(e.clientWidth,r.clientWidth)-o),{width:o,height:i,x:s,y:a}}function wY(t,e){const n=oo(t),r=ds(t),o=n.visualViewport;let i=r.clientWidth,s=r.clientHeight,a=0,l=0;if(o){i=o.width,s=o.height;const u=OI();(!u||u&&e==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}return{width:i,height:s,x:a,y:l}}const SY=new Set(["absolute","fixed"]);function CY(t,e){const n=fu(t,!0,e==="fixed"),r=n.top+t.clientTop,o=n.left+t.clientLeft,i=os(t)?Rc(t):Yi(1),s=t.clientWidth*i.x,a=t.clientHeight*i.y,l=o*i.x,u=r*i.y;return{width:s,height:a,x:l,y:u}}function bO(t,e,n){let r;if(e==="viewport")r=wY(t,n);else if(e==="document")r=bY(ds(t));else if(ki(e))r=CY(e,n);else{const o=_B(t);r={x:e.x-o.x,y:e.y-o.y,width:e.width,height:e.height}}return uv(r)}function PB(t,e){const n=qa(t);return n===e||!ki(n)||id(n)?!1:Ii(n).position==="fixed"||PB(n,e)}function $Y(t,e){const n=e.get(t);if(n)return n;let r=zh(t,[],!1).filter(a=>ki(a)&&Kd(a)!=="body"),o=null;const i=Ii(t).position==="fixed";let s=i?qa(t):t;for(;ki(s)&&!id(s);){const a=Ii(s),l=AI(s);!l&&a.position==="fixed"&&(o=null),(i?!l&&!o:!l&&a.position==="static"&&!!o&&SY.has(o.position)||Hp(s)&&!l&&PB(t,s))?r=r.filter(c=>c!==s):o=a,s=qa(s)}return e.set(t,r),r}function kY(t){let{element:e,boundary:n,rootBoundary:r,strategy:o}=t;const s=[...n==="clippingAncestors"?lx(e)?[]:$Y(e,this._c):[].concat(n),r],a=s[0],l=s.reduce((u,c)=>{const d=bO(e,c,o);return u.top=Zr(d.top,u.top),u.right=Ka(d.right,u.right),u.bottom=Ka(d.bottom,u.bottom),u.left=Zr(d.left,u.left),u},bO(e,a,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function IY(t){const{width:e,height:n}=OB(t);return{width:e,height:n}}function TY(t,e,n){const r=os(e),o=ds(e),i=n==="fixed",s=fu(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Yi(0);function u(){l.x=RI(o)}if(r||!r&&!i)if((Kd(e)!=="body"||Hp(o))&&(a=ux(e)),r){const h=fu(e,!0,i,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else o&&u();i&&!r&&o&&u();const c=o&&!r&&!i?RB(o,a):Yi(0),d=s.left+a.scrollLeft-l.x-c.x,f=s.top+a.scrollTop-l.y-c.y;return{x:d,y:f,width:s.width,height:s.height}}function pw(t){return Ii(t).position==="static"}function wO(t,e){if(!os(t)||Ii(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ds(t)===n&&(n=n.ownerDocument.body),n}function DB(t,e){const n=oo(t);if(lx(t))return n;if(!os(t)){let o=qa(t);for(;o&&!id(o);){if(ki(o)&&!pw(o))return o;o=qa(o)}return n}let r=wO(t,e);for(;r&&uY(r)&&pw(r);)r=wO(r,e);return r&&id(r)&&pw(r)&&!AI(r)?n:r||pY(t)||n}const EY=async function(t){const e=this.getOffsetParent||DB,n=this.getDimensions,r=await n(t.floating);return{reference:TY(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function NY(t){return Ii(t).direction==="rtl"}const AY={convertOffsetParentRelativeRectToViewportRelativeRect:vY,getDocumentElement:ds,getClippingRect:kY,getOffsetParent:DB,getElementRects:EY,getClientRects:xY,getDimensions:IY,getScale:Rc,isElement:ki,isRTL:NY};function MB(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function OY(t,e){let n=null,r;const o=ds(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function s(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const u=t.getBoundingClientRect(),{left:c,top:d,width:f,height:h}=u;if(a||e(),!f||!h)return;const p=Vg(d),m=Vg(o.clientWidth-(c+f)),g=Vg(o.clientHeight-(d+h)),y=Vg(c),x={rootMargin:-p+"px "+-m+"px "+-g+"px "+-y+"px",threshold:Zr(0,Ka(1,l))||1};let b=!0;function w(S){const $=S[0].intersectionRatio;if($!==l){if(!b)return s();$?s(!1,$):r=setTimeout(()=>{s(!1,1e-7)},1e3)}$===1&&!MB(u,t.getBoundingClientRect())&&s(),b=!1}try{n=new IntersectionObserver(w,{...x,root:o.ownerDocument})}catch{n=new IntersectionObserver(w,x)}n.observe(t)}return s(!0),i}function _Y(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=_I(t),c=o||i?[...u?zh(u):[],...zh(e)]:[];c.forEach(y=>{o&&y.addEventListener("scroll",n,{passive:!0}),i&&y.addEventListener("resize",n)});const d=u&&a?OY(u,n):null;let f=-1,h=null;s&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===u&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var x;(x=h)==null||x.observe(e)})),n()}),u&&!l&&h.observe(u),h.observe(e));let p,m=l?fu(t):null;l&&g();function g(){const y=fu(t);m&&!MB(m,y)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(v=>{o&&v.removeEventListener("scroll",n),i&&v.removeEventListener("resize",n)}),d==null||d(),(y=h)==null||y.disconnect(),h=null,l&&cancelAnimationFrame(p)}}const RY=rY,PY=oY,DY=eY,MY=sY,FY=tY,SO=J9,LY=iY,BY=(t,e,n)=>{const r=new Map,o={platform:AY,...n},i={...o.platform,_c:r};return Z9(t,e,{...o,platform:i})};var zY=typeof document<"u",jY=function(){},Ry=zY?R.useLayoutEffect:jY;function cv(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,o;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!cv(t[r],e[r]))return!1;return!0}if(o=Object.keys(t),n=o.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,o[r]))return!1;for(r=n;r--!==0;){const i=o[r];if(!(i==="_owner"&&t.$$typeof)&&!cv(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function FB(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function CO(t,e){const n=FB(t);return Math.round(e*n)/n}function mw(t){const e=R.useRef(t);return Ry(()=>{e.current=t}),e}function WY(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:i,floating:s}={},transform:a=!0,whileElementsMounted:l,open:u}=t,[c,d]=R.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,h]=R.useState(r);cv(f,r)||h(r);const[p,m]=R.useState(null),[g,y]=R.useState(null),v=R.useCallback(A=>{A!==S.current&&(S.current=A,m(A))},[]),x=R.useCallback(A=>{A!==$.current&&($.current=A,y(A))},[]),b=i||p,w=s||g,S=R.useRef(null),$=R.useRef(null),C=R.useRef(c),k=l!=null,I=mw(l),T=mw(o),E=mw(u),_=R.useCallback(()=>{if(!S.current||!$.current)return;const A={placement:e,strategy:n,middleware:f};T.current&&(A.platform=T.current),BY(S.current,$.current,A).then(O=>{const j={...O,isPositioned:E.current!==!1};N.current&&!cv(C.current,j)&&(C.current=j,Vp.flushSync(()=>{d(j)}))})},[f,e,n,T,E]);Ry(()=>{u===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,d(A=>({...A,isPositioned:!1})))},[u]);const N=R.useRef(!1);Ry(()=>(N.current=!0,()=>{N.current=!1}),[]),Ry(()=>{if(b&&(S.current=b),w&&($.current=w),b&&w){if(I.current)return I.current(b,w,_);_()}},[b,w,_,I,k]);const P=R.useMemo(()=>({reference:S,floating:$,setReference:v,setFloating:x}),[v,x]),F=R.useMemo(()=>({reference:b,floating:w}),[b,w]),L=R.useMemo(()=>{const A={position:n,left:0,top:0};if(!F.floating)return A;const O=CO(F.floating,c.x),j=CO(F.floating,c.y);return a?{...A,transform:"translate("+O+"px, "+j+"px)",...FB(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:O,top:j}},[n,a,F.floating,c.x,c.y]);return R.useMemo(()=>({...c,update:_,refs:P,elements:F,floatingStyles:L}),[c,_,P,F,L])}const VY=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:o}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?SO({element:r.current,padding:o}).fn(n):{}:r?SO({element:r,padding:o}).fn(n):{}}}},UY=(t,e)=>({...RY(t),options:[t,e]}),GY=(t,e)=>({...PY(t),options:[t,e]}),HY=(t,e)=>({...LY(t),options:[t,e]}),KY=(t,e)=>({...DY(t),options:[t,e]}),qY=(t,e)=>({...MY(t),options:[t,e]}),XY=(t,e)=>({...FY(t),options:[t,e]}),YY=(t,e)=>({...VY(t),options:[t,e]});var QY="Arrow",LB=R.forwardRef((t,e)=>{const{children:n,width:r=10,height:o=5,...i}=t;return D.jsx(dr.svg,{...i,ref:e,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:D.jsx("polygon",{points:"0,0 30,0 15,10"})})});LB.displayName=QY;var ZY=LB;function JY(t){const[e,n]=R.useState(void 0);return Ha(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const i=o[0];let s,a;if("borderBoxSize"in i){const l=i.borderBoxSize,u=Array.isArray(l)?l[0]:l;s=u.inlineSize,a=u.blockSize}else s=t.offsetWidth,a=t.offsetHeight;n({width:s,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var BB="Popper",[zB,jB]=Up(BB),[tqe,WB]=zB(BB),VB="PopperAnchor",UB=R.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...o}=t,i=WB(VB,n),s=R.useRef(null),a=$i(e,s);return R.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||s.current)}),r?null:D.jsx(dr.div,{...o,ref:a})});UB.displayName=VB;var PI="PopperContent",[eQ,tQ]=zB(PI),GB=R.forwardRef((t,e)=>{var ue,ce,Y,le,oe,J;const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:i="center",alignOffset:s=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:c=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:h="optimized",onPlaced:p,...m}=t,g=WB(PI,n),[y,v]=R.useState(null),x=$i(e,be=>v(be)),[b,w]=R.useState(null),S=JY(b),$=(S==null?void 0:S.width)??0,C=(S==null?void 0:S.height)??0,k=r+(i!=="center"?"-"+i:""),I=typeof c=="number"?c:{top:0,right:0,bottom:0,left:0,...c},T=Array.isArray(u)?u:[u],E=T.length>0,_={padding:I,boundary:T.filter(rQ),altBoundary:E},{refs:N,floatingStyles:P,placement:F,isPositioned:L,middlewareData:A}=WY({strategy:"fixed",placement:k,whileElementsMounted:(...be)=>_Y(...be,{animationFrame:h==="always"}),elements:{reference:g.anchor},middleware:[UY({mainAxis:o+C,alignmentAxis:s}),l&&GY({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?HY():void 0,..._}),l&&KY({..._}),qY({..._,apply:({elements:be,rects:me,availableWidth:ve,availableHeight:pe})=>{const{width:Ee,height:Ce}=me.reference,De=be.floating.style;De.setProperty("--radix-popper-available-width",`${ve}px`),De.setProperty("--radix-popper-available-height",`${pe}px`),De.setProperty("--radix-popper-anchor-width",`${Ee}px`),De.setProperty("--radix-popper-anchor-height",`${Ce}px`)}}),b&&YY({element:b,padding:a}),oQ({arrowWidth:$,arrowHeight:C}),f&&XY({strategy:"referenceHidden",..._})]}),[O,j]=qB(F),V=Ga(p);Ha(()=>{L&&(V==null||V())},[L,V]);const z=(ue=A.arrow)==null?void 0:ue.x,U=(ce=A.arrow)==null?void 0:ce.y,Z=((Y=A.arrow)==null?void 0:Y.centerOffset)!==0,[te,se]=R.useState();return Ha(()=>{y&&se(window.getComputedStyle(y).zIndex)},[y]),D.jsx("div",{ref:N.setFloating,"data-radix-popper-content-wrapper":"",style:{...P,transform:L?P.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:te,"--radix-popper-transform-origin":[(le=A.transformOrigin)==null?void 0:le.x,(oe=A.transformOrigin)==null?void 0:oe.y].join(" "),...((J=A.hide)==null?void 0:J.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:D.jsx(eQ,{scope:n,placedSide:O,onArrowChange:w,arrowX:z,arrowY:U,shouldHideArrow:Z,children:D.jsx(dr.div,{"data-side":O,"data-align":j,...m,ref:x,style:{...m.style,animation:L?void 0:"none"}})})})});GB.displayName=PI;var HB="PopperArrow",nQ={top:"bottom",right:"left",bottom:"top",left:"right"},KB=R.forwardRef(function(e,n){const{__scopePopper:r,...o}=e,i=tQ(HB,r),s=nQ[i.placedSide];return D.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:D.jsx(ZY,{...o,ref:n,style:{...o.style,display:"block"}})})});KB.displayName=HB;function rQ(t){return t!==null}var oQ=t=>({name:"transformOrigin",options:t,fn(e){var g,y,v;const{placement:n,rects:r,middlewareData:o}=e,s=((g=o.arrow)==null?void 0:g.centerOffset)!==0,a=s?0:t.arrowWidth,l=s?0:t.arrowHeight,[u,c]=qB(n),d={start:"0%",center:"50%",end:"100%"}[c],f=(((y=o.arrow)==null?void 0:y.x)??0)+a/2,h=(((v=o.arrow)==null?void 0:v.y)??0)+l/2;let p="",m="";return u==="bottom"?(p=s?d:`${f}px`,m=`${-l}px`):u==="top"?(p=s?d:`${f}px`,m=`${r.floating.height+l}px`):u==="right"?(p=`${-l}px`,m=s?d:`${h}px`):u==="left"&&(p=`${r.floating.width+l}px`,m=s?d:`${h}px`),{data:{x:p,y:m}}}});function qB(t){const[e,n="center"]=t.split("-");return[e,n]}var iQ=UB,sQ=GB,aQ=KB,[cx,nqe]=Up("Tooltip",[jB]),DI=jB(),XB="TooltipProvider",lQ=700,$O="tooltip.open",[uQ,YB]=cx(XB),QB=t=>{const{__scopeTooltip:e,delayDuration:n=lQ,skipDelayDuration:r=300,disableHoverableContent:o=!1,children:i}=t,s=R.useRef(!0),a=R.useRef(!1),l=R.useRef(0);return R.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),D.jsx(uQ,{scope:e,isOpenDelayedRef:s,delayDuration:n,onOpen:R.useCallback(()=>{window.clearTimeout(l.current),s.current=!1},[]),onClose:R.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:R.useCallback(u=>{a.current=u},[]),disableHoverableContent:o,children:i})};QB.displayName=XB;var ZB="Tooltip",[rqe,dx]=cx(ZB),dC="TooltipTrigger",cQ=R.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,o=dx(dC,n),i=YB(dC,n),s=DI(n),a=R.useRef(null),l=$i(e,a,o.onTriggerChange),u=R.useRef(!1),c=R.useRef(!1),d=R.useCallback(()=>u.current=!1,[]);return R.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),D.jsx(iQ,{asChild:!0,...s,children:D.jsx(dr.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...r,ref:l,onPointerMove:Sn(t.onPointerMove,f=>{f.pointerType!=="touch"&&!c.current&&!i.isPointerInTransitRef.current&&(o.onTriggerEnter(),c.current=!0)}),onPointerLeave:Sn(t.onPointerLeave,()=>{o.onTriggerLeave(),c.current=!1}),onPointerDown:Sn(t.onPointerDown,()=>{o.open&&o.onClose(),u.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:Sn(t.onFocus,()=>{u.current||o.onOpen()}),onBlur:Sn(t.onBlur,o.onClose),onClick:Sn(t.onClick,o.onClose)})})});cQ.displayName=dC;var dQ="TooltipPortal",[oqe,fQ]=cx(dQ,{forceMount:void 0}),sd="TooltipContent",JB=R.forwardRef((t,e)=>{const n=fQ(sd,t.__scopeTooltip),{forceMount:r=n.forceMount,side:o="top",...i}=t,s=dx(sd,t.__scopeTooltip);return D.jsx(SI,{present:r||s.open,children:s.disableHoverableContent?D.jsx(ez,{side:o,...i,ref:e}):D.jsx(hQ,{side:o,...i,ref:e})})}),hQ=R.forwardRef((t,e)=>{const n=dx(sd,t.__scopeTooltip),r=YB(sd,t.__scopeTooltip),o=R.useRef(null),i=$i(e,o),[s,a]=R.useState(null),{trigger:l,onClose:u}=n,c=o.current,{onPointerInTransitChange:d}=r,f=R.useCallback(()=>{a(null),d(!1)},[d]),h=R.useCallback((p,m)=>{const g=p.currentTarget,y={x:p.clientX,y:p.clientY},v=vQ(y,g.getBoundingClientRect()),x=xQ(y,v),b=bQ(m.getBoundingClientRect()),w=SQ([...x,...b]);a(w),d(!0)},[d]);return R.useEffect(()=>()=>f(),[f]),R.useEffect(()=>{if(l&&c){const p=g=>h(g,c),m=g=>h(g,l);return l.addEventListener("pointerleave",p),c.addEventListener("pointerleave",m),()=>{l.removeEventListener("pointerleave",p),c.removeEventListener("pointerleave",m)}}},[l,c,h,f]),R.useEffect(()=>{if(s){const p=m=>{const g=m.target,y={x:m.clientX,y:m.clientY},v=(l==null?void 0:l.contains(g))||(c==null?void 0:c.contains(g)),x=!wQ(y,s);v?f():x&&(f(),u())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[l,c,s,u,f]),D.jsx(ez,{...t,ref:i})}),[pQ,mQ]=cx(ZB,{isInside:!1}),gQ=kX("TooltipContent"),ez=R.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":o,onEscapeKeyDown:i,onPointerDownOutside:s,...a}=t,l=dx(sd,n),u=DI(n),{onClose:c}=l;return R.useEffect(()=>(document.addEventListener($O,c),()=>document.removeEventListener($O,c)),[c]),R.useEffect(()=>{if(l.trigger){const d=f=>{const h=f.target;h!=null&&h.contains(l.trigger)&&c()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,c]),D.jsx(wI,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:d=>d.preventDefault(),onDismiss:c,children:D.jsxs(sQ,{"data-state":l.stateAttribute,...u,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[D.jsx(gQ,{children:r}),D.jsx(pQ,{scope:n,isInside:!0,children:D.jsx(YX,{id:l.contentId,role:"tooltip",children:o||r})})]})})});JB.displayName=sd;var tz="TooltipArrow",yQ=R.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,o=DI(n);return mQ(tz,n).isInside?null:D.jsx(aQ,{...o,...r,ref:e})});yQ.displayName=tz;function vQ(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),o=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,o,i)){case i:return"left";case o:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function xQ(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function bQ(t){const{top:e,right:n,bottom:r,left:o}=t;return[{x:o,y:e},{x:n,y:e},{x:n,y:r},{x:o,y:r}]}function wQ(t,e){const{x:n,y:r}=t;let o=!1;for(let i=0,s=e.length-1;i<e.length;s=i++){const a=e[i],l=e[s],u=a.x,c=a.y,d=l.x,f=l.y;c>r!=f>r&&n<(d-u)*(r-c)/(f-c)+u&&(o=!o)}return o}function SQ(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),CQ(e)}function CQ(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const o=t[r];for(;e.length>=2;){const i=e[e.length-1],s=e[e.length-2];if((i.x-s.x)*(o.y-s.y)>=(i.y-s.y)*(o.x-s.x))e.pop();else break}e.push(o)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const o=t[r];for(;n.length>=2;){const i=n[n.length-1],s=n[n.length-2];if((i.x-s.x)*(o.y-s.y)>=(i.y-s.y)*(o.x-s.x))n.pop();else break}n.push(o)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var $Q=QB,nz=JB;const kQ=$Q,IQ=R.forwardRef(({className:t,sideOffset:e=4,...n},r)=>D.jsx(nz,{ref:r,sideOffset:e,className:Er("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));IQ.displayName=nz.displayName;var fx=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},hx=typeof window>"u"||"Deno"in globalThis;function ii(){}function TQ(t,e){return typeof t=="function"?t(e):t}function EQ(t){return typeof t=="number"&&t>=0&&t!==1/0}function NQ(t,e){return Math.max(t+(e||0)-Date.now(),0)}function fC(t,e){return typeof t=="function"?t(e):t}function AQ(t,e){return typeof t=="function"?t(e):t}function kO(t,e){const{type:n="all",exact:r,fetchStatus:o,predicate:i,queryKey:s,stale:a}=t;if(s){if(r){if(e.queryHash!==MI(s,e.options))return!1}else if(!Wh(e.queryKey,s))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||o&&o!==e.state.fetchStatus||i&&!i(e))}function IO(t,e){const{exact:n,status:r,predicate:o,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(jh(e.options.mutationKey)!==jh(i))return!1}else if(!Wh(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||o&&!o(e))}function MI(t,e){return((e==null?void 0:e.queryKeyHashFn)||jh)(t)}function jh(t){return JSON.stringify(t,(e,n)=>hC(n)?Object.keys(n).sort().reduce((r,o)=>(r[o]=n[o],r),{}):n)}function Wh(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Wh(t[n],e[n])):!1}function rz(t,e){if(t===e)return t;const n=TO(t)&&TO(e);if(n||hC(t)&&hC(e)){const r=n?t:Object.keys(t),o=r.length,i=n?e:Object.keys(e),s=i.length,a=n?[]:{},l=new Set(r);let u=0;for(let c=0;c<s;c++){const d=n?c:i[c];(!n&&l.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,u++):(a[d]=rz(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&u++)}return o===s&&u===o?t:a}return e}function TO(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function hC(t){if(!EO(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!EO(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function EO(t){return Object.prototype.toString.call(t)==="[object Object]"}function OQ(t){return new Promise(e=>{setTimeout(e,t)})}function _Q(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?rz(t,e):e}function RQ(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function PQ(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var FI=Symbol();function oz(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===FI?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var ql,ga,Uc,gF,DQ=(gF=class extends fx{constructor(){super();it(this,ql);it(this,ga);it(this,Uc);Be(this,Uc,e=>{if(!hx&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){ae(this,ga)||this.setEventListener(ae(this,Uc))}onUnsubscribe(){var e;this.hasListeners()||((e=ae(this,ga))==null||e.call(this),Be(this,ga,void 0))}setEventListener(e){var n;Be(this,Uc,e),(n=ae(this,ga))==null||n.call(this),Be(this,ga,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){ae(this,ql)!==e&&(Be(this,ql,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof ae(this,ql)=="boolean"?ae(this,ql):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},ql=new WeakMap,ga=new WeakMap,Uc=new WeakMap,gF),iz=new DQ,Gc,ya,Hc,yF,MQ=(yF=class extends fx{constructor(){super();it(this,Gc,!0);it(this,ya);it(this,Hc);Be(this,Hc,e=>{if(!hx&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){ae(this,ya)||this.setEventListener(ae(this,Hc))}onUnsubscribe(){var e;this.hasListeners()||((e=ae(this,ya))==null||e.call(this),Be(this,ya,void 0))}setEventListener(e){var n;Be(this,Hc,e),(n=ae(this,ya))==null||n.call(this),Be(this,ya,e(this.setOnline.bind(this)))}setOnline(e){ae(this,Gc)!==e&&(Be(this,Gc,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return ae(this,Gc)}},Gc=new WeakMap,ya=new WeakMap,Hc=new WeakMap,yF),dv=new MQ;function FQ(){let t,e;const n=new Promise((o,i)=>{t=o,e=i});n.status="pending",n.catch(()=>{});function r(o){Object.assign(n,o),delete n.resolve,delete n.reject}return n.resolve=o=>{r({status:"fulfilled",value:o}),t(o)},n.reject=o=>{r({status:"rejected",reason:o}),e(o)},n}function LQ(t){return Math.min(1e3*2**t,3e4)}function sz(t){return(t??"online")==="online"?dv.isOnline():!0}var az=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function gw(t){return t instanceof az}function lz(t){let e=!1,n=0,r=!1,o;const i=FQ(),s=m=>{var g;r||(f(new az(m)),(g=t.abort)==null||g.call(t))},a=()=>{e=!0},l=()=>{e=!1},u=()=>iz.isFocused()&&(t.networkMode==="always"||dv.isOnline())&&t.canRun(),c=()=>sz(t.networkMode)&&t.canRun(),d=m=>{var g;r||(r=!0,(g=t.onSuccess)==null||g.call(t,m),o==null||o(),i.resolve(m))},f=m=>{var g;r||(r=!0,(g=t.onError)==null||g.call(t,m),o==null||o(),i.reject(m))},h=()=>new Promise(m=>{var g;o=y=>{(r||u())&&m(y)},(g=t.onPause)==null||g.call(t)}).then(()=>{var m;o=void 0,r||(m=t.onContinue)==null||m.call(t)}),p=()=>{if(r)return;let m;const g=n===0?t.initialPromise:void 0;try{m=g??t.fn()}catch(y){m=Promise.reject(y)}Promise.resolve(m).then(d).catch(y=>{var S;if(r)return;const v=t.retry??(hx?0:3),x=t.retryDelay??LQ,b=typeof x=="function"?x(n,y):x,w=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,y);if(e||!w){f(y);return}n++,(S=t.onFail)==null||S.call(t,n,y),OQ(b).then(()=>u()?void 0:h()).then(()=>{e?f(y):p()})})};return{promise:i,cancel:s,continue:()=>(o==null||o(),i),cancelRetry:a,continueRetry:l,canStart:c,start:()=>(c()?p():h().then(p),i)}}var BQ=t=>setTimeout(t,0);function zQ(){let t=[],e=0,n=a=>{a()},r=a=>{a()},o=BQ;const i=a=>{e?t.push(a):o(()=>{n(a)})},s=()=>{const a=t;t=[],a.length&&o(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||s()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{o=a}}}var yr=zQ(),Xl,vF,uz=(vF=class{constructor(){it(this,Xl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),EQ(this.gcTime)&&Be(this,Xl,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(hx?1/0:5*60*1e3))}clearGcTimeout(){ae(this,Xl)&&(clearTimeout(ae(this,Xl)),Be(this,Xl,void 0))}},Xl=new WeakMap,vF),Kc,Yl,wo,Ql,Jn,Mp,Zl,si,gs,xF,jQ=(xF=class extends uz{constructor(e){super();it(this,si);it(this,Kc);it(this,Yl);it(this,wo);it(this,Ql);it(this,Jn);it(this,Mp);it(this,Zl);Be(this,Zl,!1),Be(this,Mp,e.defaultOptions),this.setOptions(e.options),this.observers=[],Be(this,Ql,e.client),Be(this,wo,ae(this,Ql).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Be(this,Kc,VQ(this.options)),this.state=e.state??ae(this,Kc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=ae(this,Jn))==null?void 0:e.promise}setOptions(e){this.options={...ae(this,Mp),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ae(this,wo).remove(this)}setData(e,n){const r=_Q(this.state.data,e,this.options);return Yn(this,si,gs).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Yn(this,si,gs).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,o;const n=(r=ae(this,Jn))==null?void 0:r.promise;return(o=ae(this,Jn))==null||o.cancel(e),n?n.then(ii).catch(ii):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ae(this,Kc))}isActive(){return this.observers.some(e=>AQ(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===FI||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>fC(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!NQ(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=ae(this,Jn))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=ae(this,Jn))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),ae(this,wo).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(ae(this,Jn)&&(ae(this,Zl)?ae(this,Jn).cancel({revert:!0}):ae(this,Jn).cancelRetry()),this.scheduleGc()),ae(this,wo).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Yn(this,si,gs).call(this,{type:"invalidate"})}fetch(e,n){var u,c,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(ae(this,Jn))return ae(this,Jn).continueRetry(),ae(this,Jn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(h=>h.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,o=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(Be(this,Zl,!0),r.signal)})},i=()=>{const f=oz(this.options,n),p=(()=>{const m={client:ae(this,Ql),queryKey:this.queryKey,meta:this.meta};return o(m),m})();return Be(this,Zl,!1),this.options.persister?this.options.persister(f,p,this):f(p)},a=(()=>{const f={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:ae(this,Ql),state:this.state,fetchFn:i};return o(f),f})();(u=this.options.behavior)==null||u.onFetch(a,this),Be(this,Yl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=a.fetchOptions)==null?void 0:c.meta))&&Yn(this,si,gs).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const l=f=>{var h,p,m,g;gw(f)&&f.silent||Yn(this,si,gs).call(this,{type:"error",error:f}),gw(f)||((p=(h=ae(this,wo).config).onError)==null||p.call(h,f,this),(g=(m=ae(this,wo).config).onSettled)==null||g.call(m,this.state.data,f,this)),this.scheduleGc()};return Be(this,Jn,lz({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:f=>{var h,p,m,g;if(f===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(y){l(y);return}(p=(h=ae(this,wo).config).onSuccess)==null||p.call(h,f,this),(g=(m=ae(this,wo).config).onSettled)==null||g.call(m,f,this.state.error,this),this.scheduleGc()},onError:l,onFail:(f,h)=>{Yn(this,si,gs).call(this,{type:"failed",failureCount:f,error:h})},onPause:()=>{Yn(this,si,gs).call(this,{type:"pause"})},onContinue:()=>{Yn(this,si,gs).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),ae(this,Jn).start()}},Kc=new WeakMap,Yl=new WeakMap,wo=new WeakMap,Ql=new WeakMap,Jn=new WeakMap,Mp=new WeakMap,Zl=new WeakMap,si=new WeakSet,gs=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...WQ(r.data,this.options),fetchMeta:e.meta??null};case"success":return Be(this,Yl,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=e.error;return gw(o)&&o.revert&&ae(this,Yl)?{...ae(this,Yl),fetchStatus:"idle"}:{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),yr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),ae(this,wo).notify({query:this,type:"updated",action:e})})},xF);function WQ(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:sz(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function VQ(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Li,bF,UQ=(bF=class extends fx{constructor(e={}){super();it(this,Li);this.config=e,Be(this,Li,new Map)}build(e,n,r){const o=n.queryKey,i=n.queryHash??MI(o,n);let s=this.get(i);return s||(s=new jQ({client:e,queryKey:o,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(o)}),this.add(s)),s}add(e){ae(this,Li).has(e.queryHash)||(ae(this,Li).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=ae(this,Li).get(e.queryHash);n&&(e.destroy(),n===e&&ae(this,Li).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){yr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ae(this,Li).get(e)}getAll(){return[...ae(this,Li).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>kO(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>kO(e,r)):n}notify(e){yr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){yr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){yr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Li=new WeakMap,bF),Bi,pr,Jl,zi,la,wF,GQ=(wF=class extends uz{constructor(e){super();it(this,zi);it(this,Bi);it(this,pr);it(this,Jl);this.mutationId=e.mutationId,Be(this,pr,e.mutationCache),Be(this,Bi,[]),this.state=e.state||HQ(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){ae(this,Bi).includes(e)||(ae(this,Bi).push(e),this.clearGcTimeout(),ae(this,pr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Be(this,Bi,ae(this,Bi).filter(n=>n!==e)),this.scheduleGc(),ae(this,pr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){ae(this,Bi).length||(this.state.status==="pending"?this.scheduleGc():ae(this,pr).remove(this))}continue(){var e;return((e=ae(this,Jl))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,s,a,l,u,c,d,f,h,p,m,g,y,v,x,b,w,S,$,C;const n=()=>{Yn(this,zi,la).call(this,{type:"continue"})};Be(this,Jl,lz({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(k,I)=>{Yn(this,zi,la).call(this,{type:"failed",failureCount:k,error:I})},onPause:()=>{Yn(this,zi,la).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ae(this,pr).canRun(this)}));const r=this.state.status==="pending",o=!ae(this,Jl).canStart();try{if(r)n();else{Yn(this,zi,la).call(this,{type:"pending",variables:e,isPaused:o}),await((s=(i=ae(this,pr).config).onMutate)==null?void 0:s.call(i,e,this));const I=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,e));I!==this.state.context&&Yn(this,zi,la).call(this,{type:"pending",context:I,variables:e,isPaused:o})}const k=await ae(this,Jl).start();return await((c=(u=ae(this,pr).config).onSuccess)==null?void 0:c.call(u,k,e,this.state.context,this)),await((f=(d=this.options).onSuccess)==null?void 0:f.call(d,k,e,this.state.context)),await((p=(h=ae(this,pr).config).onSettled)==null?void 0:p.call(h,k,null,this.state.variables,this.state.context,this)),await((g=(m=this.options).onSettled)==null?void 0:g.call(m,k,null,e,this.state.context)),Yn(this,zi,la).call(this,{type:"success",data:k}),k}catch(k){try{throw await((v=(y=ae(this,pr).config).onError)==null?void 0:v.call(y,k,e,this.state.context,this)),await((b=(x=this.options).onError)==null?void 0:b.call(x,k,e,this.state.context)),await((S=(w=ae(this,pr).config).onSettled)==null?void 0:S.call(w,void 0,k,this.state.variables,this.state.context,this)),await((C=($=this.options).onSettled)==null?void 0:C.call($,void 0,k,e,this.state.context)),k}finally{Yn(this,zi,la).call(this,{type:"error",error:k})}}finally{ae(this,pr).runNext(this)}}},Bi=new WeakMap,pr=new WeakMap,Jl=new WeakMap,zi=new WeakSet,la=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),yr.batch(()=>{ae(this,Bi).forEach(r=>{r.onMutationUpdate(e)}),ae(this,pr).notify({mutation:this,type:"updated",action:e})})},wF);function HQ(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var bs,ai,Fp,SF,KQ=(SF=class extends fx{constructor(e={}){super();it(this,bs);it(this,ai);it(this,Fp);this.config=e,Be(this,bs,new Set),Be(this,ai,new Map),Be(this,Fp,0)}build(e,n,r){const o=new GQ({mutationCache:this,mutationId:++Sg(this,Fp)._,options:e.defaultMutationOptions(n),state:r});return this.add(o),o}add(e){ae(this,bs).add(e);const n=Ug(e);if(typeof n=="string"){const r=ae(this,ai).get(n);r?r.push(e):ae(this,ai).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(ae(this,bs).delete(e)){const n=Ug(e);if(typeof n=="string"){const r=ae(this,ai).get(n);if(r)if(r.length>1){const o=r.indexOf(e);o!==-1&&r.splice(o,1)}else r[0]===e&&ae(this,ai).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Ug(e);if(typeof n=="string"){const r=ae(this,ai).get(n),o=r==null?void 0:r.find(i=>i.state.status==="pending");return!o||o===e}else return!0}runNext(e){var r;const n=Ug(e);if(typeof n=="string"){const o=(r=ae(this,ai).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(o==null?void 0:o.continue())??Promise.resolve()}else return Promise.resolve()}clear(){yr.batch(()=>{ae(this,bs).forEach(e=>{this.notify({type:"removed",mutation:e})}),ae(this,bs).clear(),ae(this,ai).clear()})}getAll(){return Array.from(ae(this,bs))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>IO(n,r))}findAll(e={}){return this.getAll().filter(n=>IO(e,n))}notify(e){yr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return yr.batch(()=>Promise.all(e.map(n=>n.continue().catch(ii))))}},bs=new WeakMap,ai=new WeakMap,Fp=new WeakMap,SF);function Ug(t){var e;return(e=t.options.scope)==null?void 0:e.id}function NO(t){return{onFetch:(e,n)=>{var c,d,f,h,p;const r=e.options,o=(f=(d=(c=e.fetchOptions)==null?void 0:c.meta)==null?void 0:d.fetchMore)==null?void 0:f.direction,i=((h=e.state.data)==null?void 0:h.pages)||[],s=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let m=!1;const g=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(e.signal.aborted?m=!0:e.signal.addEventListener("abort",()=>{m=!0}),e.signal)})},y=oz(e.options,e.fetchOptions),v=async(x,b,w)=>{if(m)return Promise.reject();if(b==null&&x.pages.length)return Promise.resolve(x);const $=(()=>{const T={client:e.client,queryKey:e.queryKey,pageParam:b,direction:w?"backward":"forward",meta:e.options.meta};return g(T),T})(),C=await y($),{maxPages:k}=e.options,I=w?PQ:RQ;return{pages:I(x.pages,C,k),pageParams:I(x.pageParams,b,k)}};if(o&&i.length){const x=o==="backward",b=x?qQ:AO,w={pages:i,pageParams:s},S=b(r,w);a=await v(w,S,x)}else{const x=t??i.length;do{const b=l===0?s[0]??r.initialPageParam:AO(r,a);if(l>0&&b==null)break;a=await v(a,b),l++}while(l<x)}return a};e.options.persister?e.fetchFn=()=>{var m,g;return(g=(m=e.options).persister)==null?void 0:g.call(m,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function AO(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function qQ(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var qt,va,xa,qc,Xc,ba,Yc,Qc,CF,XQ=(CF=class{constructor(t={}){it(this,qt);it(this,va);it(this,xa);it(this,qc);it(this,Xc);it(this,ba);it(this,Yc);it(this,Qc);Be(this,qt,t.queryCache||new UQ),Be(this,va,t.mutationCache||new KQ),Be(this,xa,t.defaultOptions||{}),Be(this,qc,new Map),Be(this,Xc,new Map),Be(this,ba,0)}mount(){Sg(this,ba)._++,ae(this,ba)===1&&(Be(this,Yc,iz.subscribe(async t=>{t&&(await this.resumePausedMutations(),ae(this,qt).onFocus())})),Be(this,Qc,dv.subscribe(async t=>{t&&(await this.resumePausedMutations(),ae(this,qt).onOnline())})))}unmount(){var t,e;Sg(this,ba)._--,ae(this,ba)===0&&((t=ae(this,Yc))==null||t.call(this),Be(this,Yc,void 0),(e=ae(this,Qc))==null||e.call(this),Be(this,Qc,void 0))}isFetching(t){return ae(this,qt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return ae(this,va).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=ae(this,qt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=ae(this,qt).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(fC(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return ae(this,qt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),o=ae(this,qt).get(r.queryHash),i=o==null?void 0:o.state.data,s=TQ(e,i);if(s!==void 0)return ae(this,qt).build(this,r).setData(s,{...n,manual:!0})}setQueriesData(t,e,n){return yr.batch(()=>ae(this,qt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=ae(this,qt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=ae(this,qt);yr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=ae(this,qt);return yr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=yr.batch(()=>ae(this,qt).findAll(t).map(o=>o.cancel(n)));return Promise.all(r).then(ii).catch(ii)}invalidateQueries(t,e={}){return yr.batch(()=>(ae(this,qt).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=yr.batch(()=>ae(this,qt).findAll(t).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let i=o.fetch(void 0,n);return n.throwOnError||(i=i.catch(ii)),o.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(ii)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=ae(this,qt).build(this,e);return n.isStaleByTime(fC(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ii).catch(ii)}fetchInfiniteQuery(t){return t.behavior=NO(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ii).catch(ii)}ensureInfiniteQueryData(t){return t.behavior=NO(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return dv.isOnline()?ae(this,va).resumePausedMutations():Promise.resolve()}getQueryCache(){return ae(this,qt)}getMutationCache(){return ae(this,va)}getDefaultOptions(){return ae(this,xa)}setDefaultOptions(t){Be(this,xa,t)}setQueryDefaults(t,e){ae(this,qc).set(jh(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...ae(this,qc).values()],n={};return e.forEach(r=>{Wh(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){ae(this,Xc).set(jh(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...ae(this,Xc).values()],n={};return e.forEach(r=>{Wh(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...ae(this,xa).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=MI(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===FI&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...ae(this,xa).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){ae(this,qt).clear(),ae(this,va).clear()}},qt=new WeakMap,va=new WeakMap,xa=new WeakMap,qc=new WeakMap,Xc=new WeakMap,ba=new WeakMap,Yc=new WeakMap,Qc=new WeakMap,CF),YQ=R.createContext(void 0),QQ=({client:t,children:e})=>(R.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),D.jsx(YQ.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fv(){return fv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fv.apply(this,arguments)}var Ca;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ca||(Ca={}));const OO="popstate";function ZQ(t){t===void 0&&(t={});function e(r,o){let{pathname:i,search:s,hash:a}=r.location;return pC("",{pathname:i,search:s,hash:a},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:dz(o)}return eZ(e,n,null,t)}function Wr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function cz(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function JQ(){return Math.random().toString(36).substr(2,8)}function _O(t,e){return{usr:t.state,key:t.key,idx:e}}function pC(t,e,n,r){return n===void 0&&(n=null),fv({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?px(e):e,{state:n,key:e&&e.key||r||JQ()})}function dz(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function px(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function eZ(t,e,n,r){r===void 0&&(r={});let{window:o=document.defaultView,v5Compat:i=!1}=r,s=o.history,a=Ca.Pop,l=null,u=c();u==null&&(u=0,s.replaceState(fv({},s.state,{idx:u}),""));function c(){return(s.state||{idx:null}).idx}function d(){a=Ca.Pop;let g=c(),y=g==null?null:g-u;u=g,l&&l({action:a,location:m.location,delta:y})}function f(g,y){a=Ca.Push;let v=pC(m.location,g,y);u=c()+1;let x=_O(v,u),b=m.createHref(v);try{s.pushState(x,"",b)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;o.location.assign(b)}i&&l&&l({action:a,location:m.location,delta:1})}function h(g,y){a=Ca.Replace;let v=pC(m.location,g,y);u=c();let x=_O(v,u),b=m.createHref(v);s.replaceState(x,"",b),i&&l&&l({action:a,location:m.location,delta:0})}function p(g){let y=o.location.origin!=="null"?o.location.origin:o.location.href,v=typeof g=="string"?g:dz(g);return v=v.replace(/ $/,"%20"),Wr(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return t(o,s)},listen(g){if(l)throw new Error("A history only accepts one active listener");return o.addEventListener(OO,d),l=g,()=>{o.removeEventListener(OO,d),l=null}},createHref(g){return e(o,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:h,go(g){return s.go(g)}};return m}var RO;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(RO||(RO={}));function tZ(t,e,n){return n===void 0&&(n="/"),nZ(t,e,n,!1)}function nZ(t,e,n,r){let o=typeof e=="string"?px(e):e,i=pz(o.pathname||"/",n);if(i==null)return null;let s=fz(t);rZ(s);let a=null;for(let l=0;a==null&&l<s.length;++l){let u=pZ(i);a=fZ(s[l],u,r)}return a}function fz(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let o=(i,s,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:s,route:i};l.relativePath.startsWith("/")&&(Wr(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Pc([r,l.relativePath]),c=n.concat(l);i.children&&i.children.length>0&&(Wr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),fz(i.children,e,c,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:cZ(u,i.index),routesMeta:c})};return t.forEach((i,s)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))o(i,s);else for(let l of hz(i.path))o(i,s,l)}),e}function hz(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,o=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return o?[i,""]:[i];let s=hz(r.join("/")),a=[];return a.push(...s.map(l=>l===""?i:[i,l].join("/"))),o&&a.push(...s),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function rZ(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:dZ(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const oZ=/^:[\w-]+$/,iZ=3,sZ=2,aZ=1,lZ=10,uZ=-2,PO=t=>t==="*";function cZ(t,e){let n=t.split("/"),r=n.length;return n.some(PO)&&(r+=uZ),e&&(r+=sZ),n.filter(o=>!PO(o)).reduce((o,i)=>o+(oZ.test(i)?iZ:i===""?aZ:lZ),r)}function dZ(t,e){return t.length===e.length&&t.slice(0,-1).every((r,o)=>r===e[o])?t[t.length-1]-e[e.length-1]:0}function fZ(t,e,n){let{routesMeta:r}=t,o={},i="/",s=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=i==="/"?e:e.slice(i.length)||"/",d=DO({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=DO({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!d)return null;Object.assign(o,d.params),s.push({params:o,pathname:Pc([i,d.pathname]),pathnameBase:mZ(Pc([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=Pc([i,d.pathnameBase]))}return s}function DO(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=hZ(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let i=o[0],s=i.replace(/(.)\/+$/,"$1"),a=o.slice(1);return{params:r.reduce((u,c,d)=>{let{paramName:f,isOptional:h}=c;if(f==="*"){let m=a[d]||"";s=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[d];return h&&!p?u[f]=void 0:u[f]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:s,pattern:t}}function hZ(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),cz(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function pZ(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cz(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function pz(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const Pc=t=>t.join("/").replace(/\/\/+/g,"/"),mZ=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/");function gZ(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const mz=["post","put","patch","delete"];new Set(mz);const yZ=["get",...mz];new Set(yZ);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hv(){return hv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hv.apply(this,arguments)}const vZ=R.createContext(null),xZ=R.createContext(null),gz=R.createContext(null),mx=R.createContext(null),gx=R.createContext({outlet:null,matches:[],isDataRoute:!1}),yz=R.createContext(null);function LI(){return R.useContext(mx)!=null}function vz(){return LI()||Wr(!1),R.useContext(mx).location}function bZ(t,e){return wZ(t,e)}function wZ(t,e,n,r){LI()||Wr(!1);let{navigator:o}=R.useContext(gz),{matches:i}=R.useContext(gx),s=i[i.length-1],a=s?s.params:{};s&&s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let u=vz(),c;if(e){var d;let g=typeof e=="string"?px(e):e;l==="/"||(d=g.pathname)!=null&&d.startsWith(l)||Wr(!1),c=g}else c=u;let f=c.pathname||"/",h=f;if(l!=="/"){let g=l.replace(/^\//,"").split("/");h="/"+f.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=tZ(t,{pathname:h}),m=IZ(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:Pc([l,o.encodeLocation?o.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?l:Pc([l,o.encodeLocation?o.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),i,n,r);return e&&m?R.createElement(mx.Provider,{value:{location:hv({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Ca.Pop}},m):m}function SZ(){let t=AZ(),e=gZ(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:o},n):null,null)}const CZ=R.createElement(SZ,null);class $Z extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?R.createElement(gx.Provider,{value:this.props.routeContext},R.createElement(yz.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function kZ(t){let{routeContext:e,match:n,children:r}=t,o=R.useContext(vZ);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(gx.Provider,{value:e},r)}function IZ(t,e,n,r){var o;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,a=(o=n)==null?void 0:o.errors;if(a!=null){let c=s.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);c>=0||Wr(!1),s=s.slice(0,Math.min(s.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<s.length;c++){let d=s[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:f,errors:h}=n,p=d.route.loader&&f[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||p){l=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((c,d,f)=>{let h,p=!1,m=null,g=null;n&&(h=a&&d.route.id?a[d.route.id]:void 0,m=d.route.errorElement||CZ,l&&(u<0&&f===0?(p=!0,g=null):u===f&&(p=!0,g=d.route.hydrateFallbackElement||null)));let y=e.concat(s.slice(0,f+1)),v=()=>{let x;return h?x=m:p?x=g:d.route.Component?x=R.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=c,R.createElement(kZ,{match:d,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:x})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?R.createElement($Z,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var mC=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(mC||{});function TZ(t){let e=R.useContext(xZ);return e||Wr(!1),e}function EZ(t){let e=R.useContext(gx);return e||Wr(!1),e}function NZ(t){let e=EZ(),n=e.matches[e.matches.length-1];return n.route.id||Wr(!1),n.route.id}function AZ(){var t;let e=R.useContext(yz),n=TZ(mC.UseRouteError),r=NZ(mC.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function OZ(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function gC(t){Wr(!1)}function _Z(t){let{basename:e="/",children:n=null,location:r,navigationType:o=Ca.Pop,navigator:i,static:s=!1,future:a}=t;LI()&&Wr(!1);let l=e.replace(/^\/*/,"/"),u=R.useMemo(()=>({basename:l,navigator:i,static:s,future:hv({v7_relativeSplatPath:!1},a)}),[l,a,i,s]);typeof r=="string"&&(r=px(r));let{pathname:c="/",search:d="",hash:f="",state:h=null,key:p="default"}=r,m=R.useMemo(()=>{let g=pz(c,l);return g==null?null:{location:{pathname:g,search:d,hash:f,state:h,key:p},navigationType:o}},[l,c,d,f,h,p,o]);return m==null?null:R.createElement(gz.Provider,{value:u},R.createElement(mx.Provider,{children:n,value:m}))}function RZ(t){let{children:e,location:n}=t;return bZ(yC(e),n)}new Promise(()=>{});function yC(t,e){e===void 0&&(e=[]);let n=[];return R.Children.forEach(t,(r,o)=>{if(!R.isValidElement(r))return;let i=[...e,o];if(r.type===R.Fragment){n.push.apply(n,yC(r.props.children,i));return}r.type!==gC&&Wr(!1),!r.props.index||!r.props.children||Wr(!1);let s={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=yC(r.props.children,i)),n.push(s)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const PZ="6";try{window.__reactRouterVersion=PZ}catch{}const DZ="startTransition",MO=DF[DZ];function MZ(t){let{basename:e,children:n,future:r,window:o}=t,i=R.useRef();i.current==null&&(i.current=ZQ({window:o,v5Compat:!0}));let s=i.current,[a,l]=R.useState({action:s.action,location:s.location}),{v7_startTransition:u}=r||{},c=R.useCallback(d=>{u&&MO?MO(()=>l(d)):l(d)},[l,u]);return R.useLayoutEffect(()=>s.listen(c),[s,c]),R.useEffect(()=>OZ(r),[r]),R.createElement(_Z,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:s,future:r})}var FO;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(FO||(FO={}));var LO;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(LO||(LO={}));const FZ=()=>D.jsxs("div",{className:"relative overflow-hidden py-20 px-6",children:[D.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-accent/5 pointer-events-none"}),D.jsxs("div",{className:"max-w-6xl mx-auto text-center relative",children:[D.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-card border border-primary/20 mb-6 shadow-sm",children:[D.jsx(gB,{className:"w-4 h-4 text-primary"}),D.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"AI-Powered Energy Analytics"})]}),D.jsxs("h1",{className:"text-5xl md:text-7xl font-bold mb-6 leading-tight",children:["Power Generation"," ",D.jsx("span",{className:"gradient-text",children:"Deviation Forecasting"})]}),D.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto mb-8 leading-relaxed",children:"Advanced machine learning system for predicting power generation deviations with high accuracy. Analyze patterns, understand causes, and optimize energy distribution."}),D.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[D.jsxs("div",{className:"px-6 py-3 rounded-lg bg-card border border-border",children:[D.jsx("div",{className:"text-3xl font-bold text-primary",children:"85"}),D.jsx("div",{className:"text-sm text-muted-foreground",children:"Training Records"})]}),D.jsxs("div",{className:"px-6 py-3 rounded-lg bg-card border border-border",children:[D.jsx("div",{className:"text-3xl font-bold text-secondary",children:"5"}),D.jsx("div",{className:"text-sm text-muted-foreground",children:"Test Predictions"})]}),D.jsxs("div",{className:"px-6 py-3 rounded-lg bg-card border border-border",children:[D.jsx("div",{className:"text-3xl font-bold text-accent",children:"Real-time"}),D.jsx("div",{className:"text-sm text-muted-foreground",children:"ML Processing"})]})]})]})]}),LZ=hB("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-md hover:shadow-lg",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-card hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",gradient:"bg-gradient-to-r from-primary to-secondary text-primary-foreground hover:opacity-90 shadow-lg hover:shadow-xl",glow:"bg-primary text-primary-foreground hover:bg-primary/90 [box-shadow:var(--shadow-glow)] hover:[box-shadow:0_15px_50px_-10px_hsl(var(--primary-glow)_/_0.5)]"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),BI=R.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...o},i)=>{const s=r?CX:"button";return D.jsx(s,{className:Er(LZ({variant:e,size:n,className:t})),ref:i,...o})});BI.displayName="Button";const Xa=R.forwardRef(({className:t,...e},n)=>D.jsx("div",{ref:n,className:Er("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Xa.displayName="Card";const Ya=R.forwardRef(({className:t,...e},n)=>D.jsx("div",{ref:n,className:Er("flex flex-col space-y-1.5 p-6",t),...e}));Ya.displayName="CardHeader";const Qa=R.forwardRef(({className:t,...e},n)=>D.jsx("h3",{ref:n,className:Er("text-2xl font-semibold leading-none tracking-tight",t),...e}));Qa.displayName="CardTitle";const hu=R.forwardRef(({className:t,...e},n)=>D.jsx("p",{ref:n,className:Er("text-sm text-muted-foreground",t),...e}));hu.displayName="CardDescription";const Za=R.forwardRef(({className:t,...e},n)=>D.jsx("div",{ref:n,className:Er("p-6 pt-0",t),...e}));Za.displayName="CardContent";const BZ=R.forwardRef(({className:t,...e},n)=>D.jsx("div",{ref:n,className:Er("flex items-center p-6 pt-0",t),...e}));BZ.displayName="CardFooter";var zI="Progress",jI=100,[zZ,iqe]=Up(zI),[jZ,WZ]=zZ(zI),xz=R.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:o,getValueLabel:i=VZ,...s}=t;(o||o===0)&&!BO(o)&&console.error(UZ(`${o}`,"Progress"));const a=BO(o)?o:jI;r!==null&&!zO(r,a)&&console.error(GZ(`${r}`,"Progress"));const l=zO(r,a)?r:null,u=pv(l)?i(l,a):void 0;return D.jsx(jZ,{scope:n,value:l,max:a,children:D.jsx(dr.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":pv(l)?l:void 0,"aria-valuetext":u,role:"progressbar","data-state":Sz(l,a),"data-value":l??void 0,"data-max":a,...s,ref:e})})});xz.displayName=zI;var bz="ProgressIndicator",wz=R.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,o=WZ(bz,n);return D.jsx(dr.div,{"data-state":Sz(o.value,o.max),"data-value":o.value??void 0,"data-max":o.max,...r,ref:e})});wz.displayName=bz;function VZ(t,e){return`${Math.round(t/e*100)}%`}function Sz(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function pv(t){return typeof t=="number"}function BO(t){return pv(t)&&!isNaN(t)&&t>0}function zO(t,e){return pv(t)&&!isNaN(t)&&t<=e&&t>=0}function UZ(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${jI}\`.`}function GZ(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${jI} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Cz=xz,HZ=wz;const $z=R.forwardRef(({className:t,value:e,...n},r)=>D.jsx(Cz,{ref:r,className:Er("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:D.jsx(HZ,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));$z.displayName=Cz.displayName;var KZ=Array.isArray,Hr=KZ,qZ=typeof Io=="object"&&Io&&Io.Object===Object&&Io,kz=qZ,XZ=kz,YZ=typeof self=="object"&&self&&self.Object===Object&&self,QZ=XZ||YZ||Function("return this")(),fs=QZ,ZZ=fs,JZ=ZZ.Symbol,Kp=JZ,jO=Kp,Iz=Object.prototype,eJ=Iz.hasOwnProperty,tJ=Iz.toString,Pf=jO?jO.toStringTag:void 0;function nJ(t){var e=eJ.call(t,Pf),n=t[Pf];try{t[Pf]=void 0;var r=!0}catch{}var o=tJ.call(t);return r&&(e?t[Pf]=n:delete t[Pf]),o}var rJ=nJ,oJ=Object.prototype,iJ=oJ.toString;function sJ(t){return iJ.call(t)}var aJ=sJ,WO=Kp,lJ=rJ,uJ=aJ,cJ="[object Null]",dJ="[object Undefined]",VO=WO?WO.toStringTag:void 0;function fJ(t){return t==null?t===void 0?dJ:cJ:VO&&VO in Object(t)?lJ(t):uJ(t)}var Xs=fJ;function hJ(t){return t!=null&&typeof t=="object"}var Ys=hJ,pJ=Xs,mJ=Ys,gJ="[object Symbol]";function yJ(t){return typeof t=="symbol"||mJ(t)&&pJ(t)==gJ}var qd=yJ,vJ=Hr,xJ=qd,bJ=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wJ=/^\w*$/;function SJ(t,e){if(vJ(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||xJ(t)?!0:wJ.test(t)||!bJ.test(t)||e!=null&&t in Object(e)}var WI=SJ;function CJ(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var ll=CJ;const Xd=ht(ll);var $J=Xs,kJ=ll,IJ="[object AsyncFunction]",TJ="[object Function]",EJ="[object GeneratorFunction]",NJ="[object Proxy]";function AJ(t){if(!kJ(t))return!1;var e=$J(t);return e==TJ||e==EJ||e==IJ||e==NJ}var VI=AJ;const He=ht(VI);var OJ=fs,_J=OJ["__core-js_shared__"],RJ=_J,yw=RJ,UO=function(){var t=/[^.]+$/.exec(yw&&yw.keys&&yw.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function PJ(t){return!!UO&&UO in t}var DJ=PJ,MJ=Function.prototype,FJ=MJ.toString;function LJ(t){if(t!=null){try{return FJ.call(t)}catch{}try{return t+""}catch{}}return""}var Tz=LJ,BJ=VI,zJ=DJ,jJ=ll,WJ=Tz,VJ=/[\\^$.*+?()[\]{}|]/g,UJ=/^\[object .+?Constructor\]$/,GJ=Function.prototype,HJ=Object.prototype,KJ=GJ.toString,qJ=HJ.hasOwnProperty,XJ=RegExp("^"+KJ.call(qJ).replace(VJ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function YJ(t){if(!jJ(t)||zJ(t))return!1;var e=BJ(t)?XJ:UJ;return e.test(WJ(t))}var QJ=YJ;function ZJ(t,e){return t==null?void 0:t[e]}var JJ=ZJ,eee=QJ,tee=JJ;function nee(t,e){var n=tee(t,e);return eee(n)?n:void 0}var Du=nee,ree=Du,oee=ree(Object,"create"),yx=oee,GO=yx;function iee(){this.__data__=GO?GO(null):{},this.size=0}var see=iee;function aee(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var lee=aee,uee=yx,cee="__lodash_hash_undefined__",dee=Object.prototype,fee=dee.hasOwnProperty;function hee(t){var e=this.__data__;if(uee){var n=e[t];return n===cee?void 0:n}return fee.call(e,t)?e[t]:void 0}var pee=hee,mee=yx,gee=Object.prototype,yee=gee.hasOwnProperty;function vee(t){var e=this.__data__;return mee?e[t]!==void 0:yee.call(e,t)}var xee=vee,bee=yx,wee="__lodash_hash_undefined__";function See(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=bee&&e===void 0?wee:e,this}var Cee=See,$ee=see,kee=lee,Iee=pee,Tee=xee,Eee=Cee;function Yd(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Yd.prototype.clear=$ee;Yd.prototype.delete=kee;Yd.prototype.get=Iee;Yd.prototype.has=Tee;Yd.prototype.set=Eee;var Nee=Yd;function Aee(){this.__data__=[],this.size=0}var Oee=Aee;function _ee(t,e){return t===e||t!==t&&e!==e}var UI=_ee,Ree=UI;function Pee(t,e){for(var n=t.length;n--;)if(Ree(t[n][0],e))return n;return-1}var vx=Pee,Dee=vx,Mee=Array.prototype,Fee=Mee.splice;function Lee(t){var e=this.__data__,n=Dee(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Fee.call(e,n,1),--this.size,!0}var Bee=Lee,zee=vx;function jee(t){var e=this.__data__,n=zee(e,t);return n<0?void 0:e[n][1]}var Wee=jee,Vee=vx;function Uee(t){return Vee(this.__data__,t)>-1}var Gee=Uee,Hee=vx;function Kee(t,e){var n=this.__data__,r=Hee(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var qee=Kee,Xee=Oee,Yee=Bee,Qee=Wee,Zee=Gee,Jee=qee;function Qd(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Qd.prototype.clear=Xee;Qd.prototype.delete=Yee;Qd.prototype.get=Qee;Qd.prototype.has=Zee;Qd.prototype.set=Jee;var xx=Qd,ete=Du,tte=fs,nte=ete(tte,"Map"),GI=nte,HO=Nee,rte=xx,ote=GI;function ite(){this.size=0,this.__data__={hash:new HO,map:new(ote||rte),string:new HO}}var ste=ite;function ate(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var lte=ate,ute=lte;function cte(t,e){var n=t.__data__;return ute(e)?n[typeof e=="string"?"string":"hash"]:n.map}var bx=cte,dte=bx;function fte(t){var e=dte(this,t).delete(t);return this.size-=e?1:0,e}var hte=fte,pte=bx;function mte(t){return pte(this,t).get(t)}var gte=mte,yte=bx;function vte(t){return yte(this,t).has(t)}var xte=vte,bte=bx;function wte(t,e){var n=bte(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var Ste=wte,Cte=ste,$te=hte,kte=gte,Ite=xte,Tte=Ste;function Zd(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Zd.prototype.clear=Cte;Zd.prototype.delete=$te;Zd.prototype.get=kte;Zd.prototype.has=Ite;Zd.prototype.set=Tte;var HI=Zd,Ez=HI,Ete="Expected a function";function KI(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Ete);var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var s=t.apply(this,r);return n.cache=i.set(o,s)||i,s};return n.cache=new(KI.Cache||Ez),n}KI.Cache=Ez;var Nz=KI;const Nte=ht(Nz);var Ate=Nz,Ote=500;function _te(t){var e=Ate(t,function(r){return n.size===Ote&&n.clear(),r}),n=e.cache;return e}var Rte=_te,Pte=Rte,Dte=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Mte=/\\(\\)?/g,Fte=Pte(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Dte,function(n,r,o,i){e.push(o?i.replace(Mte,"$1"):r||n)}),e}),Lte=Fte;function Bte(t,e){for(var n=-1,r=t==null?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}var qI=Bte,KO=Kp,zte=qI,jte=Hr,Wte=qd,Vte=1/0,qO=KO?KO.prototype:void 0,XO=qO?qO.toString:void 0;function Az(t){if(typeof t=="string")return t;if(jte(t))return zte(t,Az)+"";if(Wte(t))return XO?XO.call(t):"";var e=t+"";return e=="0"&&1/t==-Vte?"-0":e}var Ute=Az,Gte=Ute;function Hte(t){return t==null?"":Gte(t)}var Oz=Hte,Kte=Hr,qte=WI,Xte=Lte,Yte=Oz;function Qte(t,e){return Kte(t)?t:qte(t,e)?[t]:Xte(Yte(t))}var _z=Qte,Zte=qd,Jte=1/0;function ene(t){if(typeof t=="string"||Zte(t))return t;var e=t+"";return e=="0"&&1/t==-Jte?"-0":e}var wx=ene,tne=_z,nne=wx;function rne(t,e){e=tne(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[nne(e[n++])];return n&&n==r?t:void 0}var XI=rne,one=XI;function ine(t,e,n){var r=t==null?void 0:one(t,e);return r===void 0?n:r}var Rz=ine;const Do=ht(Rz);function sne(t){return t==null}var ane=sne;const qe=ht(ane);var lne=Xs,une=Hr,cne=Ys,dne="[object String]";function fne(t){return typeof t=="string"||!une(t)&&cne(t)&&lne(t)==dne}var hne=fne;const pu=ht(hne);var Pz={exports:{}},vt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YI=Symbol.for("react.element"),QI=Symbol.for("react.portal"),Sx=Symbol.for("react.fragment"),Cx=Symbol.for("react.strict_mode"),$x=Symbol.for("react.profiler"),kx=Symbol.for("react.provider"),Ix=Symbol.for("react.context"),pne=Symbol.for("react.server_context"),Tx=Symbol.for("react.forward_ref"),Ex=Symbol.for("react.suspense"),Nx=Symbol.for("react.suspense_list"),Ax=Symbol.for("react.memo"),Ox=Symbol.for("react.lazy"),mne=Symbol.for("react.offscreen"),Dz;Dz=Symbol.for("react.module.reference");function Wo(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case YI:switch(t=t.type,t){case Sx:case $x:case Cx:case Ex:case Nx:return t;default:switch(t=t&&t.$$typeof,t){case pne:case Ix:case Tx:case Ox:case Ax:case kx:return t;default:return e}}case QI:return e}}}vt.ContextConsumer=Ix;vt.ContextProvider=kx;vt.Element=YI;vt.ForwardRef=Tx;vt.Fragment=Sx;vt.Lazy=Ox;vt.Memo=Ax;vt.Portal=QI;vt.Profiler=$x;vt.StrictMode=Cx;vt.Suspense=Ex;vt.SuspenseList=Nx;vt.isAsyncMode=function(){return!1};vt.isConcurrentMode=function(){return!1};vt.isContextConsumer=function(t){return Wo(t)===Ix};vt.isContextProvider=function(t){return Wo(t)===kx};vt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===YI};vt.isForwardRef=function(t){return Wo(t)===Tx};vt.isFragment=function(t){return Wo(t)===Sx};vt.isLazy=function(t){return Wo(t)===Ox};vt.isMemo=function(t){return Wo(t)===Ax};vt.isPortal=function(t){return Wo(t)===QI};vt.isProfiler=function(t){return Wo(t)===$x};vt.isStrictMode=function(t){return Wo(t)===Cx};vt.isSuspense=function(t){return Wo(t)===Ex};vt.isSuspenseList=function(t){return Wo(t)===Nx};vt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Sx||t===$x||t===Cx||t===Ex||t===Nx||t===mne||typeof t=="object"&&t!==null&&(t.$$typeof===Ox||t.$$typeof===Ax||t.$$typeof===kx||t.$$typeof===Ix||t.$$typeof===Tx||t.$$typeof===Dz||t.getModuleId!==void 0)};vt.typeOf=Wo;Pz.exports=vt;var gne=Pz.exports,yne=Xs,vne=Ys,xne="[object Number]";function bne(t){return typeof t=="number"||vne(t)&&yne(t)==xne}var Mz=bne;const wne=ht(Mz);var Sne=Mz;function Cne(t){return Sne(t)&&t!=+t}var $ne=Cne;const qp=ht($ne);var gi=function(e){return e===0?0:e>0?1:-1},jl=function(e){return pu(e)&&e.indexOf("%")===e.length-1},ge=function(e){return wne(e)&&!qp(e)},kne=function(e){return qe(e)},In=function(e){return ge(e)||pu(e)},Ine=0,Xp=function(e){var n=++Ine;return"".concat(e||"").concat(n)},mu=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ge(e)&&!pu(e))return r;var i;if(jl(e)){var s=e.indexOf("%");i=n*parseFloat(e.slice(0,s))/100}else i=+e;return qp(i)&&(i=r),o&&i>n&&(i=n),i},ma=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},Tne=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},o=0;o<n;o++)if(!r[e[o]])r[e[o]]=!0;else return!0;return!1},fi=function(e,n){return ge(e)&&ge(n)?function(r){return e+r*(n-e)}:function(){return n}};function mv(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):Do(r,e))===n})}var Ene=function(e,n){return ge(e)&&ge(n)?e-n:pu(e)&&pu(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function Dc(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function vC(t){"@babel/helpers - typeof";return vC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vC(t)}var Nne=["viewBox","children"],Ane=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],YO=["points","pathLength"],vw={svg:Nne,polygon:YO,polyline:YO},ZI=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],gv=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(R.isValidElement(e)&&(r=e.props),!Xd(r))return null;var o={};return Object.keys(r).forEach(function(i){ZI.includes(i)&&(o[i]=n||function(s){return r[i](r,s)})}),o},One=function(e,n,r){return function(o){return e(n,r,o),null}},yv=function(e,n,r){if(!Xd(e)||vC(e)!=="object")return null;var o=null;return Object.keys(e).forEach(function(i){var s=e[i];ZI.includes(i)&&typeof s=="function"&&(o||(o={}),o[i]=One(s,n,r))}),o},_ne=["children"],Rne=["children"];function QO(t,e){if(t==null)return{};var n=Pne(t,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Pne(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function xC(t){"@babel/helpers - typeof";return xC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xC(t)}var ZO={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Ns=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},JO=null,xw=null,JI=function t(e){if(e===JO&&Array.isArray(xw))return xw;var n=[];return R.Children.forEach(e,function(r){qe(r)||(gne.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),xw=n,JO=e,n};function Mo(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(o){return Ns(o)}):r=[Ns(e)],JI(t).forEach(function(o){var i=Do(o,"type.displayName")||Do(o,"type.name");r.indexOf(i)!==-1&&n.push(o)}),n}function Qr(t,e){var n=Mo(t,e);return n&&n[0]}var e_=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,o=n.height;return!(!ge(r)||r<=0||!ge(o)||o<=0)},Dne=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Mne=function(e){return e&&e.type&&pu(e.type)&&Dne.indexOf(e.type)>=0},Fne=function(e){return e&&xC(e)==="object"&&"clipDot"in e},Lne=function(e,n,r,o){var i,s=(i=vw==null?void 0:vw[o])!==null&&i!==void 0?i:[];return n.startsWith("data-")||!He(e)&&(o&&s.includes(n)||Ane.includes(n))||r&&ZI.includes(n)},Qe=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var o=e;if(R.isValidElement(e)&&(o=e.props),!Xd(o))return null;var i={};return Object.keys(o).forEach(function(s){var a;Lne((a=o)===null||a===void 0?void 0:a[s],s,n,r)&&(i[s]=o[s])}),i},bC=function t(e,n){if(e===n)return!0;var r=R.Children.count(e);if(r!==R.Children.count(n))return!1;if(r===0)return!0;if(r===1)return t_(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var o=0;o<r;o++){var i=e[o],s=n[o];if(Array.isArray(i)||Array.isArray(s)){if(!t(i,s))return!1}else if(!t_(i,s))return!1}return!0},t_=function(e,n){if(qe(e)&&qe(n))return!0;if(!qe(e)&&!qe(n)){var r=e.props||{},o=r.children,i=QO(r,_ne),s=n.props||{},a=s.children,l=QO(s,Rne);return o&&a?Dc(i,l)&&bC(o,a):!o&&!a?Dc(i,l):!1}return!1},n_=function(e,n){var r=[],o={};return JI(e).forEach(function(i,s){if(Mne(i))r.push(i);else if(i){var a=Ns(i.type),l=n[a]||{},u=l.handler,c=l.once;if(u&&(!c||!o[a])){var d=u(i,a,s);r.push(d),o[a]=!0}}}),r},Bne=function(e){var n=e&&e.type;return n&&ZO[n]?ZO[n]:null},zne=function(e,n){return JI(n).indexOf(e)},jne=["children","width","height","viewBox","className","style","title","desc"];function wC(){return wC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wC.apply(this,arguments)}function Wne(t,e){if(t==null)return{};var n=Vne(t,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Vne(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function SC(t){var e=t.children,n=t.width,r=t.height,o=t.viewBox,i=t.className,s=t.style,a=t.title,l=t.desc,u=Wne(t,jne),c=o||{width:n,height:r,x:0,y:0},d=Ze("recharts-surface",i);return B.createElement("svg",wC({},Qe(u,!0,"svg"),{className:d,width:n,height:r,style:s,viewBox:"".concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height)}),B.createElement("title",null,a),B.createElement("desc",null,l),e)}var Une=["children","className"];function CC(){return CC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CC.apply(this,arguments)}function Gne(t,e){if(t==null)return{};var n=Hne(t,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Hne(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var on=B.forwardRef(function(t,e){var n=t.children,r=t.className,o=Gne(t,Une),i=Ze("recharts-layer",r);return B.createElement("g",CC({className:i},Qe(o,!0),{ref:e}),n)}),As=function(e,n){for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i]};function Kne(t,e,n){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),n=n>o?o:n,n<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var i=Array(o);++r<o;)i[r]=t[r+e];return i}var qne=Kne,Xne=qne;function Yne(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:Xne(t,e,n)}var Qne=Yne,Zne="\\ud800-\\udfff",Jne="\\u0300-\\u036f",ere="\\ufe20-\\ufe2f",tre="\\u20d0-\\u20ff",nre=Jne+ere+tre,rre="\\ufe0e\\ufe0f",ore="\\u200d",ire=RegExp("["+ore+Zne+nre+rre+"]");function sre(t){return ire.test(t)}var Fz=sre;function are(t){return t.split("")}var lre=are,Lz="\\ud800-\\udfff",ure="\\u0300-\\u036f",cre="\\ufe20-\\ufe2f",dre="\\u20d0-\\u20ff",fre=ure+cre+dre,hre="\\ufe0e\\ufe0f",pre="["+Lz+"]",$C="["+fre+"]",kC="\\ud83c[\\udffb-\\udfff]",mre="(?:"+$C+"|"+kC+")",Bz="[^"+Lz+"]",zz="(?:\\ud83c[\\udde6-\\uddff]){2}",jz="[\\ud800-\\udbff][\\udc00-\\udfff]",gre="\\u200d",Wz=mre+"?",Vz="["+hre+"]?",yre="(?:"+gre+"(?:"+[Bz,zz,jz].join("|")+")"+Vz+Wz+")*",vre=Vz+Wz+yre,xre="(?:"+[Bz+$C+"?",$C,zz,jz,pre].join("|")+")",bre=RegExp(kC+"(?="+kC+")|"+xre+vre,"g");function wre(t){return t.match(bre)||[]}var Sre=wre,Cre=lre,$re=Fz,kre=Sre;function Ire(t){return $re(t)?kre(t):Cre(t)}var Tre=Ire,Ere=Qne,Nre=Fz,Are=Tre,Ore=Oz;function _re(t){return function(e){e=Ore(e);var n=Nre(e)?Are(e):void 0,r=n?n[0]:e.charAt(0),o=n?Ere(n,1).join(""):e.slice(1);return r[t]()+o}}var Rre=_re,Pre=Rre,Dre=Pre("toUpperCase"),Mre=Dre;const _x=ht(Mre);function It(t){return function(){return t}}const Uz=Math.cos,vv=Math.sin,Ai=Math.sqrt,xv=Math.PI,Rx=2*xv,IC=Math.PI,TC=2*IC,Al=1e-6,Fre=TC-Al;function Gz(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Lre(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Gz;const n=10**e;return function(r){this._+=r[0];for(let o=1,i=r.length;o<i;++o)this._+=Math.round(arguments[o]*n)/n+r[o]}}class Bre{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Gz:Lre(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,o){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+o}`}bezierCurveTo(e,n,r,o,i,s){this._append`C${+e},${+n},${+r},${+o},${this._x1=+i},${this._y1=+s}`}arcTo(e,n,r,o,i){if(e=+e,n=+n,r=+r,o=+o,i=+i,i<0)throw new Error(`negative radius: ${i}`);let s=this._x1,a=this._y1,l=r-e,u=o-n,c=s-e,d=a-n,f=c*c+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>Al)if(!(Math.abs(d*l-u*c)>Al)||!i)this._append`L${this._x1=e},${this._y1=n}`;else{let h=r-s,p=o-a,m=l*l+u*u,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(f),x=i*Math.tan((IC-Math.acos((m+f-g)/(2*y*v)))/2),b=x/v,w=x/y;Math.abs(b-1)>Al&&this._append`L${e+b*c},${n+b*d}`,this._append`A${i},${i},0,0,${+(d*h>c*p)},${this._x1=e+w*l},${this._y1=n+w*u}`}}arc(e,n,r,o,i,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(o),l=r*Math.sin(o),u=e+a,c=n+l,d=1^s,f=s?o-i:i-o;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>Al||Math.abs(this._y1-c)>Al)&&this._append`L${u},${c}`,r&&(f<0&&(f=f%TC+TC),f>Fre?this._append`A${r},${r},0,1,${d},${e-a},${n-l}A${r},${r},0,1,${d},${this._x1=u},${this._y1=c}`:f>Al&&this._append`A${r},${r},0,${+(f>=IC)},${d},${this._x1=e+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(e,n,r,o){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+o}h${-r}Z`}toString(){return this._}}function eT(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Bre(e)}function tT(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Hz(t){this._context=t}Hz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Px(t){return new Hz(t)}function Kz(t){return t[0]}function qz(t){return t[1]}function Xz(t,e){var n=It(!0),r=null,o=Px,i=null,s=eT(a);t=typeof t=="function"?t:t===void 0?Kz:It(t),e=typeof e=="function"?e:e===void 0?qz:It(e);function a(l){var u,c=(l=tT(l)).length,d,f=!1,h;for(r==null&&(i=o(h=s())),u=0;u<=c;++u)!(u<c&&n(d=l[u],u,l))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+t(d,u,l),+e(d,u,l));if(h)return i=null,h+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:It(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:It(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:It(!!l),a):n},a.curve=function(l){return arguments.length?(o=l,r!=null&&(i=o(r)),a):o},a.context=function(l){return arguments.length?(l==null?r=i=null:i=o(r=l),a):r},a}function Gg(t,e,n){var r=null,o=It(!0),i=null,s=Px,a=null,l=eT(u);t=typeof t=="function"?t:t===void 0?Kz:It(+t),e=typeof e=="function"?e:It(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?qz:It(+n);function u(d){var f,h,p,m=(d=tT(d)).length,g,y=!1,v,x=new Array(m),b=new Array(m);for(i==null&&(a=s(v=l())),f=0;f<=m;++f){if(!(f<m&&o(g=d[f],f,d))===y)if(y=!y)h=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=f-1;p>=h;--p)a.point(x[p],b[p]);a.lineEnd(),a.areaEnd()}y&&(x[f]=+t(g,f,d),b[f]=+e(g,f,d),a.point(r?+r(g,f,d):x[f],n?+n(g,f,d):b[f]))}if(v)return a=null,v+""||null}function c(){return Xz().defined(o).curve(s).context(i)}return u.x=function(d){return arguments.length?(t=typeof d=="function"?d:It(+d),r=null,u):t},u.x0=function(d){return arguments.length?(t=typeof d=="function"?d:It(+d),u):t},u.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:It(+d),u):r},u.y=function(d){return arguments.length?(e=typeof d=="function"?d:It(+d),n=null,u):e},u.y0=function(d){return arguments.length?(e=typeof d=="function"?d:It(+d),u):e},u.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:It(+d),u):n},u.lineX0=u.lineY0=function(){return c().x(t).y(e)},u.lineY1=function(){return c().x(t).y(n)},u.lineX1=function(){return c().x(r).y(e)},u.defined=function(d){return arguments.length?(o=typeof d=="function"?d:It(!!d),u):o},u.curve=function(d){return arguments.length?(s=d,i!=null&&(a=s(i)),u):s},u.context=function(d){return arguments.length?(d==null?i=a=null:a=s(i=d),u):i},u}class Yz{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function zre(t){return new Yz(t,!0)}function jre(t){return new Yz(t,!1)}const nT={draw(t,e){const n=Ai(e/xv);t.moveTo(n,0),t.arc(0,0,n,0,Rx)}},Wre={draw(t,e){const n=Ai(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},Qz=Ai(1/3),Vre=Qz*2,Ure={draw(t,e){const n=Ai(e/Vre),r=n*Qz;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},Gre={draw(t,e){const n=Ai(e),r=-n/2;t.rect(r,r,n,n)}},Hre=.8908130915292852,Zz=vv(xv/10)/vv(7*xv/10),Kre=vv(Rx/10)*Zz,qre=-Uz(Rx/10)*Zz,Xre={draw(t,e){const n=Ai(e*Hre),r=Kre*n,o=qre*n;t.moveTo(0,-n),t.lineTo(r,o);for(let i=1;i<5;++i){const s=Rx*i/5,a=Uz(s),l=vv(s);t.lineTo(l*n,-a*n),t.lineTo(a*r-l*o,l*r+a*o)}t.closePath()}},bw=Ai(3),Yre={draw(t,e){const n=-Ai(e/(bw*3));t.moveTo(0,n*2),t.lineTo(-bw*n,-n),t.lineTo(bw*n,-n),t.closePath()}},mo=-.5,go=Ai(3)/2,EC=1/Ai(12),Qre=(EC/2+1)*3,Zre={draw(t,e){const n=Ai(e/Qre),r=n/2,o=n*EC,i=r,s=n*EC+n,a=-i,l=s;t.moveTo(r,o),t.lineTo(i,s),t.lineTo(a,l),t.lineTo(mo*r-go*o,go*r+mo*o),t.lineTo(mo*i-go*s,go*i+mo*s),t.lineTo(mo*a-go*l,go*a+mo*l),t.lineTo(mo*r+go*o,mo*o-go*r),t.lineTo(mo*i+go*s,mo*s-go*i),t.lineTo(mo*a+go*l,mo*l-go*a),t.closePath()}};function Jre(t,e){let n=null,r=eT(o);t=typeof t=="function"?t:It(t||nT),e=typeof e=="function"?e:It(e===void 0?64:+e);function o(){let i;if(n||(n=i=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return o.type=function(i){return arguments.length?(t=typeof i=="function"?i:It(i),o):t},o.size=function(i){return arguments.length?(e=typeof i=="function"?i:It(+i),o):e},o.context=function(i){return arguments.length?(n=i??null,o):n},o}function bv(){}function wv(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Jz(t){this._context=t}Jz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:wv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:wv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function eoe(t){return new Jz(t)}function ej(t){this._context=t}ej.prototype={areaStart:bv,areaEnd:bv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:wv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function toe(t){return new ej(t)}function tj(t){this._context=t}tj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:wv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function noe(t){return new tj(t)}function nj(t){this._context=t}nj.prototype={areaStart:bv,areaEnd:bv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function roe(t){return new nj(t)}function r_(t){return t<0?-1:1}function o_(t,e,n){var r=t._x1-t._x0,o=e-t._x1,i=(t._y1-t._y0)/(r||o<0&&-0),s=(n-t._y1)/(o||r<0&&-0),a=(i*o+s*r)/(r+o);return(r_(i)+r_(s))*Math.min(Math.abs(i),Math.abs(s),.5*Math.abs(a))||0}function i_(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function ww(t,e,n){var r=t._x0,o=t._y0,i=t._x1,s=t._y1,a=(i-r)/3;t._context.bezierCurveTo(r+a,o+a*e,i-a,s-a*n,i,s)}function Sv(t){this._context=t}Sv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ww(this,this._t0,i_(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,ww(this,i_(this,n=o_(this,t,e)),n);break;default:ww(this,this._t0,n=o_(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function rj(t){this._context=new oj(t)}(rj.prototype=Object.create(Sv.prototype)).point=function(t,e){Sv.prototype.point.call(this,e,t)};function oj(t){this._context=t}oj.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,o,i){this._context.bezierCurveTo(e,t,r,n,i,o)}};function ooe(t){return new Sv(t)}function ioe(t){return new rj(t)}function ij(t){this._context=t}ij.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=s_(t),o=s_(e),i=0,s=1;s<n;++i,++s)this._context.bezierCurveTo(r[0][i],o[0][i],r[1][i],o[1][i],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function s_(t){var e,n=t.length-1,r,o=new Array(n),i=new Array(n),s=new Array(n);for(o[0]=0,i[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)o[e]=1,i[e]=4,s[e]=4*t[e]+2*t[e+1];for(o[n-1]=2,i[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=o[e]/i[e-1],i[e]-=r,s[e]-=r*s[e-1];for(o[n-1]=s[n-1]/i[n-1],e=n-2;e>=0;--e)o[e]=(s[e]-o[e+1])/i[e];for(i[n-1]=(t[n]+o[n-1])/2,e=0;e<n-1;++e)i[e]=2*t[e+1]-o[e+1];return[o,i]}function soe(t){return new ij(t)}function Dx(t,e){this._context=t,this._t=e}Dx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function aoe(t){return new Dx(t,.5)}function loe(t){return new Dx(t,0)}function uoe(t){return new Dx(t,1)}function ad(t,e){if((s=t.length)>1)for(var n=1,r,o,i=t[e[0]],s,a=i.length;n<s;++n)for(o=i,i=t[e[n]],r=0;r<a;++r)i[r][1]+=i[r][0]=isNaN(o[r][1])?o[r][0]:o[r][1]}function NC(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function coe(t,e){return t[e]}function doe(t){const e=[];return e.key=t,e}function foe(){var t=It([]),e=NC,n=ad,r=coe;function o(i){var s=Array.from(t.apply(this,arguments),doe),a,l=s.length,u=-1,c;for(const d of i)for(a=0,++u;a<l;++a)(s[a][u]=[0,+r(d,s[a].key,u,i)]).data=d;for(a=0,c=tT(e(s));a<l;++a)s[c[a]].index=a;return n(s,c),s}return o.keys=function(i){return arguments.length?(t=typeof i=="function"?i:It(Array.from(i)),o):t},o.value=function(i){return arguments.length?(r=typeof i=="function"?i:It(+i),o):r},o.order=function(i){return arguments.length?(e=i==null?NC:typeof i=="function"?i:It(Array.from(i)),o):e},o.offset=function(i){return arguments.length?(n=i??ad,o):n},o}function hoe(t,e){if((r=t.length)>0){for(var n,r,o=0,i=t[0].length,s;o<i;++o){for(s=n=0;n<r;++n)s+=t[n][o][1]||0;if(s)for(n=0;n<r;++n)t[n][o][1]/=s}ad(t,e)}}function poe(t,e){if((o=t.length)>0){for(var n=0,r=t[e[0]],o,i=r.length;n<i;++n){for(var s=0,a=0;s<o;++s)a+=t[s][n][1]||0;r[n][1]+=r[n][0]=-a/2}ad(t,e)}}function moe(t,e){if(!(!((s=t.length)>0)||!((i=(o=t[e[0]]).length)>0))){for(var n=0,r=1,o,i,s;r<i;++r){for(var a=0,l=0,u=0;a<s;++a){for(var c=t[e[a]],d=c[r][1]||0,f=c[r-1][1]||0,h=(d-f)/2,p=0;p<a;++p){var m=t[e[p]],g=m[r][1]||0,y=m[r-1][1]||0;h+=g-y}l+=d,u+=h*d}o[r-1][1]+=o[r-1][0]=n,l&&(n-=u/l)}o[r-1][1]+=o[r-1][0]=n,ad(t,e)}}function Vh(t){"@babel/helpers - typeof";return Vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vh(t)}var goe=["type","size","sizeType"];function AC(){return AC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AC.apply(this,arguments)}function a_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function l_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?a_(Object(n),!0).forEach(function(r){yoe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yoe(t,e,n){return e=voe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function voe(t){var e=xoe(t,"string");return Vh(e)=="symbol"?e:e+""}function xoe(t,e){if(Vh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Vh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function boe(t,e){if(t==null)return{};var n=woe(t,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function woe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var sj={symbolCircle:nT,symbolCross:Wre,symbolDiamond:Ure,symbolSquare:Gre,symbolStar:Xre,symbolTriangle:Yre,symbolWye:Zre},Soe=Math.PI/180,Coe=function(e){var n="symbol".concat(_x(e));return sj[n]||nT},$oe=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var o=18*Soe;return 1.25*e*e*(Math.tan(o)-Math.tan(o*2)*Math.pow(Math.tan(o),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},koe=function(e,n){sj["symbol".concat(_x(e))]=n},rT=function(e){var n=e.type,r=n===void 0?"circle":n,o=e.size,i=o===void 0?64:o,s=e.sizeType,a=s===void 0?"area":s,l=boe(e,goe),u=l_(l_({},l),{},{type:r,size:i,sizeType:a}),c=function(){var g=Coe(r),y=Jre().type(g).size($oe(i,a,r));return y()},d=u.className,f=u.cx,h=u.cy,p=Qe(u,!0);return f===+f&&h===+h&&i===+i?B.createElement("path",AC({},p,{className:Ze("recharts-symbols",d),transform:"translate(".concat(f,", ").concat(h,")"),d:c()})):null};rT.registerSymbol=koe;function ld(t){"@babel/helpers - typeof";return ld=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ld(t)}function OC(){return OC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OC.apply(this,arguments)}function u_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Ioe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u_(Object(n),!0).forEach(function(r){Uh(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Toe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Eoe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lj(r.key),r)}}function Noe(t,e,n){return e&&Eoe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Aoe(t,e,n){return e=Cv(e),Ooe(t,aj()?Reflect.construct(e,n||[],Cv(t).constructor):e.apply(t,n))}function Ooe(t,e){if(e&&(ld(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _oe(t)}function _oe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aj=function(){return!!t})()}function Cv(t){return Cv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Cv(t)}function Roe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_C(t,e)}function _C(t,e){return _C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},_C(t,e)}function Uh(t,e,n){return e=lj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lj(t){var e=Poe(t,"string");return ld(e)=="symbol"?e:e+""}function Poe(t,e){if(ld(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ld(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yo=32,oT=function(t){function e(){return Toe(this,e),Aoe(this,e,arguments)}return Roe(e,t),Noe(e,[{key:"renderIcon",value:function(r){var o=this.props.inactiveColor,i=yo/2,s=yo/6,a=yo/3,l=r.inactive?o:r.color;if(r.type==="plainline")return B.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:i,x2:yo,y2:i,className:"recharts-legend-icon"});if(r.type==="line")return B.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(i,"h").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*a,",").concat(i,`
            H`).concat(yo,"M").concat(2*a,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(a,",").concat(i),className:"recharts-legend-icon"});if(r.type==="rect")return B.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(yo/8,"h").concat(yo,"v").concat(yo*3/4,"h").concat(-yo,"z"),className:"recharts-legend-icon"});if(B.isValidElement(r.legendIcon)){var u=Ioe({},r);return delete u.legendIcon,B.cloneElement(r.legendIcon,u)}return B.createElement(rT,{fill:l,cx:i,cy:i,size:yo,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,o=this.props,i=o.payload,s=o.iconSize,a=o.layout,l=o.formatter,u=o.inactiveColor,c={x:0,y:0,width:yo,height:yo},d={display:a==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(h,p){var m=h.formatter||l,g=Ze(Uh(Uh({"recharts-legend-item":!0},"legend-item-".concat(p),!0),"inactive",h.inactive));if(h.type==="none")return null;var y=He(h.value)?null:h.value;As(!He(h.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var v=h.inactive?u:h.color;return B.createElement("li",OC({className:g,style:d,key:"legend-item-".concat(p)},yv(r.props,h,p)),B.createElement(SC,{width:s,height:s,viewBox:c,style:f},r.renderIcon(h)),B.createElement("span",{className:"recharts-legend-item-text",style:{color:v}},m?m(y,h,p):y))})}},{key:"render",value:function(){var r=this.props,o=r.payload,i=r.layout,s=r.align;if(!o||!o.length)return null;var a={padding:0,margin:0,textAlign:i==="horizontal"?s:"left"};return B.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}])}(R.PureComponent);Uh(oT,"displayName","Legend");Uh(oT,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Doe=xx;function Moe(){this.__data__=new Doe,this.size=0}var Foe=Moe;function Loe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var Boe=Loe;function zoe(t){return this.__data__.get(t)}var joe=zoe;function Woe(t){return this.__data__.has(t)}var Voe=Woe,Uoe=xx,Goe=GI,Hoe=HI,Koe=200;function qoe(t,e){var n=this.__data__;if(n instanceof Uoe){var r=n.__data__;if(!Goe||r.length<Koe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Hoe(r)}return n.set(t,e),this.size=n.size,this}var Xoe=qoe,Yoe=xx,Qoe=Foe,Zoe=Boe,Joe=joe,eie=Voe,tie=Xoe;function Jd(t){var e=this.__data__=new Yoe(t);this.size=e.size}Jd.prototype.clear=Qoe;Jd.prototype.delete=Zoe;Jd.prototype.get=Joe;Jd.prototype.has=eie;Jd.prototype.set=tie;var uj=Jd,nie="__lodash_hash_undefined__";function rie(t){return this.__data__.set(t,nie),this}var oie=rie;function iie(t){return this.__data__.has(t)}var sie=iie,aie=HI,lie=oie,uie=sie;function $v(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new aie;++e<n;)this.add(t[e])}$v.prototype.add=$v.prototype.push=lie;$v.prototype.has=uie;var cj=$v;function cie(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var dj=cie;function die(t,e){return t.has(e)}var fj=die,fie=cj,hie=dj,pie=fj,mie=1,gie=2;function yie(t,e,n,r,o,i){var s=n&mie,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var u=i.get(t),c=i.get(e);if(u&&c)return u==e&&c==t;var d=-1,f=!0,h=n&gie?new fie:void 0;for(i.set(t,e),i.set(e,t);++d<a;){var p=t[d],m=e[d];if(r)var g=s?r(m,p,d,e,t,i):r(p,m,d,t,e,i);if(g!==void 0){if(g)continue;f=!1;break}if(h){if(!hie(e,function(y,v){if(!pie(h,v)&&(p===y||o(p,y,n,r,i)))return h.push(v)})){f=!1;break}}else if(!(p===m||o(p,m,n,r,i))){f=!1;break}}return i.delete(t),i.delete(e),f}var hj=yie,vie=fs,xie=vie.Uint8Array,bie=xie;function wie(t){var e=-1,n=Array(t.size);return t.forEach(function(r,o){n[++e]=[o,r]}),n}var Sie=wie;function Cie(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var iT=Cie,c_=Kp,d_=bie,$ie=UI,kie=hj,Iie=Sie,Tie=iT,Eie=1,Nie=2,Aie="[object Boolean]",Oie="[object Date]",_ie="[object Error]",Rie="[object Map]",Pie="[object Number]",Die="[object RegExp]",Mie="[object Set]",Fie="[object String]",Lie="[object Symbol]",Bie="[object ArrayBuffer]",zie="[object DataView]",f_=c_?c_.prototype:void 0,Sw=f_?f_.valueOf:void 0;function jie(t,e,n,r,o,i,s){switch(n){case zie:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Bie:return!(t.byteLength!=e.byteLength||!i(new d_(t),new d_(e)));case Aie:case Oie:case Pie:return $ie(+t,+e);case _ie:return t.name==e.name&&t.message==e.message;case Die:case Fie:return t==e+"";case Rie:var a=Iie;case Mie:var l=r&Eie;if(a||(a=Tie),t.size!=e.size&&!l)return!1;var u=s.get(t);if(u)return u==e;r|=Nie,s.set(t,e);var c=kie(a(t),a(e),r,o,i,s);return s.delete(t),c;case Lie:if(Sw)return Sw.call(t)==Sw.call(e)}return!1}var Wie=jie;function Vie(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}var pj=Vie,Uie=pj,Gie=Hr;function Hie(t,e,n){var r=e(t);return Gie(t)?r:Uie(r,n(t))}var Kie=Hie;function qie(t,e){for(var n=-1,r=t==null?0:t.length,o=0,i=[];++n<r;){var s=t[n];e(s,n,t)&&(i[o++]=s)}return i}var Xie=qie;function Yie(){return[]}var Qie=Yie,Zie=Xie,Jie=Qie,ese=Object.prototype,tse=ese.propertyIsEnumerable,h_=Object.getOwnPropertySymbols,nse=h_?function(t){return t==null?[]:(t=Object(t),Zie(h_(t),function(e){return tse.call(t,e)}))}:Jie,rse=nse;function ose(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var ise=ose,sse=Xs,ase=Ys,lse="[object Arguments]";function use(t){return ase(t)&&sse(t)==lse}var cse=use,p_=cse,dse=Ys,mj=Object.prototype,fse=mj.hasOwnProperty,hse=mj.propertyIsEnumerable,pse=p_(function(){return arguments}())?p_:function(t){return dse(t)&&fse.call(t,"callee")&&!hse.call(t,"callee")},sT=pse,kv={exports:{}};function mse(){return!1}var gse=mse;kv.exports;(function(t,e){var n=fs,r=gse,o=e&&!e.nodeType&&e,i=o&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===o,a=s?n.Buffer:void 0,l=a?a.isBuffer:void 0,u=l||r;t.exports=u})(kv,kv.exports);var gj=kv.exports,yse=9007199254740991,vse=/^(?:0|[1-9]\d*)$/;function xse(t,e){var n=typeof t;return e=e??yse,!!e&&(n=="number"||n!="symbol"&&vse.test(t))&&t>-1&&t%1==0&&t<e}var aT=xse,bse=9007199254740991;function wse(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=bse}var lT=wse,Sse=Xs,Cse=lT,$se=Ys,kse="[object Arguments]",Ise="[object Array]",Tse="[object Boolean]",Ese="[object Date]",Nse="[object Error]",Ase="[object Function]",Ose="[object Map]",_se="[object Number]",Rse="[object Object]",Pse="[object RegExp]",Dse="[object Set]",Mse="[object String]",Fse="[object WeakMap]",Lse="[object ArrayBuffer]",Bse="[object DataView]",zse="[object Float32Array]",jse="[object Float64Array]",Wse="[object Int8Array]",Vse="[object Int16Array]",Use="[object Int32Array]",Gse="[object Uint8Array]",Hse="[object Uint8ClampedArray]",Kse="[object Uint16Array]",qse="[object Uint32Array]",Dt={};Dt[zse]=Dt[jse]=Dt[Wse]=Dt[Vse]=Dt[Use]=Dt[Gse]=Dt[Hse]=Dt[Kse]=Dt[qse]=!0;Dt[kse]=Dt[Ise]=Dt[Lse]=Dt[Tse]=Dt[Bse]=Dt[Ese]=Dt[Nse]=Dt[Ase]=Dt[Ose]=Dt[_se]=Dt[Rse]=Dt[Pse]=Dt[Dse]=Dt[Mse]=Dt[Fse]=!1;function Xse(t){return $se(t)&&Cse(t.length)&&!!Dt[Sse(t)]}var Yse=Xse;function Qse(t){return function(e){return t(e)}}var yj=Qse,Iv={exports:{}};Iv.exports;(function(t,e){var n=kz,r=e&&!e.nodeType&&e,o=r&&!0&&t&&!t.nodeType&&t,i=o&&o.exports===r,s=i&&n.process,a=function(){try{var l=o&&o.require&&o.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();t.exports=a})(Iv,Iv.exports);var Zse=Iv.exports,Jse=Yse,eae=yj,m_=Zse,g_=m_&&m_.isTypedArray,tae=g_?eae(g_):Jse,vj=tae,nae=ise,rae=sT,oae=Hr,iae=gj,sae=aT,aae=vj,lae=Object.prototype,uae=lae.hasOwnProperty;function cae(t,e){var n=oae(t),r=!n&&rae(t),o=!n&&!r&&iae(t),i=!n&&!r&&!o&&aae(t),s=n||r||o||i,a=s?nae(t.length,String):[],l=a.length;for(var u in t)(e||uae.call(t,u))&&!(s&&(u=="length"||o&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||sae(u,l)))&&a.push(u);return a}var dae=cae,fae=Object.prototype;function hae(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||fae;return t===n}var pae=hae;function mae(t,e){return function(n){return t(e(n))}}var xj=mae,gae=xj,yae=gae(Object.keys,Object),vae=yae,xae=pae,bae=vae,wae=Object.prototype,Sae=wae.hasOwnProperty;function Cae(t){if(!xae(t))return bae(t);var e=[];for(var n in Object(t))Sae.call(t,n)&&n!="constructor"&&e.push(n);return e}var $ae=Cae,kae=VI,Iae=lT;function Tae(t){return t!=null&&Iae(t.length)&&!kae(t)}var Yp=Tae,Eae=dae,Nae=$ae,Aae=Yp;function Oae(t){return Aae(t)?Eae(t):Nae(t)}var Mx=Oae,_ae=Kie,Rae=rse,Pae=Mx;function Dae(t){return _ae(t,Pae,Rae)}var Mae=Dae,y_=Mae,Fae=1,Lae=Object.prototype,Bae=Lae.hasOwnProperty;function zae(t,e,n,r,o,i){var s=n&Fae,a=y_(t),l=a.length,u=y_(e),c=u.length;if(l!=c&&!s)return!1;for(var d=l;d--;){var f=a[d];if(!(s?f in e:Bae.call(e,f)))return!1}var h=i.get(t),p=i.get(e);if(h&&p)return h==e&&p==t;var m=!0;i.set(t,e),i.set(e,t);for(var g=s;++d<l;){f=a[d];var y=t[f],v=e[f];if(r)var x=s?r(v,y,f,e,t,i):r(y,v,f,t,e,i);if(!(x===void 0?y===v||o(y,v,n,r,i):x)){m=!1;break}g||(g=f=="constructor")}if(m&&!g){var b=t.constructor,w=e.constructor;b!=w&&"constructor"in t&&"constructor"in e&&!(typeof b=="function"&&b instanceof b&&typeof w=="function"&&w instanceof w)&&(m=!1)}return i.delete(t),i.delete(e),m}var jae=zae,Wae=Du,Vae=fs,Uae=Wae(Vae,"DataView"),Gae=Uae,Hae=Du,Kae=fs,qae=Hae(Kae,"Promise"),Xae=qae,Yae=Du,Qae=fs,Zae=Yae(Qae,"Set"),bj=Zae,Jae=Du,ele=fs,tle=Jae(ele,"WeakMap"),nle=tle,RC=Gae,PC=GI,DC=Xae,MC=bj,FC=nle,wj=Xs,ef=Tz,v_="[object Map]",rle="[object Object]",x_="[object Promise]",b_="[object Set]",w_="[object WeakMap]",S_="[object DataView]",ole=ef(RC),ile=ef(PC),sle=ef(DC),ale=ef(MC),lle=ef(FC),Ol=wj;(RC&&Ol(new RC(new ArrayBuffer(1)))!=S_||PC&&Ol(new PC)!=v_||DC&&Ol(DC.resolve())!=x_||MC&&Ol(new MC)!=b_||FC&&Ol(new FC)!=w_)&&(Ol=function(t){var e=wj(t),n=e==rle?t.constructor:void 0,r=n?ef(n):"";if(r)switch(r){case ole:return S_;case ile:return v_;case sle:return x_;case ale:return b_;case lle:return w_}return e});var ule=Ol,Cw=uj,cle=hj,dle=Wie,fle=jae,C_=ule,$_=Hr,k_=gj,hle=vj,ple=1,I_="[object Arguments]",T_="[object Array]",Hg="[object Object]",mle=Object.prototype,E_=mle.hasOwnProperty;function gle(t,e,n,r,o,i){var s=$_(t),a=$_(e),l=s?T_:C_(t),u=a?T_:C_(e);l=l==I_?Hg:l,u=u==I_?Hg:u;var c=l==Hg,d=u==Hg,f=l==u;if(f&&k_(t)){if(!k_(e))return!1;s=!0,c=!1}if(f&&!c)return i||(i=new Cw),s||hle(t)?cle(t,e,n,r,o,i):dle(t,e,l,n,r,o,i);if(!(n&ple)){var h=c&&E_.call(t,"__wrapped__"),p=d&&E_.call(e,"__wrapped__");if(h||p){var m=h?t.value():t,g=p?e.value():e;return i||(i=new Cw),o(m,g,n,r,i)}}return f?(i||(i=new Cw),fle(t,e,n,r,o,i)):!1}var yle=gle,vle=yle,N_=Ys;function Sj(t,e,n,r,o){return t===e?!0:t==null||e==null||!N_(t)&&!N_(e)?t!==t&&e!==e:vle(t,e,n,r,Sj,o)}var uT=Sj,xle=uj,ble=uT,wle=1,Sle=2;function Cle(t,e,n,r){var o=n.length,i=o,s=!r;if(t==null)return!i;for(t=Object(t);o--;){var a=n[o];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<i;){a=n[o];var l=a[0],u=t[l],c=a[1];if(s&&a[2]){if(u===void 0&&!(l in t))return!1}else{var d=new xle;if(r)var f=r(u,c,l,t,e,d);if(!(f===void 0?ble(c,u,wle|Sle,r,d):f))return!1}}return!0}var $le=Cle,kle=ll;function Ile(t){return t===t&&!kle(t)}var Cj=Ile,Tle=Cj,Ele=Mx;function Nle(t){for(var e=Ele(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,Tle(o)]}return e}var Ale=Nle;function Ole(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var $j=Ole,_le=$le,Rle=Ale,Ple=$j;function Dle(t){var e=Rle(t);return e.length==1&&e[0][2]?Ple(e[0][0],e[0][1]):function(n){return n===t||_le(n,t,e)}}var Mle=Dle;function Fle(t,e){return t!=null&&e in Object(t)}var Lle=Fle,Ble=_z,zle=sT,jle=Hr,Wle=aT,Vle=lT,Ule=wx;function Gle(t,e,n){e=Ble(e,t);for(var r=-1,o=e.length,i=!1;++r<o;){var s=Ule(e[r]);if(!(i=t!=null&&n(t,s)))break;t=t[s]}return i||++r!=o?i:(o=t==null?0:t.length,!!o&&Vle(o)&&Wle(s,o)&&(jle(t)||zle(t)))}var Hle=Gle,Kle=Lle,qle=Hle;function Xle(t,e){return t!=null&&qle(t,e,Kle)}var Yle=Xle,Qle=uT,Zle=Rz,Jle=Yle,eue=WI,tue=Cj,nue=$j,rue=wx,oue=1,iue=2;function sue(t,e){return eue(t)&&tue(e)?nue(rue(t),e):function(n){var r=Zle(n,t);return r===void 0&&r===e?Jle(n,t):Qle(e,r,oue|iue)}}var aue=sue;function lue(t){return t}var tf=lue;function uue(t){return function(e){return e==null?void 0:e[t]}}var cue=uue,due=XI;function fue(t){return function(e){return due(e,t)}}var hue=fue,pue=cue,mue=hue,gue=WI,yue=wx;function vue(t){return gue(t)?pue(yue(t)):mue(t)}var xue=vue,bue=Mle,wue=aue,Sue=tf,Cue=Hr,$ue=xue;function kue(t){return typeof t=="function"?t:t==null?Sue:typeof t=="object"?Cue(t)?wue(t[0],t[1]):bue(t):$ue(t)}var ul=kue;function Iue(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}var kj=Iue;function Tue(t){return t!==t}var Eue=Tue;function Nue(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}var Aue=Nue,Oue=kj,_ue=Eue,Rue=Aue;function Pue(t,e,n){return e===e?Rue(t,e,n):Oue(t,_ue,n)}var Due=Pue,Mue=Due;function Fue(t,e){var n=t==null?0:t.length;return!!n&&Mue(t,e,0)>-1}var Lue=Fue;function Bue(t,e,n){for(var r=-1,o=t==null?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1}var zue=Bue;function jue(){}var Wue=jue,$w=bj,Vue=Wue,Uue=iT,Gue=1/0,Hue=$w&&1/Uue(new $w([,-0]))[1]==Gue?function(t){return new $w(t)}:Vue,Kue=Hue,que=cj,Xue=Lue,Yue=zue,Que=fj,Zue=Kue,Jue=iT,ece=200;function tce(t,e,n){var r=-1,o=Xue,i=t.length,s=!0,a=[],l=a;if(n)s=!1,o=Yue;else if(i>=ece){var u=e?null:Zue(t);if(u)return Jue(u);s=!1,o=Que,l=new que}else l=e?[]:a;e:for(;++r<i;){var c=t[r],d=e?e(c):c;if(c=n||c!==0?c:0,s&&d===d){for(var f=l.length;f--;)if(l[f]===d)continue e;e&&l.push(d),a.push(c)}else o(l,d,n)||(l!==a&&l.push(d),a.push(c))}return a}var nce=tce,rce=ul,oce=nce;function ice(t,e){return t&&t.length?oce(t,rce(e)):[]}var sce=ice;const A_=ht(sce);function Ij(t,e,n){return e===!0?A_(t,n):He(e)?A_(t,e):t}function ud(t){"@babel/helpers - typeof";return ud=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ud(t)}var ace=["ref"];function O_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function ms(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O_(Object(n),!0).forEach(function(r){Fx(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function __(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ej(r.key),r)}}function uce(t,e,n){return e&&__(t.prototype,e),n&&__(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function cce(t,e,n){return e=Tv(e),dce(t,Tj()?Reflect.construct(e,n||[],Tv(t).constructor):e.apply(t,n))}function dce(t,e){if(e&&(ud(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fce(t)}function fce(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tj=function(){return!!t})()}function Tv(t){return Tv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Tv(t)}function hce(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LC(t,e)}function LC(t,e){return LC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},LC(t,e)}function Fx(t,e,n){return e=Ej(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ej(t){var e=pce(t,"string");return ud(e)=="symbol"?e:e+""}function pce(t,e){if(ud(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ud(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mce(t,e){if(t==null)return{};var n=gce(t,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function gce(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function yce(t){return t.value}function vce(t,e){if(B.isValidElement(t))return B.cloneElement(t,e);if(typeof t=="function")return B.createElement(t,e);e.ref;var n=mce(e,ace);return B.createElement(oT,n)}var R_=1,Mc=function(t){function e(){var n;lce(this,e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=cce(this,e,[].concat(o)),Fx(n,"lastBoundingBox",{width:-1,height:-1}),n}return hce(e,t),uce(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,o=this.getBBox();o?(Math.abs(o.width-this.lastBoundingBox.width)>R_||Math.abs(o.height-this.lastBoundingBox.height)>R_)&&(this.lastBoundingBox.width=o.width,this.lastBoundingBox.height=o.height,r&&r(o)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ms({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var o=this.props,i=o.layout,s=o.align,a=o.verticalAlign,l=o.margin,u=o.chartWidth,c=o.chartHeight,d,f;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(s==="center"&&i==="vertical"){var h=this.getBBoxSnapshot();d={left:((u||0)-h.width)/2}}else d=s==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(a==="middle"){var p=this.getBBoxSnapshot();f={top:((c||0)-p.height)/2}}else f=a==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return ms(ms({},d),f)}},{key:"render",value:function(){var r=this,o=this.props,i=o.content,s=o.width,a=o.height,l=o.wrapperStyle,u=o.payloadUniqBy,c=o.payload,d=ms(ms({position:"absolute",width:s||"auto",height:a||"auto"},this.getDefaultPosition(l)),l);return B.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(h){r.wrapperNode=h}},vce(i,ms(ms({},this.props),{},{payload:Ij(c,u,yce)})))}}],[{key:"getWithHeight",value:function(r,o){var i=ms(ms({},this.defaultProps),r.props),s=i.layout;return s==="vertical"&&ge(r.props.height)?{height:r.props.height}:s==="horizontal"?{width:r.props.width||o}:null}}])}(R.PureComponent);Fx(Mc,"displayName","Legend");Fx(Mc,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var P_=Kp,xce=sT,bce=Hr,D_=P_?P_.isConcatSpreadable:void 0;function wce(t){return bce(t)||xce(t)||!!(D_&&t&&t[D_])}var Sce=wce,Cce=pj,$ce=Sce;function Nj(t,e,n,r,o){var i=-1,s=t.length;for(n||(n=$ce),o||(o=[]);++i<s;){var a=t[i];e>0&&n(a)?e>1?Nj(a,e-1,n,r,o):Cce(o,a):r||(o[o.length]=a)}return o}var Aj=Nj;function kce(t){return function(e,n,r){for(var o=-1,i=Object(e),s=r(e),a=s.length;a--;){var l=s[t?a:++o];if(n(i[l],l,i)===!1)break}return e}}var Ice=kce,Tce=Ice,Ece=Tce(),Nce=Ece,Ace=Nce,Oce=Mx;function _ce(t,e){return t&&Ace(t,e,Oce)}var Oj=_ce,Rce=Yp;function Pce(t,e){return function(n,r){if(n==null)return n;if(!Rce(n))return t(n,r);for(var o=n.length,i=e?o:-1,s=Object(n);(e?i--:++i<o)&&r(s[i],i,s)!==!1;);return n}}var Dce=Pce,Mce=Oj,Fce=Dce,Lce=Fce(Mce),cT=Lce,Bce=cT,zce=Yp;function jce(t,e){var n=-1,r=zce(t)?Array(t.length):[];return Bce(t,function(o,i,s){r[++n]=e(o,i,s)}),r}var _j=jce;function Wce(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var Vce=Wce,M_=qd;function Uce(t,e){if(t!==e){var n=t!==void 0,r=t===null,o=t===t,i=M_(t),s=e!==void 0,a=e===null,l=e===e,u=M_(e);if(!a&&!u&&!i&&t>e||i&&s&&l&&!a&&!u||r&&s&&l||!n&&l||!o)return 1;if(!r&&!i&&!u&&t<e||u&&n&&o&&!r&&!i||a&&n&&o||!s&&o||!l)return-1}return 0}var Gce=Uce,Hce=Gce;function Kce(t,e,n){for(var r=-1,o=t.criteria,i=e.criteria,s=o.length,a=n.length;++r<s;){var l=Hce(o[r],i[r]);if(l){if(r>=a)return l;var u=n[r];return l*(u=="desc"?-1:1)}}return t.index-e.index}var qce=Kce,kw=qI,Xce=XI,Yce=ul,Qce=_j,Zce=Vce,Jce=yj,ede=qce,tde=tf,nde=Hr;function rde(t,e,n){e.length?e=kw(e,function(i){return nde(i)?function(s){return Xce(s,i.length===1?i[0]:i)}:i}):e=[tde];var r=-1;e=kw(e,Jce(Yce));var o=Qce(t,function(i,s,a){var l=kw(e,function(u){return u(i)});return{criteria:l,index:++r,value:i}});return Zce(o,function(i,s){return ede(i,s,n)})}var ode=rde;function ide(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var sde=ide,ade=sde,F_=Math.max;function lde(t,e,n){return e=F_(e===void 0?t.length-1:e,0),function(){for(var r=arguments,o=-1,i=F_(r.length-e,0),s=Array(i);++o<i;)s[o]=r[e+o];o=-1;for(var a=Array(e+1);++o<e;)a[o]=r[o];return a[e]=n(s),ade(t,this,a)}}var ude=lde;function cde(t){return function(){return t}}var dde=cde,fde=Du,hde=function(){try{var t=fde(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Rj=hde,pde=dde,L_=Rj,mde=tf,gde=L_?function(t,e){return L_(t,"toString",{configurable:!0,enumerable:!1,value:pde(e),writable:!0})}:mde,yde=gde,vde=800,xde=16,bde=Date.now;function wde(t){var e=0,n=0;return function(){var r=bde(),o=xde-(r-n);if(n=r,o>0){if(++e>=vde)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var Sde=wde,Cde=yde,$de=Sde,kde=$de(Cde),Ide=kde,Tde=tf,Ede=ude,Nde=Ide;function Ade(t,e){return Nde(Ede(t,e,Tde),t+"")}var Ode=Ade,_de=UI,Rde=Yp,Pde=aT,Dde=ll;function Mde(t,e,n){if(!Dde(n))return!1;var r=typeof e;return(r=="number"?Rde(n)&&Pde(e,n.length):r=="string"&&e in n)?_de(n[e],t):!1}var Lx=Mde,Fde=Aj,Lde=ode,Bde=Ode,B_=Lx,zde=Bde(function(t,e){if(t==null)return[];var n=e.length;return n>1&&B_(t,e[0],e[1])?e=[]:n>2&&B_(e[0],e[1],e[2])&&(e=[e[0]]),Lde(t,Fde(e,1),[])}),jde=zde;const dT=ht(jde);function Gh(t){"@babel/helpers - typeof";return Gh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gh(t)}function BC(){return BC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},BC.apply(this,arguments)}function Wde(t,e){return Hde(t)||Gde(t,e)||Ude(t,e)||Vde()}function Vde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ude(t,e){if(t){if(typeof t=="string")return z_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z_(t,e)}}function z_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Gde(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,i,s,a=[],l=!0,u=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,o=c}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}function Hde(t){if(Array.isArray(t))return t}function j_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Iw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j_(Object(n),!0).forEach(function(r){Kde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kde(t,e,n){return e=qde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qde(t){var e=Xde(t,"string");return Gh(e)=="symbol"?e:e+""}function Xde(t,e){if(Gh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Gh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yde(t){return Array.isArray(t)&&In(t[0])&&In(t[1])?t.join(" ~ "):t}var Qde=function(e){var n=e.separator,r=n===void 0?" : ":n,o=e.contentStyle,i=o===void 0?{}:o,s=e.itemStyle,a=s===void 0?{}:s,l=e.labelStyle,u=l===void 0?{}:l,c=e.payload,d=e.formatter,f=e.itemSorter,h=e.wrapperClassName,p=e.labelClassName,m=e.label,g=e.labelFormatter,y=e.accessibilityLayer,v=y===void 0?!1:y,x=function(){if(c&&c.length){var E={padding:0,margin:0},_=(f?dT(c,f):c).map(function(N,P){if(N.type==="none")return null;var F=Iw({display:"block",paddingTop:4,paddingBottom:4,color:N.color||"#000"},a),L=N.formatter||d||Yde,A=N.value,O=N.name,j=A,V=O;if(L&&j!=null&&V!=null){var z=L(A,O,N,P,c);if(Array.isArray(z)){var U=Wde(z,2);j=U[0],V=U[1]}else j=z}return B.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(P),style:F},In(V)?B.createElement("span",{className:"recharts-tooltip-item-name"},V):null,In(V)?B.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,B.createElement("span",{className:"recharts-tooltip-item-value"},j),B.createElement("span",{className:"recharts-tooltip-item-unit"},N.unit||""))});return B.createElement("ul",{className:"recharts-tooltip-item-list",style:E},_)}return null},b=Iw({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),w=Iw({margin:0},u),S=!qe(m),$=S?m:"",C=Ze("recharts-default-tooltip",h),k=Ze("recharts-tooltip-label",p);S&&g&&c!==void 0&&c!==null&&($=g(m,c));var I=v?{role:"status","aria-live":"assertive"}:{};return B.createElement("div",BC({className:C,style:b},I),B.createElement("p",{className:k,style:w},B.isValidElement($)?$:"".concat($)),x())};function Hh(t){"@babel/helpers - typeof";return Hh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hh(t)}function Kg(t,e,n){return e=Zde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zde(t){var e=Jde(t,"string");return Hh(e)=="symbol"?e:e+""}function Jde(t,e){if(Hh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Hh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Df="recharts-tooltip-wrapper",efe={visibility:"hidden"};function tfe(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return Ze(Df,Kg(Kg(Kg(Kg({},"".concat(Df,"-right"),ge(n)&&e&&ge(e.x)&&n>=e.x),"".concat(Df,"-left"),ge(n)&&e&&ge(e.x)&&n<e.x),"".concat(Df,"-bottom"),ge(r)&&e&&ge(e.y)&&r>=e.y),"".concat(Df,"-top"),ge(r)&&e&&ge(e.y)&&r<e.y))}function W_(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,o=t.offsetTopLeft,i=t.position,s=t.reverseDirection,a=t.tooltipDimension,l=t.viewBox,u=t.viewBoxDimension;if(i&&ge(i[r]))return i[r];var c=n[r]-a-o,d=n[r]+o;if(e[r])return s[r]?c:d;if(s[r]){var f=c,h=l[r];return f<h?Math.max(d,l[r]):Math.max(c,l[r])}var p=d+a,m=l[r]+u;return p>m?Math.max(c,l[r]):Math.max(d,l[r])}function nfe(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function rfe(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,o=t.position,i=t.reverseDirection,s=t.tooltipBox,a=t.useTranslate3d,l=t.viewBox,u,c,d;return s.height>0&&s.width>0&&n?(c=W_({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:o,reverseDirection:i,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),d=W_({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:o,reverseDirection:i,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),u=nfe({translateX:c,translateY:d,useTranslate3d:a})):u=efe,{cssProperties:u,cssClasses:tfe({translateX:c,translateY:d,coordinate:n})}}function cd(t){"@babel/helpers - typeof";return cd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cd(t)}function V_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function U_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V_(Object(n),!0).forEach(function(r){jC(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ofe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ife(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Dj(r.key),r)}}function sfe(t,e,n){return e&&ife(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function afe(t,e,n){return e=Ev(e),lfe(t,Pj()?Reflect.construct(e,n||[],Ev(t).constructor):e.apply(t,n))}function lfe(t,e){if(e&&(cd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ufe(t)}function ufe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Pj=function(){return!!t})()}function Ev(t){return Ev=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ev(t)}function cfe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zC(t,e)}function zC(t,e){return zC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},zC(t,e)}function jC(t,e,n){return e=Dj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dj(t){var e=dfe(t,"string");return cd(e)=="symbol"?e:e+""}function dfe(t,e){if(cd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(cd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var G_=1,ffe=function(t){function e(){var n;ofe(this,e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=afe(this,e,[].concat(o)),jC(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),jC(n,"handleKeyDown",function(s){if(s.key==="Escape"){var a,l,u,c;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(a=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&a!==void 0?a:0,y:(u=(c=n.props.coordinate)===null||c===void 0?void 0:c.y)!==null&&u!==void 0?u:0}})}}),n}return cfe(e,t),sfe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>G_||Math.abs(r.height-this.state.lastBoundingBox.height)>G_)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,o;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,o=this.props,i=o.active,s=o.allowEscapeViewBox,a=o.animationDuration,l=o.animationEasing,u=o.children,c=o.coordinate,d=o.hasPayload,f=o.isAnimationActive,h=o.offset,p=o.position,m=o.reverseDirection,g=o.useTranslate3d,y=o.viewBox,v=o.wrapperStyle,x=rfe({allowEscapeViewBox:s,coordinate:c,offsetTopLeft:h,position:p,reverseDirection:m,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:y}),b=x.cssClasses,w=x.cssProperties,S=U_(U_({transition:f&&i?"transform ".concat(a,"ms ").concat(l):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&d?"visible":"hidden",position:"absolute",top:0,left:0},v);return B.createElement("div",{tabIndex:-1,className:b,style:S,ref:function(C){r.wrapperNode=C}},u)}}])}(R.PureComponent),hfe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Os={isSsr:hfe(),get:function(e){return Os[e]},set:function(e,n){if(typeof e=="string")Os[e]=n;else{var r=Object.keys(e);r&&r.length&&r.forEach(function(o){Os[o]=e[o]})}}};function dd(t){"@babel/helpers - typeof";return dd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dd(t)}function H_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function K_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H_(Object(n),!0).forEach(function(r){fT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mfe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Fj(r.key),r)}}function gfe(t,e,n){return e&&mfe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function yfe(t,e,n){return e=Nv(e),vfe(t,Mj()?Reflect.construct(e,n||[],Nv(t).constructor):e.apply(t,n))}function vfe(t,e){if(e&&(dd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xfe(t)}function xfe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Mj=function(){return!!t})()}function Nv(t){return Nv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Nv(t)}function bfe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WC(t,e)}function WC(t,e){return WC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},WC(t,e)}function fT(t,e,n){return e=Fj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fj(t){var e=wfe(t,"string");return dd(e)=="symbol"?e:e+""}function wfe(t,e){if(dd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(dd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sfe(t){return t.dataKey}function Cfe(t,e){return B.isValidElement(t)?B.cloneElement(t,e):typeof t=="function"?B.createElement(t,e):B.createElement(Qde,e)}var So=function(t){function e(){return pfe(this,e),yfe(this,e,arguments)}return bfe(e,t),gfe(e,[{key:"render",value:function(){var r=this,o=this.props,i=o.active,s=o.allowEscapeViewBox,a=o.animationDuration,l=o.animationEasing,u=o.content,c=o.coordinate,d=o.filterNull,f=o.isAnimationActive,h=o.offset,p=o.payload,m=o.payloadUniqBy,g=o.position,y=o.reverseDirection,v=o.useTranslate3d,x=o.viewBox,b=o.wrapperStyle,w=p??[];d&&w.length&&(w=Ij(p.filter(function($){return $.value!=null&&($.hide!==!0||r.props.includeHidden)}),m,Sfe));var S=w.length>0;return B.createElement(ffe,{allowEscapeViewBox:s,animationDuration:a,animationEasing:l,isAnimationActive:f,active:i,coordinate:c,hasPayload:S,offset:h,position:g,reverseDirection:y,useTranslate3d:v,viewBox:x,wrapperStyle:b},Cfe(u,K_(K_({},this.props),{},{payload:w})))}}])}(R.PureComponent);fT(So,"displayName","Tooltip");fT(So,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Os.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var $fe=fs,kfe=function(){return $fe.Date.now()},Ife=kfe,Tfe=/\s/;function Efe(t){for(var e=t.length;e--&&Tfe.test(t.charAt(e)););return e}var Nfe=Efe,Afe=Nfe,Ofe=/^\s+/;function _fe(t){return t&&t.slice(0,Afe(t)+1).replace(Ofe,"")}var Rfe=_fe,Pfe=Rfe,q_=ll,Dfe=qd,X_=NaN,Mfe=/^[-+]0x[0-9a-f]+$/i,Ffe=/^0b[01]+$/i,Lfe=/^0o[0-7]+$/i,Bfe=parseInt;function zfe(t){if(typeof t=="number")return t;if(Dfe(t))return X_;if(q_(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=q_(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Pfe(t);var n=Ffe.test(t);return n||Lfe.test(t)?Bfe(t.slice(2),n?2:8):Mfe.test(t)?X_:+t}var Lj=zfe,jfe=ll,Tw=Ife,Y_=Lj,Wfe="Expected a function",Vfe=Math.max,Ufe=Math.min;function Gfe(t,e,n){var r,o,i,s,a,l,u=0,c=!1,d=!1,f=!0;if(typeof t!="function")throw new TypeError(Wfe);e=Y_(e)||0,jfe(n)&&(c=!!n.leading,d="maxWait"in n,i=d?Vfe(Y_(n.maxWait)||0,e):i,f="trailing"in n?!!n.trailing:f);function h(S){var $=r,C=o;return r=o=void 0,u=S,s=t.apply(C,$),s}function p(S){return u=S,a=setTimeout(y,e),c?h(S):s}function m(S){var $=S-l,C=S-u,k=e-$;return d?Ufe(k,i-C):k}function g(S){var $=S-l,C=S-u;return l===void 0||$>=e||$<0||d&&C>=i}function y(){var S=Tw();if(g(S))return v(S);a=setTimeout(y,m(S))}function v(S){return a=void 0,f&&r?h(S):(r=o=void 0,s)}function x(){a!==void 0&&clearTimeout(a),u=0,r=l=o=a=void 0}function b(){return a===void 0?s:v(Tw())}function w(){var S=Tw(),$=g(S);if(r=arguments,o=this,l=S,$){if(a===void 0)return p(l);if(d)return clearTimeout(a),a=setTimeout(y,e),h(l)}return a===void 0&&(a=setTimeout(y,e)),s}return w.cancel=x,w.flush=b,w}var Hfe=Gfe,Kfe=Hfe,qfe=ll,Xfe="Expected a function";function Yfe(t,e,n){var r=!0,o=!0;if(typeof t!="function")throw new TypeError(Xfe);return qfe(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),Kfe(t,e,{leading:r,maxWait:e,trailing:o})}var Qfe=Yfe;const Bj=ht(Qfe);function Kh(t){"@babel/helpers - typeof";return Kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kh(t)}function Q_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function qg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q_(Object(n),!0).forEach(function(r){Zfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zfe(t,e,n){return e=Jfe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jfe(t){var e=ehe(t,"string");return Kh(e)=="symbol"?e:e+""}function ehe(t,e){if(Kh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Kh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function the(t,e){return ihe(t)||ohe(t,e)||rhe(t,e)||nhe()}function nhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rhe(t,e){if(t){if(typeof t=="string")return Z_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z_(t,e)}}function Z_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ohe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,i,s,a=[],l=!0,u=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,o=c}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}function ihe(t){if(Array.isArray(t))return t}var hT=R.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,o=r===void 0?{width:-1,height:-1}:r,i=t.width,s=i===void 0?"100%":i,a=t.height,l=a===void 0?"100%":a,u=t.minWidth,c=u===void 0?0:u,d=t.minHeight,f=t.maxHeight,h=t.children,p=t.debounce,m=p===void 0?0:p,g=t.id,y=t.className,v=t.onResize,x=t.style,b=x===void 0?{}:x,w=R.useRef(null),S=R.useRef();S.current=v,R.useImperativeHandle(e,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var $=R.useState({containerWidth:o.width,containerHeight:o.height}),C=the($,2),k=C[0],I=C[1],T=R.useCallback(function(_,N){I(function(P){var F=Math.round(_),L=Math.round(N);return P.containerWidth===F&&P.containerHeight===L?P:{containerWidth:F,containerHeight:L}})},[]);R.useEffect(function(){var _=function(O){var j,V=O[0].contentRect,z=V.width,U=V.height;T(z,U),(j=S.current)===null||j===void 0||j.call(S,z,U)};m>0&&(_=Bj(_,m,{trailing:!0,leading:!1}));var N=new ResizeObserver(_),P=w.current.getBoundingClientRect(),F=P.width,L=P.height;return T(F,L),N.observe(w.current),function(){N.disconnect()}},[T,m]);var E=R.useMemo(function(){var _=k.containerWidth,N=k.containerHeight;if(_<0||N<0)return null;As(jl(s)||jl(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,l),As(!n||n>0,"The aspect(%s) must be greater than zero.",n);var P=jl(s)?_:s,F=jl(l)?N:l;n&&n>0&&(P?F=P/n:F&&(P=F*n),f&&F>f&&(F=f)),As(P>0||F>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,F,s,l,c,d,n);var L=!Array.isArray(h)&&Ns(h.type).endsWith("Chart");return B.Children.map(h,function(A){return B.isValidElement(A)?R.cloneElement(A,qg({width:P,height:F},L?{style:qg({height:"100%",width:"100%",maxHeight:F,maxWidth:P},A.props.style)}:{})):A})},[n,h,l,f,d,c,k,s]);return B.createElement("div",{id:g?"".concat(g):void 0,className:Ze("recharts-responsive-container",y),style:qg(qg({},b),{},{width:s,height:l,minWidth:c,minHeight:d,maxHeight:f}),ref:w},E)}),pT=function(e){return null};pT.displayName="Cell";function qh(t){"@babel/helpers - typeof";return qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qh(t)}function J_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function VC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?J_(Object(n),!0).forEach(function(r){she(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function she(t,e,n){return e=ahe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ahe(t){var e=lhe(t,"string");return qh(e)=="symbol"?e:e+""}function lhe(t,e){if(qh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(qh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tc={widthCache:{},cacheCount:0},uhe=2e3,che={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},eR="recharts_measurement_span";function dhe(t){var e=VC({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var mh=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Os.isSsr)return{width:0,height:0};var r=dhe(n),o=JSON.stringify({text:e,copyStyle:r});if(tc.widthCache[o])return tc.widthCache[o];try{var i=document.getElementById(eR);i||(i=document.createElement("span"),i.setAttribute("id",eR),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var s=VC(VC({},che),r);Object.assign(i.style,s),i.textContent="".concat(e);var a=i.getBoundingClientRect(),l={width:a.width,height:a.height};return tc.widthCache[o]=l,++tc.cacheCount>uhe&&(tc.cacheCount=0,tc.widthCache={}),l}catch{return{width:0,height:0}}},fhe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Xh(t){"@babel/helpers - typeof";return Xh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xh(t)}function Av(t,e){return ghe(t)||mhe(t,e)||phe(t,e)||hhe()}function hhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function phe(t,e){if(t){if(typeof t=="string")return tR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tR(t,e)}}function tR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function mhe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,i,s,a=[],l=!0,u=!1;try{if(i=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,o=c}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}function ghe(t){if(Array.isArray(t))return t}function yhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nR(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xhe(r.key),r)}}function vhe(t,e,n){return e&&nR(t.prototype,e),n&&nR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function xhe(t){var e=bhe(t,"string");return Xh(e)=="symbol"?e:e+""}function bhe(t,e){if(Xh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Xh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var rR=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,oR=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,whe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,She=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,zj={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Che=Object.keys(zj),Sc="NaN";function $he(t,e){return t*zj[e]}var Xg=function(){function t(e,n){yhe(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!whe.test(n)&&(this.num=NaN,this.unit=""),Che.includes(n)&&(this.num=$he(e,n),this.unit="px")}return vhe(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,o=(r=She.exec(n))!==null&&r!==void 0?r:[],i=Av(o,3),s=i[1],a=i[2];return new t(parseFloat(s),a??"")}}])}();function jj(t){if(t.includes(Sc))return Sc;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=rR.exec(e))!==null&&n!==void 0?n:[],o=Av(r,4),i=o[1],s=o[2],a=o[3],l=Xg.parse(i??""),u=Xg.parse(a??""),c=s==="*"?l.multiply(u):l.divide(u);if(c.isNaN())return Sc;e=e.replace(rR,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,f=(d=oR.exec(e))!==null&&d!==void 0?d:[],h=Av(f,4),p=h[1],m=h[2],g=h[3],y=Xg.parse(p??""),v=Xg.parse(g??""),x=m==="+"?y.add(v):y.subtract(v);if(x.isNaN())return Sc;e=e.replace(oR,x.toString())}return e}var iR=/\(([^()]*)\)/;function khe(t){for(var e=t;e.includes("(");){var n=iR.exec(e),r=Av(n,2),o=r[1];e=e.replace(iR,jj(o))}return e}function Ihe(t){var e=t.replace(/\s+/g,"");return e=khe(e),e=jj(e),e}function The(t){try{return Ihe(t)}catch{return Sc}}function Ew(t){var e=The(t.slice(5,-1));return e===Sc?"":e}var Ehe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Nhe=["dx","dy","angle","className","breakAll"];function UC(){return UC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},UC.apply(this,arguments)}function sR(t,e){if(t==null)return{};var n=Ahe(t,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Ahe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function aR(t,e){return Phe(t)||Rhe(t,e)||_he(t,e)||Ohe()}function Ohe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _he(t,e){if(t){if(typeof t=="string")return lR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lR(t,e)}}function lR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Rhe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,i,s,a=[],l=!0,u=!1;try{if(i=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,o=c}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}function Phe(t){if(Array.isArray(t))return t}var Wj=/[ \f\n\r\t\v\u2028\u2029]+/,Vj=function(e){var n=e.children,r=e.breakAll,o=e.style;try{var i=[];qe(n)||(r?i=n.toString().split(""):i=n.toString().split(Wj));var s=i.map(function(l){return{word:l,width:mh(l,o).width}}),a=r?0:mh(" ",o).width;return{wordsWithComputedWidth:s,spaceWidth:a}}catch{return null}},Dhe=function(e,n,r,o,i){var s=e.maxLines,a=e.children,l=e.style,u=e.breakAll,c=ge(s),d=a,f=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return P.reduce(function(F,L){var A=L.word,O=L.width,j=F[F.length-1];if(j&&(o==null||i||j.width+O+r<Number(o)))j.words.push(A),j.width+=O+r;else{var V={words:[A],width:O};F.push(V)}return F},[])},h=f(n),p=function(P){return P.reduce(function(F,L){return F.width>L.width?F:L})};if(!c)return h;for(var m="…",g=function(P){var F=d.slice(0,P),L=Vj({breakAll:u,style:l,children:F+m}).wordsWithComputedWidth,A=f(L),O=A.length>s||p(A).width>Number(o);return[O,A]},y=0,v=d.length-1,x=0,b;y<=v&&x<=d.length-1;){var w=Math.floor((y+v)/2),S=w-1,$=g(S),C=aR($,2),k=C[0],I=C[1],T=g(w),E=aR(T,1),_=E[0];if(!k&&!_&&(y=w+1),k&&_&&(v=w-1),!k&&_){b=I;break}x++}return b||h},uR=function(e){var n=qe(e)?[]:e.toString().split(Wj);return[{words:n}]},Mhe=function(e){var n=e.width,r=e.scaleToFit,o=e.children,i=e.style,s=e.breakAll,a=e.maxLines;if((n||r)&&!Os.isSsr){var l,u,c=Vj({breakAll:s,children:o,style:i});if(c){var d=c.wordsWithComputedWidth,f=c.spaceWidth;l=d,u=f}else return uR(o);return Dhe({breakAll:s,children:o,maxLines:a,style:i},l,u,n,r)}return uR(o)},cR="#808080",Ov=function(e){var n=e.x,r=n===void 0?0:n,o=e.y,i=o===void 0?0:o,s=e.lineHeight,a=s===void 0?"1em":s,l=e.capHeight,u=l===void 0?"0.71em":l,c=e.scaleToFit,d=c===void 0?!1:c,f=e.textAnchor,h=f===void 0?"start":f,p=e.verticalAnchor,m=p===void 0?"end":p,g=e.fill,y=g===void 0?cR:g,v=sR(e,Ehe),x=R.useMemo(function(){return Mhe({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:d,style:v.style,width:v.width})},[v.breakAll,v.children,v.maxLines,d,v.style,v.width]),b=v.dx,w=v.dy,S=v.angle,$=v.className,C=v.breakAll,k=sR(v,Nhe);if(!In(r)||!In(i))return null;var I=r+(ge(b)?b:0),T=i+(ge(w)?w:0),E;switch(m){case"start":E=Ew("calc(".concat(u,")"));break;case"middle":E=Ew("calc(".concat((x.length-1)/2," * -").concat(a," + (").concat(u," / 2))"));break;default:E=Ew("calc(".concat(x.length-1," * -").concat(a,")"));break}var _=[];if(d){var N=x[0].width,P=v.width;_.push("scale(".concat((ge(P)?P/N:1)/N,")"))}return S&&_.push("rotate(".concat(S,", ").concat(I,", ").concat(T,")")),_.length&&(k.transform=_.join(" ")),B.createElement("text",UC({},Qe(k,!0),{x:I,y:T,className:Ze("recharts-text",$),textAnchor:h,fill:y.includes("url")?cR:y}),x.map(function(F,L){var A=F.words.join(C?"":" ");return B.createElement("tspan",{x:I,dy:L===0?E:a,key:"".concat(A,"-").concat(L)},A)}))};function Ma(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Fhe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function mT(t){let e,n,r;t.length!==2?(e=Ma,n=(a,l)=>Ma(t(a),l),r=(a,l)=>t(a)-l):(e=t===Ma||t===Fhe?t:Lhe,n=t,r=t);function o(a,l,u=0,c=a.length){if(u<c){if(e(l,l)!==0)return c;do{const d=u+c>>>1;n(a[d],l)<0?u=d+1:c=d}while(u<c)}return u}function i(a,l,u=0,c=a.length){if(u<c){if(e(l,l)!==0)return c;do{const d=u+c>>>1;n(a[d],l)<=0?u=d+1:c=d}while(u<c)}return u}function s(a,l,u=0,c=a.length){const d=o(a,l,u,c-1);return d>u&&r(a[d-1],l)>-r(a[d],l)?d-1:d}return{left:o,center:s,right:i}}function Lhe(){return 0}function Uj(t){return t===null?NaN:+t}function*Bhe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const zhe=mT(Ma),Qp=zhe.right;mT(Uj).center;class dR extends Map{constructor(e,n=Vhe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,o]of e)this.set(r,o)}get(e){return super.get(fR(this,e))}has(e){return super.has(fR(this,e))}set(e,n){return super.set(jhe(this,e),n)}delete(e){return super.delete(Whe(this,e))}}function fR({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function jhe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Whe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Vhe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Uhe(t=Ma){if(t===Ma)return Gj;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function Gj(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Ghe=Math.sqrt(50),Hhe=Math.sqrt(10),Khe=Math.sqrt(2);function _v(t,e,n){const r=(e-t)/Math.max(0,n),o=Math.floor(Math.log10(r)),i=r/Math.pow(10,o),s=i>=Ghe?10:i>=Hhe?5:i>=Khe?2:1;let a,l,u;return o<0?(u=Math.pow(10,-o)/s,a=Math.round(t*u),l=Math.round(e*u),a/u<t&&++a,l/u>e&&--l,u=-u):(u=Math.pow(10,o)*s,a=Math.round(t/u),l=Math.round(e/u),a*u<t&&++a,l*u>e&&--l),l<a&&.5<=n&&n<2?_v(t,e,n*2):[a,l,u]}function GC(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[o,i,s]=r?_v(e,t,n):_v(t,e,n);if(!(i>=o))return[];const a=i-o+1,l=new Array(a);if(r)if(s<0)for(let u=0;u<a;++u)l[u]=(i-u)/-s;else for(let u=0;u<a;++u)l[u]=(i-u)*s;else if(s<0)for(let u=0;u<a;++u)l[u]=(o+u)/-s;else for(let u=0;u<a;++u)l[u]=(o+u)*s;return l}function HC(t,e,n){return e=+e,t=+t,n=+n,_v(t,e,n)[2]}function KC(t,e,n){e=+e,t=+t,n=+n;const r=e<t,o=r?HC(e,t,n):HC(t,e,n);return(r?-1:1)*(o<0?1/-o:o)}function hR(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function pR(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function Hj(t,e,n=0,r=1/0,o){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(o=o===void 0?Gj:Uhe(o);r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,c=Math.log(l),d=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*d*(l-d)/l)*(u-l/2<0?-1:1),h=Math.max(n,Math.floor(e-u*d/l+f)),p=Math.min(r,Math.floor(e+(l-u)*d/l+f));Hj(t,e,h,p,o)}const i=t[e];let s=n,a=r;for(Mf(t,n,e),o(t[r],i)>0&&Mf(t,n,r);s<a;){for(Mf(t,s,a),++s,--a;o(t[s],i)<0;)++s;for(;o(t[a],i)>0;)--a}o(t[n],i)===0?Mf(t,n,a):(++a,Mf(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function Mf(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function qhe(t,e,n){if(t=Float64Array.from(Bhe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return pR(t);if(e>=1)return hR(t);var r,o=(r-1)*e,i=Math.floor(o),s=hR(Hj(t,i).subarray(0,i+1)),a=pR(t.subarray(i+1));return s+(a-s)*(o-i)}}function Xhe(t,e,n=Uj){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,o=(r-1)*e,i=Math.floor(o),s=+n(t[i],i,t),a=+n(t[i+1],i+1,t);return s+(a-s)*(o-i)}}function Yhe(t,e,n){t=+t,e=+e,n=(o=arguments.length)<2?(e=t,t=0,1):o<3?1:+n;for(var r=-1,o=Math.max(0,Math.ceil((e-t)/n))|0,i=new Array(o);++r<o;)i[r]=t+r*n;return i}function Vo(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Qs(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const qC=Symbol("implicit");function gT(){var t=new dR,e=[],n=[],r=qC;function o(i){let s=t.get(i);if(s===void 0){if(r!==qC)return r;t.set(i,s=e.push(i)-1)}return n[s%n.length]}return o.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new dR;for(const s of i)t.has(s)||t.set(s,e.push(s)-1);return o},o.range=function(i){return arguments.length?(n=Array.from(i),o):n.slice()},o.unknown=function(i){return arguments.length?(r=i,o):r},o.copy=function(){return gT(e,n).unknown(r)},Vo.apply(o,arguments),o}function Yh(){var t=gT().unknown(void 0),e=t.domain,n=t.range,r=0,o=1,i,s,a=!1,l=0,u=0,c=.5;delete t.unknown;function d(){var f=e().length,h=o<r,p=h?o:r,m=h?r:o;i=(m-p)/Math.max(1,f-l+u*2),a&&(i=Math.floor(i)),p+=(m-p-i*(f-l))*c,s=i*(1-l),a&&(p=Math.round(p),s=Math.round(s));var g=Yhe(f).map(function(y){return p+i*y});return n(h?g.reverse():g)}return t.domain=function(f){return arguments.length?(e(f),d()):e()},t.range=function(f){return arguments.length?([r,o]=f,r=+r,o=+o,d()):[r,o]},t.rangeRound=function(f){return[r,o]=f,r=+r,o=+o,a=!0,d()},t.bandwidth=function(){return s},t.step=function(){return i},t.round=function(f){return arguments.length?(a=!!f,d()):a},t.padding=function(f){return arguments.length?(l=Math.min(1,u=+f),d()):l},t.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),d()):l},t.paddingOuter=function(f){return arguments.length?(u=+f,d()):u},t.align=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),d()):c},t.copy=function(){return Yh(e(),[r,o]).round(a).paddingInner(l).paddingOuter(u).align(c)},Vo.apply(d(),arguments)}function Kj(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Kj(e())},t}function gh(){return Kj(Yh.apply(null,arguments).paddingInner(1))}function yT(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function qj(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Zp(){}var Qh=.7,Rv=1/Qh,Fc="\\s*([+-]?\\d+)\\s*",Zh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Qhe=/^#([0-9a-f]{3,8})$/,Zhe=new RegExp(`^rgb\\(${Fc},${Fc},${Fc}\\)$`),Jhe=new RegExp(`^rgb\\(${Qi},${Qi},${Qi}\\)$`),epe=new RegExp(`^rgba\\(${Fc},${Fc},${Fc},${Zh}\\)$`),tpe=new RegExp(`^rgba\\(${Qi},${Qi},${Qi},${Zh}\\)$`),npe=new RegExp(`^hsl\\(${Zh},${Qi},${Qi}\\)$`),rpe=new RegExp(`^hsla\\(${Zh},${Qi},${Qi},${Zh}\\)$`),mR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yT(Zp,Jh,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:gR,formatHex:gR,formatHex8:ope,formatHsl:ipe,formatRgb:yR,toString:yR});function gR(){return this.rgb().formatHex()}function ope(){return this.rgb().formatHex8()}function ipe(){return Xj(this).formatHsl()}function yR(){return this.rgb().formatRgb()}function Jh(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Qhe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?vR(e):n===3?new Mr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Yg(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Yg(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Zhe.exec(t))?new Mr(e[1],e[2],e[3],1):(e=Jhe.exec(t))?new Mr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=epe.exec(t))?Yg(e[1],e[2],e[3],e[4]):(e=tpe.exec(t))?Yg(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=npe.exec(t))?wR(e[1],e[2]/100,e[3]/100,1):(e=rpe.exec(t))?wR(e[1],e[2]/100,e[3]/100,e[4]):mR.hasOwnProperty(t)?vR(mR[t]):t==="transparent"?new Mr(NaN,NaN,NaN,0):null}function vR(t){return new Mr(t>>16&255,t>>8&255,t&255,1)}function Yg(t,e,n,r){return r<=0&&(t=e=n=NaN),new Mr(t,e,n,r)}function spe(t){return t instanceof Zp||(t=Jh(t)),t?(t=t.rgb(),new Mr(t.r,t.g,t.b,t.opacity)):new Mr}function XC(t,e,n,r){return arguments.length===1?spe(t):new Mr(t,e,n,r??1)}function Mr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}yT(Mr,XC,qj(Zp,{brighter(t){return t=t==null?Rv:Math.pow(Rv,t),new Mr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Qh:Math.pow(Qh,t),new Mr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Mr(nu(this.r),nu(this.g),nu(this.b),Pv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:xR,formatHex:xR,formatHex8:ape,formatRgb:bR,toString:bR}));function xR(){return`#${Wl(this.r)}${Wl(this.g)}${Wl(this.b)}`}function ape(){return`#${Wl(this.r)}${Wl(this.g)}${Wl(this.b)}${Wl((isNaN(this.opacity)?1:this.opacity)*255)}`}function bR(){const t=Pv(this.opacity);return`${t===1?"rgb(":"rgba("}${nu(this.r)}, ${nu(this.g)}, ${nu(this.b)}${t===1?")":`, ${t})`}`}function Pv(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function nu(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Wl(t){return t=nu(t),(t<16?"0":"")+t.toString(16)}function wR(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new mi(t,e,n,r)}function Xj(t){if(t instanceof mi)return new mi(t.h,t.s,t.l,t.opacity);if(t instanceof Zp||(t=Jh(t)),!t)return new mi;if(t instanceof mi)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,o=Math.min(e,n,r),i=Math.max(e,n,r),s=NaN,a=i-o,l=(i+o)/2;return a?(e===i?s=(n-r)/a+(n<r)*6:n===i?s=(r-e)/a+2:s=(e-n)/a+4,a/=l<.5?i+o:2-i-o,s*=60):a=l>0&&l<1?0:s,new mi(s,a,l,t.opacity)}function lpe(t,e,n,r){return arguments.length===1?Xj(t):new mi(t,e,n,r??1)}function mi(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}yT(mi,lpe,qj(Zp,{brighter(t){return t=t==null?Rv:Math.pow(Rv,t),new mi(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Qh:Math.pow(Qh,t),new mi(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,o=2*n-r;return new Mr(Nw(t>=240?t-240:t+120,o,r),Nw(t,o,r),Nw(t<120?t+240:t-120,o,r),this.opacity)},clamp(){return new mi(SR(this.h),Qg(this.s),Qg(this.l),Pv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Pv(this.opacity);return`${t===1?"hsl(":"hsla("}${SR(this.h)}, ${Qg(this.s)*100}%, ${Qg(this.l)*100}%${t===1?")":`, ${t})`}`}}));function SR(t){return t=(t||0)%360,t<0?t+360:t}function Qg(t){return Math.max(0,Math.min(1,t||0))}function Nw(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const vT=t=>()=>t;function upe(t,e){return function(n){return t+n*e}}function cpe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function dpe(t){return(t=+t)==1?Yj:function(e,n){return n-e?cpe(e,n,t):vT(isNaN(e)?n:e)}}function Yj(t,e){var n=e-t;return n?upe(t,n):vT(isNaN(t)?e:t)}const CR=function t(e){var n=dpe(e);function r(o,i){var s=n((o=XC(o)).r,(i=XC(i)).r),a=n(o.g,i.g),l=n(o.b,i.b),u=Yj(o.opacity,i.opacity);return function(c){return o.r=s(c),o.g=a(c),o.b=l(c),o.opacity=u(c),o+""}}return r.gamma=t,r}(1);function fpe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),o;return function(i){for(o=0;o<n;++o)r[o]=t[o]*(1-i)+e[o]*i;return r}}function hpe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ppe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,o=new Array(r),i=new Array(n),s;for(s=0;s<r;++s)o[s]=nf(t[s],e[s]);for(;s<n;++s)i[s]=e[s];return function(a){for(s=0;s<r;++s)i[s]=o[s](a);return i}}function mpe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Dv(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function gpe(t,e){var n={},r={},o;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(o in e)o in t?n[o]=nf(t[o],e[o]):r[o]=e[o];return function(i){for(o in n)r[o]=n[o](i);return r}}var YC=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Aw=new RegExp(YC.source,"g");function ype(t){return function(){return t}}function vpe(t){return function(e){return t(e)+""}}function xpe(t,e){var n=YC.lastIndex=Aw.lastIndex=0,r,o,i,s=-1,a=[],l=[];for(t=t+"",e=e+"";(r=YC.exec(t))&&(o=Aw.exec(e));)(i=o.index)>n&&(i=e.slice(n,i),a[s]?a[s]+=i:a[++s]=i),(r=r[0])===(o=o[0])?a[s]?a[s]+=o:a[++s]=o:(a[++s]=null,l.push({i:s,x:Dv(r,o)})),n=Aw.lastIndex;return n<e.length&&(i=e.slice(n),a[s]?a[s]+=i:a[++s]=i),a.length<2?l[0]?vpe(l[0].x):ype(e):(e=l.length,function(u){for(var c=0,d;c<e;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}function nf(t,e){var n=typeof e,r;return e==null||n==="boolean"?vT(e):(n==="number"?Dv:n==="string"?(r=Jh(e))?(e=r,CR):xpe:e instanceof Jh?CR:e instanceof Date?mpe:hpe(e)?fpe:Array.isArray(e)?ppe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?gpe:Dv)(t,e)}function xT(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function bpe(t,e){e===void 0&&(e=t,t=nf);for(var n=0,r=e.length-1,o=e[0],i=new Array(r<0?0:r);n<r;)i[n]=t(o,o=e[++n]);return function(s){var a=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return i[a](s-a)}}function wpe(t){return function(){return t}}function Mv(t){return+t}var $R=[0,1];function br(t){return t}function QC(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:wpe(isNaN(e)?NaN:.5)}function Spe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Cpe(t,e,n){var r=t[0],o=t[1],i=e[0],s=e[1];return o<r?(r=QC(o,r),i=n(s,i)):(r=QC(r,o),i=n(i,s)),function(a){return i(r(a))}}function $pe(t,e,n){var r=Math.min(t.length,e.length)-1,o=new Array(r),i=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)o[s]=QC(t[s],t[s+1]),i[s]=n(e[s],e[s+1]);return function(a){var l=Qp(t,a,1,r)-1;return i[l](o[l](a))}}function Jp(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Bx(){var t=$R,e=$R,n=nf,r,o,i,s=br,a,l,u;function c(){var f=Math.min(t.length,e.length);return s!==br&&(s=Spe(t[0],t[f-1])),a=f>2?$pe:Cpe,l=u=null,d}function d(f){return f==null||isNaN(f=+f)?i:(l||(l=a(t.map(r),e,n)))(r(s(f)))}return d.invert=function(f){return s(o((u||(u=a(e,t.map(r),Dv)))(f)))},d.domain=function(f){return arguments.length?(t=Array.from(f,Mv),c()):t.slice()},d.range=function(f){return arguments.length?(e=Array.from(f),c()):e.slice()},d.rangeRound=function(f){return e=Array.from(f),n=xT,c()},d.clamp=function(f){return arguments.length?(s=f?!0:br,c()):s!==br},d.interpolate=function(f){return arguments.length?(n=f,c()):n},d.unknown=function(f){return arguments.length?(i=f,d):i},function(f,h){return r=f,o=h,c()}}function bT(){return Bx()(br,br)}function kpe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Fv(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function fd(t){return t=Fv(Math.abs(t)),t?t[1]:NaN}function Ipe(t,e){return function(n,r){for(var o=n.length,i=[],s=0,a=t[0],l=0;o>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),i.push(n.substring(o-=a,o+a)),!((l+=a+1)>r));)a=t[s=(s+1)%t.length];return i.reverse().join(e)}}function Tpe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Epe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ep(t){if(!(e=Epe.exec(t)))throw new Error("invalid format: "+t);var e;return new wT({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ep.prototype=wT.prototype;function wT(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}wT.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Npe(t){e:for(var e=t.length,n=1,r=-1,o;n<e;++n)switch(t[n]){case".":r=o=n;break;case"0":r===0&&(r=n),o=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(o+1):t}var Qj;function Ape(t,e){var n=Fv(t,e);if(!n)return t+"";var r=n[0],o=n[1],i=o-(Qj=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,s=r.length;return i===s?r:i>s?r+new Array(i-s+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+Fv(t,Math.max(0,e+i-1))[0]}function kR(t,e){var n=Fv(t,e);if(!n)return t+"";var r=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")}const IR={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:kpe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>kR(t*100,e),r:kR,s:Ape,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function TR(t){return t}var ER=Array.prototype.map,NR=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Ope(t){var e=t.grouping===void 0||t.thousands===void 0?TR:Ipe(ER.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",o=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?TR:Tpe(ER.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(d){d=ep(d);var f=d.fill,h=d.align,p=d.sign,m=d.symbol,g=d.zero,y=d.width,v=d.comma,x=d.precision,b=d.trim,w=d.type;w==="n"?(v=!0,w="g"):IR[w]||(x===void 0&&(x=12),b=!0,w="g"),(g||f==="0"&&h==="=")&&(g=!0,f="0",h="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",$=m==="$"?r:/[%p]/.test(w)?s:"",C=IR[w],k=/[defgprs%]/.test(w);x=x===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function I(T){var E=S,_=$,N,P,F;if(w==="c")_=C(T)+_,T="";else{T=+T;var L=T<0||1/T<0;if(T=isNaN(T)?l:C(Math.abs(T),x),b&&(T=Npe(T)),L&&+T==0&&p!=="+"&&(L=!1),E=(L?p==="("?p:a:p==="-"||p==="("?"":p)+E,_=(w==="s"?NR[8+Qj/3]:"")+_+(L&&p==="("?")":""),k){for(N=-1,P=T.length;++N<P;)if(F=T.charCodeAt(N),48>F||F>57){_=(F===46?o+T.slice(N+1):T.slice(N))+_,T=T.slice(0,N);break}}}v&&!g&&(T=e(T,1/0));var A=E.length+T.length+_.length,O=A<y?new Array(y-A+1).join(f):"";switch(v&&g&&(T=e(O+T,O.length?y-_.length:1/0),O=""),h){case"<":T=E+T+_+O;break;case"=":T=E+O+T+_;break;case"^":T=O.slice(0,A=O.length>>1)+E+T+_+O.slice(A);break;default:T=O+E+T+_;break}return i(T)}return I.toString=function(){return d+""},I}function c(d,f){var h=u((d=ep(d),d.type="f",d)),p=Math.max(-8,Math.min(8,Math.floor(fd(f)/3)))*3,m=Math.pow(10,-p),g=NR[8+p/3];return function(y){return h(m*y)+g}}return{format:u,formatPrefix:c}}var Zg,ST,Zj;_pe({thousands:",",grouping:[3],currency:["$",""]});function _pe(t){return Zg=Ope(t),ST=Zg.format,Zj=Zg.formatPrefix,Zg}function Rpe(t){return Math.max(0,-fd(Math.abs(t)))}function Ppe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(fd(e)/3)))*3-fd(Math.abs(t)))}function Dpe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,fd(e)-fd(t))+1}function Jj(t,e,n,r){var o=KC(t,e,n),i;switch(r=ep(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(i=Ppe(o,s))&&(r.precision=i),Zj(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=Dpe(o,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=Rpe(o))&&(r.precision=i-(r.type==="%")*2);break}}return ST(r)}function cl(t){var e=t.domain;return t.ticks=function(n){var r=e();return GC(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var o=e();return Jj(o[0],o[o.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),o=0,i=r.length-1,s=r[o],a=r[i],l,u,c=10;for(a<s&&(u=s,s=a,a=u,u=o,o=i,i=u);c-- >0;){if(u=HC(s,a,n),u===l)return r[o]=s,r[i]=a,e(r);if(u>0)s=Math.floor(s/u)*u,a=Math.ceil(a/u)*u;else if(u<0)s=Math.ceil(s*u)/u,a=Math.floor(a*u)/u;else break;l=u}return t},t}function Lv(){var t=bT();return t.copy=function(){return Jp(t,Lv())},Vo.apply(t,arguments),cl(t)}function e4(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Mv),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return e4(t).unknown(e)},t=arguments.length?Array.from(t,Mv):[0,1],cl(n)}function t4(t,e){t=t.slice();var n=0,r=t.length-1,o=t[n],i=t[r],s;return i<o&&(s=n,n=r,r=s,s=o,o=i,i=s),t[n]=e.floor(o),t[r]=e.ceil(i),t}function AR(t){return Math.log(t)}function OR(t){return Math.exp(t)}function Mpe(t){return-Math.log(-t)}function Fpe(t){return-Math.exp(-t)}function Lpe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Bpe(t){return t===10?Lpe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function zpe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function _R(t){return(e,n)=>-t(-e,n)}function CT(t){const e=t(AR,OR),n=e.domain;let r=10,o,i;function s(){return o=zpe(r),i=Bpe(r),n()[0]<0?(o=_R(o),i=_R(i),t(Mpe,Fpe)):t(AR,OR),e}return e.base=function(a){return arguments.length?(r=+a,s()):r},e.domain=function(a){return arguments.length?(n(a),s()):n()},e.ticks=a=>{const l=n();let u=l[0],c=l[l.length-1];const d=c<u;d&&([u,c]=[c,u]);let f=o(u),h=o(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-f<g){if(f=Math.floor(f),h=Math.ceil(h),u>0){for(;f<=h;++f)for(p=1;p<r;++p)if(m=f<0?p/i(-f):p*i(f),!(m<u)){if(m>c)break;y.push(m)}}else for(;f<=h;++f)for(p=r-1;p>=1;--p)if(m=f>0?p/i(-f):p*i(f),!(m<u)){if(m>c)break;y.push(m)}y.length*2<g&&(y=GC(u,c,g))}else y=GC(f,h,Math.min(h-f,g)).map(i);return d?y.reverse():y},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=ep(l)).precision==null&&(l.trim=!0),l=ST(l)),a===1/0)return l;const u=Math.max(1,r*a/e.ticks().length);return c=>{let d=c/i(Math.round(o(c)));return d*r<r-.5&&(d*=r),d<=u?l(c):""}},e.nice=()=>n(t4(n(),{floor:a=>i(Math.floor(o(a))),ceil:a=>i(Math.ceil(o(a)))})),e}function n4(){const t=CT(Bx()).domain([1,10]);return t.copy=()=>Jp(t,n4()).base(t.base()),Vo.apply(t,arguments),t}function RR(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function PR(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function $T(t){var e=1,n=t(RR(e),PR(e));return n.constant=function(r){return arguments.length?t(RR(e=+r),PR(e)):e},cl(n)}function r4(){var t=$T(Bx());return t.copy=function(){return Jp(t,r4()).constant(t.constant())},Vo.apply(t,arguments)}function DR(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function jpe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Wpe(t){return t<0?-t*t:t*t}function kT(t){var e=t(br,br),n=1;function r(){return n===1?t(br,br):n===.5?t(jpe,Wpe):t(DR(n),DR(1/n))}return e.exponent=function(o){return arguments.length?(n=+o,r()):n},cl(e)}function IT(){var t=kT(Bx());return t.copy=function(){return Jp(t,IT()).exponent(t.exponent())},Vo.apply(t,arguments),t}function Vpe(){return IT.apply(null,arguments).exponent(.5)}function MR(t){return Math.sign(t)*t*t}function Upe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function o4(){var t=bT(),e=[0,1],n=!1,r;function o(i){var s=Upe(t(i));return isNaN(s)?r:n?Math.round(s):s}return o.invert=function(i){return t.invert(MR(i))},o.domain=function(i){return arguments.length?(t.domain(i),o):t.domain()},o.range=function(i){return arguments.length?(t.range((e=Array.from(i,Mv)).map(MR)),o):e.slice()},o.rangeRound=function(i){return o.range(i).round(!0)},o.round=function(i){return arguments.length?(n=!!i,o):n},o.clamp=function(i){return arguments.length?(t.clamp(i),o):t.clamp()},o.unknown=function(i){return arguments.length?(r=i,o):r},o.copy=function(){return o4(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Vo.apply(o,arguments),cl(o)}function i4(){var t=[],e=[],n=[],r;function o(){var s=0,a=Math.max(1,e.length);for(n=new Array(a-1);++s<a;)n[s-1]=Xhe(t,s/a);return i}function i(s){return s==null||isNaN(s=+s)?r:e[Qp(n,s)]}return i.invertExtent=function(s){var a=e.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},i.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let a of s)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Ma),o()},i.range=function(s){return arguments.length?(e=Array.from(s),o()):e.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.quantiles=function(){return n.slice()},i.copy=function(){return i4().domain(t).range(e).unknown(r)},Vo.apply(i,arguments)}function s4(){var t=0,e=1,n=1,r=[.5],o=[0,1],i;function s(l){return l!=null&&l<=l?o[Qp(r,l,0,n)]:i}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return s}return s.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},s.range=function(l){return arguments.length?(n=(o=Array.from(l)).length-1,a()):o.slice()},s.invertExtent=function(l){var u=o.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},s.unknown=function(l){return arguments.length&&(i=l),s},s.thresholds=function(){return r.slice()},s.copy=function(){return s4().domain([t,e]).range(o).unknown(i)},Vo.apply(cl(s),arguments)}function a4(){var t=[.5],e=[0,1],n,r=1;function o(i){return i!=null&&i<=i?e[Qp(t,i,0,r)]:n}return o.domain=function(i){return arguments.length?(t=Array.from(i),r=Math.min(t.length,e.length-1),o):t.slice()},o.range=function(i){return arguments.length?(e=Array.from(i),r=Math.min(t.length,e.length-1),o):e.slice()},o.invertExtent=function(i){var s=e.indexOf(i);return[t[s-1],t[s]]},o.unknown=function(i){return arguments.length?(n=i,o):n},o.copy=function(){return a4().domain(t).range(e).unknown(n)},Vo.apply(o,arguments)}const Ow=new Date,_w=new Date;function En(t,e,n,r){function o(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return o.floor=i=>(t(i=new Date(+i)),i),o.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),o.round=i=>{const s=o(i),a=o.ceil(i);return i-s<a-i?s:a},o.offset=(i,s)=>(e(i=new Date(+i),s==null?1:Math.floor(s)),i),o.range=(i,s,a)=>{const l=[];if(i=o.ceil(i),a=a==null?1:Math.floor(a),!(i<s)||!(a>0))return l;let u;do l.push(u=new Date(+i)),e(i,a),t(i);while(u<i&&i<s);return l},o.filter=i=>En(s=>{if(s>=s)for(;t(s),!i(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;e(s,-1),!i(s););else for(;--a>=0;)for(;e(s,1),!i(s););}),n&&(o.count=(i,s)=>(Ow.setTime(+i),_w.setTime(+s),t(Ow),t(_w),Math.floor(n(Ow,_w))),o.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?o.filter(r?s=>r(s)%i===0:s=>o.count(0,s)%i===0):o)),o}const Bv=En(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Bv.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?En(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Bv);Bv.range;const $s=1e3,Eo=$s*60,ks=Eo*60,zs=ks*24,TT=zs*7,FR=zs*30,Rw=zs*365,Vl=En(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*$s)},(t,e)=>(e-t)/$s,t=>t.getUTCSeconds());Vl.range;const ET=En(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*$s)},(t,e)=>{t.setTime(+t+e*Eo)},(t,e)=>(e-t)/Eo,t=>t.getMinutes());ET.range;const NT=En(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Eo)},(t,e)=>(e-t)/Eo,t=>t.getUTCMinutes());NT.range;const AT=En(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*$s-t.getMinutes()*Eo)},(t,e)=>{t.setTime(+t+e*ks)},(t,e)=>(e-t)/ks,t=>t.getHours());AT.range;const OT=En(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*ks)},(t,e)=>(e-t)/ks,t=>t.getUTCHours());OT.range;const em=En(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Eo)/zs,t=>t.getDate()-1);em.range;const zx=En(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/zs,t=>t.getUTCDate()-1);zx.range;const l4=En(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/zs,t=>Math.floor(t/zs));l4.range;function Mu(t){return En(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Eo)/TT)}const jx=Mu(0),zv=Mu(1),Gpe=Mu(2),Hpe=Mu(3),hd=Mu(4),Kpe=Mu(5),qpe=Mu(6);jx.range;zv.range;Gpe.range;Hpe.range;hd.range;Kpe.range;qpe.range;function Fu(t){return En(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/TT)}const Wx=Fu(0),jv=Fu(1),Xpe=Fu(2),Ype=Fu(3),pd=Fu(4),Qpe=Fu(5),Zpe=Fu(6);Wx.range;jv.range;Xpe.range;Ype.range;pd.range;Qpe.range;Zpe.range;const _T=En(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());_T.range;const RT=En(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());RT.range;const js=En(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());js.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:En(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});js.range;const Ws=En(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ws.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:En(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Ws.range;function u4(t,e,n,r,o,i){const s=[[Vl,1,$s],[Vl,5,5*$s],[Vl,15,15*$s],[Vl,30,30*$s],[i,1,Eo],[i,5,5*Eo],[i,15,15*Eo],[i,30,30*Eo],[o,1,ks],[o,3,3*ks],[o,6,6*ks],[o,12,12*ks],[r,1,zs],[r,2,2*zs],[n,1,TT],[e,1,FR],[e,3,3*FR],[t,1,Rw]];function a(u,c,d){const f=c<u;f&&([u,c]=[c,u]);const h=d&&typeof d.range=="function"?d:l(u,c,d),p=h?h.range(u,+c+1):[];return f?p.reverse():p}function l(u,c,d){const f=Math.abs(c-u)/d,h=mT(([,,g])=>g).right(s,f);if(h===s.length)return t.every(KC(u/Rw,c/Rw,d));if(h===0)return Bv.every(Math.max(KC(u,c,d),1));const[p,m]=s[f/s[h-1][2]<s[h][2]/f?h-1:h];return p.every(m)}return[a,l]}const[Jpe,eme]=u4(Ws,RT,Wx,l4,OT,NT),[tme,nme]=u4(js,_T,jx,em,AT,ET);function Pw(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Dw(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ff(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function rme(t){var e=t.dateTime,n=t.date,r=t.time,o=t.periods,i=t.days,s=t.shortDays,a=t.months,l=t.shortMonths,u=Lf(o),c=Bf(o),d=Lf(i),f=Bf(i),h=Lf(s),p=Bf(s),m=Lf(a),g=Bf(a),y=Lf(l),v=Bf(l),x={a:L,A,b:O,B:j,c:null,d:VR,e:VR,f:Ime,g:Mme,G:Lme,H:Cme,I:$me,j:kme,L:c4,m:Tme,M:Eme,p:V,q:z,Q:HR,s:KR,S:Nme,u:Ame,U:Ome,V:_me,w:Rme,W:Pme,x:null,X:null,y:Dme,Y:Fme,Z:Bme,"%":GR},b={a:U,A:Z,b:te,B:se,c:null,d:UR,e:UR,f:Vme,g:Jme,G:tge,H:zme,I:jme,j:Wme,L:f4,m:Ume,M:Gme,p:ue,q:ce,Q:HR,s:KR,S:Hme,u:Kme,U:qme,V:Xme,w:Yme,W:Qme,x:null,X:null,y:Zme,Y:ege,Z:nge,"%":GR},w={a:I,A:T,b:E,B:_,c:N,d:jR,e:jR,f:xme,g:zR,G:BR,H:WR,I:WR,j:mme,L:vme,m:pme,M:gme,p:k,q:hme,Q:wme,s:Sme,S:yme,u:lme,U:ume,V:cme,w:ame,W:dme,x:P,X:F,y:zR,Y:BR,Z:fme,"%":bme};x.x=S(n,x),x.X=S(r,x),x.c=S(e,x),b.x=S(n,b),b.X=S(r,b),b.c=S(e,b);function S(Y,le){return function(oe){var J=[],be=-1,me=0,ve=Y.length,pe,Ee,Ce;for(oe instanceof Date||(oe=new Date(+oe));++be<ve;)Y.charCodeAt(be)===37&&(J.push(Y.slice(me,be)),(Ee=LR[pe=Y.charAt(++be)])!=null?pe=Y.charAt(++be):Ee=pe==="e"?" ":"0",(Ce=le[pe])&&(pe=Ce(oe,Ee)),J.push(pe),me=be+1);return J.push(Y.slice(me,be)),J.join("")}}function $(Y,le){return function(oe){var J=Ff(1900,void 0,1),be=C(J,Y,oe+="",0),me,ve;if(be!=oe.length)return null;if("Q"in J)return new Date(J.Q);if("s"in J)return new Date(J.s*1e3+("L"in J?J.L:0));if(le&&!("Z"in J)&&(J.Z=0),"p"in J&&(J.H=J.H%12+J.p*12),J.m===void 0&&(J.m="q"in J?J.q:0),"V"in J){if(J.V<1||J.V>53)return null;"w"in J||(J.w=1),"Z"in J?(me=Dw(Ff(J.y,0,1)),ve=me.getUTCDay(),me=ve>4||ve===0?jv.ceil(me):jv(me),me=zx.offset(me,(J.V-1)*7),J.y=me.getUTCFullYear(),J.m=me.getUTCMonth(),J.d=me.getUTCDate()+(J.w+6)%7):(me=Pw(Ff(J.y,0,1)),ve=me.getDay(),me=ve>4||ve===0?zv.ceil(me):zv(me),me=em.offset(me,(J.V-1)*7),J.y=me.getFullYear(),J.m=me.getMonth(),J.d=me.getDate()+(J.w+6)%7)}else("W"in J||"U"in J)&&("w"in J||(J.w="u"in J?J.u%7:"W"in J?1:0),ve="Z"in J?Dw(Ff(J.y,0,1)).getUTCDay():Pw(Ff(J.y,0,1)).getDay(),J.m=0,J.d="W"in J?(J.w+6)%7+J.W*7-(ve+5)%7:J.w+J.U*7-(ve+6)%7);return"Z"in J?(J.H+=J.Z/100|0,J.M+=J.Z%100,Dw(J)):Pw(J)}}function C(Y,le,oe,J){for(var be=0,me=le.length,ve=oe.length,pe,Ee;be<me;){if(J>=ve)return-1;if(pe=le.charCodeAt(be++),pe===37){if(pe=le.charAt(be++),Ee=w[pe in LR?le.charAt(be++):pe],!Ee||(J=Ee(Y,oe,J))<0)return-1}else if(pe!=oe.charCodeAt(J++))return-1}return J}function k(Y,le,oe){var J=u.exec(le.slice(oe));return J?(Y.p=c.get(J[0].toLowerCase()),oe+J[0].length):-1}function I(Y,le,oe){var J=h.exec(le.slice(oe));return J?(Y.w=p.get(J[0].toLowerCase()),oe+J[0].length):-1}function T(Y,le,oe){var J=d.exec(le.slice(oe));return J?(Y.w=f.get(J[0].toLowerCase()),oe+J[0].length):-1}function E(Y,le,oe){var J=y.exec(le.slice(oe));return J?(Y.m=v.get(J[0].toLowerCase()),oe+J[0].length):-1}function _(Y,le,oe){var J=m.exec(le.slice(oe));return J?(Y.m=g.get(J[0].toLowerCase()),oe+J[0].length):-1}function N(Y,le,oe){return C(Y,e,le,oe)}function P(Y,le,oe){return C(Y,n,le,oe)}function F(Y,le,oe){return C(Y,r,le,oe)}function L(Y){return s[Y.getDay()]}function A(Y){return i[Y.getDay()]}function O(Y){return l[Y.getMonth()]}function j(Y){return a[Y.getMonth()]}function V(Y){return o[+(Y.getHours()>=12)]}function z(Y){return 1+~~(Y.getMonth()/3)}function U(Y){return s[Y.getUTCDay()]}function Z(Y){return i[Y.getUTCDay()]}function te(Y){return l[Y.getUTCMonth()]}function se(Y){return a[Y.getUTCMonth()]}function ue(Y){return o[+(Y.getUTCHours()>=12)]}function ce(Y){return 1+~~(Y.getUTCMonth()/3)}return{format:function(Y){var le=S(Y+="",x);return le.toString=function(){return Y},le},parse:function(Y){var le=$(Y+="",!1);return le.toString=function(){return Y},le},utcFormat:function(Y){var le=S(Y+="",b);return le.toString=function(){return Y},le},utcParse:function(Y){var le=$(Y+="",!0);return le.toString=function(){return Y},le}}}var LR={"-":"",_:" ",0:"0"},Dn=/^\s*\d+/,ome=/^%/,ime=/[\\^$*+?|[\]().{}]/g;function lt(t,e,n){var r=t<0?"-":"",o=(r?-t:t)+"",i=o.length;return r+(i<n?new Array(n-i+1).join(e)+o:o)}function sme(t){return t.replace(ime,"\\$&")}function Lf(t){return new RegExp("^(?:"+t.map(sme).join("|")+")","i")}function Bf(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function ame(t,e,n){var r=Dn.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function lme(t,e,n){var r=Dn.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function ume(t,e,n){var r=Dn.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function cme(t,e,n){var r=Dn.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function dme(t,e,n){var r=Dn.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function BR(t,e,n){var r=Dn.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function zR(t,e,n){var r=Dn.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function fme(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function hme(t,e,n){var r=Dn.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function pme(t,e,n){var r=Dn.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function jR(t,e,n){var r=Dn.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function mme(t,e,n){var r=Dn.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function WR(t,e,n){var r=Dn.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function gme(t,e,n){var r=Dn.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function yme(t,e,n){var r=Dn.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function vme(t,e,n){var r=Dn.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function xme(t,e,n){var r=Dn.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function bme(t,e,n){var r=ome.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function wme(t,e,n){var r=Dn.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Sme(t,e,n){var r=Dn.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function VR(t,e){return lt(t.getDate(),e,2)}function Cme(t,e){return lt(t.getHours(),e,2)}function $me(t,e){return lt(t.getHours()%12||12,e,2)}function kme(t,e){return lt(1+em.count(js(t),t),e,3)}function c4(t,e){return lt(t.getMilliseconds(),e,3)}function Ime(t,e){return c4(t,e)+"000"}function Tme(t,e){return lt(t.getMonth()+1,e,2)}function Eme(t,e){return lt(t.getMinutes(),e,2)}function Nme(t,e){return lt(t.getSeconds(),e,2)}function Ame(t){var e=t.getDay();return e===0?7:e}function Ome(t,e){return lt(jx.count(js(t)-1,t),e,2)}function d4(t){var e=t.getDay();return e>=4||e===0?hd(t):hd.ceil(t)}function _me(t,e){return t=d4(t),lt(hd.count(js(t),t)+(js(t).getDay()===4),e,2)}function Rme(t){return t.getDay()}function Pme(t,e){return lt(zv.count(js(t)-1,t),e,2)}function Dme(t,e){return lt(t.getFullYear()%100,e,2)}function Mme(t,e){return t=d4(t),lt(t.getFullYear()%100,e,2)}function Fme(t,e){return lt(t.getFullYear()%1e4,e,4)}function Lme(t,e){var n=t.getDay();return t=n>=4||n===0?hd(t):hd.ceil(t),lt(t.getFullYear()%1e4,e,4)}function Bme(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+lt(e/60|0,"0",2)+lt(e%60,"0",2)}function UR(t,e){return lt(t.getUTCDate(),e,2)}function zme(t,e){return lt(t.getUTCHours(),e,2)}function jme(t,e){return lt(t.getUTCHours()%12||12,e,2)}function Wme(t,e){return lt(1+zx.count(Ws(t),t),e,3)}function f4(t,e){return lt(t.getUTCMilliseconds(),e,3)}function Vme(t,e){return f4(t,e)+"000"}function Ume(t,e){return lt(t.getUTCMonth()+1,e,2)}function Gme(t,e){return lt(t.getUTCMinutes(),e,2)}function Hme(t,e){return lt(t.getUTCSeconds(),e,2)}function Kme(t){var e=t.getUTCDay();return e===0?7:e}function qme(t,e){return lt(Wx.count(Ws(t)-1,t),e,2)}function h4(t){var e=t.getUTCDay();return e>=4||e===0?pd(t):pd.ceil(t)}function Xme(t,e){return t=h4(t),lt(pd.count(Ws(t),t)+(Ws(t).getUTCDay()===4),e,2)}function Yme(t){return t.getUTCDay()}function Qme(t,e){return lt(jv.count(Ws(t)-1,t),e,2)}function Zme(t,e){return lt(t.getUTCFullYear()%100,e,2)}function Jme(t,e){return t=h4(t),lt(t.getUTCFullYear()%100,e,2)}function ege(t,e){return lt(t.getUTCFullYear()%1e4,e,4)}function tge(t,e){var n=t.getUTCDay();return t=n>=4||n===0?pd(t):pd.ceil(t),lt(t.getUTCFullYear()%1e4,e,4)}function nge(){return"+0000"}function GR(){return"%"}function HR(t){return+t}function KR(t){return Math.floor(+t/1e3)}var nc,p4,m4;rge({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function rge(t){return nc=rme(t),p4=nc.format,nc.parse,m4=nc.utcFormat,nc.utcParse,nc}function oge(t){return new Date(t)}function ige(t){return t instanceof Date?+t:+new Date(+t)}function PT(t,e,n,r,o,i,s,a,l,u){var c=bT(),d=c.invert,f=c.domain,h=u(".%L"),p=u(":%S"),m=u("%I:%M"),g=u("%I %p"),y=u("%a %d"),v=u("%b %d"),x=u("%B"),b=u("%Y");function w(S){return(l(S)<S?h:a(S)<S?p:s(S)<S?m:i(S)<S?g:r(S)<S?o(S)<S?y:v:n(S)<S?x:b)(S)}return c.invert=function(S){return new Date(d(S))},c.domain=function(S){return arguments.length?f(Array.from(S,ige)):f().map(oge)},c.ticks=function(S){var $=f();return t($[0],$[$.length-1],S??10)},c.tickFormat=function(S,$){return $==null?w:u($)},c.nice=function(S){var $=f();return(!S||typeof S.range!="function")&&(S=e($[0],$[$.length-1],S??10)),S?f(t4($,S)):c},c.copy=function(){return Jp(c,PT(t,e,n,r,o,i,s,a,l,u))},c}function sge(){return Vo.apply(PT(tme,nme,js,_T,jx,em,AT,ET,Vl,p4).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function age(){return Vo.apply(PT(Jpe,eme,Ws,RT,Wx,zx,OT,NT,Vl,m4).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Vx(){var t=0,e=1,n,r,o,i,s=br,a=!1,l;function u(d){return d==null||isNaN(d=+d)?l:s(o===0?.5:(d=(i(d)-n)*o,a?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([t,e]=d,n=i(t=+t),r=i(e=+e),o=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(d){return arguments.length?(a=!!d,u):a},u.interpolator=function(d){return arguments.length?(s=d,u):s};function c(d){return function(f){var h,p;return arguments.length?([h,p]=f,s=d(h,p),u):[s(0),s(1)]}}return u.range=c(nf),u.rangeRound=c(xT),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return i=d,n=d(t),r=d(e),o=n===r?0:1/(r-n),u}}function dl(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function g4(){var t=cl(Vx()(br));return t.copy=function(){return dl(t,g4())},Qs.apply(t,arguments)}function y4(){var t=CT(Vx()).domain([1,10]);return t.copy=function(){return dl(t,y4()).base(t.base())},Qs.apply(t,arguments)}function v4(){var t=$T(Vx());return t.copy=function(){return dl(t,v4()).constant(t.constant())},Qs.apply(t,arguments)}function DT(){var t=kT(Vx());return t.copy=function(){return dl(t,DT()).exponent(t.exponent())},Qs.apply(t,arguments)}function lge(){return DT.apply(null,arguments).exponent(.5)}function x4(){var t=[],e=br;function n(r){if(r!=null&&!isNaN(r=+r))return e((Qp(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let o of r)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(Ma),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,o)=>e(o/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(o,i)=>qhe(t,i/r))},n.copy=function(){return x4(e).domain(t)},Qs.apply(n,arguments)}function Ux(){var t=0,e=.5,n=1,r=1,o,i,s,a,l,u=br,c,d=!1,f;function h(m){return isNaN(m=+m)?f:(m=.5+((m=+c(m))-i)*(r*m<r*i?a:l),u(d?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([t,e,n]=m,o=c(t=+t),i=c(e=+e),s=c(n=+n),a=o===i?0:.5/(i-o),l=i===s?0:.5/(s-i),r=i<o?-1:1,h):[t,e,n]},h.clamp=function(m){return arguments.length?(d=!!m,h):d},h.interpolator=function(m){return arguments.length?(u=m,h):u};function p(m){return function(g){var y,v,x;return arguments.length?([y,v,x]=g,u=bpe(m,[y,v,x]),h):[u(0),u(.5),u(1)]}}return h.range=p(nf),h.rangeRound=p(xT),h.unknown=function(m){return arguments.length?(f=m,h):f},function(m){return c=m,o=m(t),i=m(e),s=m(n),a=o===i?0:.5/(i-o),l=i===s?0:.5/(s-i),r=i<o?-1:1,h}}function b4(){var t=cl(Ux()(br));return t.copy=function(){return dl(t,b4())},Qs.apply(t,arguments)}function w4(){var t=CT(Ux()).domain([.1,1,10]);return t.copy=function(){return dl(t,w4()).base(t.base())},Qs.apply(t,arguments)}function S4(){var t=$T(Ux());return t.copy=function(){return dl(t,S4()).constant(t.constant())},Qs.apply(t,arguments)}function MT(){var t=kT(Ux());return t.copy=function(){return dl(t,MT()).exponent(t.exponent())},Qs.apply(t,arguments)}function uge(){return MT.apply(null,arguments).exponent(.5)}const qR=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Yh,scaleDiverging:b4,scaleDivergingLog:w4,scaleDivergingPow:MT,scaleDivergingSqrt:uge,scaleDivergingSymlog:S4,scaleIdentity:e4,scaleImplicit:qC,scaleLinear:Lv,scaleLog:n4,scaleOrdinal:gT,scalePoint:gh,scalePow:IT,scaleQuantile:i4,scaleQuantize:s4,scaleRadial:o4,scaleSequential:g4,scaleSequentialLog:y4,scaleSequentialPow:DT,scaleSequentialQuantile:x4,scaleSequentialSqrt:lge,scaleSequentialSymlog:v4,scaleSqrt:Vpe,scaleSymlog:r4,scaleThreshold:a4,scaleTime:sge,scaleUtc:age,tickFormat:Jj},Symbol.toStringTag,{value:"Module"}));var cge=qd;function dge(t,e,n){for(var r=-1,o=t.length;++r<o;){var i=t[r],s=e(i);if(s!=null&&(a===void 0?s===s&&!cge(s):n(s,a)))var a=s,l=i}return l}var C4=dge;function fge(t,e){return t>e}var hge=fge,pge=C4,mge=hge,gge=tf;function yge(t){return t&&t.length?pge(t,gge,mge):void 0}var vge=yge;const Gx=ht(vge);function xge(t,e){return t<e}var bge=xge,wge=C4,Sge=bge,Cge=tf;function $ge(t){return t&&t.length?wge(t,Cge,Sge):void 0}var kge=$ge;const Hx=ht(kge);var Ige=qI,Tge=ul,Ege=_j,Nge=Hr;function Age(t,e){var n=Nge(t)?Ige:Ege;return n(t,Tge(e))}var Oge=Age,_ge=Aj,Rge=Oge;function Pge(t,e){return _ge(Rge(t,e),1)}var Dge=Pge;const Mge=ht(Dge);var Fge=uT;function Lge(t,e){return Fge(t,e)}var Bge=Lge;const Kx=ht(Bge);var rf=1e9,zge={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},LT,Wt=!0,Bo="[DecimalError] ",ru=Bo+"Invalid argument: ",FT=Bo+"Exponent out of range: ",of=Math.floor,_l=Math.pow,jge=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Jr,An=1e7,Mt=7,$4=9007199254740991,Wv=of($4/Mt),ke={};ke.absoluteValue=ke.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};ke.comparedTo=ke.cmp=function(t){var e,n,r,o,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(r=i.d.length,o=t.d.length,e=0,n=r<o?r:o;e<n;++e)if(i.d[e]!==t.d[e])return i.d[e]>t.d[e]^i.s<0?1:-1;return r===o?0:r>o^i.s<0?1:-1};ke.decimalPlaces=ke.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Mt;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};ke.dividedBy=ke.div=function(t){return _s(this,new this.constructor(t))};ke.dividedToIntegerBy=ke.idiv=function(t){var e=this,n=e.constructor;return $t(_s(e,new n(t),0,1),n.precision)};ke.equals=ke.eq=function(t){return!this.cmp(t)};ke.exponent=function(){return pn(this)};ke.greaterThan=ke.gt=function(t){return this.cmp(t)>0};ke.greaterThanOrEqualTo=ke.gte=function(t){return this.cmp(t)>=0};ke.isInteger=ke.isint=function(){return this.e>this.d.length-2};ke.isNegative=ke.isneg=function(){return this.s<0};ke.isPositive=ke.ispos=function(){return this.s>0};ke.isZero=function(){return this.s===0};ke.lessThan=ke.lt=function(t){return this.cmp(t)<0};ke.lessThanOrEqualTo=ke.lte=function(t){return this.cmp(t)<1};ke.logarithm=ke.log=function(t){var e,n=this,r=n.constructor,o=r.precision,i=o+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Jr))throw Error(Bo+"NaN");if(n.s<1)throw Error(Bo+(n.s?"NaN":"-Infinity"));return n.eq(Jr)?new r(0):(Wt=!1,e=_s(tp(n,i),tp(t,i),i),Wt=!0,$t(e,o))};ke.minus=ke.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?T4(e,t):k4(e,(t.s=-t.s,t))};ke.modulo=ke.mod=function(t){var e,n=this,r=n.constructor,o=r.precision;if(t=new r(t),!t.s)throw Error(Bo+"NaN");return n.s?(Wt=!1,e=_s(n,t,0,1).times(t),Wt=!0,n.minus(e)):$t(new r(n),o)};ke.naturalExponential=ke.exp=function(){return I4(this)};ke.naturalLogarithm=ke.ln=function(){return tp(this)};ke.negated=ke.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};ke.plus=ke.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?k4(e,t):T4(e,(t.s=-t.s,t))};ke.precision=ke.sd=function(t){var e,n,r,o=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(ru+t);if(e=pn(o)+1,r=o.d.length-1,n=r*Mt+1,r=o.d[r],r){for(;r%10==0;r/=10)n--;for(r=o.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};ke.squareRoot=ke.sqrt=function(){var t,e,n,r,o,i,s,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(Bo+"NaN")}for(t=pn(a),Wt=!1,o=Math.sqrt(+a),o==0||o==1/0?(e=Hi(a.d),(e.length+t)%2==0&&(e+="0"),o=Math.sqrt(e),t=of((t+1)/2)-(t<0||t%2),o==1/0?e="5e"+t:(e=o.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(o.toString()),n=l.precision,o=s=n+3;;)if(i=r,r=i.plus(_s(a,i,s+2)).times(.5),Hi(i.d).slice(0,s)===(e=Hi(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),o==s&&e=="4999"){if($t(i,n+1,0),i.times(i).eq(a)){r=i;break}}else if(e!="9999")break;s+=4}return Wt=!0,$t(r,n)};ke.times=ke.mul=function(t){var e,n,r,o,i,s,a,l,u,c=this,d=c.constructor,f=c.d,h=(t=new d(t)).d;if(!c.s||!t.s)return new d(0);for(t.s*=c.s,n=c.e+t.e,l=f.length,u=h.length,l<u&&(i=f,f=h,h=i,s=l,l=u,u=s),i=[],s=l+u,r=s;r--;)i.push(0);for(r=u;--r>=0;){for(e=0,o=l+r;o>r;)a=i[o]+h[r]*f[o-r-1]+e,i[o--]=a%An|0,e=a/An|0;i[o]=(i[o]+e)%An|0}for(;!i[--s];)i.pop();return e?++n:i.shift(),t.d=i,t.e=n,Wt?$t(t,d.precision):t};ke.toDecimalPlaces=ke.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(is(t,0,rf),e===void 0?e=r.rounding:is(e,0,8),$t(n,t+pn(n)+1,e))};ke.toExponential=function(t,e){var n,r=this,o=r.constructor;return t===void 0?n=gu(r,!0):(is(t,0,rf),e===void 0?e=o.rounding:is(e,0,8),r=$t(new o(r),t+1,e),n=gu(r,!0,t+1)),n};ke.toFixed=function(t,e){var n,r,o=this,i=o.constructor;return t===void 0?gu(o):(is(t,0,rf),e===void 0?e=i.rounding:is(e,0,8),r=$t(new i(o),t+pn(o)+1,e),n=gu(r.abs(),!1,t+pn(r)+1),o.isneg()&&!o.isZero()?"-"+n:n)};ke.toInteger=ke.toint=function(){var t=this,e=t.constructor;return $t(new e(t),pn(t)+1,e.rounding)};ke.toNumber=function(){return+this};ke.toPower=ke.pow=function(t){var e,n,r,o,i,s,a=this,l=a.constructor,u=12,c=+(t=new l(t));if(!t.s)return new l(Jr);if(a=new l(a),!a.s){if(t.s<1)throw Error(Bo+"Infinity");return a}if(a.eq(Jr))return a;if(r=l.precision,t.eq(Jr))return $t(a,r);if(e=t.e,n=t.d.length-1,s=e>=n,i=a.s,s){if((n=c<0?-c:c)<=$4){for(o=new l(Jr),e=Math.ceil(r/Mt+4),Wt=!1;n%2&&(o=o.times(a),YR(o.d,e)),n=of(n/2),n!==0;)a=a.times(a),YR(a.d,e);return Wt=!0,t.s<0?new l(Jr).div(o):$t(o,r)}}else if(i<0)throw Error(Bo+"NaN");return i=i<0&&t.d[Math.max(e,n)]&1?-1:1,a.s=1,Wt=!1,o=t.times(tp(a,r+u)),Wt=!0,o=I4(o),o.s=i,o};ke.toPrecision=function(t,e){var n,r,o=this,i=o.constructor;return t===void 0?(n=pn(o),r=gu(o,n<=i.toExpNeg||n>=i.toExpPos)):(is(t,1,rf),e===void 0?e=i.rounding:is(e,0,8),o=$t(new i(o),t,e),n=pn(o),r=gu(o,t<=n||n<=i.toExpNeg,t)),r};ke.toSignificantDigits=ke.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(is(t,1,rf),e===void 0?e=r.rounding:is(e,0,8)),$t(new r(n),t,e)};ke.toString=ke.valueOf=ke.val=ke.toJSON=ke[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=pn(t),n=t.constructor;return gu(t,e<=n.toExpNeg||e>=n.toExpPos)};function k4(t,e){var n,r,o,i,s,a,l,u,c=t.constructor,d=c.precision;if(!t.s||!e.s)return e.s||(e=new c(t)),Wt?$t(e,d):e;if(l=t.d,u=e.d,s=t.e,o=e.e,l=l.slice(),i=s-o,i){for(i<0?(r=l,i=-i,a=u.length):(r=u,o=s,a=l.length),s=Math.ceil(d/Mt),a=s>a?s+1:a+1,i>a&&(i=a,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(a=l.length,i=u.length,a-i<0&&(i=a,r=u,u=l,l=r),n=0;i;)n=(l[--i]=l[i]+u[i]+n)/An|0,l[i]%=An;for(n&&(l.unshift(n),++o),a=l.length;l[--a]==0;)l.pop();return e.d=l,e.e=o,Wt?$t(e,d):e}function is(t,e,n){if(t!==~~t||t<e||t>n)throw Error(ru+t)}function Hi(t){var e,n,r,o=t.length-1,i="",s=t[0];if(o>0){for(i+=s,e=1;e<o;e++)r=t[e]+"",n=Mt-r.length,n&&(i+=da(n)),i+=r;s=t[e],r=s+"",n=Mt-r.length,n&&(i+=da(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return i+s}var _s=function(){function t(r,o){var i,s=0,a=r.length;for(r=r.slice();a--;)i=r[a]*o+s,r[a]=i%An|0,s=i/An|0;return s&&r.unshift(s),r}function e(r,o,i,s){var a,l;if(i!=s)l=i>s?1:-1;else for(a=l=0;a<i;a++)if(r[a]!=o[a]){l=r[a]>o[a]?1:-1;break}return l}function n(r,o,i){for(var s=0;i--;)r[i]-=s,s=r[i]<o[i]?1:0,r[i]=s*An+r[i]-o[i];for(;!r[0]&&r.length>1;)r.shift()}return function(r,o,i,s){var a,l,u,c,d,f,h,p,m,g,y,v,x,b,w,S,$,C,k=r.constructor,I=r.s==o.s?1:-1,T=r.d,E=o.d;if(!r.s)return new k(r);if(!o.s)throw Error(Bo+"Division by zero");for(l=r.e-o.e,$=E.length,w=T.length,h=new k(I),p=h.d=[],u=0;E[u]==(T[u]||0);)++u;if(E[u]>(T[u]||0)&&--l,i==null?v=i=k.precision:s?v=i+(pn(r)-pn(o))+1:v=i,v<0)return new k(0);if(v=v/Mt+2|0,u=0,$==1)for(c=0,E=E[0],v++;(u<w||c)&&v--;u++)x=c*An+(T[u]||0),p[u]=x/E|0,c=x%E|0;else{for(c=An/(E[0]+1)|0,c>1&&(E=t(E,c),T=t(T,c),$=E.length,w=T.length),b=$,m=T.slice(0,$),g=m.length;g<$;)m[g++]=0;C=E.slice(),C.unshift(0),S=E[0],E[1]>=An/2&&++S;do c=0,a=e(E,m,$,g),a<0?(y=m[0],$!=g&&(y=y*An+(m[1]||0)),c=y/S|0,c>1?(c>=An&&(c=An-1),d=t(E,c),f=d.length,g=m.length,a=e(d,m,f,g),a==1&&(c--,n(d,$<f?C:E,f))):(c==0&&(a=c=1),d=E.slice()),f=d.length,f<g&&d.unshift(0),n(m,d,g),a==-1&&(g=m.length,a=e(E,m,$,g),a<1&&(c++,n(m,$<g?C:E,g))),g=m.length):a===0&&(c++,m=[0]),p[u++]=c,a&&m[0]?m[g++]=T[b]||0:(m=[T[b]],g=1);while((b++<w||m[0]!==void 0)&&v--)}return p[0]||p.shift(),h.e=l,$t(h,s?i+pn(h)+1:i)}}();function I4(t,e){var n,r,o,i,s,a,l=0,u=0,c=t.constructor,d=c.precision;if(pn(t)>16)throw Error(FT+pn(t));if(!t.s)return new c(Jr);for(e==null?(Wt=!1,a=d):a=e,s=new c(.03125);t.abs().gte(.1);)t=t.times(s),u+=5;for(r=Math.log(_l(2,u))/Math.LN10*2+5|0,a+=r,n=o=i=new c(Jr),c.precision=a;;){if(o=$t(o.times(t),a),n=n.times(++l),s=i.plus(_s(o,n,a)),Hi(s.d).slice(0,a)===Hi(i.d).slice(0,a)){for(;u--;)i=$t(i.times(i),a);return c.precision=d,e==null?(Wt=!0,$t(i,d)):i}i=s}}function pn(t){for(var e=t.e*Mt,n=t.d[0];n>=10;n/=10)e++;return e}function Mw(t,e,n){if(e>t.LN10.sd())throw Wt=!0,n&&(t.precision=n),Error(Bo+"LN10 precision limit exceeded");return $t(new t(t.LN10),e)}function da(t){for(var e="";t--;)e+="0";return e}function tp(t,e){var n,r,o,i,s,a,l,u,c,d=1,f=10,h=t,p=h.d,m=h.constructor,g=m.precision;if(h.s<1)throw Error(Bo+(h.s?"NaN":"-Infinity"));if(h.eq(Jr))return new m(0);if(e==null?(Wt=!1,u=g):u=e,h.eq(10))return e==null&&(Wt=!0),Mw(m,u);if(u+=f,m.precision=u,n=Hi(p),r=n.charAt(0),i=pn(h),Math.abs(i)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)h=h.times(t),n=Hi(h.d),r=n.charAt(0),d++;i=pn(h),r>1?(h=new m("0."+n),i++):h=new m(r+"."+n.slice(1))}else return l=Mw(m,u+2,g).times(i+""),h=tp(new m(r+"."+n.slice(1)),u-f).plus(l),m.precision=g,e==null?(Wt=!0,$t(h,g)):h;for(a=s=h=_s(h.minus(Jr),h.plus(Jr),u),c=$t(h.times(h),u),o=3;;){if(s=$t(s.times(c),u),l=a.plus(_s(s,new m(o),u)),Hi(l.d).slice(0,u)===Hi(a.d).slice(0,u))return a=a.times(2),i!==0&&(a=a.plus(Mw(m,u+2,g).times(i+""))),a=_s(a,new m(d),u),m.precision=g,e==null?(Wt=!0,$t(a,g)):a;a=l,o+=2}}function XR(t,e){var n,r,o;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(o=e.length;e.charCodeAt(o-1)===48;)--o;if(e=e.slice(r,o),e){if(o-=r,n=n-r-1,t.e=of(n/Mt),t.d=[],r=(n+1)%Mt,n<0&&(r+=Mt),r<o){for(r&&t.d.push(+e.slice(0,r)),o-=Mt;r<o;)t.d.push(+e.slice(r,r+=Mt));e=e.slice(r),r=Mt-e.length}else r-=o;for(;r--;)e+="0";if(t.d.push(+e),Wt&&(t.e>Wv||t.e<-Wv))throw Error(FT+n)}else t.s=0,t.e=0,t.d=[0];return t}function $t(t,e,n){var r,o,i,s,a,l,u,c,d=t.d;for(s=1,i=d[0];i>=10;i/=10)s++;if(r=e-s,r<0)r+=Mt,o=e,u=d[c=0];else{if(c=Math.ceil((r+1)/Mt),i=d.length,c>=i)return t;for(u=i=d[c],s=1;i>=10;i/=10)s++;r%=Mt,o=r-Mt+s}if(n!==void 0&&(i=_l(10,s-o-1),a=u/i%10|0,l=e<0||d[c+1]!==void 0||u%i,l=n<4?(a||l)&&(n==0||n==(t.s<0?3:2)):a>5||a==5&&(n==4||l||n==6&&(r>0?o>0?u/_l(10,s-o):0:d[c-1])%10&1||n==(t.s<0?8:7))),e<1||!d[0])return l?(i=pn(t),d.length=1,e=e-i-1,d[0]=_l(10,(Mt-e%Mt)%Mt),t.e=of(-e/Mt)||0):(d.length=1,d[0]=t.e=t.s=0),t;if(r==0?(d.length=c,i=1,c--):(d.length=c+1,i=_l(10,Mt-r),d[c]=o>0?(u/_l(10,s-o)%_l(10,o)|0)*i:0),l)for(;;)if(c==0){(d[0]+=i)==An&&(d[0]=1,++t.e);break}else{if(d[c]+=i,d[c]!=An)break;d[c--]=0,i=1}for(r=d.length;d[--r]===0;)d.pop();if(Wt&&(t.e>Wv||t.e<-Wv))throw Error(FT+pn(t));return t}function T4(t,e){var n,r,o,i,s,a,l,u,c,d,f=t.constructor,h=f.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new f(t),Wt?$t(e,h):e;if(l=t.d,d=e.d,r=e.e,u=t.e,l=l.slice(),s=u-r,s){for(c=s<0,c?(n=l,s=-s,a=d.length):(n=d,r=u,a=l.length),o=Math.max(Math.ceil(h/Mt),a)+2,s>o&&(s=o,n.length=1),n.reverse(),o=s;o--;)n.push(0);n.reverse()}else{for(o=l.length,a=d.length,c=o<a,c&&(a=o),o=0;o<a;o++)if(l[o]!=d[o]){c=l[o]<d[o];break}s=0}for(c&&(n=l,l=d,d=n,e.s=-e.s),a=l.length,o=d.length-a;o>0;--o)l[a++]=0;for(o=d.length;o>s;){if(l[--o]<d[o]){for(i=o;i&&l[--i]===0;)l[i]=An-1;--l[i],l[o]+=An}l[o]-=d[o]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,Wt?$t(e,h):e):new f(0)}function gu(t,e,n){var r,o=pn(t),i=Hi(t.d),s=i.length;return e?(n&&(r=n-s)>0?i=i.charAt(0)+"."+i.slice(1)+da(r):s>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(o<0?"e":"e+")+o):o<0?(i="0."+da(-o-1)+i,n&&(r=n-s)>0&&(i+=da(r))):o>=s?(i+=da(o+1-s),n&&(r=n-o-1)>0&&(i=i+"."+da(r))):((r=o+1)<s&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-s)>0&&(o+1===s&&(i+="."),i+=da(r))),t.s<0?"-"+i:i}function YR(t,e){if(t.length>e)return t.length=e,!0}function E4(t){var e,n,r;function o(i){var s=this;if(!(s instanceof o))return new o(i);if(s.constructor=o,i instanceof o){s.s=i.s,s.e=i.e,s.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(ru+i);if(i>0)s.s=1;else if(i<0)i=-i,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(i===~~i&&i<1e7){s.e=0,s.d=[i];return}return XR(s,i.toString())}else if(typeof i!="string")throw Error(ru+i);if(i.charCodeAt(0)===45?(i=i.slice(1),s.s=-1):s.s=1,jge.test(i))XR(s,i);else throw Error(ru+i)}if(o.prototype=ke,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.clone=E4,o.config=o.set=Wge,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return o.config(t),o}function Wge(t){if(!t||typeof t!="object")throw Error(Bo+"Object expected");var e,n,r,o=["precision",1,rf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<o.length;e+=3)if((r=t[n=o[e]])!==void 0)if(of(r)===r&&r>=o[e+1]&&r<=o[e+2])this[n]=r;else throw Error(ru+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(ru+n+": "+r);return this}var LT=E4(zge);Jr=new LT(1);const bt=LT;function Vge(t){return Kge(t)||Hge(t)||Gge(t)||Uge()}function Uge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gge(t,e){if(t){if(typeof t=="string")return ZC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZC(t,e)}}function Hge(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Kge(t){if(Array.isArray(t))return ZC(t)}function ZC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var qge=function(e){return e},N4={"@@functional/placeholder":!0},A4=function(e){return e===N4},QR=function(e){return function n(){return arguments.length===0||arguments.length===1&&A4(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},Xge=function t(e,n){return e===1?n:QR(function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];var s=o.filter(function(a){return a!==N4}).length;return s>=e?n.apply(void 0,o):t(e-s,QR(function(){for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];var c=o.map(function(d){return A4(d)?l.shift():d});return n.apply(void 0,Vge(c).concat(l))}))})},qx=function(e){return Xge(e.length,e)},JC=function(e,n){for(var r=[],o=e;o<n;++o)r[o-e]=o;return r},Yge=qx(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),Qge=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return qge;var o=n.reverse(),i=o[0],s=o.slice(1);return function(){return s.reduce(function(a,l){return l(a)},i.apply(void 0,arguments))}},e$=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},O4=function(e){var n=null,r=null;return function(){for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return n&&i.every(function(a,l){return a===n[l]})||(n=i,r=e.apply(void 0,i)),r}};function Zge(t){var e;return t===0?e=1:e=Math.floor(new bt(t).abs().log(10).toNumber())+1,e}function Jge(t,e,n){for(var r=new bt(t),o=0,i=[];r.lt(e)&&o<1e5;)i.push(r.toNumber()),r=r.add(n),o++;return i}var eye=qx(function(t,e,n){var r=+t,o=+e;return r+n*(o-r)}),tye=qx(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),nye=qx(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const Xx={rangeStep:Jge,getDigitCount:Zge,interpolateNumber:eye,uninterpolateNumber:tye,uninterpolateTruncation:nye};function t$(t){return iye(t)||oye(t)||_4(t)||rye()}function rye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oye(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function iye(t){if(Array.isArray(t))return n$(t)}function np(t,e){return lye(t)||aye(t,e)||_4(t,e)||sye()}function sye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _4(t,e){if(t){if(typeof t=="string")return n$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return n$(t,e)}}function n$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function aye(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,o=!1,i=void 0;try{for(var s=t[Symbol.iterator](),a;!(r=(a=s.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(l){o=!0,i=l}finally{try{!r&&s.return!=null&&s.return()}finally{if(o)throw i}}return n}}function lye(t){if(Array.isArray(t))return t}function R4(t){var e=np(t,2),n=e[0],r=e[1],o=n,i=r;return n>r&&(o=r,i=n),[o,i]}function P4(t,e,n){if(t.lte(0))return new bt(0);var r=Xx.getDigitCount(t.toNumber()),o=new bt(10).pow(r),i=t.div(o),s=r!==1?.05:.1,a=new bt(Math.ceil(i.div(s).toNumber())).add(n).mul(s),l=a.mul(o);return e?l:new bt(Math.ceil(l))}function uye(t,e,n){var r=1,o=new bt(t);if(!o.isint()&&n){var i=Math.abs(t);i<1?(r=new bt(10).pow(Xx.getDigitCount(t)-1),o=new bt(Math.floor(o.div(r).toNumber())).mul(r)):i>1&&(o=new bt(Math.floor(t)))}else t===0?o=new bt(Math.floor((e-1)/2)):n||(o=new bt(Math.floor(t)));var s=Math.floor((e-1)/2),a=Qge(Yge(function(l){return o.add(new bt(l-s).mul(r)).toNumber()}),JC);return a(0,e)}function D4(t,e,n,r){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new bt(0),tickMin:new bt(0),tickMax:new bt(0)};var i=P4(new bt(e).sub(t).div(n-1),r,o),s;t<=0&&e>=0?s=new bt(0):(s=new bt(t).add(e).div(2),s=s.sub(new bt(s).mod(i)));var a=Math.ceil(s.sub(t).div(i).toNumber()),l=Math.ceil(new bt(e).sub(s).div(i).toNumber()),u=a+l+1;return u>n?D4(t,e,n,r,o+1):(u<n&&(l=e>0?l+(n-u):l,a=e>0?a:a+(n-u)),{step:i,tickMin:s.sub(new bt(a).mul(i)),tickMax:s.add(new bt(l).mul(i))})}function cye(t){var e=np(t,2),n=e[0],r=e[1],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(o,2),a=R4([n,r]),l=np(a,2),u=l[0],c=l[1];if(u===-1/0||c===1/0){var d=c===1/0?[u].concat(t$(JC(0,o-1).map(function(){return 1/0}))):[].concat(t$(JC(0,o-1).map(function(){return-1/0})),[c]);return n>r?e$(d):d}if(u===c)return uye(u,o,i);var f=D4(u,c,s,i),h=f.step,p=f.tickMin,m=f.tickMax,g=Xx.rangeStep(p,m.add(new bt(.1).mul(h)),h);return n>r?e$(g):g}function dye(t,e){var n=np(t,2),r=n[0],o=n[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=R4([r,o]),a=np(s,2),l=a[0],u=a[1];if(l===-1/0||u===1/0)return[r,o];if(l===u)return[l];var c=Math.max(e,2),d=P4(new bt(u).sub(l).div(c-1),i,0),f=[].concat(t$(Xx.rangeStep(new bt(l),new bt(u).sub(new bt(.99).mul(d)),d)),[u]);return r>o?e$(f):f}var fye=O4(cye),hye=O4(dye),pye="Invariant failed";function yu(t,e){throw new Error(pye)}var mye=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function md(t){"@babel/helpers - typeof";return md=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},md(t)}function Vv(){return Vv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vv.apply(this,arguments)}function gye(t,e){return bye(t)||xye(t,e)||vye(t,e)||yye()}function yye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vye(t,e){if(t){if(typeof t=="string")return ZR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZR(t,e)}}function ZR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xye(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,i,s,a=[],l=!0,u=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,o=c}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}function bye(t){if(Array.isArray(t))return t}function wye(t,e){if(t==null)return{};var n=Sye(t,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Sye(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Cye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $ye(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,L4(r.key),r)}}function kye(t,e,n){return e&&$ye(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Iye(t,e,n){return e=Uv(e),Tye(t,M4()?Reflect.construct(e,n||[],Uv(t).constructor):e.apply(t,n))}function Tye(t,e){if(e&&(md(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Eye(t)}function Eye(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function M4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(M4=function(){return!!t})()}function Uv(t){return Uv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Uv(t)}function Nye(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r$(t,e)}function r$(t,e){return r$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},r$(t,e)}function F4(t,e,n){return e=L4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function L4(t){var e=Aye(t,"string");return md(e)=="symbol"?e:e+""}function Aye(t,e){if(md(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(md(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tm=function(t){function e(){return Cye(this,e),Iye(this,e,arguments)}return Nye(e,t),kye(e,[{key:"render",value:function(){var r=this.props,o=r.offset,i=r.layout,s=r.width,a=r.dataKey,l=r.data,u=r.dataPointFormatter,c=r.xAxis,d=r.yAxis,f=wye(r,mye),h=Qe(f,!1);this.props.direction==="x"&&c.type!=="number"&&yu();var p=l.map(function(m){var g=u(m,a),y=g.x,v=g.y,x=g.value,b=g.errorVal;if(!b)return null;var w=[],S,$;if(Array.isArray(b)){var C=gye(b,2);S=C[0],$=C[1]}else S=$=b;if(i==="vertical"){var k=c.scale,I=v+o,T=I+s,E=I-s,_=k(x-S),N=k(x+$);w.push({x1:N,y1:T,x2:N,y2:E}),w.push({x1:_,y1:I,x2:N,y2:I}),w.push({x1:_,y1:T,x2:_,y2:E})}else if(i==="horizontal"){var P=d.scale,F=y+o,L=F-s,A=F+s,O=P(x-S),j=P(x+$);w.push({x1:L,y1:j,x2:A,y2:j}),w.push({x1:F,y1:O,x2:F,y2:j}),w.push({x1:L,y1:O,x2:A,y2:O})}return B.createElement(on,Vv({className:"recharts-errorBar",key:"bar-".concat(w.map(function(V){return"".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)}))},h),w.map(function(V){return B.createElement("line",Vv({},V,{key:"line-".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)}))}))});return B.createElement(on,{className:"recharts-errorBars"},p)}}])}(B.Component);F4(tm,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});F4(tm,"displayName","ErrorBar");function rp(t){"@babel/helpers - typeof";return rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rp(t)}function JR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function kl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JR(Object(n),!0).forEach(function(r){Oye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Oye(t,e,n){return e=_ye(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _ye(t){var e=Rye(t,"string");return rp(e)=="symbol"?e:e+""}function Rye(t,e){if(rp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(rp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var B4=function(e){var n=e.children,r=e.formattedGraphicalItems,o=e.legendWidth,i=e.legendContent,s=Qr(n,Mc);if(!s)return null;var a=Mc.defaultProps,l=a!==void 0?kl(kl({},a),s.props):{},u;return s.props&&s.props.payload?u=s.props&&s.props.payload:i==="children"?u=(r||[]).reduce(function(c,d){var f=d.item,h=d.props,p=h.sectors||h.data||[];return c.concat(p.map(function(m){return{type:s.props.iconType||f.props.legendType,value:m.name,color:m.fill,payload:m}}))},[]):u=(r||[]).map(function(c){var d=c.item,f=d.type.defaultProps,h=f!==void 0?kl(kl({},f),d.props):{},p=h.dataKey,m=h.name,g=h.legendType,y=h.hide;return{inactive:y,dataKey:p,type:l.iconType||g||"square",color:BT(d),value:m||p,payload:h}}),kl(kl(kl({},l),Mc.getWithHeight(s,o)),{},{payload:u,item:s})};function op(t){"@babel/helpers - typeof";return op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},op(t)}function eP(t){return Fye(t)||Mye(t)||Dye(t)||Pye()}function Pye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dye(t,e){if(t){if(typeof t=="string")return o$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o$(t,e)}}function Mye(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Fye(t){if(Array.isArray(t))return o$(t)}function o$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function tP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Yt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tP(Object(n),!0).forEach(function(r){Lc(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lc(t,e,n){return e=Lye(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lye(t){var e=Bye(t,"string");return op(e)=="symbol"?e:e+""}function Bye(t,e){if(op(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(op(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ao(t,e,n){return qe(t)||qe(e)?n:In(e)?Do(t,e,n):He(e)?e(t):n}function yh(t,e,n,r){var o=Mge(t,function(a){return ao(a,e)});if(n==="number"){var i=o.filter(function(a){return ge(a)||parseFloat(a)});return i.length?[Hx(i),Gx(i)]:[1/0,-1/0]}var s=r?o.filter(function(a){return!qe(a)}):o;return s.map(function(a){return In(a)||a instanceof Date?a:""})}var zye=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,s=-1,a=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(a<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var l=i.range,u=0;u<a;u++){var c=u>0?o[u-1].coordinate:o[a-1].coordinate,d=o[u].coordinate,f=u>=a-1?o[0].coordinate:o[u+1].coordinate,h=void 0;if(gi(d-c)!==gi(f-d)){var p=[];if(gi(f-d)===gi(l[1]-l[0])){h=f;var m=d+l[1]-l[0];p[0]=Math.min(m,(m+c)/2),p[1]=Math.max(m,(m+c)/2)}else{h=c;var g=f+l[1]-l[0];p[0]=Math.min(d,(g+d)/2),p[1]=Math.max(d,(g+d)/2)}var y=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>y[0]&&e<=y[1]||e>=p[0]&&e<=p[1]){s=o[u].index;break}}else{var v=Math.min(c,f),x=Math.max(c,f);if(e>(v+d)/2&&e<=(x+d)/2){s=o[u].index;break}}}else for(var b=0;b<a;b++)if(b===0&&e<=(r[b].coordinate+r[b+1].coordinate)/2||b>0&&b<a-1&&e>(r[b].coordinate+r[b-1].coordinate)/2&&e<=(r[b].coordinate+r[b+1].coordinate)/2||b===a-1&&e>(r[b].coordinate+r[b-1].coordinate)/2){s=r[b].index;break}return s},BT=function(e){var n,r=e,o=r.type.displayName,i=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Yt(Yt({},e.type.defaultProps),e.props):e.props,s=i.stroke,a=i.fill,l;switch(o){case"Line":l=s;break;case"Area":case"Radar":l=s&&s!=="none"?s:a;break;default:l=a;break}return l},jye=function(e){var n=e.barSize,r=e.totalSize,o=e.stackGroups,i=o===void 0?{}:o;if(!i)return{};for(var s={},a=Object.keys(i),l=0,u=a.length;l<u;l++)for(var c=i[a[l]].stackGroups,d=Object.keys(c),f=0,h=d.length;f<h;f++){var p=c[d[f]],m=p.items,g=p.cateAxisId,y=m.filter(function($){return Ns($.type).indexOf("Bar")>=0});if(y&&y.length){var v=y[0].type.defaultProps,x=v!==void 0?Yt(Yt({},v),y[0].props):y[0].props,b=x.barSize,w=x[g];s[w]||(s[w]=[]);var S=qe(b)?n:b;s[w].push({item:y[0],stackList:y.slice(1),barSize:qe(S)?void 0:mu(S,r,0)})}}return s},Wye=function(e){var n=e.barGap,r=e.barCategoryGap,o=e.bandSize,i=e.sizeList,s=i===void 0?[]:i,a=e.maxBarSize,l=s.length;if(l<1)return null;var u=mu(n,o,0,!0),c,d=[];if(s[0].barSize===+s[0].barSize){var f=!1,h=o/l,p=s.reduce(function(b,w){return b+w.barSize||0},0);p+=(l-1)*u,p>=o&&(p-=(l-1)*u,u=0),p>=o&&h>0&&(f=!0,h*=.9,p=l*h);var m=(o-p)/2>>0,g={offset:m-u,size:0};c=s.reduce(function(b,w){var S={item:w.item,position:{offset:g.offset+g.size+u,size:f?h:w.barSize}},$=[].concat(eP(b),[S]);return g=$[$.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(C){$.push({item:C,position:g})}),$},d)}else{var y=mu(r,o,0,!0);o-2*y-(l-1)*u<=0&&(u=0);var v=(o-2*y-(l-1)*u)/l;v>1&&(v>>=0);var x=a===+a?Math.min(v,a):v;c=s.reduce(function(b,w,S){var $=[].concat(eP(b),[{item:w.item,position:{offset:y+(v+u)*S+(v-x)/2,size:x}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(C){$.push({item:C,position:$[$.length-1].position})}),$},d)}return c},Vye=function(e,n,r,o){var i=r.children,s=r.width,a=r.margin,l=s-(a.left||0)-(a.right||0),u=B4({children:i,legendWidth:l});if(u){var c=o||{},d=c.width,f=c.height,h=u.align,p=u.verticalAlign,m=u.layout;if((m==="vertical"||m==="horizontal"&&p==="middle")&&h!=="center"&&ge(e[h]))return Yt(Yt({},e),{},Lc({},h,e[h]+(d||0)));if((m==="horizontal"||m==="vertical"&&h==="center")&&p!=="middle"&&ge(e[p]))return Yt(Yt({},e),{},Lc({},p,e[p]+(f||0)))}return e},Uye=function(e,n,r){return qe(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},z4=function(e,n,r,o,i){var s=n.props.children,a=Mo(s,tm).filter(function(u){return Uye(o,i,u.props.direction)});if(a&&a.length){var l=a.map(function(u){return u.props.dataKey});return e.reduce(function(u,c){var d=ao(c,r);if(qe(d))return u;var f=Array.isArray(d)?[Hx(d),Gx(d)]:[d,d],h=l.reduce(function(p,m){var g=ao(c,m,0),y=f[0]-Math.abs(Array.isArray(g)?g[0]:g),v=f[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(y,p[0]),Math.max(v,p[1])]},[1/0,-1/0]);return[Math.min(h[0],u[0]),Math.max(h[1],u[1])]},[1/0,-1/0])}return null},Gye=function(e,n,r,o,i){var s=n.map(function(a){return z4(e,a,r,i,o)}).filter(function(a){return!qe(a)});return s&&s.length?s.reduce(function(a,l){return[Math.min(a[0],l[0]),Math.max(a[1],l[1])]},[1/0,-1/0]):null},j4=function(e,n,r,o,i){var s=n.map(function(l){var u=l.props.dataKey;return r==="number"&&u&&z4(e,l,u,o)||yh(e,u,r,i)});if(r==="number")return s.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var a={};return s.reduce(function(l,u){for(var c=0,d=u.length;c<d;c++)a[u[c]]||(a[u[c]]=!0,l.push(u[c]));return l},[])},W4=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},V4=function(e,n,r,o){if(o)return e.map(function(l){return l.coordinate});var i,s,a=e.map(function(l){return l.coordinate===n&&(i=!0),l.coordinate===r&&(s=!0),l.coordinate});return i||a.push(n),s||a.push(r),a},Is=function(e,n,r){if(!e)return null;var o=e.scale,i=e.duplicateDomain,s=e.type,a=e.range,l=e.realScaleType==="scaleBand"?o.bandwidth()/2:2,u=(n||r)&&s==="category"&&o.bandwidth?o.bandwidth()/l:0;if(u=e.axisType==="angleAxis"&&(a==null?void 0:a.length)>=2?gi(a[0]-a[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var c=(e.ticks||e.niceTicks).map(function(d){var f=i?i.indexOf(d):d;return{coordinate:o(f)+u,value:d,offset:u}});return c.filter(function(d){return!qp(d.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(d,f){return{coordinate:o(d)+u,value:d,index:f,offset:u}}):o.ticks&&!r?o.ticks(e.tickCount).map(function(d){return{coordinate:o(d)+u,value:d,offset:u}}):o.domain().map(function(d,f){return{coordinate:o(d)+u,value:i?i[d]:d,index:f,offset:u}})},Fw=new WeakMap,Jg=function(e,n){if(typeof n!="function")return e;Fw.has(e)||Fw.set(e,new WeakMap);var r=Fw.get(e);if(r.has(n))return r.get(n);var o=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,o),o},Hye=function(e,n,r){var o=e.scale,i=e.type,s=e.layout,a=e.axisType;if(o==="auto")return s==="radial"&&a==="radiusAxis"?{scale:Yh(),realScaleType:"band"}:s==="radial"&&a==="angleAxis"?{scale:Lv(),realScaleType:"linear"}:i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:gh(),realScaleType:"point"}:i==="category"?{scale:Yh(),realScaleType:"band"}:{scale:Lv(),realScaleType:"linear"};if(pu(o)){var l="scale".concat(_x(o));return{scale:(qR[l]||gh)(),realScaleType:qR[l]?l:"point"}}return He(o)?{scale:o}:{scale:gh(),realScaleType:"point"}},nP=1e-4,Kye=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,o=e.range(),i=Math.min(o[0],o[1])-nP,s=Math.max(o[0],o[1])+nP,a=e(n[0]),l=e(n[r-1]);(a<i||a>s||l<i||l>s)&&e.domain([n[0],n[r-1]])}},qye=function(e,n){if(!e)return null;for(var r=0,o=e.length;r<o;r++)if(e[r].item===n)return e[r].position;return null},Xye=function(e,n){if(!n||n.length!==2||!ge(n[0])||!ge(n[1]))return e;var r=Math.min(n[0],n[1]),o=Math.max(n[0],n[1]),i=[e[0],e[1]];return(!ge(e[0])||e[0]<r)&&(i[0]=r),(!ge(e[1])||e[1]>o)&&(i[1]=o),i[0]>o&&(i[0]=o),i[1]<r&&(i[1]=r),i},Yye=function(e){var n=e.length;if(!(n<=0))for(var r=0,o=e[0].length;r<o;++r)for(var i=0,s=0,a=0;a<n;++a){var l=qp(e[a][r][1])?e[a][r][0]:e[a][r][1];l>=0?(e[a][r][0]=i,e[a][r][1]=i+l,i=e[a][r][1]):(e[a][r][0]=s,e[a][r][1]=s+l,s=e[a][r][1])}},Qye=function(e){var n=e.length;if(!(n<=0))for(var r=0,o=e[0].length;r<o;++r)for(var i=0,s=0;s<n;++s){var a=qp(e[s][r][1])?e[s][r][0]:e[s][r][1];a>=0?(e[s][r][0]=i,e[s][r][1]=i+a,i=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},Zye={sign:Yye,expand:hoe,none:ad,silhouette:poe,wiggle:moe,positive:Qye},Jye=function(e,n,r){var o=n.map(function(a){return a.props.dataKey}),i=Zye[r],s=foe().keys(o).value(function(a,l){return+ao(a,l,0)}).order(NC).offset(i);return s(e)},eve=function(e,n,r,o,i,s){if(!e)return null;var a=s?n.reverse():n,l={},u=a.reduce(function(d,f){var h,p=(h=f.type)!==null&&h!==void 0&&h.defaultProps?Yt(Yt({},f.type.defaultProps),f.props):f.props,m=p.stackId,g=p.hide;if(g)return d;var y=p[r],v=d[y]||{hasStack:!1,stackGroups:{}};if(In(m)){var x=v.stackGroups[m]||{numericAxisId:r,cateAxisId:o,items:[]};x.items.push(f),v.hasStack=!0,v.stackGroups[m]=x}else v.stackGroups[Xp("_stackId_")]={numericAxisId:r,cateAxisId:o,items:[f]};return Yt(Yt({},d),{},Lc({},y,v))},l),c={};return Object.keys(u).reduce(function(d,f){var h=u[f];if(h.hasStack){var p={};h.stackGroups=Object.keys(h.stackGroups).reduce(function(m,g){var y=h.stackGroups[g];return Yt(Yt({},m),{},Lc({},g,{numericAxisId:r,cateAxisId:o,items:y.items,stackedData:Jye(e,y.items,i)}))},p)}return Yt(Yt({},d),{},Lc({},f,h))},c)},tve=function(e,n){var r=n.realScaleType,o=n.type,i=n.tickCount,s=n.originalDomain,a=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(i&&o==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var u=e.domain();if(!u.length)return null;var c=fye(u,i,a);return e.domain([Hx(c),Gx(c)]),{niceTicks:c}}if(i&&o==="number"){var d=e.domain(),f=hye(d,i,a);return{niceTicks:f}}return null};function rP(t){var e=t.axis,n=t.ticks,r=t.bandSize,o=t.entry,i=t.index,s=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!qe(o[e.dataKey])){var a=mv(n,"value",o[e.dataKey]);if(a)return a.coordinate+r/2}return n[i]?n[i].coordinate+r/2:null}var l=ao(o,qe(s)?e.dataKey:s);return qe(l)?null:e.scale(l)}var oP=function(e){var n=e.axis,r=e.ticks,o=e.offset,i=e.bandSize,s=e.entry,a=e.index;if(n.type==="category")return r[a]?r[a].coordinate+o:null;var l=ao(s,n.dataKey,n.domain[a]);return qe(l)?null:n.scale(l)-i/2+o},nve=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var o=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return o<=0&&i>=0?0:i<0?i:o}return r[0]},rve=function(e,n){var r,o=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Yt(Yt({},e.type.defaultProps),e.props):e.props,i=o.stackId;if(In(i)){var s=n[i];if(s){var a=s.items.indexOf(e);return a>=0?s.stackedData[a]:null}}return null},ove=function(e){return e.reduce(function(n,r){return[Hx(r.concat([n[0]]).filter(ge)),Gx(r.concat([n[1]]).filter(ge))]},[1/0,-1/0])},U4=function(e,n,r){return Object.keys(e).reduce(function(o,i){var s=e[i],a=s.stackedData,l=a.reduce(function(u,c){var d=ove(c.slice(n,r+1));return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],o[0]),Math.max(l[1],o[1])]},[1/0,-1/0]).map(function(o){return o===1/0||o===-1/0?0:o})},iP=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,sP=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,i$=function(e,n,r){if(He(e))return e(n,r);if(!Array.isArray(e))return n;var o=[];if(ge(e[0]))o[0]=r?e[0]:Math.min(e[0],n[0]);else if(iP.test(e[0])){var i=+iP.exec(e[0])[1];o[0]=n[0]-i}else He(e[0])?o[0]=e[0](n[0]):o[0]=n[0];if(ge(e[1]))o[1]=r?e[1]:Math.max(e[1],n[1]);else if(sP.test(e[1])){var s=+sP.exec(e[1])[1];o[1]=n[1]+s}else He(e[1])?o[1]=e[1](n[1]):o[1]=n[1];return o},Gv=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var o=e.scale.bandwidth();if(!r||o>0)return o}if(e&&n&&n.length>=2){for(var i=dT(n,function(d){return d.coordinate}),s=1/0,a=1,l=i.length;a<l;a++){var u=i[a],c=i[a-1];s=Math.min((u.coordinate||0)-(c.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0},aP=function(e,n,r){return!e||!e.length||Kx(e,Do(r,"type.defaultProps.domain"))?n:e},G4=function(e,n){var r=e.type.defaultProps?Yt(Yt({},e.type.defaultProps),e.props):e.props,o=r.dataKey,i=r.name,s=r.unit,a=r.formatter,l=r.tooltipType,u=r.chartType,c=r.hide;return Yt(Yt({},Qe(e,!1)),{},{dataKey:o,unit:s,formatter:a,name:i||o,color:BT(e),value:ao(n,o),type:l,payload:n,chartType:u,hide:c})};function ip(t){"@babel/helpers - typeof";return ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ip(t)}function lP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function uP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lP(Object(n),!0).forEach(function(r){ive(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ive(t,e,n){return e=sve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sve(t){var e=ave(t,"string");return ip(e)=="symbol"?e:e+""}function ave(t,e){if(ip(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ip(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Hv=Math.PI/180,lve=function(e){return e*180/Math.PI},jn=function(e,n,r,o){return{x:e+Math.cos(-Hv*o)*r,y:n+Math.sin(-Hv*o)*r}},uve=function(e,n){var r=e.x,o=e.y,i=n.x,s=n.y;return Math.sqrt(Math.pow(r-i,2)+Math.pow(o-s,2))},cve=function(e,n){var r=e.x,o=e.y,i=n.cx,s=n.cy,a=uve({x:r,y:o},{x:i,y:s});if(a<=0)return{radius:a};var l=(r-i)/a,u=Math.acos(l);return o>s&&(u=2*Math.PI-u),{radius:a,angle:lve(u),angleInRadian:u}},dve=function(e){var n=e.startAngle,r=e.endAngle,o=Math.floor(n/360),i=Math.floor(r/360),s=Math.min(o,i);return{startAngle:n-s*360,endAngle:r-s*360}},fve=function(e,n){var r=n.startAngle,o=n.endAngle,i=Math.floor(r/360),s=Math.floor(o/360),a=Math.min(i,s);return e+a*360},cP=function(e,n){var r=e.x,o=e.y,i=cve({x:r,y:o},n),s=i.radius,a=i.angle,l=n.innerRadius,u=n.outerRadius;if(s<l||s>u)return!1;if(s===0)return!0;var c=dve(n),d=c.startAngle,f=c.endAngle,h=a,p;if(d<=f){for(;h>f;)h-=360;for(;h<d;)h+=360;p=h>=d&&h<=f}else{for(;h>d;)h-=360;for(;h<f;)h+=360;p=h>=f&&h<=d}return p?uP(uP({},n),{},{radius:s,angle:fve(h,n)}):null};function sp(t){"@babel/helpers - typeof";return sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sp(t)}var hve=["offset"];function pve(t){return vve(t)||yve(t)||gve(t)||mve()}function mve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gve(t,e){if(t){if(typeof t=="string")return s$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s$(t,e)}}function yve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function vve(t){if(Array.isArray(t))return s$(t)}function s$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xve(t,e){if(t==null)return{};var n=bve(t,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function bve(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function dP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function bn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dP(Object(n),!0).forEach(function(r){wve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wve(t,e,n){return e=Sve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sve(t){var e=Cve(t,"string");return sp(e)=="symbol"?e:e+""}function Cve(t,e){if(sp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(sp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ap(){return ap=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ap.apply(this,arguments)}var $ve=function(e){var n=e.value,r=e.formatter,o=qe(e.children)?n:e.children;return He(r)?r(o):o},kve=function(e,n){var r=gi(n-e),o=Math.min(Math.abs(n-e),360);return r*o},Ive=function(e,n,r){var o=e.position,i=e.viewBox,s=e.offset,a=e.className,l=i,u=l.cx,c=l.cy,d=l.innerRadius,f=l.outerRadius,h=l.startAngle,p=l.endAngle,m=l.clockWise,g=(d+f)/2,y=kve(h,p),v=y>=0?1:-1,x,b;o==="insideStart"?(x=h+v*s,b=m):o==="insideEnd"?(x=p-v*s,b=!m):o==="end"&&(x=p+v*s,b=m),b=y<=0?b:!b;var w=jn(u,c,g,x),S=jn(u,c,g,x+(b?1:-1)*359),$="M".concat(w.x,",").concat(w.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(b?0:1,`,
    `).concat(S.x,",").concat(S.y),C=qe(e.id)?Xp("recharts-radial-line-"):e.id;return B.createElement("text",ap({},r,{dominantBaseline:"central",className:Ze("recharts-radial-bar-label",a)}),B.createElement("defs",null,B.createElement("path",{id:C,d:$})),B.createElement("textPath",{xlinkHref:"#".concat(C)},n))},Tve=function(e){var n=e.viewBox,r=e.offset,o=e.position,i=n,s=i.cx,a=i.cy,l=i.innerRadius,u=i.outerRadius,c=i.startAngle,d=i.endAngle,f=(c+d)/2;if(o==="outside"){var h=jn(s,a,u+r,f),p=h.x,m=h.y;return{x:p,y:m,textAnchor:p>=s?"start":"end",verticalAnchor:"middle"}}if(o==="center")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(o==="centerTop")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"start"};if(o==="centerBottom")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"end"};var g=(l+u)/2,y=jn(s,a,g,f),v=y.x,x=y.y;return{x:v,y:x,textAnchor:"middle",verticalAnchor:"middle"}},Eve=function(e){var n=e.viewBox,r=e.parentViewBox,o=e.offset,i=e.position,s=n,a=s.x,l=s.y,u=s.width,c=s.height,d=c>=0?1:-1,f=d*o,h=d>0?"end":"start",p=d>0?"start":"end",m=u>=0?1:-1,g=m*o,y=m>0?"end":"start",v=m>0?"start":"end";if(i==="top"){var x={x:a+u/2,y:l-d*o,textAnchor:"middle",verticalAnchor:h};return bn(bn({},x),r?{height:Math.max(l-r.y,0),width:u}:{})}if(i==="bottom"){var b={x:a+u/2,y:l+c+f,textAnchor:"middle",verticalAnchor:p};return bn(bn({},b),r?{height:Math.max(r.y+r.height-(l+c),0),width:u}:{})}if(i==="left"){var w={x:a-g,y:l+c/2,textAnchor:y,verticalAnchor:"middle"};return bn(bn({},w),r?{width:Math.max(w.x-r.x,0),height:c}:{})}if(i==="right"){var S={x:a+u+g,y:l+c/2,textAnchor:v,verticalAnchor:"middle"};return bn(bn({},S),r?{width:Math.max(r.x+r.width-S.x,0),height:c}:{})}var $=r?{width:u,height:c}:{};return i==="insideLeft"?bn({x:a+g,y:l+c/2,textAnchor:v,verticalAnchor:"middle"},$):i==="insideRight"?bn({x:a+u-g,y:l+c/2,textAnchor:y,verticalAnchor:"middle"},$):i==="insideTop"?bn({x:a+u/2,y:l+f,textAnchor:"middle",verticalAnchor:p},$):i==="insideBottom"?bn({x:a+u/2,y:l+c-f,textAnchor:"middle",verticalAnchor:h},$):i==="insideTopLeft"?bn({x:a+g,y:l+f,textAnchor:v,verticalAnchor:p},$):i==="insideTopRight"?bn({x:a+u-g,y:l+f,textAnchor:y,verticalAnchor:p},$):i==="insideBottomLeft"?bn({x:a+g,y:l+c-f,textAnchor:v,verticalAnchor:h},$):i==="insideBottomRight"?bn({x:a+u-g,y:l+c-f,textAnchor:y,verticalAnchor:h},$):Xd(i)&&(ge(i.x)||jl(i.x))&&(ge(i.y)||jl(i.y))?bn({x:a+mu(i.x,u),y:l+mu(i.y,c),textAnchor:"end",verticalAnchor:"end"},$):bn({x:a+u/2,y:l+c/2,textAnchor:"middle",verticalAnchor:"middle"},$)},Nve=function(e){return"cx"in e&&ge(e.cx)};function or(t){var e=t.offset,n=e===void 0?5:e,r=xve(t,hve),o=bn({offset:n},r),i=o.viewBox,s=o.position,a=o.value,l=o.children,u=o.content,c=o.className,d=c===void 0?"":c,f=o.textBreakAll;if(!i||qe(a)&&qe(l)&&!R.isValidElement(u)&&!He(u))return null;if(R.isValidElement(u))return R.cloneElement(u,o);var h;if(He(u)){if(h=R.createElement(u,o),R.isValidElement(h))return h}else h=$ve(o);var p=Nve(i),m=Qe(o,!0);if(p&&(s==="insideStart"||s==="insideEnd"||s==="end"))return Ive(o,h,m);var g=p?Tve(o):Eve(o);return B.createElement(Ov,ap({className:Ze("recharts-label",d)},m,g,{breakAll:f}),h)}or.displayName="Label";var H4=function(e){var n=e.cx,r=e.cy,o=e.angle,i=e.startAngle,s=e.endAngle,a=e.r,l=e.radius,u=e.innerRadius,c=e.outerRadius,d=e.x,f=e.y,h=e.top,p=e.left,m=e.width,g=e.height,y=e.clockWise,v=e.labelViewBox;if(v)return v;if(ge(m)&&ge(g)){if(ge(d)&&ge(f))return{x:d,y:f,width:m,height:g};if(ge(h)&&ge(p))return{x:h,y:p,width:m,height:g}}return ge(d)&&ge(f)?{x:d,y:f,width:0,height:0}:ge(n)&&ge(r)?{cx:n,cy:r,startAngle:i||o||0,endAngle:s||o||0,innerRadius:u||0,outerRadius:c||l||a||0,clockWise:y}:e.viewBox?e.viewBox:{}},Ave=function(e,n){return e?e===!0?B.createElement(or,{key:"label-implicit",viewBox:n}):In(e)?B.createElement(or,{key:"label-implicit",viewBox:n,value:e}):R.isValidElement(e)?e.type===or?R.cloneElement(e,{key:"label-implicit",viewBox:n}):B.createElement(or,{key:"label-implicit",content:e,viewBox:n}):He(e)?B.createElement(or,{key:"label-implicit",content:e,viewBox:n}):Xd(e)?B.createElement(or,ap({viewBox:n},e,{key:"label-implicit"})):null:null},Ove=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var o=e.children,i=H4(e),s=Mo(o,or).map(function(l,u){return R.cloneElement(l,{viewBox:n||i,key:"label-".concat(u)})});if(!r)return s;var a=Ave(e.label,n||i);return[a].concat(pve(s))};or.parseViewBox=H4;or.renderCallByParent=Ove;function _ve(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Rve=_ve;const Pve=ht(Rve);function lp(t){"@babel/helpers - typeof";return lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lp(t)}var Dve=["valueAccessor"],Mve=["data","dataKey","clockWise","id","textBreakAll"];function Fve(t){return jve(t)||zve(t)||Bve(t)||Lve()}function Lve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bve(t,e){if(t){if(typeof t=="string")return a$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a$(t,e)}}function zve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function jve(t){if(Array.isArray(t))return a$(t)}function a$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Kv(){return Kv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kv.apply(this,arguments)}function fP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function hP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fP(Object(n),!0).forEach(function(r){Wve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wve(t,e,n){return e=Vve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vve(t){var e=Uve(t,"string");return lp(e)=="symbol"?e:e+""}function Uve(t,e){if(lp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(lp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pP(t,e){if(t==null)return{};var n=Gve(t,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Gve(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Hve=function(e){return Array.isArray(e.value)?Pve(e.value):e.value};function Fa(t){var e=t.valueAccessor,n=e===void 0?Hve:e,r=pP(t,Dve),o=r.data,i=r.dataKey,s=r.clockWise,a=r.id,l=r.textBreakAll,u=pP(r,Mve);return!o||!o.length?null:B.createElement(on,{className:"recharts-label-list"},o.map(function(c,d){var f=qe(i)?n(c,d):ao(c&&c.payload,i),h=qe(a)?{}:{id:"".concat(a,"-").concat(d)};return B.createElement(or,Kv({},Qe(c,!0),u,h,{parentViewBox:c.parentViewBox,value:f,textBreakAll:l,viewBox:or.parseViewBox(qe(s)?c:hP(hP({},c),{},{clockWise:s})),key:"label-".concat(d),index:d}))}))}Fa.displayName="LabelList";function Kve(t,e){return t?t===!0?B.createElement(Fa,{key:"labelList-implicit",data:e}):B.isValidElement(t)||He(t)?B.createElement(Fa,{key:"labelList-implicit",data:e,content:t}):Xd(t)?B.createElement(Fa,Kv({data:e},t,{key:"labelList-implicit"})):null:null}function qve(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,o=Mo(r,Fa).map(function(s,a){return R.cloneElement(s,{data:e,key:"labelList-".concat(a)})});if(!n)return o;var i=Kve(t.label,e);return[i].concat(Fve(o))}Fa.renderCallByParent=qve;function up(t){"@babel/helpers - typeof";return up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},up(t)}function l$(){return l$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l$.apply(this,arguments)}function mP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function gP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mP(Object(n),!0).forEach(function(r){Xve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xve(t,e,n){return e=Yve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yve(t){var e=Qve(t,"string");return up(e)=="symbol"?e:e+""}function Qve(t,e){if(up(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(up(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Zve=function(e,n){var r=gi(n-e),o=Math.min(Math.abs(n-e),359.999);return r*o},ey=function(e){var n=e.cx,r=e.cy,o=e.radius,i=e.angle,s=e.sign,a=e.isExternal,l=e.cornerRadius,u=e.cornerIsExternal,c=l*(a?1:-1)+o,d=Math.asin(l/c)/Hv,f=u?i:i+s*d,h=jn(n,r,c,f),p=jn(n,r,o,f),m=u?i-s*d:i,g=jn(n,r,c*Math.cos(d*Hv),m);return{center:h,circleTangency:p,lineTangency:g,theta:d}},K4=function(e){var n=e.cx,r=e.cy,o=e.innerRadius,i=e.outerRadius,s=e.startAngle,a=e.endAngle,l=Zve(s,a),u=s+l,c=jn(n,r,i,s),d=jn(n,r,i,u),f="M ".concat(c.x,",").concat(c.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(o>0){var h=jn(n,r,o,s),p=jn(n,r,o,u);f+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(o,",").concat(o,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=u),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(n,",").concat(r," Z");return f},Jve=function(e){var n=e.cx,r=e.cy,o=e.innerRadius,i=e.outerRadius,s=e.cornerRadius,a=e.forceCornerRadius,l=e.cornerIsExternal,u=e.startAngle,c=e.endAngle,d=gi(c-u),f=ey({cx:n,cy:r,radius:i,angle:u,sign:d,cornerRadius:s,cornerIsExternal:l}),h=f.circleTangency,p=f.lineTangency,m=f.theta,g=ey({cx:n,cy:r,radius:i,angle:c,sign:-d,cornerRadius:s,cornerIsExternal:l}),y=g.circleTangency,v=g.lineTangency,x=g.theta,b=l?Math.abs(u-c):Math.abs(u-c)-m-x;if(b<0)return a?"M ".concat(p.x,",").concat(p.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):K4({cx:n,cy:r,innerRadius:o,outerRadius:i,startAngle:u,endAngle:c});var w="M ".concat(p.x,",").concat(p.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(b>180),",").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(v.x,",").concat(v.y,`
  `);if(o>0){var S=ey({cx:n,cy:r,radius:o,angle:u,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),$=S.circleTangency,C=S.lineTangency,k=S.theta,I=ey({cx:n,cy:r,radius:o,angle:c,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),T=I.circleTangency,E=I.lineTangency,_=I.theta,N=l?Math.abs(u-c):Math.abs(u-c)-k-_;if(N<0&&s===0)return"".concat(w,"L").concat(n,",").concat(r,"Z");w+="L".concat(E.x,",").concat(E.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(T.x,",").concat(T.y,`
      A`).concat(o,",").concat(o,",0,").concat(+(N>180),",").concat(+(d>0),",").concat($.x,",").concat($.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(C.x,",").concat(C.y,"Z")}else w+="L".concat(n,",").concat(r,"Z");return w},e0e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},q4=function(e){var n=gP(gP({},e0e),e),r=n.cx,o=n.cy,i=n.innerRadius,s=n.outerRadius,a=n.cornerRadius,l=n.forceCornerRadius,u=n.cornerIsExternal,c=n.startAngle,d=n.endAngle,f=n.className;if(s<i||c===d)return null;var h=Ze("recharts-sector",f),p=s-i,m=mu(a,p,0,!0),g;return m>0&&Math.abs(c-d)<360?g=Jve({cx:r,cy:o,innerRadius:i,outerRadius:s,cornerRadius:Math.min(m,p/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:c,endAngle:d}):g=K4({cx:r,cy:o,innerRadius:i,outerRadius:s,startAngle:c,endAngle:d}),B.createElement("path",l$({},Qe(n,!0),{className:h,d:g,role:"img"}))};function cp(t){"@babel/helpers - typeof";return cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cp(t)}function u$(){return u$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u$.apply(this,arguments)}function yP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function vP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yP(Object(n),!0).forEach(function(r){t0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function t0e(t,e,n){return e=n0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n0e(t){var e=r0e(t,"string");return cp(e)=="symbol"?e:e+""}function r0e(t,e){if(cp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(cp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xP={curveBasisClosed:toe,curveBasisOpen:noe,curveBasis:eoe,curveBumpX:zre,curveBumpY:jre,curveLinearClosed:roe,curveLinear:Px,curveMonotoneX:ooe,curveMonotoneY:ioe,curveNatural:soe,curveStep:aoe,curveStepAfter:uoe,curveStepBefore:loe},ty=function(e){return e.x===+e.x&&e.y===+e.y},zf=function(e){return e.x},jf=function(e){return e.y},o0e=function(e,n){if(He(e))return e;var r="curve".concat(_x(e));return(r==="curveMonotone"||r==="curveBump")&&n?xP["".concat(r).concat(n==="vertical"?"Y":"X")]:xP[r]||Px},i0e=function(e){var n=e.type,r=n===void 0?"linear":n,o=e.points,i=o===void 0?[]:o,s=e.baseLine,a=e.layout,l=e.connectNulls,u=l===void 0?!1:l,c=o0e(r,a),d=u?i.filter(function(m){return ty(m)}):i,f;if(Array.isArray(s)){var h=u?s.filter(function(m){return ty(m)}):s,p=d.map(function(m,g){return vP(vP({},m),{},{base:h[g]})});return a==="vertical"?f=Gg().y(jf).x1(zf).x0(function(m){return m.base.x}):f=Gg().x(zf).y1(jf).y0(function(m){return m.base.y}),f.defined(ty).curve(c),f(p)}return a==="vertical"&&ge(s)?f=Gg().y(jf).x1(zf).x0(s):ge(s)?f=Gg().x(zf).y1(jf).y0(s):f=Xz().x(zf).y(jf),f.defined(ty).curve(c),f(d)},c$=function(e){var n=e.className,r=e.points,o=e.path,i=e.pathRef;if((!r||!r.length)&&!o)return null;var s=r&&r.length?i0e(e):o;return R.createElement("path",u$({},Qe(e,!1),gv(e),{className:Ze("recharts-curve",n),d:s,ref:i}))},X4={exports:{}},s0e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",a0e=s0e,l0e=a0e;function Y4(){}function Q4(){}Q4.resetWarningCache=Y4;var u0e=function(){function t(r,o,i,s,a,l){if(l!==l0e){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Q4,resetWarningCache:Y4};return n.PropTypes=n,n};X4.exports=u0e();var c0e=X4.exports;const dt=ht(c0e);var d0e=Object.getOwnPropertyNames,f0e=Object.getOwnPropertySymbols,h0e=Object.prototype.hasOwnProperty;function bP(t,e){return function(r,o,i){return t(r,o,i)&&e(r,o,i)}}function ny(t){return function(n,r,o){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,o);var i=o.cache,s=i.get(n),a=i.get(r);if(s&&a)return s===r&&a===n;i.set(n,r),i.set(r,n);var l=t(n,r,o);return i.delete(n),i.delete(r),l}}function wP(t){return d0e(t).concat(f0e(t))}var p0e=Object.hasOwn||function(t,e){return h0e.call(t,e)};function Lu(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var m0e="__v",g0e="__o",y0e="_owner",SP=Object.getOwnPropertyDescriptor,CP=Object.keys;function v0e(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function x0e(t,e){return Lu(t.getTime(),e.getTime())}function b0e(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function w0e(t,e){return t===e}function $P(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var o=new Array(r),i=t.entries(),s,a,l=0;(s=i.next())&&!s.done;){for(var u=e.entries(),c=!1,d=0;(a=u.next())&&!a.done;){if(o[d]){d++;continue}var f=s.value,h=a.value;if(n.equals(f[0],h[0],l,d,t,e,n)&&n.equals(f[1],h[1],f[0],h[0],t,e,n)){c=o[d]=!0;break}d++}if(!c)return!1;l++}return!0}var S0e=Lu;function C0e(t,e,n){var r=CP(t),o=r.length;if(CP(e).length!==o)return!1;for(;o-- >0;)if(!Z4(t,e,n,r[o]))return!1;return!0}function Wf(t,e,n){var r=wP(t),o=r.length;if(wP(e).length!==o)return!1;for(var i,s,a;o-- >0;)if(i=r[o],!Z4(t,e,n,i)||(s=SP(t,i),a=SP(e,i),(s||a)&&(!s||!a||s.configurable!==a.configurable||s.enumerable!==a.enumerable||s.writable!==a.writable)))return!1;return!0}function $0e(t,e){return Lu(t.valueOf(),e.valueOf())}function k0e(t,e){return t.source===e.source&&t.flags===e.flags}function kP(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var o=new Array(r),i=t.values(),s,a;(s=i.next())&&!s.done;){for(var l=e.values(),u=!1,c=0;(a=l.next())&&!a.done;){if(!o[c]&&n.equals(s.value,a.value,s.value,a.value,t,e,n)){u=o[c]=!0;break}c++}if(!u)return!1}return!0}function I0e(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function T0e(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function Z4(t,e,n,r){return(r===y0e||r===g0e||r===m0e)&&(t.$$typeof||e.$$typeof)?!0:p0e(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var E0e="[object Arguments]",N0e="[object Boolean]",A0e="[object Date]",O0e="[object Error]",_0e="[object Map]",R0e="[object Number]",P0e="[object Object]",D0e="[object RegExp]",M0e="[object Set]",F0e="[object String]",L0e="[object URL]",B0e=Array.isArray,IP=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,TP=Object.assign,z0e=Object.prototype.toString.call.bind(Object.prototype.toString);function j0e(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,o=t.areFunctionsEqual,i=t.areMapsEqual,s=t.areNumbersEqual,a=t.areObjectsEqual,l=t.arePrimitiveWrappersEqual,u=t.areRegExpsEqual,c=t.areSetsEqual,d=t.areTypedArraysEqual,f=t.areUrlsEqual;return function(p,m,g){if(p===m)return!0;if(p==null||m==null)return!1;var y=typeof p;if(y!==typeof m)return!1;if(y!=="object")return y==="number"?s(p,m,g):y==="function"?o(p,m,g):!1;var v=p.constructor;if(v!==m.constructor)return!1;if(v===Object)return a(p,m,g);if(B0e(p))return e(p,m,g);if(IP!=null&&IP(p))return d(p,m,g);if(v===Date)return n(p,m,g);if(v===RegExp)return u(p,m,g);if(v===Map)return i(p,m,g);if(v===Set)return c(p,m,g);var x=z0e(p);return x===A0e?n(p,m,g):x===D0e?u(p,m,g):x===_0e?i(p,m,g):x===M0e?c(p,m,g):x===P0e?typeof p.then!="function"&&typeof m.then!="function"&&a(p,m,g):x===L0e?f(p,m,g):x===O0e?r(p,m,g):x===E0e?a(p,m,g):x===N0e||x===R0e||x===F0e?l(p,m,g):!1}}function W0e(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,o={areArraysEqual:r?Wf:v0e,areDatesEqual:x0e,areErrorsEqual:b0e,areFunctionsEqual:w0e,areMapsEqual:r?bP($P,Wf):$P,areNumbersEqual:S0e,areObjectsEqual:r?Wf:C0e,arePrimitiveWrappersEqual:$0e,areRegExpsEqual:k0e,areSetsEqual:r?bP(kP,Wf):kP,areTypedArraysEqual:r?Wf:I0e,areUrlsEqual:T0e};if(n&&(o=TP({},o,n(o))),e){var i=ny(o.areArraysEqual),s=ny(o.areMapsEqual),a=ny(o.areObjectsEqual),l=ny(o.areSetsEqual);o=TP({},o,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:a,areSetsEqual:l})}return o}function V0e(t){return function(e,n,r,o,i,s,a){return t(e,n,a)}}function U0e(t){var e=t.circular,n=t.comparator,r=t.createState,o=t.equals,i=t.strict;if(r)return function(l,u){var c=r(),d=c.cache,f=d===void 0?e?new WeakMap:void 0:d,h=c.meta;return n(l,u,{cache:f,equals:o,meta:h,strict:i})};if(e)return function(l,u){return n(l,u,{cache:new WeakMap,equals:o,meta:void 0,strict:i})};var s={cache:void 0,equals:o,meta:void 0,strict:i};return function(l,u){return n(l,u,s)}}var G0e=fl();fl({strict:!0});fl({circular:!0});fl({circular:!0,strict:!0});fl({createInternalComparator:function(){return Lu}});fl({strict:!0,createInternalComparator:function(){return Lu}});fl({circular:!0,createInternalComparator:function(){return Lu}});fl({circular:!0,createInternalComparator:function(){return Lu},strict:!0});function fl(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,o=t.createState,i=t.strict,s=i===void 0?!1:i,a=W0e(t),l=j0e(a),u=r?r(l):V0e(l);return U0e({circular:n,comparator:l,createState:o,equals:u,strict:s})}function H0e(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function EP(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function o(i){n<0&&(n=i),i-n>e?(t(i),n=-1):H0e(o)};requestAnimationFrame(r)}function d$(t){"@babel/helpers - typeof";return d$=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d$(t)}function K0e(t){return Q0e(t)||Y0e(t)||X0e(t)||q0e()}function q0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X0e(t,e){if(t){if(typeof t=="string")return NP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NP(t,e)}}function NP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Y0e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Q0e(t){if(Array.isArray(t))return t}function Z0e(){var t={},e=function(){return null},n=!1,r=function o(i){if(!n){if(Array.isArray(i)){if(!i.length)return;var s=i,a=K0e(s),l=a[0],u=a.slice(1);if(typeof l=="number"){EP(o.bind(null,u),l);return}o(l),EP(o.bind(null,u));return}d$(i)==="object"&&(t=i,e(t)),typeof i=="function"&&i()}};return{stop:function(){n=!0},start:function(i){n=!1,r(i)},subscribe:function(i){return e=i,function(){e=function(){return null}}}}}function dp(t){"@babel/helpers - typeof";return dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dp(t)}function AP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function OP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AP(Object(n),!0).forEach(function(r){J4(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function J4(t,e,n){return e=J0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function J0e(t){var e=exe(t,"string");return dp(e)==="symbol"?e:String(e)}function exe(t,e){if(dp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(dp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var txe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,o){return r.filter(function(i){return o.includes(i)})})},nxe=function(e){return e},rxe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},vh=function(e,n){return Object.keys(n).reduce(function(r,o){return OP(OP({},r),{},J4({},o,e(o,n[o])))},{})},_P=function(e,n,r){return e.map(function(o){return"".concat(rxe(o)," ").concat(n,"ms ").concat(r)}).join(",")};function oxe(t,e){return axe(t)||sxe(t,e)||eW(t,e)||ixe()}function ixe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sxe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,i,s,a=[],l=!0,u=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,o=c}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}function axe(t){if(Array.isArray(t))return t}function lxe(t){return dxe(t)||cxe(t)||eW(t)||uxe()}function uxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eW(t,e){if(t){if(typeof t=="string")return f$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f$(t,e)}}function cxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function dxe(t){if(Array.isArray(t))return f$(t)}function f$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var qv=1e-4,tW=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},nW=function(e,n){return e.map(function(r,o){return r*Math.pow(n,o)}).reduce(function(r,o){return r+o})},RP=function(e,n){return function(r){var o=tW(e,n);return nW(o,r)}},fxe=function(e,n){return function(r){var o=tW(e,n),i=[].concat(lxe(o.map(function(s,a){return s*a}).slice(1)),[0]);return nW(i,r)}},PP=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=n[0],i=n[1],s=n[2],a=n[3];if(n.length===1)switch(n[0]){case"linear":o=0,i=0,s=1,a=1;break;case"ease":o=.25,i=.1,s=.25,a=1;break;case"ease-in":o=.42,i=0,s=1,a=1;break;case"ease-out":o=.42,i=0,s=.58,a=1;break;case"ease-in-out":o=0,i=0,s=.58,a=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),c=oxe(u,4);o=c[0],i=c[1],s=c[2],a=c[3]}}}var d=RP(o,s),f=RP(i,a),h=fxe(o,s),p=function(y){return y>1?1:y<0?0:y},m=function(y){for(var v=y>1?1:y,x=v,b=0;b<8;++b){var w=d(x)-v,S=h(x);if(Math.abs(w-v)<qv||S<qv)return f(x);x=p(x-w/S)}return f(x)};return m.isStepper=!1,m},hxe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,o=e.damping,i=o===void 0?8:o,s=e.dt,a=s===void 0?17:s,l=function(c,d,f){var h=-(c-d)*r,p=f*i,m=f+(h-p)*a/1e3,g=f*a/1e3+c;return Math.abs(g-d)<qv&&Math.abs(m)<qv?[d,0]:[g,m]};return l.isStepper=!0,l.dt=a,l},pxe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=n[0];if(typeof o=="string")switch(o){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return PP(o);case"spring":return hxe();default:if(o.split("(")[0]==="cubic-bezier")return PP(o)}return typeof o=="function"?o:null};function fp(t){"@babel/helpers - typeof";return fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fp(t)}function DP(t){return yxe(t)||gxe(t)||rW(t)||mxe()}function mxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function yxe(t){if(Array.isArray(t))return p$(t)}function MP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Bn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MP(Object(n),!0).forEach(function(r){h$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function h$(t,e,n){return e=vxe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vxe(t){var e=xxe(t,"string");return fp(e)==="symbol"?e:String(e)}function xxe(t,e){if(fp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(fp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bxe(t,e){return Cxe(t)||Sxe(t,e)||rW(t,e)||wxe()}function wxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rW(t,e){if(t){if(typeof t=="string")return p$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p$(t,e)}}function p$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Sxe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,i,s,a=[],l=!0,u=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,o=c}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}function Cxe(t){if(Array.isArray(t))return t}var Xv=function(e,n,r){return e+(n-e)*r},m$=function(e){var n=e.from,r=e.to;return n!==r},$xe=function t(e,n,r){var o=vh(function(i,s){if(m$(s)){var a=e(s.from,s.to,s.velocity),l=bxe(a,2),u=l[0],c=l[1];return Bn(Bn({},s),{},{from:u,velocity:c})}return s},n);return r<1?vh(function(i,s){return m$(s)?Bn(Bn({},s),{},{velocity:Xv(s.velocity,o[i].velocity,r),from:Xv(s.from,o[i].from,r)}):s},n):t(e,o,r-1)};const kxe=function(t,e,n,r,o){var i=txe(t,e),s=i.reduce(function(g,y){return Bn(Bn({},g),{},h$({},y,[t[y],e[y]]))},{}),a=i.reduce(function(g,y){return Bn(Bn({},g),{},h$({},y,{from:t[y],velocity:0,to:e[y]}))},{}),l=-1,u,c,d=function(){return null},f=function(){return vh(function(y,v){return v.from},a)},h=function(){return!Object.values(a).filter(m$).length},p=function(y){u||(u=y);var v=y-u,x=v/n.dt;a=$xe(n,a,x),o(Bn(Bn(Bn({},t),e),f())),u=y,h()||(l=requestAnimationFrame(d))},m=function(y){c||(c=y);var v=(y-c)/r,x=vh(function(w,S){return Xv.apply(void 0,DP(S).concat([n(v)]))},s);if(o(Bn(Bn(Bn({},t),e),x)),v<1)l=requestAnimationFrame(d);else{var b=vh(function(w,S){return Xv.apply(void 0,DP(S).concat([n(1)]))},s);o(Bn(Bn(Bn({},t),e),b))}};return d=n.isStepper?p:m,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function gd(t){"@babel/helpers - typeof";return gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gd(t)}var Ixe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Txe(t,e){if(t==null)return{};var n=Exe(t,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Exe(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,i;for(i=0;i<r.length;i++)o=r[i],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function Lw(t){return _xe(t)||Oxe(t)||Axe(t)||Nxe()}function Nxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Axe(t,e){if(t){if(typeof t=="string")return g$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g$(t,e)}}function Oxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _xe(t){if(Array.isArray(t))return g$(t)}function g$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function FP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function ti(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FP(Object(n),!0).forEach(function(r){Zf(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zf(t,e,n){return e=oW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pxe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,oW(r.key),r)}}function Dxe(t,e,n){return e&&Pxe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function oW(t){var e=Mxe(t,"string");return gd(e)==="symbol"?e:String(e)}function Mxe(t,e){if(gd(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(gd(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y$(t,e)}function y$(t,e){return y$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},y$(t,e)}function Lxe(t){var e=Bxe();return function(){var r=Yv(t),o;if(e){var i=Yv(this).constructor;o=Reflect.construct(r,arguments,i)}else o=r.apply(this,arguments);return v$(this,o)}}function v$(t,e){if(e&&(gd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x$(t)}function x$(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Bxe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Yv(t){return Yv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Yv(t)}var Vs=function(t){Fxe(n,t);var e=Lxe(n);function n(r,o){var i;Rxe(this,n),i=e.call(this,r,o);var s=i.props,a=s.isActive,l=s.attributeName,u=s.from,c=s.to,d=s.steps,f=s.children,h=s.duration;if(i.handleStyleChange=i.handleStyleChange.bind(x$(i)),i.changeStyle=i.changeStyle.bind(x$(i)),!a||h<=0)return i.state={style:{}},typeof f=="function"&&(i.state={style:c}),v$(i);if(d&&d.length)i.state={style:d[0].style};else if(u){if(typeof f=="function")return i.state={style:u},v$(i);i.state={style:l?Zf({},l,u):u}}else i.state={style:{}};return i}return Dxe(n,[{key:"componentDidMount",value:function(){var o=this.props,i=o.isActive,s=o.canBegin;this.mounted=!0,!(!i||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(o){var i=this.props,s=i.isActive,a=i.canBegin,l=i.attributeName,u=i.shouldReAnimate,c=i.to,d=i.from,f=this.state.style;if(a){if(!s){var h={style:l?Zf({},l,c):c};this.state&&f&&(l&&f[l]!==c||!l&&f!==c)&&this.setState(h);return}if(!(G0e(o.to,c)&&o.canBegin&&o.isActive)){var p=!o.canBegin||!o.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var m=p||u?d:o.to;if(this.state&&f){var g={style:l?Zf({},l,m):m};(l&&f[l]!==m||!l&&f!==m)&&this.setState(g)}this.runAnimation(ti(ti({},this.props),{},{from:m,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var o=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),o&&o()}},{key:"handleStyleChange",value:function(o){this.changeStyle(o)}},{key:"changeStyle",value:function(o){this.mounted&&this.setState({style:o})}},{key:"runJSAnimation",value:function(o){var i=this,s=o.from,a=o.to,l=o.duration,u=o.easing,c=o.begin,d=o.onAnimationEnd,f=o.onAnimationStart,h=kxe(s,a,pxe(u),l,this.changeStyle),p=function(){i.stopJSAnimation=h()};this.manager.start([f,c,p,l,d])}},{key:"runStepAnimation",value:function(o){var i=this,s=o.steps,a=o.begin,l=o.onAnimationStart,u=s[0],c=u.style,d=u.duration,f=d===void 0?0:d,h=function(m,g,y){if(y===0)return m;var v=g.duration,x=g.easing,b=x===void 0?"ease":x,w=g.style,S=g.properties,$=g.onAnimationEnd,C=y>0?s[y-1]:g,k=S||Object.keys(w);if(typeof b=="function"||b==="spring")return[].concat(Lw(m),[i.runJSAnimation.bind(i,{from:C.style,to:w,duration:v,easing:b}),v]);var I=_P(k,v,b),T=ti(ti(ti({},C.style),w),{},{transition:I});return[].concat(Lw(m),[T,v,$]).filter(nxe)};return this.manager.start([l].concat(Lw(s.reduce(h,[c,Math.max(f,a)])),[o.onAnimationEnd]))}},{key:"runAnimation",value:function(o){this.manager||(this.manager=Z0e());var i=o.begin,s=o.duration,a=o.attributeName,l=o.to,u=o.easing,c=o.onAnimationStart,d=o.onAnimationEnd,f=o.steps,h=o.children,p=this.manager;if(this.unSubscribe=p.subscribe(this.handleStyleChange),typeof u=="function"||typeof h=="function"||u==="spring"){this.runJSAnimation(o);return}if(f.length>1){this.runStepAnimation(o);return}var m=a?Zf({},a,l):l,g=_P(Object.keys(m),s,u);p.start([c,i,ti(ti({},m),{},{transition:g}),s,d])}},{key:"render",value:function(){var o=this.props,i=o.children;o.begin;var s=o.duration;o.attributeName,o.easing;var a=o.isActive;o.steps,o.from,o.to,o.canBegin,o.onAnimationEnd,o.shouldReAnimate,o.onAnimationReStart;var l=Txe(o,Ixe),u=R.Children.count(i),c=this.state.style;if(typeof i=="function")return i(c);if(!a||u===0||s<=0)return i;var d=function(h){var p=h.props,m=p.style,g=m===void 0?{}:m,y=p.className,v=R.cloneElement(h,ti(ti({},l),{},{style:ti(ti({},g),c),className:y}));return v};return u===1?d(R.Children.only(i)):B.createElement("div",null,R.Children.map(i,function(f){return d(f)}))}}]),n}(R.PureComponent);Vs.displayName="Animate";Vs.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Vs.propTypes={from:dt.oneOfType([dt.object,dt.string]),to:dt.oneOfType([dt.object,dt.string]),attributeName:dt.string,duration:dt.number,begin:dt.number,easing:dt.oneOfType([dt.string,dt.func]),steps:dt.arrayOf(dt.shape({duration:dt.number.isRequired,style:dt.object.isRequired,easing:dt.oneOfType([dt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),dt.func]),properties:dt.arrayOf("string"),onAnimationEnd:dt.func})),children:dt.oneOfType([dt.node,dt.func]),isActive:dt.bool,canBegin:dt.bool,onAnimationEnd:dt.func,shouldReAnimate:dt.bool,onAnimationStart:dt.func,onAnimationReStart:dt.func};function hp(t){"@babel/helpers - typeof";return hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hp(t)}function Qv(){return Qv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qv.apply(this,arguments)}function zxe(t,e){return Uxe(t)||Vxe(t,e)||Wxe(t,e)||jxe()}function jxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wxe(t,e){if(t){if(typeof t=="string")return LP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LP(t,e)}}function LP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Vxe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,i,s,a=[],l=!0,u=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,o=c}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}function Uxe(t){if(Array.isArray(t))return t}function BP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function zP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BP(Object(n),!0).forEach(function(r){Gxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gxe(t,e,n){return e=Hxe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hxe(t){var e=Kxe(t,"string");return hp(e)=="symbol"?e:e+""}function Kxe(t,e){if(hp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(hp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jP=function(e,n,r,o,i){var s=Math.min(Math.abs(r)/2,Math.abs(o)/2),a=o>=0?1:-1,l=r>=0?1:-1,u=o>=0&&r>=0||o<0&&r<0?1:0,c;if(s>0&&i instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=i[f]>s?s:i[f];c="M".concat(e,",").concat(n+a*d[0]),d[0]>0&&(c+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(e+l*d[0],",").concat(n)),c+="L ".concat(e+r-l*d[1],",").concat(n),d[1]>0&&(c+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+a*d[1])),c+="L ".concat(e+r,",").concat(n+o-a*d[2]),d[2]>0&&(c+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(e+r-l*d[2],",").concat(n+o)),c+="L ".concat(e+l*d[3],",").concat(n+o),d[3]>0&&(c+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+o-a*d[3])),c+="Z"}else if(s>0&&i===+i&&i>0){var p=Math.min(s,i);c="M ".concat(e,",").concat(n+a*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(e+l*p,",").concat(n,`
            L `).concat(e+r-l*p,",").concat(n,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(e+r,",").concat(n+a*p,`
            L `).concat(e+r,",").concat(n+o-a*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(e+r-l*p,",").concat(n+o,`
            L `).concat(e+l*p,",").concat(n+o,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(e,",").concat(n+o-a*p," Z")}else c="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(o," h ").concat(-r," Z");return c},qxe=function(e,n){if(!e||!n)return!1;var r=e.x,o=e.y,i=n.x,s=n.y,a=n.width,l=n.height;if(Math.abs(a)>0&&Math.abs(l)>0){var u=Math.min(i,i+a),c=Math.max(i,i+a),d=Math.min(s,s+l),f=Math.max(s,s+l);return r>=u&&r<=c&&o>=d&&o<=f}return!1},Xxe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},zT=function(e){var n=zP(zP({},Xxe),e),r=R.useRef(),o=R.useState(-1),i=zxe(o,2),s=i[0],a=i[1];R.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&a(b)}catch{}},[]);var l=n.x,u=n.y,c=n.width,d=n.height,f=n.radius,h=n.className,p=n.animationEasing,m=n.animationDuration,g=n.animationBegin,y=n.isAnimationActive,v=n.isUpdateAnimationActive;if(l!==+l||u!==+u||c!==+c||d!==+d||c===0||d===0)return null;var x=Ze("recharts-rectangle",h);return v?B.createElement(Vs,{canBegin:s>0,from:{width:c,height:d,x:l,y:u},to:{width:c,height:d,x:l,y:u},duration:m,animationEasing:p,isActive:v},function(b){var w=b.width,S=b.height,$=b.x,C=b.y;return B.createElement(Vs,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:m,isActive:y,easing:p},B.createElement("path",Qv({},Qe(n,!0),{className:x,d:jP($,C,w,S,f),ref:r})))}):B.createElement("path",Qv({},Qe(n,!0),{className:x,d:jP(l,u,c,d,f)}))};function b$(){return b$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},b$.apply(this,arguments)}var jT=function(e){var n=e.cx,r=e.cy,o=e.r,i=e.className,s=Ze("recharts-dot",i);return n===+n&&r===+r&&o===+o?R.createElement("circle",b$({},Qe(e,!1),gv(e),{className:s,cx:n,cy:r,r:o})):null};function pp(t){"@babel/helpers - typeof";return pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pp(t)}var Yxe=["x","y","top","left","width","height","className"];function w$(){return w$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},w$.apply(this,arguments)}function WP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Qxe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WP(Object(n),!0).forEach(function(r){Zxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zxe(t,e,n){return e=Jxe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jxe(t){var e=ebe(t,"string");return pp(e)=="symbol"?e:e+""}function ebe(t,e){if(pp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(pp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tbe(t,e){if(t==null)return{};var n=nbe(t,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function nbe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var rbe=function(e,n,r,o,i,s){return"M".concat(e,",").concat(i,"v").concat(o,"M").concat(s,",").concat(n,"h").concat(r)},obe=function(e){var n=e.x,r=n===void 0?0:n,o=e.y,i=o===void 0?0:o,s=e.top,a=s===void 0?0:s,l=e.left,u=l===void 0?0:l,c=e.width,d=c===void 0?0:c,f=e.height,h=f===void 0?0:f,p=e.className,m=tbe(e,Yxe),g=Qxe({x:r,y:i,top:a,left:u,width:d,height:h},m);return!ge(r)||!ge(i)||!ge(d)||!ge(h)||!ge(a)||!ge(u)?null:B.createElement("path",w$({},Qe(g,!0),{className:Ze("recharts-cross",p),d:rbe(r,i,d,h,a,u)}))},ibe=xj,sbe=ibe(Object.getPrototypeOf,Object),abe=sbe,lbe=Xs,ube=abe,cbe=Ys,dbe="[object Object]",fbe=Function.prototype,hbe=Object.prototype,iW=fbe.toString,pbe=hbe.hasOwnProperty,mbe=iW.call(Object);function gbe(t){if(!cbe(t)||lbe(t)!=dbe)return!1;var e=ube(t);if(e===null)return!0;var n=pbe.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&iW.call(n)==mbe}var ybe=gbe;const vbe=ht(ybe);var xbe=Xs,bbe=Ys,wbe="[object Boolean]";function Sbe(t){return t===!0||t===!1||bbe(t)&&xbe(t)==wbe}var Cbe=Sbe;const $be=ht(Cbe);function mp(t){"@babel/helpers - typeof";return mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mp(t)}function Zv(){return Zv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zv.apply(this,arguments)}function kbe(t,e){return Nbe(t)||Ebe(t,e)||Tbe(t,e)||Ibe()}function Ibe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tbe(t,e){if(t){if(typeof t=="string")return VP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VP(t,e)}}function VP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ebe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,i,s,a=[],l=!0,u=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,o=c}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}function Nbe(t){if(Array.isArray(t))return t}function UP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function GP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UP(Object(n),!0).forEach(function(r){Abe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Abe(t,e,n){return e=Obe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Obe(t){var e=_be(t,"string");return mp(e)=="symbol"?e:e+""}function _be(t,e){if(mp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(mp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var HP=function(e,n,r,o,i){var s=r-o,a;return a="M ".concat(e,",").concat(n),a+="L ".concat(e+r,",").concat(n),a+="L ".concat(e+r-s/2,",").concat(n+i),a+="L ".concat(e+r-s/2-o,",").concat(n+i),a+="L ".concat(e,",").concat(n," Z"),a},Rbe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Pbe=function(e){var n=GP(GP({},Rbe),e),r=R.useRef(),o=R.useState(-1),i=kbe(o,2),s=i[0],a=i[1];R.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var x=r.current.getTotalLength();x&&a(x)}catch{}},[]);var l=n.x,u=n.y,c=n.upperWidth,d=n.lowerWidth,f=n.height,h=n.className,p=n.animationEasing,m=n.animationDuration,g=n.animationBegin,y=n.isUpdateAnimationActive;if(l!==+l||u!==+u||c!==+c||d!==+d||f!==+f||c===0&&d===0||f===0)return null;var v=Ze("recharts-trapezoid",h);return y?B.createElement(Vs,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:f,x:l,y:u},to:{upperWidth:c,lowerWidth:d,height:f,x:l,y:u},duration:m,animationEasing:p,isActive:y},function(x){var b=x.upperWidth,w=x.lowerWidth,S=x.height,$=x.x,C=x.y;return B.createElement(Vs,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:m,easing:p},B.createElement("path",Zv({},Qe(n,!0),{className:v,d:HP($,C,b,w,S),ref:r})))}):B.createElement("g",null,B.createElement("path",Zv({},Qe(n,!0),{className:v,d:HP(l,u,c,d,f)})))},Dbe=["option","shapeType","propTransformer","activeClassName","isActive"];function gp(t){"@babel/helpers - typeof";return gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gp(t)}function Mbe(t,e){if(t==null)return{};var n=Fbe(t,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Fbe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function KP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Jv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KP(Object(n),!0).forEach(function(r){Lbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lbe(t,e,n){return e=Bbe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bbe(t){var e=zbe(t,"string");return gp(e)=="symbol"?e:e+""}function zbe(t,e){if(gp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(gp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jbe(t,e){return Jv(Jv({},e),t)}function Wbe(t,e){return t==="symbols"}function qP(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return B.createElement(zT,n);case"trapezoid":return B.createElement(Pbe,n);case"sector":return B.createElement(q4,n);case"symbols":if(Wbe(e))return B.createElement(rT,n);break;default:return null}}function Vbe(t){return R.isValidElement(t)?t.props:t}function Ube(t){var e=t.option,n=t.shapeType,r=t.propTransformer,o=r===void 0?jbe:r,i=t.activeClassName,s=i===void 0?"recharts-active-shape":i,a=t.isActive,l=Mbe(t,Dbe),u;if(R.isValidElement(e))u=R.cloneElement(e,Jv(Jv({},l),Vbe(e)));else if(He(e))u=e(l);else if(vbe(e)&&!$be(e)){var c=o(e,l);u=B.createElement(qP,{shapeType:n,elementProps:c})}else{var d=l;u=B.createElement(qP,{shapeType:n,elementProps:d})}return a?B.createElement(on,{className:s},u):u}function Yx(t,e){return e!=null&&"trapezoids"in t.props}function Qx(t,e){return e!=null&&"sectors"in t.props}function yp(t,e){return e!=null&&"points"in t.props}function Gbe(t,e){var n,r,o=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,i=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return o&&i}function Hbe(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function Kbe(t,e){var n=t.x===e.x,r=t.y===e.y,o=t.z===e.z;return n&&r&&o}function qbe(t,e){var n;return Yx(t,e)?n=Gbe:Qx(t,e)?n=Hbe:yp(t,e)&&(n=Kbe),n}function Xbe(t,e){var n;return Yx(t,e)?n="trapezoids":Qx(t,e)?n="sectors":yp(t,e)&&(n="points"),n}function Ybe(t,e){if(Yx(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(Qx(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return yp(t,e)?e.payload:{}}function Qbe(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,o=Xbe(n,e),i=Ybe(n,e),s=r.filter(function(l,u){var c=Kx(i,l),d=n.props[o].filter(function(p){var m=qbe(n,e);return m(p,e)}),f=n.props[o].indexOf(d[d.length-1]),h=u===f;return c&&h}),a=r.indexOf(s[s.length-1]);return a}var Zbe=Math.ceil,Jbe=Math.max;function e1e(t,e,n,r){for(var o=-1,i=Jbe(Zbe((e-t)/(n||1)),0),s=Array(i);i--;)s[r?i:++o]=t,t+=n;return s}var t1e=e1e,n1e=Lj,XP=1/0,r1e=17976931348623157e292;function o1e(t){if(!t)return t===0?t:0;if(t=n1e(t),t===XP||t===-XP){var e=t<0?-1:1;return e*r1e}return t===t?t:0}var sW=o1e,i1e=t1e,s1e=Lx,Bw=sW;function a1e(t){return function(e,n,r){return r&&typeof r!="number"&&s1e(e,n,r)&&(n=r=void 0),e=Bw(e),n===void 0?(n=e,e=0):n=Bw(n),r=r===void 0?e<n?1:-1:Bw(r),i1e(e,n,r,t)}}var l1e=a1e,u1e=l1e,c1e=u1e(),d1e=c1e;const e0=ht(d1e);function vp(t){"@babel/helpers - typeof";return vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vp(t)}function YP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function QP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YP(Object(n),!0).forEach(function(r){aW(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aW(t,e,n){return e=f1e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f1e(t){var e=h1e(t,"string");return vp(e)=="symbol"?e:e+""}function h1e(t,e){if(vp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(vp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var p1e=["Webkit","Moz","O","ms"],m1e=function(e,n){var r=e.replace(/(\w)/,function(i){return i.toUpperCase()}),o=p1e.reduce(function(i,s){return QP(QP({},i),{},aW({},s+r,n))},{});return o[e]=n,o};function yd(t){"@babel/helpers - typeof";return yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yd(t)}function t0(){return t0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},t0.apply(this,arguments)}function ZP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function zw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZP(Object(n),!0).forEach(function(r){Xr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function g1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function JP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,uW(r.key),r)}}function y1e(t,e,n){return e&&JP(t.prototype,e),n&&JP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function v1e(t,e,n){return e=n0(e),x1e(t,lW()?Reflect.construct(e,n||[],n0(t).constructor):e.apply(t,n))}function x1e(t,e){if(e&&(yd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b1e(t)}function b1e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lW=function(){return!!t})()}function n0(t){return n0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},n0(t)}function w1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S$(t,e)}function S$(t,e){return S$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},S$(t,e)}function Xr(t,e,n){return e=uW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uW(t){var e=S1e(t,"string");return yd(e)=="symbol"?e:e+""}function S1e(t,e){if(yd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(yd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var C1e=function(e){var n=e.data,r=e.startIndex,o=e.endIndex,i=e.x,s=e.width,a=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,u=gh().domain(e0(0,l)).range([i,i+s-a]),c=u.domain().map(function(d){return u(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(o),scale:u,scaleValues:c}},eD=function(e){return e.changedTouches&&!!e.changedTouches.length},vd=function(t){function e(n){var r;return g1e(this,e),r=v1e(this,e,[n]),Xr(r,"handleDrag",function(o){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(o):r.state.isSlideMoving&&r.handleSlideDrag(o)}),Xr(r,"handleTouchMove",function(o){o.changedTouches!=null&&o.changedTouches.length>0&&r.handleDrag(o.changedTouches[0])}),Xr(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var o=r.props,i=o.endIndex,s=o.onDragEnd,a=o.startIndex;s==null||s({endIndex:i,startIndex:a})}),r.detachDragEndListener()}),Xr(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Xr(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Xr(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Xr(r,"handleSlideDragStart",function(o){var i=eD(o)?o.changedTouches[0]:o;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return w1e(e,t),y1e(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var o=r.startX,i=r.endX,s=this.state.scaleValues,a=this.props,l=a.gap,u=a.data,c=u.length-1,d=Math.min(o,i),f=Math.max(o,i),h=e.getIndexInRange(s,d),p=e.getIndexInRange(s,f);return{startIndex:h-h%l,endIndex:p===c?c:p-p%l}}},{key:"getTextOfTick",value:function(r){var o=this.props,i=o.data,s=o.tickFormatter,a=o.dataKey,l=ao(i[r],a,r);return He(s)?s(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var o=this.state,i=o.slideMoveStartX,s=o.startX,a=o.endX,l=this.props,u=l.x,c=l.width,d=l.travellerWidth,f=l.startIndex,h=l.endIndex,p=l.onChange,m=r.pageX-i;m>0?m=Math.min(m,u+c-d-a,u+c-d-s):m<0&&(m=Math.max(m,u-s,u-a));var g=this.getIndex({startX:s+m,endX:a+m});(g.startIndex!==f||g.endIndex!==h)&&p&&p(g),this.setState({startX:s+m,endX:a+m,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,o){var i=eD(o)?o.changedTouches[0]:o;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var o=this.state,i=o.brushMoveStartX,s=o.movingTravellerId,a=o.endX,l=o.startX,u=this.state[s],c=this.props,d=c.x,f=c.width,h=c.travellerWidth,p=c.onChange,m=c.gap,g=c.data,y={startX:this.state.startX,endX:this.state.endX},v=r.pageX-i;v>0?v=Math.min(v,d+f-h-u):v<0&&(v=Math.max(v,d-u)),y[s]=u+v;var x=this.getIndex(y),b=x.startIndex,w=x.endIndex,S=function(){var C=g.length-1;return s==="startX"&&(a>l?b%m===0:w%m===0)||a<l&&w===C||s==="endX"&&(a>l?w%m===0:b%m===0)||a>l&&w===C};this.setState(Xr(Xr({},s,u+v),"brushMoveStartX",r.pageX),function(){p&&S()&&p(x)})}},{key:"handleTravellerMoveKeyboard",value:function(r,o){var i=this,s=this.state,a=s.scaleValues,l=s.startX,u=s.endX,c=this.state[o],d=a.indexOf(c);if(d!==-1){var f=d+r;if(!(f===-1||f>=a.length)){var h=a[f];o==="startX"&&h>=u||o==="endX"&&h<=l||this.setState(Xr({},o,h),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,o=r.x,i=r.y,s=r.width,a=r.height,l=r.fill,u=r.stroke;return B.createElement("rect",{stroke:u,fill:l,x:o,y:i,width:s,height:a})}},{key:"renderPanorama",value:function(){var r=this.props,o=r.x,i=r.y,s=r.width,a=r.height,l=r.data,u=r.children,c=r.padding,d=R.Children.only(u);return d?B.cloneElement(d,{x:o,y:i,width:s,height:a,margin:c,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,o){var i,s,a=this,l=this.props,u=l.y,c=l.travellerWidth,d=l.height,f=l.traveller,h=l.ariaLabel,p=l.data,m=l.startIndex,g=l.endIndex,y=Math.max(r,this.props.x),v=zw(zw({},Qe(this.props,!1)),{},{x:y,y:u,width:c,height:d}),x=h||"Min value: ".concat((i=p[m])===null||i===void 0?void 0:i.name,", Max value: ").concat((s=p[g])===null||s===void 0?void 0:s.name);return B.createElement(on,{tabIndex:0,role:"slider","aria-label":x,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[o],onTouchStart:this.travellerDragStartHandlers[o],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),a.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,o))},onFocus:function(){a.setState({isTravellerFocused:!0})},onBlur:function(){a.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(f,v))}},{key:"renderSlide",value:function(r,o){var i=this.props,s=i.y,a=i.height,l=i.stroke,u=i.travellerWidth,c=Math.min(r,o)+u,d=Math.max(Math.abs(o-r)-u,0);return B.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:c,y:s,width:d,height:a})}},{key:"renderText",value:function(){var r=this.props,o=r.startIndex,i=r.endIndex,s=r.y,a=r.height,l=r.travellerWidth,u=r.stroke,c=this.state,d=c.startX,f=c.endX,h=5,p={pointerEvents:"none",fill:u};return B.createElement(on,{className:"recharts-brush-texts"},B.createElement(Ov,t0({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,f)-h,y:s+a/2},p),this.getTextOfTick(o)),B.createElement(Ov,t0({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,f)+l+h,y:s+a/2},p),this.getTextOfTick(i)))}},{key:"render",value:function(){var r=this.props,o=r.data,i=r.className,s=r.children,a=r.x,l=r.y,u=r.width,c=r.height,d=r.alwaysShowText,f=this.state,h=f.startX,p=f.endX,m=f.isTextActive,g=f.isSlideMoving,y=f.isTravellerMoving,v=f.isTravellerFocused;if(!o||!o.length||!ge(a)||!ge(l)||!ge(u)||!ge(c)||u<=0||c<=0)return null;var x=Ze("recharts-brush",i),b=B.Children.count(s)===1,w=m1e("userSelect","none");return B.createElement(on,{className:x,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),b&&this.renderPanorama(),this.renderSlide(h,p),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(p,"endX"),(m||g||y||v||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var o=r.x,i=r.y,s=r.width,a=r.height,l=r.stroke,u=Math.floor(i+a/2)-1;return B.createElement(B.Fragment,null,B.createElement("rect",{x:o,y:i,width:s,height:a,fill:l,stroke:"none"}),B.createElement("line",{x1:o+1,y1:u,x2:o+s-1,y2:u,fill:"none",stroke:"#fff"}),B.createElement("line",{x1:o+1,y1:u+2,x2:o+s-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,o){var i;return B.isValidElement(r)?i=B.cloneElement(r,o):He(r)?i=r(o):i=e.renderDefaultTraveller(o),i}},{key:"getDerivedStateFromProps",value:function(r,o){var i=r.data,s=r.width,a=r.x,l=r.travellerWidth,u=r.updateId,c=r.startIndex,d=r.endIndex;if(i!==o.prevData||u!==o.prevUpdateId)return zw({prevData:i,prevTravellerWidth:l,prevUpdateId:u,prevX:a,prevWidth:s},i&&i.length?C1e({data:i,width:s,x:a,travellerWidth:l,startIndex:c,endIndex:d}):{scale:null,scaleValues:null});if(o.scale&&(s!==o.prevWidth||a!==o.prevX||l!==o.prevTravellerWidth)){o.scale.range([a,a+s-l]);var f=o.scale.domain().map(function(h){return o.scale(h)});return{prevData:i,prevTravellerWidth:l,prevUpdateId:u,prevX:a,prevWidth:s,startX:o.scale(r.startIndex),endX:o.scale(r.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(r,o){for(var i=r.length,s=0,a=i-1;a-s>1;){var l=Math.floor((s+a)/2);r[l]>o?a=l:s=l}return o>=r[a]?a:s}}])}(R.PureComponent);Xr(vd,"displayName","Brush");Xr(vd,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var $1e=cT;function k1e(t,e){var n;return $1e(t,function(r,o,i){return n=e(r,o,i),!n}),!!n}var I1e=k1e,T1e=dj,E1e=ul,N1e=I1e,A1e=Hr,O1e=Lx;function _1e(t,e,n){var r=A1e(t)?T1e:N1e;return n&&O1e(t,e,n)&&(e=void 0),r(t,E1e(e))}var R1e=_1e;const P1e=ht(R1e);var Zi=function(e,n){var r=e.alwaysShow,o=e.ifOverflow;return r&&(o="extendDomain"),o===n},tD=Rj;function D1e(t,e,n){e=="__proto__"&&tD?tD(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var M1e=D1e,F1e=M1e,L1e=Oj,B1e=ul;function z1e(t,e){var n={};return e=B1e(e),L1e(t,function(r,o,i){F1e(n,o,e(r,o,i))}),n}var j1e=z1e;const W1e=ht(j1e);function V1e(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var U1e=V1e,G1e=cT;function H1e(t,e){var n=!0;return G1e(t,function(r,o,i){return n=!!e(r,o,i),n}),n}var K1e=H1e,q1e=U1e,X1e=K1e,Y1e=ul,Q1e=Hr,Z1e=Lx;function J1e(t,e,n){var r=Q1e(t)?q1e:X1e;return n&&Z1e(t,e,n)&&(e=void 0),r(t,Y1e(e))}var ewe=J1e;const cW=ht(ewe);var twe=["x","y"];function xp(t){"@babel/helpers - typeof";return xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xp(t)}function C$(){return C$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},C$.apply(this,arguments)}function nD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Vf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nD(Object(n),!0).forEach(function(r){nwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nwe(t,e,n){return e=rwe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rwe(t){var e=owe(t,"string");return xp(e)=="symbol"?e:e+""}function owe(t,e){if(xp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(xp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iwe(t,e){if(t==null)return{};var n=swe(t,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function swe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function awe(t,e){var n=t.x,r=t.y,o=iwe(t,twe),i="".concat(n),s=parseInt(i,10),a="".concat(r),l=parseInt(a,10),u="".concat(e.height||o.height),c=parseInt(u,10),d="".concat(e.width||o.width),f=parseInt(d,10);return Vf(Vf(Vf(Vf(Vf({},e),o),s?{x:s}:{}),l?{y:l}:{}),{},{height:c,width:f,name:e.name,radius:e.radius})}function rD(t){return B.createElement(Ube,C$({shapeType:"rectangle",propTransformer:awe,activeClassName:"recharts-active-bar"},t))}var lwe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,o){if(typeof e=="number")return e;var i=ge(r)||kne(r);return i?e(r,o):(i||yu(),n)}},uwe=["value","background"],dW;function xd(t){"@babel/helpers - typeof";return xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xd(t)}function cwe(t,e){if(t==null)return{};var n=dwe(t,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function dwe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function r0(){return r0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r0.apply(this,arguments)}function oD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function un(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oD(Object(n),!0).forEach(function(r){$a(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hW(r.key),r)}}function hwe(t,e,n){return e&&iD(t.prototype,e),n&&iD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function pwe(t,e,n){return e=o0(e),mwe(t,fW()?Reflect.construct(e,n||[],o0(t).constructor):e.apply(t,n))}function mwe(t,e){if(e&&(xd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gwe(t)}function gwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fW=function(){return!!t})()}function o0(t){return o0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},o0(t)}function ywe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$$(t,e)}function $$(t,e){return $$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},$$(t,e)}function $a(t,e,n){return e=hW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hW(t){var e=vwe(t,"string");return xd(e)=="symbol"?e:e+""}function vwe(t,e){if(xd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(xd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hl=function(t){function e(){var n;fwe(this,e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=pwe(this,e,[].concat(o)),$a(n,"state",{isAnimationFinished:!1}),$a(n,"id",Xp("recharts-bar-")),$a(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),s&&s()}),$a(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),s&&s()}),n}return ywe(e,t),hwe(e,[{key:"renderRectanglesStatically",value:function(r){var o=this,i=this.props,s=i.shape,a=i.dataKey,l=i.activeIndex,u=i.activeBar,c=Qe(this.props,!1);return r&&r.map(function(d,f){var h=f===l,p=h?u:s,m=un(un(un({},c),d),{},{isActive:h,option:p,index:f,dataKey:a,onAnimationStart:o.handleAnimationStart,onAnimationEnd:o.handleAnimationEnd});return B.createElement(on,r0({className:"recharts-bar-rectangle"},yv(o.props,d,f),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(f)}),B.createElement(rD,m))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,o=this.props,i=o.data,s=o.layout,a=o.isAnimationActive,l=o.animationBegin,u=o.animationDuration,c=o.animationEasing,d=o.animationId,f=this.state.prevData;return B.createElement(Vs,{begin:l,duration:u,isActive:a,easing:c,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var p=h.t,m=i.map(function(g,y){var v=f&&f[y];if(v){var x=fi(v.x,g.x),b=fi(v.y,g.y),w=fi(v.width,g.width),S=fi(v.height,g.height);return un(un({},g),{},{x:x(p),y:b(p),width:w(p),height:S(p)})}if(s==="horizontal"){var $=fi(0,g.height),C=$(p);return un(un({},g),{},{y:g.y+g.height-C,height:C})}var k=fi(0,g.width),I=k(p);return un(un({},g),{},{width:I})});return B.createElement(on,null,r.renderRectanglesStatically(m))})}},{key:"renderRectangles",value:function(){var r=this.props,o=r.data,i=r.isAnimationActive,s=this.state.prevData;return i&&o&&o.length&&(!s||!Kx(s,o))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(o)}},{key:"renderBackground",value:function(){var r=this,o=this.props,i=o.data,s=o.dataKey,a=o.activeIndex,l=Qe(this.props.background,!1);return i.map(function(u,c){u.value;var d=u.background,f=cwe(u,uwe);if(!d)return null;var h=un(un(un(un(un({},f),{},{fill:"#eee"},d),l),yv(r.props,u,c)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:s,index:c,className:"recharts-bar-background-rectangle"});return B.createElement(rD,r0({key:"background-bar-".concat(c),option:r.props.background,isActive:c===a},h))})}},{key:"renderErrorBar",value:function(r,o){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,s=i.data,a=i.xAxis,l=i.yAxis,u=i.layout,c=i.children,d=Mo(c,tm);if(!d)return null;var f=u==="vertical"?s[0].height/2:s[0].width/2,h=function(g,y){var v=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:v,errorVal:ao(g,y)}},p={clipPath:r?"url(#clipPath-".concat(o,")"):null};return B.createElement(on,p,d.map(function(m){return B.cloneElement(m,{key:"error-bar-".concat(o,"-").concat(m.props.dataKey),data:s,xAxis:a,yAxis:l,layout:u,offset:f,dataPointFormatter:h})}))}},{key:"render",value:function(){var r=this.props,o=r.hide,i=r.data,s=r.className,a=r.xAxis,l=r.yAxis,u=r.left,c=r.top,d=r.width,f=r.height,h=r.isAnimationActive,p=r.background,m=r.id;if(o||!i||!i.length)return null;var g=this.state.isAnimationFinished,y=Ze("recharts-bar",s),v=a&&a.allowDataOverflow,x=l&&l.allowDataOverflow,b=v||x,w=qe(m)?this.id:m;return B.createElement(on,{className:y},v||x?B.createElement("defs",null,B.createElement("clipPath",{id:"clipPath-".concat(w)},B.createElement("rect",{x:v?u:u-d/2,y:x?c:c-f/2,width:v?d:d*2,height:x?f:f*2}))):null,B.createElement(on,{className:"recharts-bar-rectangles",clipPath:b?"url(#clipPath-".concat(w,")"):null},p?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(b,w),(!h||g)&&Fa.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(r,o){return r.animationId!==o.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:o.curData}:r.data!==o.curData?{curData:r.data}:null}}])}(R.PureComponent);dW=hl;$a(hl,"displayName","Bar");$a(hl,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Os.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});$a(hl,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,o=t.bandSize,i=t.xAxis,s=t.yAxis,a=t.xAxisTicks,l=t.yAxisTicks,u=t.stackedData,c=t.dataStartIndex,d=t.displayedData,f=t.offset,h=qye(r,n);if(!h)return null;var p=e.layout,m=n.type.defaultProps,g=m!==void 0?un(un({},m),n.props):n.props,y=g.dataKey,v=g.children,x=g.minPointSize,b=p==="horizontal"?s:i,w=u?b.scale.domain():null,S=nve({numericAxis:b}),$=Mo(v,pT),C=d.map(function(k,I){var T,E,_,N,P,F;u?T=Xye(u[c+I],w):(T=ao(k,y),Array.isArray(T)||(T=[S,T]));var L=lwe(x,dW.defaultProps.minPointSize)(T[1],I);if(p==="horizontal"){var A,O=[s.scale(T[0]),s.scale(T[1])],j=O[0],V=O[1];E=oP({axis:i,ticks:a,bandSize:o,offset:h.offset,entry:k,index:I}),_=(A=V??j)!==null&&A!==void 0?A:void 0,N=h.size;var z=j-V;if(P=Number.isNaN(z)?0:z,F={x:E,y:s.y,width:N,height:s.height},Math.abs(L)>0&&Math.abs(P)<Math.abs(L)){var U=gi(P||L)*(Math.abs(L)-Math.abs(P));_-=U,P+=U}}else{var Z=[i.scale(T[0]),i.scale(T[1])],te=Z[0],se=Z[1];if(E=te,_=oP({axis:s,ticks:l,bandSize:o,offset:h.offset,entry:k,index:I}),N=se-te,P=h.size,F={x:i.x,y:_,width:i.width,height:P},Math.abs(L)>0&&Math.abs(N)<Math.abs(L)){var ue=gi(N||L)*(Math.abs(L)-Math.abs(N));N+=ue}}return un(un(un({},k),{},{x:E,y:_,width:N,height:P,value:u?T:T[1],payload:k,background:F},$&&$[I]&&$[I].props),{},{tooltipPayload:[G4(n,k)],tooltipPosition:{x:E+N/2,y:_+P/2}})});return un({data:C,layout:p},f)});function bp(t){"@babel/helpers - typeof";return bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bp(t)}function xwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pW(r.key),r)}}function bwe(t,e,n){return e&&sD(t.prototype,e),n&&sD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function aD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function ui(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aD(Object(n),!0).forEach(function(r){Zx(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zx(t,e,n){return e=pW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pW(t){var e=wwe(t,"string");return bp(e)=="symbol"?e:e+""}function wwe(t,e){if(bp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(bp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mW=function(e,n,r,o,i){var s=e.width,a=e.height,l=e.layout,u=e.children,c=Object.keys(n),d={left:r.left,leftMirror:r.left,right:s-r.right,rightMirror:s-r.right,top:r.top,topMirror:r.top,bottom:a-r.bottom,bottomMirror:a-r.bottom},f=!!Qr(u,hl);return c.reduce(function(h,p){var m=n[p],g=m.orientation,y=m.domain,v=m.padding,x=v===void 0?{}:v,b=m.mirror,w=m.reversed,S="".concat(g).concat(b?"Mirror":""),$,C,k,I,T;if(m.type==="number"&&(m.padding==="gap"||m.padding==="no-gap")){var E=y[1]-y[0],_=1/0,N=m.categoricalDomain.sort(Ene);if(N.forEach(function(Z,te){te>0&&(_=Math.min((Z||0)-(N[te-1]||0),_))}),Number.isFinite(_)){var P=_/E,F=m.layout==="vertical"?r.height:r.width;if(m.padding==="gap"&&($=P*F/2),m.padding==="no-gap"){var L=mu(e.barCategoryGap,P*F),A=P*F/2;$=A-L-(A-L)/F*L}}}o==="xAxis"?C=[r.left+(x.left||0)+($||0),r.left+r.width-(x.right||0)-($||0)]:o==="yAxis"?C=l==="horizontal"?[r.top+r.height-(x.bottom||0),r.top+(x.top||0)]:[r.top+(x.top||0)+($||0),r.top+r.height-(x.bottom||0)-($||0)]:C=m.range,w&&(C=[C[1],C[0]]);var O=Hye(m,i,f),j=O.scale,V=O.realScaleType;j.domain(y).range(C),Kye(j);var z=tve(j,ui(ui({},m),{},{realScaleType:V}));o==="xAxis"?(T=g==="top"&&!b||g==="bottom"&&b,k=r.left,I=d[S]-T*m.height):o==="yAxis"&&(T=g==="left"&&!b||g==="right"&&b,k=d[S]-T*m.width,I=r.top);var U=ui(ui(ui({},m),z),{},{realScaleType:V,x:k,y:I,scale:j,width:o==="xAxis"?r.width:m.width,height:o==="yAxis"?r.height:m.height});return U.bandSize=Gv(U,z),!m.hide&&o==="xAxis"?d[S]+=(T?-1:1)*U.height:m.hide||(d[S]+=(T?-1:1)*U.width),ui(ui({},h),{},Zx({},p,U))},{})},gW=function(e,n){var r=e.x,o=e.y,i=n.x,s=n.y;return{x:Math.min(r,i),y:Math.min(o,s),width:Math.abs(i-r),height:Math.abs(s-o)}},Swe=function(e){var n=e.x1,r=e.y1,o=e.x2,i=e.y2;return gW({x:n,y:r},{x:o,y:i})},yW=function(){function t(e){xwe(this,t),this.scale=e}return bwe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.bandAware,i=r.position;if(n!==void 0){if(i)switch(i){case"start":return this.scale(n);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+s}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(n)+a}default:return this.scale(n)}if(o){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),o=r[0],i=r[r.length-1];return o<=i?n>=o&&n<=i:n>=i&&n<=o}}],[{key:"create",value:function(n){return new t(n)}}])}();Zx(yW,"EPS",1e-4);var WT=function(e){var n=Object.keys(e).reduce(function(r,o){return ui(ui({},r),{},Zx({},o,yW.create(e[o])))},{});return ui(ui({},n),{},{apply:function(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.bandAware,a=i.position;return W1e(o,function(l,u){return n[u].apply(l,{bandAware:s,position:a})})},isInRange:function(o){return cW(o,function(i,s){return n[s].isInRange(i)})}})};function Cwe(t){return(t%180+180)%180}var $we=function(e){var n=e.width,r=e.height,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Cwe(o),s=i*Math.PI/180,a=Math.atan(r/n),l=s>a&&s<Math.PI-a?r/Math.sin(s):n/Math.cos(s);return Math.abs(l)},kwe=ul,Iwe=Yp,Twe=Mx;function Ewe(t){return function(e,n,r){var o=Object(e);if(!Iwe(e)){var i=kwe(n);e=Twe(e),n=function(a){return i(o[a],a,o)}}var s=t(e,n,r);return s>-1?o[i?e[s]:s]:void 0}}var Nwe=Ewe,Awe=sW;function Owe(t){var e=Awe(t),n=e%1;return e===e?n?e-n:e:0}var _we=Owe,Rwe=kj,Pwe=ul,Dwe=_we,Mwe=Math.max;function Fwe(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var o=n==null?0:Dwe(n);return o<0&&(o=Mwe(r+o,0)),Rwe(t,Pwe(e),o)}var Lwe=Fwe,Bwe=Nwe,zwe=Lwe,jwe=Bwe(zwe),Wwe=jwe;const Vwe=ht(Wwe);var Uwe=Nte(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),VT=R.createContext(void 0),UT=R.createContext(void 0),vW=R.createContext(void 0),xW=R.createContext({}),bW=R.createContext(void 0),wW=R.createContext(0),SW=R.createContext(0),lD=function(e){var n=e.state,r=n.xAxisMap,o=n.yAxisMap,i=n.offset,s=e.clipPathId,a=e.children,l=e.width,u=e.height,c=Uwe(i);return B.createElement(VT.Provider,{value:r},B.createElement(UT.Provider,{value:o},B.createElement(xW.Provider,{value:i},B.createElement(vW.Provider,{value:c},B.createElement(bW.Provider,{value:s},B.createElement(wW.Provider,{value:u},B.createElement(SW.Provider,{value:l},a)))))))},Gwe=function(){return R.useContext(bW)},CW=function(e){var n=R.useContext(VT);n==null&&yu();var r=n[e];return r==null&&yu(),r},Hwe=function(){var e=R.useContext(VT);return ma(e)},Kwe=function(){var e=R.useContext(UT),n=Vwe(e,function(r){return cW(r.domain,Number.isFinite)});return n||ma(e)},$W=function(e){var n=R.useContext(UT);n==null&&yu();var r=n[e];return r==null&&yu(),r},qwe=function(){var e=R.useContext(vW);return e},Xwe=function(){return R.useContext(xW)},GT=function(){return R.useContext(SW)},HT=function(){return R.useContext(wW)};function bd(t){"@babel/helpers - typeof";return bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bd(t)}function Ywe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qwe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,IW(r.key),r)}}function Zwe(t,e,n){return e&&Qwe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Jwe(t,e,n){return e=i0(e),eSe(t,kW()?Reflect.construct(e,n||[],i0(t).constructor):e.apply(t,n))}function eSe(t,e){if(e&&(bd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tSe(t)}function tSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kW=function(){return!!t})()}function i0(t){return i0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},i0(t)}function nSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k$(t,e)}function k$(t,e){return k$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},k$(t,e)}function uD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function cD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uD(Object(n),!0).forEach(function(r){KT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KT(t,e,n){return e=IW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IW(t){var e=rSe(t,"string");return bd(e)=="symbol"?e:e+""}function rSe(t,e){if(bd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(bd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oSe(t,e){return lSe(t)||aSe(t,e)||sSe(t,e)||iSe()}function iSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sSe(t,e){if(t){if(typeof t=="string")return dD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dD(t,e)}}function dD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function aSe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,i,s,a=[],l=!0,u=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,o=c}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}function lSe(t){if(Array.isArray(t))return t}function I$(){return I$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},I$.apply(this,arguments)}var uSe=function(e,n){var r;return B.isValidElement(e)?r=B.cloneElement(e,n):He(e)?r=e(n):r=B.createElement("line",I$({},n,{className:"recharts-reference-line-line"})),r},cSe=function(e,n,r,o,i,s,a,l,u){var c=i.x,d=i.y,f=i.width,h=i.height;if(r){var p=u.y,m=e.y.apply(p,{position:s});if(Zi(u,"discard")&&!e.y.isInRange(m))return null;var g=[{x:c+f,y:m},{x:c,y:m}];return l==="left"?g.reverse():g}if(n){var y=u.x,v=e.x.apply(y,{position:s});if(Zi(u,"discard")&&!e.x.isInRange(v))return null;var x=[{x:v,y:d+h},{x:v,y:d}];return a==="top"?x.reverse():x}if(o){var b=u.segment,w=b.map(function(S){return e.apply(S,{position:s})});return Zi(u,"discard")&&P1e(w,function(S){return!e.isInRange(S)})?null:w}return null};function dSe(t){var e=t.x,n=t.y,r=t.segment,o=t.xAxisId,i=t.yAxisId,s=t.shape,a=t.className,l=t.alwaysShow,u=Gwe(),c=CW(o),d=$W(i),f=qwe();if(!u||!f)return null;As(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=WT({x:c.scale,y:d.scale}),p=In(e),m=In(n),g=r&&r.length===2,y=cSe(h,p,m,g,f,t.position,c.orientation,d.orientation,t);if(!y)return null;var v=oSe(y,2),x=v[0],b=x.x,w=x.y,S=v[1],$=S.x,C=S.y,k=Zi(t,"hidden")?"url(#".concat(u,")"):void 0,I=cD(cD({clipPath:k},Qe(t,!0)),{},{x1:b,y1:w,x2:$,y2:C});return B.createElement(on,{className:Ze("recharts-reference-line",a)},uSe(s,I),or.renderCallByParent(t,Swe({x1:b,y1:w,x2:$,y2:C})))}var qT=function(t){function e(){return Ywe(this,e),Jwe(this,e,arguments)}return nSe(e,t),Zwe(e,[{key:"render",value:function(){return B.createElement(dSe,this.props)}}])}(B.Component);KT(qT,"displayName","ReferenceLine");KT(qT,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function T$(){return T$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},T$.apply(this,arguments)}function wd(t){"@babel/helpers - typeof";return wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wd(t)}function fD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function hD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fD(Object(n),!0).forEach(function(r){Jx(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hSe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,EW(r.key),r)}}function pSe(t,e,n){return e&&hSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function mSe(t,e,n){return e=s0(e),gSe(t,TW()?Reflect.construct(e,n||[],s0(t).constructor):e.apply(t,n))}function gSe(t,e){if(e&&(wd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ySe(t)}function ySe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function TW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TW=function(){return!!t})()}function s0(t){return s0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},s0(t)}function vSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E$(t,e)}function E$(t,e){return E$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},E$(t,e)}function Jx(t,e,n){return e=EW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EW(t){var e=xSe(t,"string");return wd(e)=="symbol"?e:e+""}function xSe(t,e){if(wd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(wd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bSe=function(e){var n=e.x,r=e.y,o=e.xAxis,i=e.yAxis,s=WT({x:o.scale,y:i.scale}),a=s.apply({x:n,y:r},{bandAware:!0});return Zi(e,"discard")&&!s.isInRange(a)?null:a},eb=function(t){function e(){return fSe(this,e),mSe(this,e,arguments)}return vSe(e,t),pSe(e,[{key:"render",value:function(){var r=this.props,o=r.x,i=r.y,s=r.r,a=r.alwaysShow,l=r.clipPathId,u=In(o),c=In(i);if(As(a===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!c)return null;var d=bSe(this.props);if(!d)return null;var f=d.x,h=d.y,p=this.props,m=p.shape,g=p.className,y=Zi(this.props,"hidden")?"url(#".concat(l,")"):void 0,v=hD(hD({clipPath:y},Qe(this.props,!0)),{},{cx:f,cy:h});return B.createElement(on,{className:Ze("recharts-reference-dot",g)},e.renderDot(m,v),or.renderCallByParent(this.props,{x:f-s,y:h-s,width:2*s,height:2*s}))}}])}(B.Component);Jx(eb,"displayName","ReferenceDot");Jx(eb,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Jx(eb,"renderDot",function(t,e){var n;return B.isValidElement(t)?n=B.cloneElement(t,e):He(t)?n=t(e):n=B.createElement(jT,T$({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function N$(){return N$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},N$.apply(this,arguments)}function Sd(t){"@babel/helpers - typeof";return Sd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sd(t)}function pD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function mD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pD(Object(n),!0).forEach(function(r){tb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SSe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,AW(r.key),r)}}function CSe(t,e,n){return e&&SSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $Se(t,e,n){return e=a0(e),kSe(t,NW()?Reflect.construct(e,n||[],a0(t).constructor):e.apply(t,n))}function kSe(t,e){if(e&&(Sd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ISe(t)}function ISe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function NW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NW=function(){return!!t})()}function a0(t){return a0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},a0(t)}function TSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A$(t,e)}function A$(t,e){return A$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},A$(t,e)}function tb(t,e,n){return e=AW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function AW(t){var e=ESe(t,"string");return Sd(e)=="symbol"?e:e+""}function ESe(t,e){if(Sd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Sd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var NSe=function(e,n,r,o,i){var s=i.x1,a=i.x2,l=i.y1,u=i.y2,c=i.xAxis,d=i.yAxis;if(!c||!d)return null;var f=WT({x:c.scale,y:d.scale}),h={x:e?f.x.apply(s,{position:"start"}):f.x.rangeMin,y:r?f.y.apply(l,{position:"start"}):f.y.rangeMin},p={x:n?f.x.apply(a,{position:"end"}):f.x.rangeMax,y:o?f.y.apply(u,{position:"end"}):f.y.rangeMax};return Zi(i,"discard")&&(!f.isInRange(h)||!f.isInRange(p))?null:gW(h,p)},nb=function(t){function e(){return wSe(this,e),$Se(this,e,arguments)}return TSe(e,t),CSe(e,[{key:"render",value:function(){var r=this.props,o=r.x1,i=r.x2,s=r.y1,a=r.y2,l=r.className,u=r.alwaysShow,c=r.clipPathId;As(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=In(o),f=In(i),h=In(s),p=In(a),m=this.props.shape;if(!d&&!f&&!h&&!p&&!m)return null;var g=NSe(d,f,h,p,this.props);if(!g&&!m)return null;var y=Zi(this.props,"hidden")?"url(#".concat(c,")"):void 0;return B.createElement(on,{className:Ze("recharts-reference-area",l)},e.renderRect(m,mD(mD({clipPath:y},Qe(this.props,!0)),g)),or.renderCallByParent(this.props,g))}}])}(B.Component);tb(nb,"displayName","ReferenceArea");tb(nb,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});tb(nb,"renderRect",function(t,e){var n;return B.isValidElement(t)?n=B.cloneElement(t,e):He(t)?n=t(e):n=B.createElement(zT,N$({},e,{className:"recharts-reference-area-rect"})),n});function OW(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],o=0;o<t.length;o+=e)r.push(t[o]);return r}function ASe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return $we(r,n)}function OSe(t,e,n){var r=n==="width",o=t.x,i=t.y,s=t.width,a=t.height;return e===1?{start:r?o:i,end:r?o+s:i+a}:{start:r?o+s:i+a,end:r?o:i}}function l0(t,e,n,r,o){if(t*e<t*r||t*e>t*o)return!1;var i=n();return t*(e-t*i/2-r)>=0&&t*(e+t*i/2-o)<=0}function _Se(t,e){return OW(t,e+1)}function RSe(t,e,n,r,o){for(var i=(r||[]).slice(),s=e.start,a=e.end,l=0,u=1,c=s,d=function(){var p=r==null?void 0:r[l];if(p===void 0)return{v:OW(r,u)};var m=l,g,y=function(){return g===void 0&&(g=n(p,m)),g},v=p.coordinate,x=l===0||l0(t,v,y,c,a);x||(l=0,c=s,u+=1),x&&(c=v+t*(y()/2+o),l+=u)},f;u<=i.length;)if(f=d(),f)return f.v;return[]}function wp(t){"@babel/helpers - typeof";return wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wp(t)}function gD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function er(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gD(Object(n),!0).forEach(function(r){PSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PSe(t,e,n){return e=DSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DSe(t){var e=MSe(t,"string");return wp(e)=="symbol"?e:e+""}function MSe(t,e){if(wp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(wp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function FSe(t,e,n,r,o){for(var i=(r||[]).slice(),s=i.length,a=e.start,l=e.end,u=function(f){var h=i[f],p,m=function(){return p===void 0&&(p=n(h,f)),p};if(f===s-1){var g=t*(h.coordinate+t*m()/2-l);i[f]=h=er(er({},h),{},{tickCoord:g>0?h.coordinate-g*t:h.coordinate})}else i[f]=h=er(er({},h),{},{tickCoord:h.coordinate});var y=l0(t,h.tickCoord,m,a,l);y&&(l=h.tickCoord-t*(m()/2+o),i[f]=er(er({},h),{},{isShow:!0}))},c=s-1;c>=0;c--)u(c);return i}function LSe(t,e,n,r,o,i){var s=(r||[]).slice(),a=s.length,l=e.start,u=e.end;if(i){var c=r[a-1],d=n(c,a-1),f=t*(c.coordinate+t*d/2-u);s[a-1]=c=er(er({},c),{},{tickCoord:f>0?c.coordinate-f*t:c.coordinate});var h=l0(t,c.tickCoord,function(){return d},l,u);h&&(u=c.tickCoord-t*(d/2+o),s[a-1]=er(er({},c),{},{isShow:!0}))}for(var p=i?a-1:a,m=function(v){var x=s[v],b,w=function(){return b===void 0&&(b=n(x,v)),b};if(v===0){var S=t*(x.coordinate-t*w()/2-l);s[v]=x=er(er({},x),{},{tickCoord:S<0?x.coordinate-S*t:x.coordinate})}else s[v]=x=er(er({},x),{},{tickCoord:x.coordinate});var $=l0(t,x.tickCoord,w,l,u);$&&(l=x.tickCoord+t*(w()/2+o),s[v]=er(er({},x),{},{isShow:!0}))},g=0;g<p;g++)m(g);return s}function XT(t,e,n){var r=t.tick,o=t.ticks,i=t.viewBox,s=t.minTickGap,a=t.orientation,l=t.interval,u=t.tickFormatter,c=t.unit,d=t.angle;if(!o||!o.length||!r)return[];if(ge(l)||Os.isSsr)return _Se(o,typeof l=="number"&&ge(l)?l:0);var f=[],h=a==="top"||a==="bottom"?"width":"height",p=c&&h==="width"?mh(c,{fontSize:e,letterSpacing:n}):{width:0,height:0},m=function(x,b){var w=He(u)?u(x.value,b):x.value;return h==="width"?ASe(mh(w,{fontSize:e,letterSpacing:n}),p,d):mh(w,{fontSize:e,letterSpacing:n})[h]},g=o.length>=2?gi(o[1].coordinate-o[0].coordinate):1,y=OSe(i,g,h);return l==="equidistantPreserveStart"?RSe(g,y,m,o,s):(l==="preserveStart"||l==="preserveStartEnd"?f=LSe(g,y,m,o,s,l==="preserveStartEnd"):f=FSe(g,y,m,o,s),f.filter(function(v){return v.isShow}))}var BSe=["viewBox"],zSe=["viewBox"],jSe=["ticks"];function Cd(t){"@babel/helpers - typeof";return Cd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cd(t)}function Cc(){return Cc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cc.apply(this,arguments)}function yD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function xn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yD(Object(n),!0).forEach(function(r){YT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jw(t,e){if(t==null)return{};var n=WSe(t,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function WSe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function VSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,RW(r.key),r)}}function USe(t,e,n){return e&&vD(t.prototype,e),n&&vD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function GSe(t,e,n){return e=u0(e),HSe(t,_W()?Reflect.construct(e,n||[],u0(t).constructor):e.apply(t,n))}function HSe(t,e){if(e&&(Cd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KSe(t)}function KSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _W(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_W=function(){return!!t})()}function u0(t){return u0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},u0(t)}function qSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O$(t,e)}function O$(t,e){return O$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},O$(t,e)}function YT(t,e,n){return e=RW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RW(t){var e=XSe(t,"string");return Cd(e)=="symbol"?e:e+""}function XSe(t,e){if(Cd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Cd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sf=function(t){function e(n){var r;return VSe(this,e),r=GSe(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return qSe(e,t),USe(e,[{key:"shouldComponentUpdate",value:function(r,o){var i=r.viewBox,s=jw(r,BSe),a=this.props,l=a.viewBox,u=jw(a,zSe);return!Dc(i,l)||!Dc(s,u)||!Dc(o,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var o=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];o&&this.setState({fontSize:window.getComputedStyle(o).fontSize,letterSpacing:window.getComputedStyle(o).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var o=this.props,i=o.x,s=o.y,a=o.width,l=o.height,u=o.orientation,c=o.tickSize,d=o.mirror,f=o.tickMargin,h,p,m,g,y,v,x=d?-1:1,b=r.tickSize||c,w=ge(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":h=p=r.coordinate,g=s+ +!d*l,m=g-x*b,v=m-x*f,y=w;break;case"left":m=g=r.coordinate,p=i+ +!d*a,h=p-x*b,y=h-x*f,v=w;break;case"right":m=g=r.coordinate,p=i+ +d*a,h=p+x*b,y=h+x*f,v=w;break;default:h=p=r.coordinate,g=s+ +d*l,m=g+x*b,v=m+x*f,y=w;break}return{line:{x1:h,y1:m,x2:p,y2:g},tick:{x:y,y:v}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,o=r.orientation,i=r.mirror,s;switch(o){case"left":s=i?"start":"end";break;case"right":s=i?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,o=r.orientation,i=r.mirror,s="end";switch(o){case"left":case"right":s="middle";break;case"top":s=i?"start":"end";break;default:s=i?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var r=this.props,o=r.x,i=r.y,s=r.width,a=r.height,l=r.orientation,u=r.mirror,c=r.axisLine,d=xn(xn(xn({},Qe(this.props,!1)),Qe(c,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var f=+(l==="top"&&!u||l==="bottom"&&u);d=xn(xn({},d),{},{x1:o,y1:i+f*a,x2:o+s,y2:i+f*a})}else{var h=+(l==="left"&&!u||l==="right"&&u);d=xn(xn({},d),{},{x1:o+h*s,y1:i,x2:o+h*s,y2:i+a})}return B.createElement("line",Cc({},d,{className:Ze("recharts-cartesian-axis-line",Do(c,"className"))}))}},{key:"renderTicks",value:function(r,o,i){var s=this,a=this.props,l=a.tickLine,u=a.stroke,c=a.tick,d=a.tickFormatter,f=a.unit,h=XT(xn(xn({},this.props),{},{ticks:r}),o,i),p=this.getTickTextAnchor(),m=this.getTickVerticalAnchor(),g=Qe(this.props,!1),y=Qe(c,!1),v=xn(xn({},g),{},{fill:"none"},Qe(l,!1)),x=h.map(function(b,w){var S=s.getTickLineCoord(b),$=S.line,C=S.tick,k=xn(xn(xn(xn({textAnchor:p,verticalAnchor:m},g),{},{stroke:"none",fill:u},y),C),{},{index:w,payload:b,visibleTicksCount:h.length,tickFormatter:d});return B.createElement(on,Cc({className:"recharts-cartesian-axis-tick",key:"tick-".concat(b.value,"-").concat(b.coordinate,"-").concat(b.tickCoord)},yv(s.props,b,w)),l&&B.createElement("line",Cc({},v,$,{className:Ze("recharts-cartesian-axis-tick-line",Do(l,"className"))})),c&&e.renderTickItem(c,k,"".concat(He(d)?d(b.value,w):b.value).concat(f||"")))});return B.createElement("g",{className:"recharts-cartesian-axis-ticks"},x)}},{key:"render",value:function(){var r=this,o=this.props,i=o.axisLine,s=o.width,a=o.height,l=o.ticksGenerator,u=o.className,c=o.hide;if(c)return null;var d=this.props,f=d.ticks,h=jw(d,jSe),p=f;return He(l)&&(p=f&&f.length>0?l(this.props):l(h)),s<=0||a<=0||!p||!p.length?null:B.createElement(on,{className:Ze("recharts-cartesian-axis",u),ref:function(g){r.layerReference=g}},i&&this.renderAxisLine(),this.renderTicks(p,this.state.fontSize,this.state.letterSpacing),or.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,o,i){var s,a=Ze(o.className,"recharts-cartesian-axis-tick-value");return B.isValidElement(r)?s=B.cloneElement(r,xn(xn({},o),{},{className:a})):He(r)?s=r(xn(xn({},o),{},{className:a})):s=B.createElement(Ov,Cc({},o,{className:"recharts-cartesian-axis-tick-value"}),i),s}}])}(R.Component);YT(sf,"displayName","CartesianAxis");YT(sf,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var YSe=["x1","y1","x2","y2","key"],QSe=["offset"];function vu(t){"@babel/helpers - typeof";return vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vu(t)}function xD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function ir(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xD(Object(n),!0).forEach(function(r){ZSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZSe(t,e,n){return e=JSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JSe(t){var e=eCe(t,"string");return vu(e)=="symbol"?e:e+""}function eCe(t,e){if(vu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(vu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ul(){return Ul=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ul.apply(this,arguments)}function bD(t,e){if(t==null)return{};var n=tCe(t,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function tCe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var nCe=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,o=e.x,i=e.y,s=e.width,a=e.height,l=e.ry;return B.createElement("rect",{x:o,y:i,ry:l,width:s,height:a,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function PW(t,e){var n;if(B.isValidElement(t))n=B.cloneElement(t,e);else if(He(t))n=t(e);else{var r=e.x1,o=e.y1,i=e.x2,s=e.y2,a=e.key,l=bD(e,YSe),u=Qe(l,!1);u.offset;var c=bD(u,QSe);n=B.createElement("line",Ul({},c,{x1:r,y1:o,x2:i,y2:s,fill:"none",key:a}))}return n}function rCe(t){var e=t.x,n=t.width,r=t.horizontal,o=r===void 0?!0:r,i=t.horizontalPoints;if(!o||!i||!i.length)return null;var s=i.map(function(a,l){var u=ir(ir({},t),{},{x1:e,y1:a,x2:e+n,y2:a,key:"line-".concat(l),index:l});return PW(o,u)});return B.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function oCe(t){var e=t.y,n=t.height,r=t.vertical,o=r===void 0?!0:r,i=t.verticalPoints;if(!o||!i||!i.length)return null;var s=i.map(function(a,l){var u=ir(ir({},t),{},{x1:a,y1:e,x2:a,y2:e+n,key:"line-".concat(l),index:l});return PW(o,u)});return B.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function iCe(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,o=t.y,i=t.width,s=t.height,a=t.horizontalPoints,l=t.horizontal,u=l===void 0?!0:l;if(!u||!e||!e.length)return null;var c=a.map(function(f){return Math.round(f+o-o)}).sort(function(f,h){return f-h});o!==c[0]&&c.unshift(0);var d=c.map(function(f,h){var p=!c[h+1],m=p?o+s-f:c[h+1]-f;if(m<=0)return null;var g=h%e.length;return B.createElement("rect",{key:"react-".concat(h),y:f,x:r,height:m,width:i,stroke:"none",fill:e[g],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return B.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function sCe(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,o=t.fillOpacity,i=t.x,s=t.y,a=t.width,l=t.height,u=t.verticalPoints;if(!n||!r||!r.length)return null;var c=u.map(function(f){return Math.round(f+i-i)}).sort(function(f,h){return f-h});i!==c[0]&&c.unshift(0);var d=c.map(function(f,h){var p=!c[h+1],m=p?i+a-f:c[h+1]-f;if(m<=0)return null;var g=h%r.length;return B.createElement("rect",{key:"react-".concat(h),x:f,y:s,width:m,height:l,stroke:"none",fill:r[g],fillOpacity:o,className:"recharts-cartesian-grid-bg"})});return B.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var aCe=function(e,n){var r=e.xAxis,o=e.width,i=e.height,s=e.offset;return V4(XT(ir(ir(ir({},sf.defaultProps),r),{},{ticks:Is(r,!0),viewBox:{x:0,y:0,width:o,height:i}})),s.left,s.left+s.width,n)},lCe=function(e,n){var r=e.yAxis,o=e.width,i=e.height,s=e.offset;return V4(XT(ir(ir(ir({},sf.defaultProps),r),{},{ticks:Is(r,!0),viewBox:{x:0,y:0,width:o,height:i}})),s.top,s.top+s.height,n)},rc={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function rb(t){var e,n,r,o,i,s,a=GT(),l=HT(),u=Xwe(),c=ir(ir({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:rc.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:rc.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:rc.horizontal,horizontalFill:(o=t.horizontalFill)!==null&&o!==void 0?o:rc.horizontalFill,vertical:(i=t.vertical)!==null&&i!==void 0?i:rc.vertical,verticalFill:(s=t.verticalFill)!==null&&s!==void 0?s:rc.verticalFill,x:ge(t.x)?t.x:u.left,y:ge(t.y)?t.y:u.top,width:ge(t.width)?t.width:u.width,height:ge(t.height)?t.height:u.height}),d=c.x,f=c.y,h=c.width,p=c.height,m=c.syncWithTicks,g=c.horizontalValues,y=c.verticalValues,v=Hwe(),x=Kwe();if(!ge(h)||h<=0||!ge(p)||p<=0||!ge(d)||d!==+d||!ge(f)||f!==+f)return null;var b=c.verticalCoordinatesGenerator||aCe,w=c.horizontalCoordinatesGenerator||lCe,S=c.horizontalPoints,$=c.verticalPoints;if((!S||!S.length)&&He(w)){var C=g&&g.length,k=w({yAxis:x?ir(ir({},x),{},{ticks:C?g:x.ticks}):void 0,width:a,height:l,offset:u},C?!0:m);As(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(vu(k),"]")),Array.isArray(k)&&(S=k)}if((!$||!$.length)&&He(b)){var I=y&&y.length,T=b({xAxis:v?ir(ir({},v),{},{ticks:I?y:v.ticks}):void 0,width:a,height:l,offset:u},I?!0:m);As(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(vu(T),"]")),Array.isArray(T)&&($=T)}return B.createElement("g",{className:"recharts-cartesian-grid"},B.createElement(nCe,{fill:c.fill,fillOpacity:c.fillOpacity,x:c.x,y:c.y,width:c.width,height:c.height,ry:c.ry}),B.createElement(rCe,Ul({},c,{offset:u,horizontalPoints:S,xAxis:v,yAxis:x})),B.createElement(oCe,Ul({},c,{offset:u,verticalPoints:$,xAxis:v,yAxis:x})),B.createElement(iCe,Ul({},c,{horizontalPoints:S})),B.createElement(sCe,Ul({},c,{verticalPoints:$})))}rb.displayName="CartesianGrid";var uCe=["type","layout","connectNulls","ref"],cCe=["key"];function $d(t){"@babel/helpers - typeof";return $d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$d(t)}function wD(t,e){if(t==null)return{};var n=dCe(t,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function dCe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function xh(){return xh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xh.apply(this,arguments)}function SD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function qr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SD(Object(n),!0).forEach(function(r){ci(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oc(t){return mCe(t)||pCe(t)||hCe(t)||fCe()}function fCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hCe(t,e){if(t){if(typeof t=="string")return _$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _$(t,e)}}function pCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function mCe(t){if(Array.isArray(t))return _$(t)}function _$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,MW(r.key),r)}}function yCe(t,e,n){return e&&CD(t.prototype,e),n&&CD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function vCe(t,e,n){return e=c0(e),xCe(t,DW()?Reflect.construct(e,n||[],c0(t).constructor):e.apply(t,n))}function xCe(t,e){if(e&&($d(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bCe(t)}function bCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function DW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DW=function(){return!!t})()}function c0(t){return c0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},c0(t)}function wCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&R$(t,e)}function R$(t,e){return R$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},R$(t,e)}function ci(t,e,n){return e=MW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MW(t){var e=SCe(t,"string");return $d(e)=="symbol"?e:e+""}function SCe(t,e){if($d(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if($d(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nm=function(t){function e(){var n;gCe(this,e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=vCe(this,e,[].concat(o)),ci(n,"state",{isAnimationFinished:!0,totalLength:0}),ci(n,"generateSimpleStrokeDasharray",function(s,a){return"".concat(a,"px ").concat(s-a,"px")}),ci(n,"getStrokeDasharray",function(s,a,l){var u=l.reduce(function(y,v){return y+v});if(!u)return n.generateSimpleStrokeDasharray(a,s);for(var c=Math.floor(s/u),d=s%u,f=a-s,h=[],p=0,m=0;p<l.length;m+=l[p],++p)if(m+l[p]>d){h=[].concat(oc(l.slice(0,p)),[d-m]);break}var g=h.length%2===0?[0,f]:[f];return[].concat(oc(e.repeat(l,c)),oc(h),g).map(function(y){return"".concat(y,"px")}).join(", ")}),ci(n,"id",Xp("recharts-line-")),ci(n,"pathRef",function(s){n.mainCurve=s}),ci(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),ci(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return wCe(e,t),yCe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,o){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,s=i.points,a=i.xAxis,l=i.yAxis,u=i.layout,c=i.children,d=Mo(c,tm);if(!d)return null;var f=function(m,g){return{x:m.x,y:m.y,value:m.value,errorVal:ao(m.payload,g)}},h={clipPath:r?"url(#clipPath-".concat(o,")"):null};return B.createElement(on,h,d.map(function(p){return B.cloneElement(p,{key:"bar-".concat(p.props.dataKey),data:s,xAxis:a,yAxis:l,layout:u,dataPointFormatter:f})}))}},{key:"renderDots",value:function(r,o,i){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var a=this.props,l=a.dot,u=a.points,c=a.dataKey,d=Qe(this.props,!1),f=Qe(l,!0),h=u.map(function(m,g){var y=qr(qr(qr({key:"dot-".concat(g),r:3},d),f),{},{index:g,cx:m.x,cy:m.y,value:m.value,dataKey:c,payload:m.payload,points:u});return e.renderDotItem(l,y)}),p={clipPath:r?"url(#clipPath-".concat(o?"":"dots-").concat(i,")"):null};return B.createElement(on,xh({className:"recharts-line-dots",key:"dots"},p),h)}},{key:"renderCurveStatically",value:function(r,o,i,s){var a=this.props,l=a.type,u=a.layout,c=a.connectNulls;a.ref;var d=wD(a,uCe),f=qr(qr(qr({},Qe(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:o?"url(#clipPath-".concat(i,")"):null,points:r},s),{},{type:l,layout:u,connectNulls:c});return B.createElement(c$,xh({},f,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,o){var i=this,s=this.props,a=s.points,l=s.strokeDasharray,u=s.isAnimationActive,c=s.animationBegin,d=s.animationDuration,f=s.animationEasing,h=s.animationId,p=s.animateNewValues,m=s.width,g=s.height,y=this.state,v=y.prevPoints,x=y.totalLength;return B.createElement(Vs,{begin:c,duration:d,isActive:u,easing:f,from:{t:0},to:{t:1},key:"line-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(b){var w=b.t;if(v){var S=v.length/a.length,$=a.map(function(E,_){var N=Math.floor(_*S);if(v[N]){var P=v[N],F=fi(P.x,E.x),L=fi(P.y,E.y);return qr(qr({},E),{},{x:F(w),y:L(w)})}if(p){var A=fi(m*2,E.x),O=fi(g/2,E.y);return qr(qr({},E),{},{x:A(w),y:O(w)})}return qr(qr({},E),{},{x:E.x,y:E.y})});return i.renderCurveStatically($,r,o)}var C=fi(0,x),k=C(w),I;if(l){var T="".concat(l).split(/[,\s]+/gim).map(function(E){return parseFloat(E)});I=i.getStrokeDasharray(k,x,T)}else I=i.generateSimpleStrokeDasharray(x,k);return i.renderCurveStatically(a,r,o,{strokeDasharray:I})})}},{key:"renderCurve",value:function(r,o){var i=this.props,s=i.points,a=i.isAnimationActive,l=this.state,u=l.prevPoints,c=l.totalLength;return a&&s&&s.length&&(!u&&c>0||!Kx(u,s))?this.renderCurveWithAnimation(r,o):this.renderCurveStatically(s,r,o)}},{key:"render",value:function(){var r,o=this.props,i=o.hide,s=o.dot,a=o.points,l=o.className,u=o.xAxis,c=o.yAxis,d=o.top,f=o.left,h=o.width,p=o.height,m=o.isAnimationActive,g=o.id;if(i||!a||!a.length)return null;var y=this.state.isAnimationFinished,v=a.length===1,x=Ze("recharts-line",l),b=u&&u.allowDataOverflow,w=c&&c.allowDataOverflow,S=b||w,$=qe(g)?this.id:g,C=(r=Qe(s,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},k=C.r,I=k===void 0?3:k,T=C.strokeWidth,E=T===void 0?2:T,_=Fne(s)?s:{},N=_.clipDot,P=N===void 0?!0:N,F=I*2+E;return B.createElement(on,{className:x},b||w?B.createElement("defs",null,B.createElement("clipPath",{id:"clipPath-".concat($)},B.createElement("rect",{x:b?f:f-h/2,y:w?d:d-p/2,width:b?h:h*2,height:w?p:p*2})),!P&&B.createElement("clipPath",{id:"clipPath-dots-".concat($)},B.createElement("rect",{x:f-F/2,y:d-F/2,width:h+F,height:p+F}))):null,!v&&this.renderCurve(S,$),this.renderErrorBar(S,$),(v||s)&&this.renderDots(S,P,$),(!m||y)&&Fa.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,o){return r.animationId!==o.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:o.curPoints}:r.points!==o.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,o){for(var i=r.length%2!==0?[].concat(oc(r),[0]):r,s=[],a=0;a<o;++a)s=[].concat(oc(s),oc(i));return s}},{key:"renderDotItem",value:function(r,o){var i;if(B.isValidElement(r))i=B.cloneElement(r,o);else if(He(r))i=r(o);else{var s=o.key,a=wD(o,cCe),l=Ze("recharts-line-dot",typeof r!="boolean"?r.className:"");i=B.createElement(jT,xh({key:s},a,{className:l}))}return i}}])}(R.PureComponent);ci(nm,"displayName","Line");ci(nm,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Os.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});ci(nm,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,o=t.xAxisTicks,i=t.yAxisTicks,s=t.dataKey,a=t.bandSize,l=t.displayedData,u=t.offset,c=e.layout,d=l.map(function(f,h){var p=ao(f,s);return c==="horizontal"?{x:rP({axis:n,ticks:o,bandSize:a,entry:f,index:h}),y:qe(p)?null:r.scale(p),value:p,payload:f}:{x:qe(p)?null:n.scale(p),y:rP({axis:r,ticks:i,bandSize:a,entry:f,index:h}),value:p,payload:f}});return qr({points:d,layout:c},u)});function kd(t){"@babel/helpers - typeof";return kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kd(t)}function CCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $Ce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,BW(r.key),r)}}function kCe(t,e,n){return e&&$Ce(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ICe(t,e,n){return e=d0(e),TCe(t,FW()?Reflect.construct(e,n||[],d0(t).constructor):e.apply(t,n))}function TCe(t,e){if(e&&(kd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ECe(t)}function ECe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function FW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FW=function(){return!!t})()}function d0(t){return d0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},d0(t)}function NCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P$(t,e)}function P$(t,e){return P$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},P$(t,e)}function LW(t,e,n){return e=BW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BW(t){var e=ACe(t,"string");return kd(e)=="symbol"?e:e+""}function ACe(t,e){if(kd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(kd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function D$(){return D$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},D$.apply(this,arguments)}function OCe(t){var e=t.xAxisId,n=GT(),r=HT(),o=CW(e);return o==null?null:R.createElement(sf,D$({},o,{className:Ze("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(s){return Is(s,!0)}}))}var Bu=function(t){function e(){return CCe(this,e),ICe(this,e,arguments)}return NCe(e,t),kCe(e,[{key:"render",value:function(){return R.createElement(OCe,this.props)}}])}(R.Component);LW(Bu,"displayName","XAxis");LW(Bu,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Id(t){"@babel/helpers - typeof";return Id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Id(t)}function _Ce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function RCe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,WW(r.key),r)}}function PCe(t,e,n){return e&&RCe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function DCe(t,e,n){return e=f0(e),MCe(t,zW()?Reflect.construct(e,n||[],f0(t).constructor):e.apply(t,n))}function MCe(t,e){if(e&&(Id(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FCe(t)}function FCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zW=function(){return!!t})()}function f0(t){return f0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},f0(t)}function LCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&M$(t,e)}function M$(t,e){return M$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},M$(t,e)}function jW(t,e,n){return e=WW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WW(t){var e=BCe(t,"string");return Id(e)=="symbol"?e:e+""}function BCe(t,e){if(Id(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Id(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function F$(){return F$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},F$.apply(this,arguments)}var zCe=function(e){var n=e.yAxisId,r=GT(),o=HT(),i=$W(n);return i==null?null:R.createElement(sf,F$({},i,{className:Ze("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:o},ticksGenerator:function(a){return Is(a,!0)}}))},zu=function(t){function e(){return _Ce(this,e),DCe(this,e,arguments)}return LCe(e,t),PCe(e,[{key:"render",value:function(){return R.createElement(zCe,this.props)}}])}(R.Component);jW(zu,"displayName","YAxis");jW(zu,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function $D(t){return UCe(t)||VCe(t)||WCe(t)||jCe()}function jCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WCe(t,e){if(t){if(typeof t=="string")return L$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L$(t,e)}}function VCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function UCe(t){if(Array.isArray(t))return L$(t)}function L$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var B$=function(e,n,r,o,i){var s=Mo(e,qT),a=Mo(e,eb),l=[].concat($D(s),$D(a)),u=Mo(e,nb),c="".concat(o,"Id"),d=o[0],f=n;if(l.length&&(f=l.reduce(function(m,g){if(g.props[c]===r&&Zi(g.props,"extendDomain")&&ge(g.props[d])){var y=g.props[d];return[Math.min(m[0],y),Math.max(m[1],y)]}return m},f)),u.length){var h="".concat(d,"1"),p="".concat(d,"2");f=u.reduce(function(m,g){if(g.props[c]===r&&Zi(g.props,"extendDomain")&&ge(g.props[h])&&ge(g.props[p])){var y=g.props[h],v=g.props[p];return[Math.min(m[0],y,v),Math.max(m[1],y,v)]}return m},f)}return i&&i.length&&(f=i.reduce(function(m,g){return ge(g)?[Math.min(m[0],g),Math.max(m[1],g)]:m},f)),f},VW={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function o(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function i(l,u,c,d,f){if(typeof c!="function")throw new TypeError("The listener must be a function");var h=new o(c,d||l,f),p=n?n+u:u;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],h]:l._events[p].push(h):(l._events[p]=h,l._eventsCount++),l}function s(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],c,d;if(this._eventsCount===0)return u;for(d in c=this._events)e.call(c,d)&&u.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},a.prototype.listeners=function(u){var c=n?n+u:u,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,h=d.length,p=new Array(h);f<h;f++)p[f]=d[f].fn;return p},a.prototype.listenerCount=function(u){var c=n?n+u:u,d=this._events[c];return d?d.fn?1:d.length:0},a.prototype.emit=function(u,c,d,f,h,p){var m=n?n+u:u;if(!this._events[m])return!1;var g=this._events[m],y=arguments.length,v,x;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,c),!0;case 3:return g.fn.call(g.context,c,d),!0;case 4:return g.fn.call(g.context,c,d,f),!0;case 5:return g.fn.call(g.context,c,d,f,h),!0;case 6:return g.fn.call(g.context,c,d,f,h,p),!0}for(x=1,v=new Array(y-1);x<y;x++)v[x-1]=arguments[x];g.fn.apply(g.context,v)}else{var b=g.length,w;for(x=0;x<b;x++)switch(g[x].once&&this.removeListener(u,g[x].fn,void 0,!0),y){case 1:g[x].fn.call(g[x].context);break;case 2:g[x].fn.call(g[x].context,c);break;case 3:g[x].fn.call(g[x].context,c,d);break;case 4:g[x].fn.call(g[x].context,c,d,f);break;default:if(!v)for(w=1,v=new Array(y-1);w<y;w++)v[w-1]=arguments[w];g[x].fn.apply(g[x].context,v)}}return!0},a.prototype.on=function(u,c,d){return i(this,u,c,d,!1)},a.prototype.once=function(u,c,d){return i(this,u,c,d,!0)},a.prototype.removeListener=function(u,c,d,f){var h=n?n+u:u;if(!this._events[h])return this;if(!c)return s(this,h),this;var p=this._events[h];if(p.fn)p.fn===c&&(!f||p.once)&&(!d||p.context===d)&&s(this,h);else{for(var m=0,g=[],y=p.length;m<y;m++)(p[m].fn!==c||f&&!p[m].once||d&&p[m].context!==d)&&g.push(p[m]);g.length?this._events[h]=g.length===1?g[0]:g:s(this,h)}return this},a.prototype.removeAllListeners=function(u){var c;return u?(c=n?n+u:u,this._events[c]&&s(this,c)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(VW);var GCe=VW.exports;const HCe=ht(GCe);var Ww=new HCe,Vw="recharts.syncMouseEvents";function Sp(t){"@babel/helpers - typeof";return Sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sp(t)}function KCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qCe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,UW(r.key),r)}}function XCe(t,e,n){return e&&qCe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Uw(t,e,n){return e=UW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UW(t){var e=YCe(t,"string");return Sp(e)=="symbol"?e:e+""}function YCe(t,e){if(Sp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var QCe=function(){function t(){KCe(this,t),Uw(this,"activeIndex",0),Uw(this,"coordinateList",[]),Uw(this,"layout","horizontal")}return XCe(t,[{key:"setDetails",value:function(n){var r,o=n.coordinateList,i=o===void 0?null:o,s=n.container,a=s===void 0?null:s,l=n.layout,u=l===void 0?null:l,c=n.offset,d=c===void 0?null:c,f=n.mouseHandlerCallback,h=f===void 0?null:f;this.coordinateList=(r=i??this.coordinateList)!==null&&r!==void 0?r:[],this.container=a??this.container,this.layout=u??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=h??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var o=this.container.getBoundingClientRect(),i=o.x,s=o.y,a=o.height,l=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,c=((r=window)===null||r===void 0?void 0:r.scrollY)||0,d=i+l+u,f=s+this.offset.top+a/2+c;this.mouseHandlerCallback({pageX:d,pageY:f})}}}])}();function ZCe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],o=t==null?void 0:t[1];if(r&&o&&ge(r)&&ge(o))return!0}return!1}function JCe(t,e,n,r){var o=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-o:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-o,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function GW(t){var e=t.cx,n=t.cy,r=t.radius,o=t.startAngle,i=t.endAngle,s=jn(e,n,r,o),a=jn(e,n,r,i);return{points:[s,a],cx:e,cy:n,radius:r,startAngle:o,endAngle:i}}function e$e(t,e,n){var r,o,i,s;if(t==="horizontal")r=e.x,i=r,o=n.top,s=n.top+n.height;else if(t==="vertical")o=e.y,s=o,r=n.left,i=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var a=e.cx,l=e.cy,u=e.innerRadius,c=e.outerRadius,d=e.angle,f=jn(a,l,u,d),h=jn(a,l,c,d);r=f.x,o=f.y,i=h.x,s=h.y}else return GW(e);return[{x:r,y:o},{x:i,y:s}]}function Cp(t){"@babel/helpers - typeof";return Cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cp(t)}function kD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function ry(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kD(Object(n),!0).forEach(function(r){t$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function t$e(t,e,n){return e=n$e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n$e(t){var e=r$e(t,"string");return Cp(e)=="symbol"?e:e+""}function r$e(t,e){if(Cp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Cp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function o$e(t){var e,n,r=t.element,o=t.tooltipEventType,i=t.isActive,s=t.activeCoordinate,a=t.activePayload,l=t.offset,u=t.activeTooltipIndex,c=t.tooltipAxisBandSize,d=t.layout,f=t.chartName,h=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!h||!i||!s||f!=="ScatterChart"&&o!=="axis")return null;var p,m=c$;if(f==="ScatterChart")p=s,m=obe;else if(f==="BarChart")p=JCe(d,s,l,c),m=zT;else if(d==="radial"){var g=GW(s),y=g.cx,v=g.cy,x=g.radius,b=g.startAngle,w=g.endAngle;p={cx:y,cy:v,startAngle:b,endAngle:w,innerRadius:x,outerRadius:x},m=q4}else p={points:e$e(d,s,l)},m=c$;var S=ry(ry(ry(ry({stroke:"#ccc",pointerEvents:"none"},l),p),Qe(h,!1)),{},{payload:a,payloadIndex:u,className:Ze("recharts-tooltip-cursor",h.className)});return R.isValidElement(h)?R.cloneElement(h,S):R.createElement(m,S)}var i$e=["item"],s$e=["children","className","width","height","style","compact","title","desc"];function Td(t){"@babel/helpers - typeof";return Td=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Td(t)}function $c(){return $c=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$c.apply(this,arguments)}function ID(t,e){return u$e(t)||l$e(t,e)||KW(t,e)||a$e()}function a$e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l$e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,i,s,a=[],l=!0,u=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,o=c}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}function u$e(t){if(Array.isArray(t))return t}function TD(t,e){if(t==null)return{};var n=c$e(t,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function c$e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function d$e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f$e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qW(r.key),r)}}function h$e(t,e,n){return e&&f$e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function p$e(t,e,n){return e=h0(e),m$e(t,HW()?Reflect.construct(e,n||[],h0(t).constructor):e.apply(t,n))}function m$e(t,e){if(e&&(Td(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return g$e(t)}function g$e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function HW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HW=function(){return!!t})()}function h0(t){return h0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},h0(t)}function y$e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&z$(t,e)}function z$(t,e){return z$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},z$(t,e)}function Ed(t){return b$e(t)||x$e(t)||KW(t)||v$e()}function v$e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KW(t,e){if(t){if(typeof t=="string")return j$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j$(t,e)}}function x$e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function b$e(t){if(Array.isArray(t))return j$(t)}function j$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ED(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function ie(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ED(Object(n),!0).forEach(function(r){Re(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ED(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Re(t,e,n){return e=qW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qW(t){var e=w$e(t,"string");return Td(e)=="symbol"?e:e+""}function w$e(t,e){if(Td(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Td(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var S$e={xAxis:["bottom","top"],yAxis:["left","right"]},C$e={width:"100%",height:"100%"},XW={x:0,y:0};function oy(t){return t}var $$e=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},k$e=function(e,n,r,o){var i=n.find(function(c){return c&&c.index===r});if(i){if(e==="horizontal")return{x:i.coordinate,y:o.y};if(e==="vertical")return{x:o.x,y:i.coordinate};if(e==="centric"){var s=i.coordinate,a=o.radius;return ie(ie(ie({},o),jn(o.cx,o.cy,a,s)),{},{angle:s,radius:a})}var l=i.coordinate,u=o.angle;return ie(ie(ie({},o),jn(o.cx,o.cy,l,u)),{},{angle:u,radius:l})}return XW},ob=function(e,n){var r=n.graphicalItems,o=n.dataStartIndex,i=n.dataEndIndex,s=(r??[]).reduce(function(a,l){var u=l.props.data;return u&&u.length?[].concat(Ed(a),Ed(u)):a},[]);return s.length>0?s:e&&e.length&&ge(o)&&ge(i)?e.slice(o,i+1):[]};function YW(t){return t==="number"?[0,"auto"]:void 0}var W$=function(e,n,r,o){var i=e.graphicalItems,s=e.tooltipAxis,a=ob(n,e);return r<0||!i||!i.length||r>=a.length?null:i.reduce(function(l,u){var c,d=(c=u.props.data)!==null&&c!==void 0?c:n;d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1));var f;if(s.dataKey&&!s.allowDuplicatedCategory){var h=d===void 0?a:d;f=mv(h,s.dataKey,o)}else f=d&&d[r]||a[r];return f?[].concat(Ed(l),[G4(u,f)]):l},[])},ND=function(e,n,r,o){var i=o||{x:e.chartX,y:e.chartY},s=$$e(i,r),a=e.orderedTooltipTicks,l=e.tooltipAxis,u=e.tooltipTicks,c=zye(s,a,u,l);if(c>=0&&u){var d=u[c]&&u[c].value,f=W$(e,n,c,d),h=k$e(r,a,c,i);return{activeTooltipIndex:c,activeLabel:d,activePayload:f,activeCoordinate:h}}return null},I$e=function(e,n){var r=n.axes,o=n.graphicalItems,i=n.axisType,s=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.layout,d=e.children,f=e.stackOffset,h=W4(c,i);return r.reduce(function(p,m){var g,y=m.type.defaultProps!==void 0?ie(ie({},m.type.defaultProps),m.props):m.props,v=y.type,x=y.dataKey,b=y.allowDataOverflow,w=y.allowDuplicatedCategory,S=y.scale,$=y.ticks,C=y.includeHidden,k=y[s];if(p[k])return p;var I=ob(e.data,{graphicalItems:o.filter(function(z){var U,Z=s in z.props?z.props[s]:(U=z.type.defaultProps)===null||U===void 0?void 0:U[s];return Z===k}),dataStartIndex:l,dataEndIndex:u}),T=I.length,E,_,N;ZCe(y.domain,b,v)&&(E=i$(y.domain,null,b),h&&(v==="number"||S!=="auto")&&(N=yh(I,x,"category")));var P=YW(v);if(!E||E.length===0){var F,L=(F=y.domain)!==null&&F!==void 0?F:P;if(x){if(E=yh(I,x,v),v==="category"&&h){var A=Tne(E);w&&A?(_=E,E=e0(0,T)):w||(E=aP(L,E,m).reduce(function(z,U){return z.indexOf(U)>=0?z:[].concat(Ed(z),[U])},[]))}else if(v==="category")w?E=E.filter(function(z){return z!==""&&!qe(z)}):E=aP(L,E,m).reduce(function(z,U){return z.indexOf(U)>=0||U===""||qe(U)?z:[].concat(Ed(z),[U])},[]);else if(v==="number"){var O=Gye(I,o.filter(function(z){var U,Z,te=s in z.props?z.props[s]:(U=z.type.defaultProps)===null||U===void 0?void 0:U[s],se="hide"in z.props?z.props.hide:(Z=z.type.defaultProps)===null||Z===void 0?void 0:Z.hide;return te===k&&(C||!se)}),x,i,c);O&&(E=O)}h&&(v==="number"||S!=="auto")&&(N=yh(I,x,"category"))}else h?E=e0(0,T):a&&a[k]&&a[k].hasStack&&v==="number"?E=f==="expand"?[0,1]:U4(a[k].stackGroups,l,u):E=j4(I,o.filter(function(z){var U=s in z.props?z.props[s]:z.type.defaultProps[s],Z="hide"in z.props?z.props.hide:z.type.defaultProps.hide;return U===k&&(C||!Z)}),v,c,!0);if(v==="number")E=B$(d,E,k,i,$),L&&(E=i$(L,E,b));else if(v==="category"&&L){var j=L,V=E.every(function(z){return j.indexOf(z)>=0});V&&(E=j)}}return ie(ie({},p),{},Re({},k,ie(ie({},y),{},{axisType:i,domain:E,categoricalDomain:N,duplicateDomain:_,originalDomain:(g=y.domain)!==null&&g!==void 0?g:P,isCategorical:h,layout:c})))},{})},T$e=function(e,n){var r=n.graphicalItems,o=n.Axis,i=n.axisType,s=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.layout,d=e.children,f=ob(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:u}),h=f.length,p=W4(c,i),m=-1;return r.reduce(function(g,y){var v=y.type.defaultProps!==void 0?ie(ie({},y.type.defaultProps),y.props):y.props,x=v[s],b=YW("number");if(!g[x]){m++;var w;return p?w=e0(0,h):a&&a[x]&&a[x].hasStack?(w=U4(a[x].stackGroups,l,u),w=B$(d,w,x,i)):(w=i$(b,j4(f,r.filter(function(S){var $,C,k=s in S.props?S.props[s]:($=S.type.defaultProps)===null||$===void 0?void 0:$[s],I="hide"in S.props?S.props.hide:(C=S.type.defaultProps)===null||C===void 0?void 0:C.hide;return k===x&&!I}),"number",c),o.defaultProps.allowDataOverflow),w=B$(d,w,x,i)),ie(ie({},g),{},Re({},x,ie(ie({axisType:i},o.defaultProps),{},{hide:!0,orientation:Do(S$e,"".concat(i,".").concat(m%2),null),domain:w,originalDomain:b,isCategorical:p,layout:c})))}return g},{})},E$e=function(e,n){var r=n.axisType,o=r===void 0?"xAxis":r,i=n.AxisComp,s=n.graphicalItems,a=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.children,d="".concat(o,"Id"),f=Mo(c,i),h={};return f&&f.length?h=I$e(e,{axes:f,graphicalItems:s,axisType:o,axisIdKey:d,stackGroups:a,dataStartIndex:l,dataEndIndex:u}):s&&s.length&&(h=T$e(e,{Axis:i,graphicalItems:s,axisType:o,axisIdKey:d,stackGroups:a,dataStartIndex:l,dataEndIndex:u})),h},N$e=function(e){var n=ma(e),r=Is(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:dT(r,function(o){return o.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Gv(n,r)}},AD=function(e){var n=e.children,r=e.defaultShowTooltip,o=Qr(n,vd),i=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),o&&o.props&&(o.props.startIndex>=0&&(i=o.props.startIndex),o.props.endIndex>=0&&(s=o.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!r}},A$e=function(e){return!e||!e.length?!1:e.some(function(n){var r=Ns(n&&n.type);return r&&r.indexOf("Bar")>=0})},OD=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},O$e=function(e,n){var r=e.props,o=e.graphicalItems,i=e.xAxisMap,s=i===void 0?{}:i,a=e.yAxisMap,l=a===void 0?{}:a,u=r.width,c=r.height,d=r.children,f=r.margin||{},h=Qr(d,vd),p=Qr(d,Mc),m=Object.keys(l).reduce(function(w,S){var $=l[S],C=$.orientation;return!$.mirror&&!$.hide?ie(ie({},w),{},Re({},C,w[C]+$.width)):w},{left:f.left||0,right:f.right||0}),g=Object.keys(s).reduce(function(w,S){var $=s[S],C=$.orientation;return!$.mirror&&!$.hide?ie(ie({},w),{},Re({},C,Do(w,"".concat(C))+$.height)):w},{top:f.top||0,bottom:f.bottom||0}),y=ie(ie({},g),m),v=y.bottom;h&&(y.bottom+=h.props.height||vd.defaultProps.height),p&&n&&(y=Vye(y,o,r,n));var x=u-y.left-y.right,b=c-y.top-y.bottom;return ie(ie({brushBottom:v},y),{},{width:Math.max(x,0),height:Math.max(b,0)})},_$e=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},QW=function(e){var n=e.chartName,r=e.GraphicalChild,o=e.defaultTooltipEventType,i=o===void 0?"axis":o,s=e.validateTooltipEventTypes,a=s===void 0?["axis"]:s,l=e.axisComponents,u=e.legendContent,c=e.formatAxisMap,d=e.defaultProps,f=function(y,v){var x=v.graphicalItems,b=v.stackGroups,w=v.offset,S=v.updateId,$=v.dataStartIndex,C=v.dataEndIndex,k=y.barSize,I=y.layout,T=y.barGap,E=y.barCategoryGap,_=y.maxBarSize,N=OD(I),P=N.numericAxisName,F=N.cateAxisName,L=A$e(x),A=[];return x.forEach(function(O,j){var V=ob(y.data,{graphicalItems:[O],dataStartIndex:$,dataEndIndex:C}),z=O.type.defaultProps!==void 0?ie(ie({},O.type.defaultProps),O.props):O.props,U=z.dataKey,Z=z.maxBarSize,te=z["".concat(P,"Id")],se=z["".concat(F,"Id")],ue={},ce=l.reduce(function(mt,Ye){var Ot=v["".concat(Ye.axisType,"Map")],rt=z["".concat(Ye.axisType,"Id")];Ot&&Ot[rt]||Ye.axisType==="zAxis"||yu();var _t=Ot[rt];return ie(ie({},mt),{},Re(Re({},Ye.axisType,_t),"".concat(Ye.axisType,"Ticks"),Is(_t)))},ue),Y=ce[F],le=ce["".concat(F,"Ticks")],oe=b&&b[te]&&b[te].hasStack&&rve(O,b[te].stackGroups),J=Ns(O.type).indexOf("Bar")>=0,be=Gv(Y,le),me=[],ve=L&&jye({barSize:k,stackGroups:b,totalSize:_$e(ce,F)});if(J){var pe,Ee,Ce=qe(Z)?_:Z,De=(pe=(Ee=Gv(Y,le,!0))!==null&&Ee!==void 0?Ee:Ce)!==null&&pe!==void 0?pe:0;me=Wye({barGap:T,barCategoryGap:E,bandSize:De!==be?De:be,sizeList:ve[se],maxBarSize:Ce}),De!==be&&(me=me.map(function(mt){return ie(ie({},mt),{},{position:ie(ie({},mt.position),{},{offset:mt.position.offset-De/2})})}))}var Me=O&&O.type&&O.type.getComposedData;Me&&A.push({props:ie(ie({},Me(ie(ie({},ce),{},{displayedData:V,props:y,dataKey:U,item:O,bandSize:be,barPosition:me,offset:w,stackedData:oe,layout:I,dataStartIndex:$,dataEndIndex:C}))),{},Re(Re(Re({key:O.key||"item-".concat(j)},P,ce[P]),F,ce[F]),"animationId",S)),childIndex:zne(O,y.children),item:O})}),A},h=function(y,v){var x=y.props,b=y.dataStartIndex,w=y.dataEndIndex,S=y.updateId;if(!e_({props:x}))return null;var $=x.children,C=x.layout,k=x.stackOffset,I=x.data,T=x.reverseStackOrder,E=OD(C),_=E.numericAxisName,N=E.cateAxisName,P=Mo($,r),F=eve(I,P,"".concat(_,"Id"),"".concat(N,"Id"),k,T),L=l.reduce(function(z,U){var Z="".concat(U.axisType,"Map");return ie(ie({},z),{},Re({},Z,E$e(x,ie(ie({},U),{},{graphicalItems:P,stackGroups:U.axisType===_&&F,dataStartIndex:b,dataEndIndex:w}))))},{}),A=O$e(ie(ie({},L),{},{props:x,graphicalItems:P}),v==null?void 0:v.legendBBox);Object.keys(L).forEach(function(z){L[z]=c(x,L[z],A,z.replace("Map",""),n)});var O=L["".concat(N,"Map")],j=N$e(O),V=f(x,ie(ie({},L),{},{dataStartIndex:b,dataEndIndex:w,updateId:S,graphicalItems:P,stackGroups:F,offset:A}));return ie(ie({formattedGraphicalItems:V,graphicalItems:P,offset:A,stackGroups:F},j),L)},p=function(g){function y(v){var x,b,w;return d$e(this,y),w=p$e(this,y,[v]),Re(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Re(w,"accessibilityManager",new QCe),Re(w,"handleLegendBBoxUpdate",function(S){if(S){var $=w.state,C=$.dataStartIndex,k=$.dataEndIndex,I=$.updateId;w.setState(ie({legendBBox:S},h({props:w.props,dataStartIndex:C,dataEndIndex:k,updateId:I},ie(ie({},w.state),{},{legendBBox:S}))))}}),Re(w,"handleReceiveSyncEvent",function(S,$,C){if(w.props.syncId===S){if(C===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent($)}}),Re(w,"handleBrushChange",function(S){var $=S.startIndex,C=S.endIndex;if($!==w.state.dataStartIndex||C!==w.state.dataEndIndex){var k=w.state.updateId;w.setState(function(){return ie({dataStartIndex:$,dataEndIndex:C},h({props:w.props,dataStartIndex:$,dataEndIndex:C,updateId:k},w.state))}),w.triggerSyncEvent({dataStartIndex:$,dataEndIndex:C})}}),Re(w,"handleMouseEnter",function(S){var $=w.getMouseInfo(S);if($){var C=ie(ie({},$),{},{isTooltipActive:!0});w.setState(C),w.triggerSyncEvent(C);var k=w.props.onMouseEnter;He(k)&&k(C,S)}}),Re(w,"triggeredAfterMouseMove",function(S){var $=w.getMouseInfo(S),C=$?ie(ie({},$),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(C),w.triggerSyncEvent(C);var k=w.props.onMouseMove;He(k)&&k(C,S)}),Re(w,"handleItemMouseEnter",function(S){w.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),Re(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),Re(w,"handleMouseMove",function(S){S.persist(),w.throttleTriggeredAfterMouseMove(S)}),Re(w,"handleMouseLeave",function(S){w.throttleTriggeredAfterMouseMove.cancel();var $={isTooltipActive:!1};w.setState($),w.triggerSyncEvent($);var C=w.props.onMouseLeave;He(C)&&C($,S)}),Re(w,"handleOuterEvent",function(S){var $=Bne(S),C=Do(w.props,"".concat($));if($&&He(C)){var k,I;/.*touch.*/i.test($)?I=w.getMouseInfo(S.changedTouches[0]):I=w.getMouseInfo(S),C((k=I)!==null&&k!==void 0?k:{},S)}}),Re(w,"handleClick",function(S){var $=w.getMouseInfo(S);if($){var C=ie(ie({},$),{},{isTooltipActive:!0});w.setState(C),w.triggerSyncEvent(C);var k=w.props.onClick;He(k)&&k(C,S)}}),Re(w,"handleMouseDown",function(S){var $=w.props.onMouseDown;if(He($)){var C=w.getMouseInfo(S);$(C,S)}}),Re(w,"handleMouseUp",function(S){var $=w.props.onMouseUp;if(He($)){var C=w.getMouseInfo(S);$(C,S)}}),Re(w,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),Re(w,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&w.handleMouseDown(S.changedTouches[0])}),Re(w,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&w.handleMouseUp(S.changedTouches[0])}),Re(w,"handleDoubleClick",function(S){var $=w.props.onDoubleClick;if(He($)){var C=w.getMouseInfo(S);$(C,S)}}),Re(w,"handleContextMenu",function(S){var $=w.props.onContextMenu;if(He($)){var C=w.getMouseInfo(S);$(C,S)}}),Re(w,"triggerSyncEvent",function(S){w.props.syncId!==void 0&&Ww.emit(Vw,w.props.syncId,S,w.eventEmitterSymbol)}),Re(w,"applySyncEvent",function(S){var $=w.props,C=$.layout,k=$.syncMethod,I=w.state.updateId,T=S.dataStartIndex,E=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)w.setState(ie({dataStartIndex:T,dataEndIndex:E},h({props:w.props,dataStartIndex:T,dataEndIndex:E,updateId:I},w.state)));else if(S.activeTooltipIndex!==void 0){var _=S.chartX,N=S.chartY,P=S.activeTooltipIndex,F=w.state,L=F.offset,A=F.tooltipTicks;if(!L)return;if(typeof k=="function")P=k(A,S);else if(k==="value"){P=-1;for(var O=0;O<A.length;O++)if(A[O].value===S.activeLabel){P=O;break}}var j=ie(ie({},L),{},{x:L.left,y:L.top}),V=Math.min(_,j.x+j.width),z=Math.min(N,j.y+j.height),U=A[P]&&A[P].value,Z=W$(w.state,w.props.data,P),te=A[P]?{x:C==="horizontal"?A[P].coordinate:V,y:C==="horizontal"?z:A[P].coordinate}:XW;w.setState(ie(ie({},S),{},{activeLabel:U,activeCoordinate:te,activePayload:Z,activeTooltipIndex:P}))}else w.setState(S)}),Re(w,"renderCursor",function(S){var $,C=w.state,k=C.isTooltipActive,I=C.activeCoordinate,T=C.activePayload,E=C.offset,_=C.activeTooltipIndex,N=C.tooltipAxisBandSize,P=w.getTooltipEventType(),F=($=S.props.active)!==null&&$!==void 0?$:k,L=w.props.layout,A=S.key||"_recharts-cursor";return B.createElement(o$e,{key:A,activeCoordinate:I,activePayload:T,activeTooltipIndex:_,chartName:n,element:S,isActive:F,layout:L,offset:E,tooltipAxisBandSize:N,tooltipEventType:P})}),Re(w,"renderPolarAxis",function(S,$,C){var k=Do(S,"type.axisType"),I=Do(w.state,"".concat(k,"Map")),T=S.type.defaultProps,E=T!==void 0?ie(ie({},T),S.props):S.props,_=I&&I[E["".concat(k,"Id")]];return R.cloneElement(S,ie(ie({},_),{},{className:Ze(k,_.className),key:S.key||"".concat($,"-").concat(C),ticks:Is(_,!0)}))}),Re(w,"renderPolarGrid",function(S){var $=S.props,C=$.radialLines,k=$.polarAngles,I=$.polarRadius,T=w.state,E=T.radiusAxisMap,_=T.angleAxisMap,N=ma(E),P=ma(_),F=P.cx,L=P.cy,A=P.innerRadius,O=P.outerRadius;return R.cloneElement(S,{polarAngles:Array.isArray(k)?k:Is(P,!0).map(function(j){return j.coordinate}),polarRadius:Array.isArray(I)?I:Is(N,!0).map(function(j){return j.coordinate}),cx:F,cy:L,innerRadius:A,outerRadius:O,key:S.key||"polar-grid",radialLines:C})}),Re(w,"renderLegend",function(){var S=w.state.formattedGraphicalItems,$=w.props,C=$.children,k=$.width,I=$.height,T=w.props.margin||{},E=k-(T.left||0)-(T.right||0),_=B4({children:C,formattedGraphicalItems:S,legendWidth:E,legendContent:u});if(!_)return null;var N=_.item,P=TD(_,i$e);return R.cloneElement(N,ie(ie({},P),{},{chartWidth:k,chartHeight:I,margin:T,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),Re(w,"renderTooltip",function(){var S,$=w.props,C=$.children,k=$.accessibilityLayer,I=Qr(C,So);if(!I)return null;var T=w.state,E=T.isTooltipActive,_=T.activeCoordinate,N=T.activePayload,P=T.activeLabel,F=T.offset,L=(S=I.props.active)!==null&&S!==void 0?S:E;return R.cloneElement(I,{viewBox:ie(ie({},F),{},{x:F.left,y:F.top}),active:L,label:P,payload:L?N:[],coordinate:_,accessibilityLayer:k})}),Re(w,"renderBrush",function(S){var $=w.props,C=$.margin,k=$.data,I=w.state,T=I.offset,E=I.dataStartIndex,_=I.dataEndIndex,N=I.updateId;return R.cloneElement(S,{key:S.key||"_recharts-brush",onChange:Jg(w.handleBrushChange,S.props.onChange),data:k,x:ge(S.props.x)?S.props.x:T.left,y:ge(S.props.y)?S.props.y:T.top+T.height+T.brushBottom-(C.bottom||0),width:ge(S.props.width)?S.props.width:T.width,startIndex:E,endIndex:_,updateId:"brush-".concat(N)})}),Re(w,"renderReferenceElement",function(S,$,C){if(!S)return null;var k=w,I=k.clipPathId,T=w.state,E=T.xAxisMap,_=T.yAxisMap,N=T.offset,P=S.type.defaultProps||{},F=S.props,L=F.xAxisId,A=L===void 0?P.xAxisId:L,O=F.yAxisId,j=O===void 0?P.yAxisId:O;return R.cloneElement(S,{key:S.key||"".concat($,"-").concat(C),xAxis:E[A],yAxis:_[j],viewBox:{x:N.left,y:N.top,width:N.width,height:N.height},clipPathId:I})}),Re(w,"renderActivePoints",function(S){var $=S.item,C=S.activePoint,k=S.basePoint,I=S.childIndex,T=S.isRange,E=[],_=$.props.key,N=$.item.type.defaultProps!==void 0?ie(ie({},$.item.type.defaultProps),$.item.props):$.item.props,P=N.activeDot,F=N.dataKey,L=ie(ie({index:I,dataKey:F,cx:C.x,cy:C.y,r:4,fill:BT($.item),strokeWidth:2,stroke:"#fff",payload:C.payload,value:C.value},Qe(P,!1)),gv(P));return E.push(y.renderActiveDot(P,L,"".concat(_,"-activePoint-").concat(I))),k?E.push(y.renderActiveDot(P,ie(ie({},L),{},{cx:k.x,cy:k.y}),"".concat(_,"-basePoint-").concat(I))):T&&E.push(null),E}),Re(w,"renderGraphicChild",function(S,$,C){var k=w.filterFormatItem(S,$,C);if(!k)return null;var I=w.getTooltipEventType(),T=w.state,E=T.isTooltipActive,_=T.tooltipAxis,N=T.activeTooltipIndex,P=T.activeLabel,F=w.props.children,L=Qr(F,So),A=k.props,O=A.points,j=A.isRange,V=A.baseLine,z=k.item.type.defaultProps!==void 0?ie(ie({},k.item.type.defaultProps),k.item.props):k.item.props,U=z.activeDot,Z=z.hide,te=z.activeBar,se=z.activeShape,ue=!!(!Z&&E&&L&&(U||te||se)),ce={};I!=="axis"&&L&&L.props.trigger==="click"?ce={onClick:Jg(w.handleItemMouseEnter,S.props.onClick)}:I!=="axis"&&(ce={onMouseLeave:Jg(w.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:Jg(w.handleItemMouseEnter,S.props.onMouseEnter)});var Y=R.cloneElement(S,ie(ie({},k.props),ce));function le(Ye){return typeof _.dataKey=="function"?_.dataKey(Ye.payload):null}if(ue)if(N>=0){var oe,J;if(_.dataKey&&!_.allowDuplicatedCategory){var be=typeof _.dataKey=="function"?le:"payload.".concat(_.dataKey.toString());oe=mv(O,be,P),J=j&&V&&mv(V,be,P)}else oe=O==null?void 0:O[N],J=j&&V&&V[N];if(se||te){var me=S.props.activeIndex!==void 0?S.props.activeIndex:N;return[R.cloneElement(S,ie(ie(ie({},k.props),ce),{},{activeIndex:me})),null,null]}if(!qe(oe))return[Y].concat(Ed(w.renderActivePoints({item:k,activePoint:oe,basePoint:J,childIndex:N,isRange:j})))}else{var ve,pe=(ve=w.getItemByXY(w.state.activeCoordinate))!==null&&ve!==void 0?ve:{graphicalItem:Y},Ee=pe.graphicalItem,Ce=Ee.item,De=Ce===void 0?S:Ce,Me=Ee.childIndex,mt=ie(ie(ie({},k.props),ce),{},{activeIndex:Me});return[R.cloneElement(De,mt),null,null]}return j?[Y,null,null]:[Y,null]}),Re(w,"renderCustomized",function(S,$,C){return R.cloneElement(S,ie(ie({key:"recharts-customized-".concat(C)},w.props),w.state))}),Re(w,"renderMap",{CartesianGrid:{handler:oy,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:oy},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:oy},YAxis:{handler:oy},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((x=v.id)!==null&&x!==void 0?x:Xp("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=Bj(w.triggeredAfterMouseMove,(b=v.throttleDelay)!==null&&b!==void 0?b:1e3/60),w.state={},w}return y$e(y,g),h$e(y,[{key:"componentDidMount",value:function(){var x,b;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(x=this.props.margin.left)!==null&&x!==void 0?x:0,top:(b=this.props.margin.top)!==null&&b!==void 0?b:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var x=this.props,b=x.children,w=x.data,S=x.height,$=x.layout,C=Qr(b,So);if(C){var k=C.props.defaultIndex;if(!(typeof k!="number"||k<0||k>this.state.tooltipTicks.length-1)){var I=this.state.tooltipTicks[k]&&this.state.tooltipTicks[k].value,T=W$(this.state,w,k,I),E=this.state.tooltipTicks[k].coordinate,_=(this.state.offset.top+S)/2,N=$==="horizontal",P=N?{x:E,y:_}:{y:E,x:_},F=this.state.formattedGraphicalItems.find(function(A){var O=A.item;return O.type.name==="Scatter"});F&&(P=ie(ie({},P),F.props.points[k].tooltipPosition),T=F.props.points[k].tooltipPayload);var L={activeTooltipIndex:k,isTooltipActive:!0,activeLabel:I,activePayload:T,activeCoordinate:P};this.setState(L),this.renderCursor(C),this.accessibilityManager.setIndex(k)}}}},{key:"getSnapshotBeforeUpdate",value:function(x,b){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==b.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==x.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==x.margin){var w,S;this.accessibilityManager.setDetails({offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(x){bC([Qr(x.children,So)],[Qr(this.props.children,So)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var x=Qr(this.props.children,So);if(x&&typeof x.props.shared=="boolean"){var b=x.props.shared?"axis":"item";return a.indexOf(b)>=0?b:i}return i}},{key:"getMouseInfo",value:function(x){if(!this.container)return null;var b=this.container,w=b.getBoundingClientRect(),S=fhe(w),$={chartX:Math.round(x.pageX-S.left),chartY:Math.round(x.pageY-S.top)},C=w.width/b.offsetWidth||1,k=this.inRange($.chartX,$.chartY,C);if(!k)return null;var I=this.state,T=I.xAxisMap,E=I.yAxisMap,_=this.getTooltipEventType(),N=ND(this.state,this.props.data,this.props.layout,k);if(_!=="axis"&&T&&E){var P=ma(T).scale,F=ma(E).scale,L=P&&P.invert?P.invert($.chartX):null,A=F&&F.invert?F.invert($.chartY):null;return ie(ie({},$),{},{xValue:L,yValue:A},N)}return N?ie(ie({},$),N):null}},{key:"inRange",value:function(x,b){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,$=x/w,C=b/w;if(S==="horizontal"||S==="vertical"){var k=this.state.offset,I=$>=k.left&&$<=k.left+k.width&&C>=k.top&&C<=k.top+k.height;return I?{x:$,y:C}:null}var T=this.state,E=T.angleAxisMap,_=T.radiusAxisMap;if(E&&_){var N=ma(E);return cP({x:$,y:C},N)}return null}},{key:"parseEventsOfWrapper",value:function(){var x=this.props.children,b=this.getTooltipEventType(),w=Qr(x,So),S={};w&&b==="axis"&&(w.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var $=gv(this.props,this.handleOuterEvent);return ie(ie({},$),S)}},{key:"addListener",value:function(){Ww.on(Vw,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Ww.removeListener(Vw,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(x,b,w){for(var S=this.state.formattedGraphicalItems,$=0,C=S.length;$<C;$++){var k=S[$];if(k.item===x||k.props.key===x.key||b===Ns(k.item.type)&&w===k.childIndex)return k}return null}},{key:"renderClipPath",value:function(){var x=this.clipPathId,b=this.state.offset,w=b.left,S=b.top,$=b.height,C=b.width;return B.createElement("defs",null,B.createElement("clipPath",{id:x},B.createElement("rect",{x:w,y:S,height:$,width:C})))}},{key:"getXScales",value:function(){var x=this.state.xAxisMap;return x?Object.entries(x).reduce(function(b,w){var S=ID(w,2),$=S[0],C=S[1];return ie(ie({},b),{},Re({},$,C.scale))},{}):null}},{key:"getYScales",value:function(){var x=this.state.yAxisMap;return x?Object.entries(x).reduce(function(b,w){var S=ID(w,2),$=S[0],C=S[1];return ie(ie({},b),{},Re({},$,C.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(x){var b;return(b=this.state.xAxisMap)===null||b===void 0||(b=b[x])===null||b===void 0?void 0:b.scale}},{key:"getYScaleByAxisId",value:function(x){var b;return(b=this.state.yAxisMap)===null||b===void 0||(b=b[x])===null||b===void 0?void 0:b.scale}},{key:"getItemByXY",value:function(x){var b=this.state,w=b.formattedGraphicalItems,S=b.activeItem;if(w&&w.length)for(var $=0,C=w.length;$<C;$++){var k=w[$],I=k.props,T=k.item,E=T.type.defaultProps!==void 0?ie(ie({},T.type.defaultProps),T.props):T.props,_=Ns(T.type);if(_==="Bar"){var N=(I.data||[]).find(function(A){return qxe(x,A)});if(N)return{graphicalItem:k,payload:N}}else if(_==="RadialBar"){var P=(I.data||[]).find(function(A){return cP(x,A)});if(P)return{graphicalItem:k,payload:P}}else if(Yx(k,S)||Qx(k,S)||yp(k,S)){var F=Qbe({graphicalItem:k,activeTooltipItem:S,itemData:E.data}),L=E.activeIndex===void 0?F:E.activeIndex;return{graphicalItem:ie(ie({},k),{},{childIndex:L}),payload:yp(k,S)?E.data[F]:k.props.data[F]}}}return null}},{key:"render",value:function(){var x=this;if(!e_(this))return null;var b=this.props,w=b.children,S=b.className,$=b.width,C=b.height,k=b.style,I=b.compact,T=b.title,E=b.desc,_=TD(b,s$e),N=Qe(_,!1);if(I)return B.createElement(lD,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},B.createElement(SC,$c({},N,{width:$,height:C,title:T,desc:E}),this.renderClipPath(),n_(w,this.renderMap)));if(this.props.accessibilityLayer){var P,F;N.tabIndex=(P=this.props.tabIndex)!==null&&P!==void 0?P:0,N.role=(F=this.props.role)!==null&&F!==void 0?F:"application",N.onKeyDown=function(A){x.accessibilityManager.keyboardEvent(A)},N.onFocus=function(){x.accessibilityManager.focus()}}var L=this.parseEventsOfWrapper();return B.createElement(lD,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},B.createElement("div",$c({className:Ze("recharts-wrapper",S),style:ie({position:"relative",cursor:"default",width:$,height:C},k)},L,{ref:function(O){x.container=O}}),B.createElement(SC,$c({},N,{width:$,height:C,title:T,desc:E,style:C$e}),this.renderClipPath(),n_(w,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(R.Component);Re(p,"displayName",n),Re(p,"defaultProps",ie({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),Re(p,"getDerivedStateFromProps",function(g,y){var v=g.dataKey,x=g.data,b=g.children,w=g.width,S=g.height,$=g.layout,C=g.stackOffset,k=g.margin,I=y.dataStartIndex,T=y.dataEndIndex;if(y.updateId===void 0){var E=AD(g);return ie(ie(ie({},E),{},{updateId:0},h(ie(ie({props:g},E),{},{updateId:0}),y)),{},{prevDataKey:v,prevData:x,prevWidth:w,prevHeight:S,prevLayout:$,prevStackOffset:C,prevMargin:k,prevChildren:b})}if(v!==y.prevDataKey||x!==y.prevData||w!==y.prevWidth||S!==y.prevHeight||$!==y.prevLayout||C!==y.prevStackOffset||!Dc(k,y.prevMargin)){var _=AD(g),N={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},P=ie(ie({},ND(y,x,$)),{},{updateId:y.updateId+1}),F=ie(ie(ie({},_),N),P);return ie(ie(ie({},F),h(ie({props:g},F),y)),{},{prevDataKey:v,prevData:x,prevWidth:w,prevHeight:S,prevLayout:$,prevStackOffset:C,prevMargin:k,prevChildren:b})}if(!bC(b,y.prevChildren)){var L,A,O,j,V=Qr(b,vd),z=V&&(L=(A=V.props)===null||A===void 0?void 0:A.startIndex)!==null&&L!==void 0?L:I,U=V&&(O=(j=V.props)===null||j===void 0?void 0:j.endIndex)!==null&&O!==void 0?O:T,Z=z!==I||U!==T,te=!qe(x),se=te&&!Z?y.updateId:y.updateId+1;return ie(ie({updateId:se},h(ie(ie({props:g},y),{},{updateId:se,dataStartIndex:z,dataEndIndex:U}),y)),{},{prevChildren:b,dataStartIndex:z,dataEndIndex:U})}return null}),Re(p,"renderActiveDot",function(g,y,v){var x;return R.isValidElement(g)?x=R.cloneElement(g,y):He(g)?x=g(y):x=B.createElement(jT,y),B.createElement(on,{className:"recharts-active-dot",key:v},x)});var m=R.forwardRef(function(y,v){return B.createElement(p,$c({},y,{ref:v}))});return m.displayName=p.displayName,m},R$e=QW({chartName:"LineChart",GraphicalChild:nm,axisComponents:[{axisType:"xAxis",AxisComp:Bu},{axisType:"yAxis",AxisComp:zu}],formatAxisMap:mW}),ZW=QW({chartName:"BarChart",GraphicalChild:hl,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Bu},{axisType:"yAxis",AxisComp:zu}],formatAxisMap:mW});const P$e=({onTrainComplete:t,trainingProgress:e,trainingLoss:n,isTraining:r,onStartTraining:o})=>D.jsx("div",{className:"space-y-6",children:D.jsxs(Xa,{className:"border-border shadow-lg",children:[D.jsx(Ya,{children:D.jsxs("div",{className:"flex items-center gap-3",children:[D.jsx("div",{className:"p-3 rounded-lg bg-gradient-to-br from-primary to-secondary",children:D.jsx(iO,{className:"w-6 h-6 text-primary-foreground"})}),D.jsxs("div",{children:[D.jsx(Qa,{children:"Neural Network Training"}),D.jsx(hu,{children:"Deep learning model for deviation prediction"})]})]})}),D.jsxs(Za,{className:"space-y-6",children:[D.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[D.jsxs("div",{className:"p-4 rounded-lg bg-primary/5 border border-primary/20",children:[D.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[D.jsx(v7,{className:"w-4 h-4 text-primary"}),D.jsx("span",{className:"text-sm font-medium",children:"Architecture"})]}),D.jsx("p",{className:"text-2xl font-bold",children:"4 Layers"}),D.jsx("p",{className:"text-xs text-muted-foreground",children:"64→32→16→1 neurons"})]}),D.jsxs("div",{className:"p-4 rounded-lg bg-secondary/5 border border-secondary/20",children:[D.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[D.jsx(mB,{className:"w-4 h-4 text-secondary"}),D.jsx("span",{className:"text-sm font-medium",children:"Optimizer"})]}),D.jsx("p",{className:"text-2xl font-bold",children:"Adam"}),D.jsx("p",{className:"text-xs text-muted-foreground",children:"Learning rate: 0.001"})]}),D.jsxs("div",{className:"p-4 rounded-lg bg-accent/5 border border-accent/20",children:[D.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[D.jsx(iO,{className:"w-4 h-4 text-accent"}),D.jsx("span",{className:"text-sm font-medium",children:"Epochs"})]}),D.jsx("p",{className:"text-2xl font-bold",children:"50"}),D.jsx("p",{className:"text-xs text-muted-foreground",children:"With dropout layers"})]})]}),r&&D.jsxs("div",{className:"space-y-3",children:[D.jsxs("div",{className:"flex justify-between text-sm",children:[D.jsx("span",{className:"text-muted-foreground",children:"Training Progress"}),D.jsxs("span",{className:"font-medium",children:[e,"%"]})]}),D.jsx($z,{value:e,className:"h-2"})]}),n.length>0&&D.jsx("div",{className:"h-64",children:D.jsx(hT,{width:"100%",height:"100%",children:D.jsxs(R$e,{data:n,children:[D.jsx(rb,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),D.jsx(Bu,{dataKey:"epoch",stroke:"hsl(var(--muted-foreground))",label:{value:"Epoch",position:"insideBottom",offset:-5}}),D.jsx(zu,{stroke:"hsl(var(--muted-foreground))",label:{value:"Loss",angle:-90,position:"insideLeft"}}),D.jsx(So,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),D.jsx(nm,{type:"monotone",dataKey:"loss",stroke:"hsl(var(--primary))",strokeWidth:2,dot:!1})]})})}),D.jsx(BI,{onClick:o,disabled:r,variant:"gradient",size:"lg",className:"w-full",children:r?"Training in Progress...":"Start Training Model"})]})]})}),D$e=({metrics:t})=>{if(!t)return null;const e=[{name:"MAE",value:t.mae,color:"hsl(var(--primary))"},{name:"RMSE",value:t.rmse,color:"hsl(var(--secondary))"},{name:"R² Score",value:t.r2*100,color:"hsl(var(--accent))"}];return D.jsxs(Xa,{className:"border-border shadow-lg",children:[D.jsx(Ya,{children:D.jsxs("div",{className:"flex items-center gap-3",children:[D.jsx("div",{className:"p-3 rounded-lg bg-gradient-to-br from-secondary to-accent",children:D.jsx(k7,{className:"w-6 h-6 text-secondary-foreground"})}),D.jsxs("div",{children:[D.jsx(Qa,{children:"Model Performance"}),D.jsx(hu,{children:"Evaluation metrics on validation dataset"})]})]})}),D.jsxs(Za,{className:"space-y-6",children:[D.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[D.jsxs("div",{className:"p-4 rounded-lg bg-card border border-primary/30",children:[D.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[D.jsx(lO,{className:"w-4 h-4 text-primary"}),D.jsx("span",{className:"text-sm font-medium",children:"MAE"})]}),D.jsx("p",{className:"text-3xl font-bold text-primary",children:t.mae.toFixed(2)}),D.jsx("p",{className:"text-xs text-muted-foreground",children:"Mean Absolute Error"})]}),D.jsxs("div",{className:"p-4 rounded-lg bg-card border border-secondary/30",children:[D.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[D.jsx(lO,{className:"w-4 h-4 text-secondary"}),D.jsx("span",{className:"text-sm font-medium",children:"RMSE"})]}),D.jsx("p",{className:"text-3xl font-bold text-secondary",children:t.rmse.toFixed(2)}),D.jsx("p",{className:"text-xs text-muted-foreground",children:"Root Mean Squared Error"})]}),D.jsxs("div",{className:"p-4 rounded-lg bg-card border border-accent/30",children:[D.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[D.jsx(sO,{className:"w-4 h-4 text-accent"}),D.jsx("span",{className:"text-sm font-medium",children:"R² Score"})]}),D.jsxs("p",{className:"text-3xl font-bold text-accent",children:[(t.r2*100).toFixed(1),"%"]}),D.jsx("p",{className:"text-xs text-muted-foreground",children:"Coefficient of Determination"})]})]}),D.jsx("div",{className:"h-64",children:D.jsx(hT,{width:"100%",height:"100%",children:D.jsxs(ZW,{data:e,children:[D.jsx(rb,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),D.jsx(Bu,{dataKey:"name",stroke:"hsl(var(--muted-foreground))"}),D.jsx(zu,{stroke:"hsl(var(--muted-foreground))"}),D.jsx(So,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),D.jsx(hl,{dataKey:"value",fill:"hsl(var(--primary))",radius:[8,8,0,0]})]})})}),D.jsxs("div",{className:"p-4 rounded-lg bg-muted/50 border border-border",children:[D.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[D.jsx(sO,{className:"w-4 h-4 text-primary"}),"Model Interpretation"]}),D.jsxs("p",{className:"text-sm text-muted-foreground",children:["The R² score of ",(t.r2*100).toFixed(1),"% indicates that the model explains a significant portion of the variance in power generation deviations. Lower MAE (",t.mae.toFixed(2)," MW) and RMSE (",t.rmse.toFixed(2)," MW) values demonstrate accurate predictions with minimal error."]})]})]})]})},M$e=({importance:t})=>{var n,r;const e=["hsl(var(--primary))","hsl(var(--secondary))","hsl(var(--accent))","hsl(200 85% 55%)","hsl(180 75% 50%)","hsl(280 75% 60%)","hsl(160 70% 50%)","hsl(40 85% 55%)","hsl(330 75% 60%)"];return D.jsxs(Xa,{className:"border-border shadow-lg",children:[D.jsx(Ya,{children:D.jsxs("div",{className:"flex items-center gap-3",children:[D.jsx("div",{className:"p-3 rounded-lg bg-gradient-to-br from-accent to-primary",children:D.jsx(aO,{className:"w-6 h-6 text-accent-foreground"})}),D.jsxs("div",{children:[D.jsx(Qa,{children:"Feature Importance Analysis"}),D.jsx(hu,{children:"Key factors influencing deviation predictions"})]})]})}),D.jsxs(Za,{className:"space-y-6",children:[D.jsx("div",{className:"h-80",children:D.jsx(hT,{width:"100%",height:"100%",children:D.jsxs(ZW,{data:t,layout:"vertical",margin:{left:120},children:[D.jsx(rb,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),D.jsx(Bu,{type:"number",stroke:"hsl(var(--muted-foreground))"}),D.jsx(zu,{type:"category",dataKey:"feature",stroke:"hsl(var(--muted-foreground))",width:120}),D.jsx(So,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px"},formatter:o=>`${o.toFixed(2)}%`}),D.jsx(hl,{dataKey:"importance",radius:[0,8,8,0],children:t.map((o,i)=>D.jsx(pT,{fill:e[i%e.length]},`cell-${i}`))})]})})}),D.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[D.jsxs("div",{className:"p-4 rounded-lg bg-primary/5 border border-primary/20",children:[D.jsx("h4",{className:"font-semibold mb-2 text-primary",children:"Top Contributing Factor"}),D.jsxs("p",{className:"text-sm text-muted-foreground",children:[D.jsx("span",{className:"font-medium text-foreground",children:(n=t[0])==null?void 0:n.feature})," shows the strongest correlation with deviation, accounting for ",(r=t[0])==null?void 0:r.importance.toFixed(1),"% of predictive power."]})]}),D.jsxs("div",{className:"p-4 rounded-lg bg-secondary/5 border border-secondary/20",children:[D.jsx("h4",{className:"font-semibold mb-2 text-secondary",children:"Maintenance Impact"}),D.jsx("p",{className:"text-sm text-muted-foreground",children:"Planned and forced maintenance events significantly influence generation deviations, highlighting the importance of optimal scheduling."})]})]}),D.jsxs("div",{className:"p-4 rounded-lg bg-muted/50 border border-border",children:[D.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[D.jsx(aO,{className:"w-4 h-4 text-accent"}),"Interpretability Insights"]}),D.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[D.jsxs("li",{className:"flex items-start gap-2",children:[D.jsx("span",{className:"text-primary font-bold",children:"•"}),D.jsxs("span",{children:[D.jsx("strong",{children:"Excess/Shortfall"})," directly indicates deviation magnitude and direction"]})]}),D.jsxs("li",{className:"flex items-start gap-2",children:[D.jsx("span",{className:"text-secondary font-bold",children:"•"}),D.jsxs("span",{children:[D.jsx("strong",{children:"Actual vs Programme"})," difference reveals scheduling accuracy"]})]}),D.jsxs("li",{className:"flex items-start gap-2",children:[D.jsx("span",{className:"text-accent font-bold",children:"•"}),D.jsxs("span",{children:[D.jsx("strong",{children:"Maintenance factors"})," show predictable patterns for optimization"]})]})]})]})]})]})},F$e=()=>{const t=[{icon:mB,title:"Demand Forecasting",description:"Predict future power generation needs and optimize resource allocation based on historical deviation patterns.",color:"from-primary to-primary/70"},{icon:b7,title:"Maintenance Scheduling",description:"Optimize planned maintenance windows by understanding their impact on generation capacity and minimizing deviations.",color:"from-secondary to-secondary/70"},{icon:$7,title:"Grid Stability Management",description:"Maintain power grid stability by anticipating and preventing large deviations in generation output.",color:"from-accent to-accent/70"},{icon:x7,title:"Station Performance Analysis",description:"Identify underperforming power stations and implement targeted improvements to reduce deviation frequency.",color:"from-primary to-secondary"},{icon:w7,title:"Resource Optimization",description:"Allocate resources efficiently across multiple stations by predicting capacity requirements and maintenance needs.",color:"from-secondary to-accent"},{icon:gB,title:"Real-time Monitoring",description:"Enable proactive intervention when deviations are predicted, preventing cascading failures and outages.",color:"from-accent to-primary"}];return D.jsxs("div",{className:"space-y-6",children:[D.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-12",children:[D.jsxs("h2",{className:"text-4xl font-bold mb-4",children:["Real-World ",D.jsx("span",{className:"gradient-text",children:"Applications"})]}),D.jsx("p",{className:"text-lg text-muted-foreground",children:"Practical uses of power deviation forecasting across the energy sector"})]}),D.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map((e,n)=>{const r=e.icon;return D.jsxs(Xa,{className:"border-border shadow-lg hover:shadow-xl transition-all hover:-translate-y-1",children:[D.jsxs(Ya,{children:[D.jsx("div",{className:`w-12 h-12 rounded-lg bg-gradient-to-br ${e.color} flex items-center justify-center mb-3`,children:D.jsx(r,{className:"w-6 h-6 text-white"})}),D.jsx(Qa,{className:"text-xl",children:e.title})]}),D.jsx(Za,{children:D.jsx(hu,{className:"text-base leading-relaxed",children:e.description})})]},n)})}),D.jsxs(Xa,{className:"border-primary/30 bg-gradient-to-br from-primary/5 to-secondary/5 shadow-lg mt-8",children:[D.jsx(Ya,{children:D.jsx(Qa,{className:"text-2xl",children:"Industry Impact"})}),D.jsxs(Za,{className:"space-y-4",children:[D.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[D.jsxs("div",{className:"text-center",children:[D.jsx("div",{className:"text-4xl font-bold text-primary mb-2",children:"₹2000Cr+"}),D.jsx("p",{className:"text-sm text-muted-foreground",children:"Annual savings potential through optimized scheduling"})]}),D.jsxs("div",{className:"text-center",children:[D.jsx("div",{className:"text-4xl font-bold text-secondary mb-2",children:"95%"}),D.jsx("p",{className:"text-sm text-muted-foreground",children:"Improvement in grid stability with predictive management"})]}),D.jsxs("div",{className:"text-center",children:[D.jsx("div",{className:"text-4xl font-bold text-accent mb-2",children:"24/7"}),D.jsx("p",{className:"text-sm text-muted-foreground",children:"Continuous monitoring and real-time prediction capabilities"})]})]}),D.jsx("div",{className:"pt-4 border-t border-border",children:D.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"This predictive system enables power distribution companies, grid operators, and station managers to make data-driven decisions, reducing operational costs while improving reliability and customer satisfaction. By understanding deviation patterns, stakeholders can proactively address issues before they impact the grid."})})]})]})]})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L$e=1e-7,B$e=1e-4;class JW{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class QT{refCount(e){return Or("refCount")}incRef(e){return Or("incRef")}timerAvailable(){return!0}time(e){return Or("time")}read(e){return Or("read")}readSync(e){return Or("readSync")}readToGPU(e,n){return Or("readToGPU")}numDataIds(){return Or("numDataIds")}disposeData(e,n){return Or("disposeData")}write(e,n,r){return Or("write")}move(e,n,r,o,i){return Or("move")}createTensorFromGPUData(e,n,r){return Or("createTensorFromGPUData")}memory(){return Or("memory")}floatPrecision(){return Or("floatPrecision")}epsilon(){return this.floatPrecision()===32?L$e:B$e}dispose(){return Or("dispose")}}function Or(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z$e(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,ac(t,e,n)}function xu(t,e,n){return Math.max(t,Math.min(e,n))}function ZT(t){return t%2===0?t:t+1}function ac(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function j$e(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function M(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function JT(t,e,n=""){M(ut(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function eV(t){M(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function re(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function ut(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Nd(t){return t%1===0}function V$(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function Bc(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function _D(t,e=o=>0,n,r){return new Promise((o,i)=>{let s=0;const a=()=>{if(t()){o();return}s++;const l=e(s);if(n!=null&&s>=n){i();return}r!=null?r(a,l):setTimeout(a,l)};a()})}function tV(t,e){let n=1,r=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(t[i]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const o=t.slice();return o[r]=e/n,o}function Ue(t,e){const n=e.length;return t=t==null?e.map((r,o)=>o):[].concat(t),M(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),M(t.every(r=>Nd(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function pl(t,e){const n=[],r=[],o=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||o?null:Ue(e,t).sort();let s=0;for(let a=0;a<t.length;++a){if(i!=null){if(i[s]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(i[s]==null||i[s]>a)&&t[a]===1&&(n.push(t[a]),r.push(a)),i[s]<=a&&s++}t[a]!==1&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function Un(t,e){return Qt(t,e)}function Qt(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function W$e(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function V$e(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function nV(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function p0(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function U$e(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function rm(t){return typeof t=="string"||t instanceof String}function G$e(t){return typeof t=="boolean"}function U$(t){return typeof t=="number"}function af(t){return Array.isArray(t)?af(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":U$(t)?"float32":rm(t)?"string":G$e(t)?"bool":"float32"}function G$(t){return!!(t&&t.constructor&&t.call&&t.apply)}function H$(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function Ne(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function rV(t,e,n,r=!1){const o=new Array;if(e.length===1){const i=e[0]*(r?2:1);for(let s=0;s<i;s++)o[s]=n[t+s]}else{const i=e[0],s=e.slice(1),a=s.reduce((l,u)=>l*u)*(r?2:1);for(let l=0;l<i;l++)o[l]=rV(t+l*a,s,n,r)}return o}function bi(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((o,i)=>o*i)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return rV(0,t,e,n)}function H$e(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function eE(t,e){const n=Gn(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function Gn(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function oV(t,e){const n=t.reduce((r,o)=>r*o,1);if(e==null||e==="float32")return bi(t,new Float32Array(n));if(e==="int32")return bi(t,new Int32Array(n));if(e==="bool")return bi(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function Zs(t){t.forEach(e=>{M(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function Ji(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let o=0;o<t.length-1;++o)r+=n[o]*t[o];return r}function lf(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let o=0;o<r.length-1;++o)r[o]=Math.floor(t/n[o]),t-=r[o]*n[o];return r[r.length-1]=t,r}function tE(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RD="tfjsflags";class K$e{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=q$e,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(ee().getBool("IS_TEST")||ee().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const o=this.urlFlags[e];ee().getBool("IS_TEST")||ee().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${o}.`),this.set(e,o)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(tE(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);RD in e&&e[RD].split(",").forEach(r=>{const[o,i]=r.split(":");this.urlFlags[o]=Y$e(o,i)})}}function q$e(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(X$e(e,r[0],r[1]),r.join("="))),e}function X$e(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function Y$e(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function ee(){return iV}let iV=null;function Q$e(t){iV=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Gw;function sV(){if(Gw==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");Gw=t}return Gw}function Z$e(){const t=sV();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function nE(t,e){const n=Z$e();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const ib="Abs",om="Acos",im="Acosh",uf="Add",rE="AddN",oE="All",iE="Any",sb="ArgMax",ab="ArgMin",sm="Asin",am="Asinh",lm="Atan",um="Atanh",cm="Atan2",lb="AvgPool",sE="AvgPoolGrad",ub="AvgPool3D",aE="AvgPool3DGrad",cb="BatchMatMul",db="BatchToSpaceND",lE="Bincount",uE="BitwiseAnd",J$e="BroadcastTo",aV="BroadcastArgs",dm="Cast",fm="Ceil",hm="ClipByValue",cE="Complex",fb="ComplexAbs",hb="Concat",pb="Conv2D",dE="Conv2DBackpropFilter",mb="Conv2DBackpropInput",gb="Conv3D",fE="Conv3DBackpropFilterV2",hE="Conv3DBackpropInputV2",pm="Cos",mm="Cosh",pE="Cumprod",yb="Cumsum",mE="CropAndResize",gE="DenseBincount",yE="DepthToSpace",vb="DepthwiseConv2dNative",vE="DepthwiseConv2dNativeBackpropFilter",xE="DepthwiseConv2dNativeBackpropInput",lV="Diag",xb="Dilation2D",K$="Dilation2DBackpropInput",q$="Dilation2DBackpropFilter",eke="Draw",gm="RealDiv",bE="Einsum",ym="Elu",wE="EluGrad",vm="Erf",bb="Equal",xm="Exp",wb="ExpandDims",bm="Expm1",SE="FFT",CE="Fill",$E="FlipLeftRight",wm="Floor",Sm="FloorDiv",Sb="FusedBatchNorm",Cb="GatherV2",uV="GatherNd",$b="Greater",Cm="GreaterEqual",$m="Identity",kE="IFFT",IE="Imag",km="IsFinite",Im="IsInf",Tm="IsNan",kb="LeakyRelu",Ib="Less",Tb="LessEqual",cV="LinSpace",Em="Log",Nm="Log1p",Eb="LogicalAnd",Nb="LogicalNot",Ab="LogicalOr",tke="LogSoftmax",Ob="LRN",TE="LRNGrad",_b="Max",Am="Maximum",Rb="MaxPool",EE="MaxPoolGrad",Pb="MaxPool3D",NE="MaxPool3DGrad",dV="MaxPoolWithArgmax",Db="Mean",Mb="Min",Om="Minimum",Fb="MirrorPad",_m="Mod",fV="Multinomial",Rm="Multiply",Lb="Neg",Bb="NotEqual",AE="NonMaxSuppressionV3",OE="NonMaxSuppressionV4",_E="NonMaxSuppressionV5",zb="OnesLike",jb="OneHot",Wb="Pack",Vb="PadV2",Pm="Pow",Ub="Prelu",Gb="Prod",hV="RaggedGather",pV="RaggedRange",mV="RaggedTensorToTensor",RE="Range",PE="Real",Dm="Reciprocal",Mm="Relu",Hb="Reshape",Kb="ResizeNearestNeighbor",DE="ResizeNearestNeighborGrad",qb="ResizeBilinear",ME="ResizeBilinearGrad",Fm="Relu6",Xb="Reverse",Lm="Round",Bm="Rsqrt",gV="ScatterNd",yV="TensorScatterUpdate",vV="SearchSorted",Yb="Select",zm="Selu",Qb="Slice",jm="Sin",Wm="Sinh",Vm="Sign",Um="Sigmoid",Gm="Softplus",Hm="Sqrt",Zb="Sum",Jb="SpaceToBatchND",e1="SplitV",t1="Softmax",xV="SparseFillEmptyRows",bV="SparseReshape",wV="SparseSegmentMean",SV="SparseSegmentSum",CV="SparseToDense",Km="SquaredDifference",FE="Square",LE="StaticRegexReplace",BE="StridedSlice",$V="StringNGrams",kV="StringSplit",IV="StringToHashBucketFast",qm="Sub",Xm="Tan",Ym="Tanh",Qm="Tile",zE="TopK",jE="Transform",zc="Transpose",WE="Unique",n1="Unpack",r1="UnsortedSegmentSum",o1="ZerosLike",Zm="Step",nke="FromPixels",VE="RotateWithOffset",m0="_FusedMatMul",g0="FusedConv2D",TV="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eo(...t){ee().getBool("IS_TEST")||ee().getBool("PROD")||console.warn(...t)}function rke(...t){ee().getBool("IS_TEST")||ee().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y0=nE("kernelRegistry",()=>new Map),X$=nE("gradRegistry",()=>new Map);function PD(t,e){const n=NV(t,e);return y0.get(n)}function DD(t){return X$.get(t)}function MD(t){const e=y0.entries(),n=[];for(;;){const{done:r,value:o}=e.next();if(r)break;const[i,s]=o,[a]=i.split("_");a===t&&n.push(s)}return n}function EV(t){const{kernelName:e,backendName:n}=t,r=NV(e,n);y0.has(r)&&eo(`The kernel '${e}' for backend '${n}' is already registered`),y0.set(r,t)}function oke(t){const{kernelName:e}=t;X$.has(e)&&ee().getBool("DEBUG")&&eo(`Overriding the gradient for '${e}'`),X$.set(e,t)}function NV(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AV(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var OV=Nt,No=null;try{No=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Nt(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}Nt.prototype.__isLong__;Object.defineProperty(Nt.prototype,"__isLong__",{value:!0});function Kr(t){return(t&&t.__isLong__)===!0}Nt.isLong=Kr;var FD={},LD={};function ju(t,e){var n,r,o;return e?(t>>>=0,(o=0<=t&&t<256)&&(r=LD[t],r)?r:(n=At(t,(t|0)<0?-1:0,!0),o&&(LD[t]=n),n)):(t|=0,(o=-128<=t&&t<128)&&(r=FD[t],r)?r:(n=At(t,t<0?-1:0,!1),o&&(FD[t]=n),n))}Nt.fromInt=ju;function Ao(t,e){if(isNaN(t))return e?Gl:Oo;if(e){if(t<0)return Gl;if(t>=_V)return DV}else{if(t<=-zD)return Fr;if(t+1>=zD)return PV}return t<0?Ao(-t,e).neg():At(t%Ad|0,t/Ad|0,e)}Nt.fromNumber=Ao;function At(t,e,n){return new Nt(t,e,n)}Nt.fromBits=At;var v0=Math.pow;function UE(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return Oo;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return UE(t.substring(1),e,n).neg();for(var o=Ao(v0(n,8)),i=Oo,s=0;s<t.length;s+=8){var a=Math.min(8,t.length-s),l=parseInt(t.substring(s,s+a),n);if(a<8){var u=Ao(v0(n,a));i=i.mul(u).add(Ao(l))}else i=i.mul(o),i=i.add(Ao(l))}return i.unsigned=e,i}Nt.fromString=UE;function Oi(t,e){return typeof t=="number"?Ao(t,e):typeof t=="string"?UE(t,e):At(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}Nt.fromValue=Oi;var BD=65536,ike=1<<24,Ad=BD*BD,_V=Ad*Ad,zD=_V/2,jD=ju(ike),Oo=ju(0);Nt.ZERO=Oo;var Gl=ju(0,!0);Nt.UZERO=Gl;var kc=ju(1);Nt.ONE=kc;var RV=ju(1,!0);Nt.UONE=RV;var Y$=ju(-1);Nt.NEG_ONE=Y$;var PV=At(-1,2147483647,!1);Nt.MAX_VALUE=PV;var DV=At(-1,-1,!0);Nt.MAX_UNSIGNED_VALUE=DV;var Fr=At(0,-2147483648,!1);Nt.MIN_VALUE=Fr;var xe=Nt.prototype;xe.toInt=function(){return this.unsigned?this.low>>>0:this.low};xe.toNumber=function(){return this.unsigned?(this.high>>>0)*Ad+(this.low>>>0):this.high*Ad+(this.low>>>0)};xe.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Fr)){var n=Ao(e),r=this.div(n),o=r.mul(n).sub(this);return r.toString(e)+o.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var i=Ao(v0(e,6),this.unsigned),s=this,a="";;){var l=s.div(i),u=s.sub(l.mul(i)).toInt()>>>0,c=u.toString(e);if(s=l,s.isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}};xe.getHighBits=function(){return this.high};xe.getHighBitsUnsigned=function(){return this.high>>>0};xe.getLowBits=function(){return this.low};xe.getLowBitsUnsigned=function(){return this.low>>>0};xe.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Fr)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};xe.isZero=function(){return this.high===0&&this.low===0};xe.eqz=xe.isZero;xe.isNegative=function(){return!this.unsigned&&this.high<0};xe.isPositive=function(){return this.unsigned||this.high>=0};xe.isOdd=function(){return(this.low&1)===1};xe.isEven=function(){return(this.low&1)===0};xe.equals=function(e){return Kr(e)||(e=Oi(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};xe.eq=xe.equals;xe.notEquals=function(e){return!this.eq(e)};xe.neq=xe.notEquals;xe.ne=xe.notEquals;xe.lessThan=function(e){return this.comp(e)<0};xe.lt=xe.lessThan;xe.lessThanOrEqual=function(e){return this.comp(e)<=0};xe.lte=xe.lessThanOrEqual;xe.le=xe.lessThanOrEqual;xe.greaterThan=function(e){return this.comp(e)>0};xe.gt=xe.greaterThan;xe.greaterThanOrEqual=function(e){return this.comp(e)>=0};xe.gte=xe.greaterThanOrEqual;xe.ge=xe.greaterThanOrEqual;xe.compare=function(e){if(Kr(e)||(e=Oi(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};xe.comp=xe.compare;xe.negate=function(){return!this.unsigned&&this.eq(Fr)?Fr:this.not().add(kc)};xe.neg=xe.negate;xe.add=function(e){Kr(e)||(e=Oi(e));var n=this.high>>>16,r=this.high&65535,o=this.low>>>16,i=this.low&65535,s=e.high>>>16,a=e.high&65535,l=e.low>>>16,u=e.low&65535,c=0,d=0,f=0,h=0;return h+=i+u,f+=h>>>16,h&=65535,f+=o+l,d+=f>>>16,f&=65535,d+=r+a,c+=d>>>16,d&=65535,c+=n+s,c&=65535,At(f<<16|h,c<<16|d,this.unsigned)};xe.subtract=function(e){return Kr(e)||(e=Oi(e)),this.add(e.neg())};xe.sub=xe.subtract;xe.multiply=function(e){if(this.isZero())return Oo;if(Kr(e)||(e=Oi(e)),No){var n=No.mul(this.low,this.high,e.low,e.high);return At(n,No.get_high(),this.unsigned)}if(e.isZero())return Oo;if(this.eq(Fr))return e.isOdd()?Fr:Oo;if(e.eq(Fr))return this.isOdd()?Fr:Oo;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(jD)&&e.lt(jD))return Ao(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,o=this.high&65535,i=this.low>>>16,s=this.low&65535,a=e.high>>>16,l=e.high&65535,u=e.low>>>16,c=e.low&65535,d=0,f=0,h=0,p=0;return p+=s*c,h+=p>>>16,p&=65535,h+=i*c,f+=h>>>16,h&=65535,h+=s*u,f+=h>>>16,h&=65535,f+=o*c,d+=f>>>16,f&=65535,f+=i*u,d+=f>>>16,f&=65535,f+=s*l,d+=f>>>16,f&=65535,d+=r*c+o*u+i*l+s*a,d&=65535,At(h<<16|p,d<<16|f,this.unsigned)};xe.mul=xe.multiply;xe.divide=function(e){if(Kr(e)||(e=Oi(e)),e.isZero())throw Error("division by zero");if(No){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?No.div_u:No.div_s)(this.low,this.high,e.low,e.high);return At(n,No.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Gl:Oo;var r,o,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Gl;if(e.gt(this.shru(1)))return RV;i=Gl}else{if(this.eq(Fr)){if(e.eq(kc)||e.eq(Y$))return Fr;if(e.eq(Fr))return kc;var s=this.shr(1);return r=s.div(e).shl(1),r.eq(Oo)?e.isNegative()?kc:Y$:(o=this.sub(e.mul(r)),i=r.add(o.div(e)),i)}else if(e.eq(Fr))return this.unsigned?Gl:Oo;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=Oo}for(o=this;o.gte(e);){r=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:v0(2,a-48),u=Ao(r),c=u.mul(e);c.isNegative()||c.gt(o);)r-=l,u=Ao(r,this.unsigned),c=u.mul(e);u.isZero()&&(u=kc),i=i.add(u),o=o.sub(c)}return i};xe.div=xe.divide;xe.modulo=function(e){if(Kr(e)||(e=Oi(e)),No){var n=(this.unsigned?No.rem_u:No.rem_s)(this.low,this.high,e.low,e.high);return At(n,No.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};xe.mod=xe.modulo;xe.rem=xe.modulo;xe.not=function(){return At(~this.low,~this.high,this.unsigned)};xe.and=function(e){return Kr(e)||(e=Oi(e)),At(this.low&e.low,this.high&e.high,this.unsigned)};xe.or=function(e){return Kr(e)||(e=Oi(e)),At(this.low|e.low,this.high|e.high,this.unsigned)};xe.xor=function(e){return Kr(e)||(e=Oi(e)),At(this.low^e.low,this.high^e.high,this.unsigned)};xe.shiftLeft=function(e){return Kr(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?At(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):At(0,this.low<<e-32,this.unsigned)};xe.shl=xe.shiftLeft;xe.shiftRight=function(e){return Kr(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?At(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):At(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};xe.shr=xe.shiftRight;xe.shiftRightUnsigned=function(e){if(Kr(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var r=this.low;return At(r>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?At(n,0,this.unsigned):At(n>>>e-32,0,this.unsigned)};xe.shru=xe.shiftRightUnsigned;xe.shr_u=xe.shiftRightUnsigned;xe.toSigned=function(){return this.unsigned?At(this.low,this.high,!1):this};xe.toUnsigned=function(){return this.unsigned?this:At(this.low,this.high,!0)};xe.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};xe.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};xe.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};Nt.fromBytes=function(e,n,r){return r?Nt.fromBytesLE(e,n):Nt.fromBytesBE(e,n)};Nt.fromBytesLE=function(e,n){return new Nt(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};Nt.fromBytesBE=function(e,n){return new Nt(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const MV=ht(OV),ske=$F({__proto__:null,default:MV},[OV]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dl=MV||ske;function i1(t){return Dl.fromString(t,!0,16)}const FV=i1("c3a5c85c97cb3127"),Rl=i1("b492b66fbe98f273"),sr=i1("9ae16a3b2f90404f");function Q$(t){return t.xor(t.shru(47))}function LV(t,e,n){const r=t.slice(e,e+n);return Dl.fromBytes(Array.from(r),!0,!0)}function St(t,e){return LV(t,e,8)}function WD(t,e){return LV(t,e,4)}function Cn(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function La(t,e,n=i1("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let o=e.xor(r).mul(n);return o=o.xor(o.shru(47)),o=o.mul(n),o}function ake(t,e,n,r,o,i){o=o.add(t),i=Cn(i.add(o).add(r),21);const s=o;return o=o.add(e),o=o.add(n),i=i.add(Cn(o,44)),[o.add(r),i.add(s)]}function iy(t,e,n,r){return ake(St(t,e),St(t,e+8),St(t,e+16),St(t,e+24),n,r)}function lke(t,e=t.length){if(e>=8){const n=sr.add(e*2),r=St(t,0).add(sr),o=St(t,e-8),i=Cn(o,37).mul(n).add(r),s=Cn(r,25).add(o).mul(n);return La(i,s,n)}if(e>=4){const n=sr.add(e*2),r=WD(t,0);return La(r.shl(3).add(e),WD(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],o=t[e-1],i=n+(r<<8),s=e+(o<<2);return Q$(sr.mul(i).xor(FV.mul(s))).mul(sr)}return sr}function uke(t,e=t.length){const n=sr.add(e*2),r=St(t,0).mul(Rl),o=St(t,8),i=St(t,e-8).mul(n),s=St(t,e-16).mul(sr);return La(Cn(r.add(o),43).add(Cn(i,30)).add(s),r.add(Cn(o.add(sr),18)).add(i),n)}function cke(t,e=t.length){const n=sr.add(e*2),r=St(t,0).mul(sr),o=St(t,8),i=St(t,e-8).mul(n),s=St(t,e-16).mul(sr),a=Cn(r.add(o),43).add(Cn(i,30)).add(s),l=La(a,r.add(Cn(o.add(sr),18)).add(i),n),u=St(t,16).mul(n),c=St(t,24),d=a.add(St(t,e-32)).mul(n),f=l.add(St(t,e-24)).mul(n);return La(Cn(u.add(c),43).add(Cn(d,30)).add(f),u.add(Cn(c.add(r),18)).add(d),n)}function dke(t,e=t.length){const n=Dl.fromNumber(81,!0);if(e<=32)return e<=16?lke(t,e):uke(t,e);if(e<=64)return cke(t,e);let r=n,o=n.mul(Rl).add(113),i=Q$(o.mul(sr).add(113)).mul(sr),s=[Dl.UZERO,Dl.UZERO],a=[Dl.UZERO,Dl.UZERO];r=r.mul(sr).add(St(t,0));let l=0;const u=(e-1>>6)*64,c=u+(e-1&63)-63;do r=Cn(r.add(o).add(s[0]).add(St(t,l+8)),37).mul(Rl),o=Cn(o.add(s[1]).add(St(t,l+48)),42).mul(Rl),r=r.xor(a[1]),o=o.add(s[0]).add(St(t,l+40)),i=Cn(i.add(a[0]),33).mul(Rl),s=iy(t,l,s[1].mul(Rl),r.add(a[0])),a=iy(t,l+32,i.add(a[1]),o.add(St(t,l+16))),[i,r]=[r,i],l+=64;while(l!==u);const d=Rl.add(i.and(255).shl(1));return l=c,a[0]=a[0].add(e-1&63),s[0]=s[0].add(a[0]),a[0]=a[0].add(s[0]),r=Cn(r.add(o).add(s[0]).add(St(t,l+8)),37).mul(d),o=Cn(o.add(s[1]).add(St(t,l+48)),42).mul(d),r=r.xor(a[1].mul(9)),o=o.add(s[0].mul(9).add(St(t,l+40))),i=Cn(i.add(a[0]),33).mul(d),s=iy(t,l,s[1].mul(d),r.add(a[0])),a=iy(t,l+32,i.add(a[1]),o.add(St(t,l+16))),[i,r]=[r,i],La(La(s[0],a[0],d).add(Q$(o).mul(FV)).add(i),La(s[1],a[1],d).add(r),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ml(t,e){return e==="string"?Ba(t):Wu([t],e)}function fke(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Wu(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=bu(t)),ee().getBool("DEBUG")&&W$e(t,e),fke(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function gr(){return ee().platform.now()}function Ba(t,e="utf-8"){return e=e||"utf-8",ee().platform.encode(t,e)}function Ja(t,e="utf-8"){return e=e||"utf-8",ee().platform.decode(t,e)}function zo(t){return ee().platform.isTypedArray!=null?ee().platform.isTypedArray(t):AV(t)}function bu(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||tE(t)||t==null||zo(t)&&n)e.push(t);else if(Array.isArray(t)||zo(t))for(let r=0;r<t.length;++r)bu(t[r],e,n);else{let r=-1;for(const o of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(o)&&(r=Math.max(r,Number(o)));for(let o=0;o<=r;o++)bu(t[o],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hke{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new mke)}profileKernel(e,n,r){let o;const i=()=>{o=r()};let s;const a=gr();if(this.backendTimer.timerAvailable())s=this.backendTimer.time(i);else{i();for(const u of o)u.dataSync();s=Promise.resolve({kernelMs:gr()-a})}if(ee().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let u=0;u<o.length;u++){const c=o[u];c.data().then(d=>{pke(d,c.dtype,e)})}return{kernelName:e,outputs:o,inputs:n,timeMs:s.then(u=>u.kernelMs),extraInfo:s.then(u=>u.getExtraProfileInfo!=null?u.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:o,inputs:i,extraInfo:s}=e;r.forEach(a=>{Promise.all([a.data(),o,s]).then(l=>{this.logger.logKernelProfile(n,a,l[0],l[1],i,l[2])})})}}function pke(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const o=t[r];if(isNaN(o)||!isFinite(o))return console.warn(`Found ${o} in the result of '${n}'`),!0}return!1}class mke{logKernelProfile(e,n,r,o,i,s){const a=typeof o=="number"?Bc(`${o}ms`,9):o.error,l=Bc(e,25),u=n.rank,c=n.size,d=Bc(n.shape.toString(),14);let f="";for(const h in i){const p=i[h];if(p!=null){const m=p.shape||n.shape,g=m.length;f+=`${h}: ${g}D ${g>0?m:""} `}}console.log(`%c${l}	%c${a}	%c${u}D ${d}	%c${c}	%c${f}	%c${s}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gke(t,e,n){const r={},o={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const u=t[l],c=u.inputs;for(const d in c){const f=c[d];let h=!1;for(let p=0;p<e.length;p++)if(r[f.id]){u.outputs.forEach(m=>r[m.id]=!0),h=!0,o[u.id]=!0;break}if(h)break}}const i={};i[n.id]=!0;const s={};for(let l=t.length-1;l>=0;l--){const u=t[l],c=u.inputs;for(let d=0;d<u.outputs.length;d++)if(i[u.outputs[d].id]){for(const f in c)i[c[f].id]=!0,s[u.id]=!0;break}}const a=[];for(let l=0;l<t.length;l++){const u=t[l];if(o[u.id]&&s[u.id]){const c={};for(const f in u.inputs){const h=u.inputs[f];r[h.id]&&(c[f]=h)}const d=Object.assign({},u);d.inputs=c,d.outputs=u.outputs,a.push(d)}}return a}function yke(t,e,n,r){for(let o=e.length-1;o>=0;o--){const i=e[o],s=[];if(i.outputs.forEach(l=>{const u=t[l.id];u!=null?s.push(u):s.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);const a=i.gradient(s);for(const l in i.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);const u=n(()=>a[l]());if(u.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${u.dtype}'`);const c=i.inputs[l];if(!ut(u.shape,c.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${l}' has shape '${u.shape}', which does not match the shape of the input '${c.shape}'`);if(t[c.id]==null)t[c.id]=u;else{const d=t[c.id];t[c.id]=r(d,u),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VD=20,Uf=3,Hw=7;function vke(t,e,n,r){const o=Ne(e),i=xke(t,e,n,o),s=e.length,a=Py(t,e,n,o,i),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${s}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(a.map(u=>"    "+u).join(`
`)),l.join(`
`)}function xke(t,e,n,r){const o=re(e),i=r[r.length-1],s=new Array(i).fill(0),a=e.length,l=n==="complex64"?eh(t):t;if(a>1)for(let u=0;u<o/i;u++){const c=u*i;for(let d=0;d<i;d++)s[d]=Math.max(s[d],Jf(l[c+d],0,n).length)}return s}function Jf(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(Hw))} + ${parseFloat(t[1].toFixed(Hw))}j`:rm(t)?r=`'${t}'`:n==="bool"?r=BV(t):r=parseFloat(t.toFixed(Hw)).toString(),Bc(r,e)}function BV(t){return t===0?"false":"true"}function Py(t,e,n,r,o,i=!0){const s=n==="complex64"?2:1,a=e[0],l=e.length;if(l===0){if(n==="complex64"){const m=eh(t);return[Jf(m[0],0,n)]}return n==="bool"?[BV(t[0])]:[t[0].toString()]}if(l===1){if(a>VD){const g=Uf*s;let y=Array.from(t.slice(0,g)),v=Array.from(t.slice((a-Uf)*s,a*s));return n==="complex64"&&(y=eh(y),v=eh(v)),["["+y.map((x,b)=>Jf(x,o[b],n)).join(", ")+", ..., "+v.map((x,b)=>Jf(x,o[a-Uf+b],n)).join(", ")+"]"]}return["["+(n==="complex64"?eh(t):Array.from(t)).map((g,y)=>Jf(g,o[y],n)).join(", ")+"]"]}const u=e.slice(1),c=r.slice(1),d=r[0]*s,f=[];if(a>VD){for(let m=0;m<Uf;m++){const g=m*d,y=g+d;f.push(...Py(t.slice(g,y),u,n,c,o,!1))}f.push("...");for(let m=a-Uf;m<a;m++){const g=m*d,y=g+d;f.push(...Py(t.slice(g,y),u,n,c,o,m===a-1))}}else for(let m=0;m<a;m++){const g=m*d,y=g+d;f.push(...Py(t.slice(g,y),u,n,c,o,m===a-1))}const h=l===2?",":"";f[0]="["+(a>0?f[0]+h:"");for(let m=1;m<f.length-1;m++)f[m]=" "+f[m]+h;let p=`,
`;for(let m=2;m<l;m++)p+=`
`;return f[f.length-1]=" "+f[f.length-1]+"]"+(i?"":p),f}function eh(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pn{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=re(e),r!=null){const o=r.length;M(o===this.size,()=>`Length of values '${o}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Qt(n,this.size),this.strides=Ne(e)}set(e,...n){n.length===0&&(n=[0]),M(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const o of e){if(o<0||o>=this.shape[n]){const i=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(i)}n++}let r=e[e.length-1];for(let o=0;o<e.length-1;++o)r+=this.strides[o]*e[o];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return hi().makeTensor(this.values,this.shape,this.dtype)}}let hi=null,lc=null;function bke(t){hi=t}function wke(t){lc=t}class cn{constructor(e,n,r,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=re(e),this.strides=Ne(e),this.dataId=r,this.id=o,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return lc.buffer(this.shape,this.dtype,e)}bufferSync(){return lc.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return bi(this.shape,e,this.dtype==="complex64")}arraySync(){return bi(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=hi().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>Ja(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),hi().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=hi().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>Ja(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await hi().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),hi().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return lc.print(this,e)}clone(){return this.throwIfDisposed(),lc.clone(this)}toString(e=!1){const n=this.dataSync();return vke(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),lc.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),hi().makeVariable(this,e,n,r)}}Object.defineProperty(cn,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function ne(){return nE("Tensor",()=>cn)}ne();class x0 extends cn{constructor(e,n,r,o){super(e.shape,e.dtype,e.dataId,o),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!ut(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);hi().disposeTensor(this),this.dataId=e.dataId,hi().incRef(this,null)}dispose(){hi().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(x0,Symbol.hasInstance,{value:t=>t instanceof cn&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var UD;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(UD||(UD={}));var Z$;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(Z$||(Z$={}));var J$;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(J$||(J$={}));var ek;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(ek||(ek={}));var tk;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(tk||(tk={}));const Ske={float32:ek,int32:Z$,bool:J$,complex64:tk};function Vr(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return Ske[t][e]}function GE(t){return Vr(t,"int32")}function zV(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function jV(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jt(t,e){if(t.dtype===e.dtype)return[t,e];const n=Vr(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function WV(t){const e=[];return VV(t,e,new Set),e}function VV(t,e,n){if(t==null)return;if(t instanceof cn){e.push(t);return}if(!Cke(t))return;const r=t;for(const o in r){const i=r[o];n.has(i)||(n.add(i),VV(i,e,n))}}function Cke(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kw(t){return t.kernelName!=null}class GD{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class Od{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new GD}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(eo(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new hke(this.backendInstance),!0}setupRegisteredKernels(){MD(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){MD(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof QT)&&typeof r.then=="function"){const o=++this.pendingBackendInitId,i=r.then(s=>o<this.pendingBackendInitId?!1:(this.registry[e]=s,this.pendingBackendInit=null,!0)).catch(s=>(o<this.pendingBackendInitId||(this.pendingBackendInit=null,eo(`Initialization of backend ${e} failed`),eo(s.stack||s.message)),!1));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return eo(`Initialization of backend ${e} failed`),eo(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:o,asyncInit:i}=this.initializeBackend(r);if(i||o)return{name:r,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),o=r.backend,i=this.readSync(n),s=o.refCount(n);o.disposeData(n,!0),r.backend=e,e.move(n,i,r.shape,r.dtype,s),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let o;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(o),()=>(o=n(),o instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),o))}scopedRun(e,n,r){e();try{const o=r();return n(),o}catch(o){throw n(),o}}nextTensorId(){return Od.nextTensorId++}nextVariableId(){return Od.nextVariableId++}clone(e){const n=K.runKernel($m,{x:e}),r={x:e},o=s=>({x:()=>{const a="float32",l={x:s},u={dtype:a};return K.runKernel(dm,l,u)}}),i=[];return this.addTapeNode(this.state.activeScope.name,r,[n],o,i,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(PD(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const o=this.backend.numDataIds();let i=0;r.forEach(l=>{i+=l.dtype==="complex64"?3:1});const s=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=o-n-i-s;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const o=this.isTapeOn(),i=this.state.numBytes,s=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let l;const u=Kw(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(Kw(e)){const{kernelName:p,inputs:m,attrs:g}=e;this.backendName==null&&this.backend;const y=PD(p,this.backendName);M(y!=null,()=>`Cannot find registered kernel '${p}' for backend '${this.backendName}'`),a=()=>{const v=this.backend.numDataIds();l=y.kernelFunc({inputs:m,attrs:g,backend:this.backend});const x=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(p,v,x);const b=x.map(w=>w.rank!=null?w:this.makeTensorFromTensorInfo(w));if(o){const w=this.getTensorsForGradient(p,m,b);r=this.saveTensorsForBackwardMode(w)}return b}}else{const{forwardFunc:p}=e,m=g=>{o&&(r=g.map(y=>this.keep(this.clone(y))))};a=()=>{const g=this.backend.numDataIds();l=this.tidy(()=>p(this.backend,m));const y=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,g,y),y}}const{inputs:c,attrs:d}=e,f=Kw(e)?null:e.backwardsFunc;let h;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=a():(h=this.profiler.profileKernel(u,c,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),n=h.outputs)}),o&&this.addTapeNode(u,c,n,f,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-s,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(p=>c[p]!=null?c[p].shape:null),outputShapes:n.map(p=>p.shape),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const o=DD(e);if(o!=null){const i=o.inputsToSave||[],s=o.outputsToSave||[];let a;o.saveAllInputs?(M(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(n).map(u=>n[u])):a=i.map(u=>n[u]);const l=r.filter((u,c)=>s[c]);return a.concat(l)}return[]}makeTensor(e,n,r,o){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",o=o||this.backend;let i=e;r==="string"&&rm(e[0])&&(i=e.map(l=>Ba(l)));const s=o.write(i,n,r),a=new cn(n,r,s,this.nextTensorId());if(this.trackTensor(a,o),r==="string"){const l=this.state.tensorInfo.get(s),u=U$e(i);this.state.numBytes+=u-l.bytes,l.bytes=u}return a}makeTensorFromDataId(e,n,r,o){r=r||"float32";const i={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(i,o)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:o,dtype:i}=e,s=new cn(o,i,r,this.nextTensorId());return this.trackTensor(s,n),s}makeVariable(e,n=!0,r,o){r=r||this.nextVariableId().toString(),o!=null&&o!==e.dtype&&(e=e.cast(o));const i=new x0(e,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*p0(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof x0||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*p0(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(o=>o.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const o of this.state.activeProfile.kernels)o.kernelTimeMs=await o.kernelTimeMs,o.extraInfo=await o.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,o,i,s){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:i},l=DD(e);l!=null&&(o=l.gradFunc),o!=null&&(a.gradient=u=>(u=u.map((c,d)=>{if(c==null){const f=r[d],h=Gn(f.size,f.dtype);return this.makeTensor(h,f.shape,f.dtype)}return c}),o(u.length>1?u:u[0],i,s))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=WV(e),r=new Set(n.map(i=>i.id));for(let i=0;i<this.state.activeScope.track.length;i++){const s=this.state.activeScope.track[i];!s.kept&&!r.has(s.id)&&s.dispose()}const o=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(i=>{!i.kept&&i.scopeId===o.id&&this.track(i)})}gradients(e,n,r,o=!1){if(M(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));M(i instanceof cn,()=>"The result y returned by f() must be a tensor.");const s=gke(this.state.activeTape,n,i);if(!o&&s.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[i.id]=r??$ke(i.shape),yke(a,s,u=>this.tidy(u),kke);const l=n.map(u=>a[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(const c of u.saved)c.dispose()}),this.state.activeTape=null),{value:i,grads:l}})}customGrad(e){return M(G$(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{M(n.every(a=>a instanceof cn),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const o={};n.forEach((a,l)=>{o[l]=a});const i=(a,l)=>(r=e(...n,l),M(r.value instanceof cn,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),M(G$(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),s=(a,l)=>{const u=r.gradFunc(a,l),c=Array.isArray(u)?u:[u];M(c.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),M(c.every(f=>f instanceof cn),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return c.forEach((f,h)=>{d[h]=()=>f}),d};return this.runKernelFunc({forwardFunc:i,backwardsFunc:s,inputs:o})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=gr(),r=await this.backend.time(e);return r.wallMs=gr()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new GD;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Od.nextTensorId=0;Od.nextVariableId=0;function $ke(t){const e=eE(re(t),"float32");return K.makeTensor(e,t,"float32")}function UV(){const t=sV();if(t._tfengine==null){const e=new K$e(t);t._tfengine=new Od(e)}return Q$e(t._tfengine.ENV),bke(()=>t._tfengine),t._tfengine}const K=UV();function kke(t,e){const n={a:t,b:e};return K.runKernel(uf,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ike(){return typeof navigator<"u"&&navigator!=null}function GV(t){if(t||Ike()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function HV(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cr=ee();Cr.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Cr.registerFlag("IS_BROWSER",()=>HV());Cr.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Cr.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Cr.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Cr.registerFlag("PROD",()=>!1);Cr.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Cr.getBool("DEBUG"));Cr.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Cr.registerFlag("IS_TEST",()=>!1);Cr.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Cr.getBool("DEBUG"));Cr.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Cr.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Cr.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s1(t,e){let n=t;if(zo(t))return e==="string"?[]:[t.length];if(zV(t)){const o=t.channels||"RGBA";return[t.height,t.width*o.length]}else if(jV(t))return[t.buffer.size/(e==null?4:p0(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||zo(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&ee().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&KV(t,r,[]),r}function KV(t,e,n){if(n=n||[],!Array.isArray(t)&&!zo(t)){M(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}M(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),M(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let o=0;o<t.length;++o)KV(t[o],r,n.concat(o))}function HD(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function W(t,e,n,r="numeric"){if(t instanceof ne())return HD(r,t.dtype,e,n),t;let o=af(t);if(o!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),HD(r,o,e,n),t==null||!zo(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const i=s1(t,o);!zo(t)&&!Array.isArray(t)&&(t=[t]);const a=o!=="string"?Wu(t,o):bu(t,[],!0);return K.makeTensor(a,i,o)}function qV(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((i,s)=>W(i,`${e}[${s}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tke="__op";function X(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+Tke;const o=(...i)=>{K.startScope(n);try{const s=r(...i);return tE(s)&&console.error("Cannot return a Promise inside of tidy."),K.endScope(s),s}catch(s){throw K.endScope(null),s}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eke(t,e){const n=W(t,"real","complex"),r=W(e,"imag","complex");JT(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const o={real:n,imag:r};return K.runKernel(cE,o)}const _d=X({complex_:Eke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a1(t,e,n,r){if(r==null)r=af(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(jV(t)||zV(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return K.backend.createTensorFromGPUData(t,e||n,r)}if(!zo(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){Zs(e);const o=re(e),i=re(n);M(o===i,()=>`Based on the provided shape, [${e}], the tensor should have ${o} values but has ${i}`);for(let s=0;s<n.length;++s){const a=n[s],l=s===n.length-1?a!==re(e.slice(s)):!0;M(n[s]===e[s]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!zo(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?Wu(t,r):bu(t,[],!0),K.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XV(t,e,n){const r=s1(t,n);return a1(t,e,r,n)}class cf{static join(e){return new cf(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>zo(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const o=e[r];r!==e.length-1&&o.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const i=n+o.byteLength;this.shards.push({buffer:o,start:n,end:i}),n=i}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const o=n-e,i=new ArrayBuffer(o),s=new Uint8Array(i);let a=0;for(let l=r;l<this.shards.length;l++){const u=this.shards[l],d=e+a-u.start,f=a,p=Math.min(n,u.end)-u.start,m=new Uint8Array(u.buffer,d,p-d);if(s.set(m,f),a+=m.length,n<u.end)break}return i}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(o){return e<o.start?-1:e>=o.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=Nke(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function Nke(t,e){let n=0,r=t.length;for(;n<=r;){const o=Math.floor((r-n)/2)+n,i=e(t[o]);if(i===0)return o;i<0?r=o:n=o+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mi(){return K}function KD(){return K.memory()}function Q(t,e){return K.tidy(t,e)}function Ke(t){WV(t).forEach(n=>n.dispose())}function es(t){return K.keep(t)}function Ake(){return K.ready()}function YV(t,e,n=1){return K.registerBackend(t,e,n)}function Oke(){return K.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qD=4;async function XD(t,e){const n=[],r=[],o=Array.isArray(t)?t.map(s=>s.name):Object.keys(t);for(let s=0;s<o.length;++s){const a=o[s],l=Array.isArray(t)?t[s].tensor:t[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);const u={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const c=new Promise(async d=>{const f=await l.bytes(),h=f.reduce((g,y)=>g+y.length,0)+qD*f.length,p=new Uint8Array(h);let m=0;for(let g=0;g<f.length;g++){const y=f[g],v=new Uint8Array(new Uint32Array([y.length]).buffer);p.set(v,m),m+=qD,p.set(y,m),m+=y.length}d(p)});r.push(c)}else r.push(l.data());e!=null&&(u.group=e),n.push(u)}const i=await Promise.all(r);return{data:_ke(i),specs:n}}function _ke(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(i=>{if(e+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});const r=new Uint8Array(e);let o=0;return n.forEach(i=>{r.set(new Uint8Array(i.buffer),o),o+=i.byteLength}),r.buffer}const HE=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function YD(t){return HE?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function Rke(t){if(HE)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,o=e.length;r<o;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function Pke(t){if(HE){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function Dke(t){return cf.join(t)}function QV(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:YD(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:YD(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new cf(t.weightData).byteLength}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tr{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return tr.instance==null&&(tr.instance=new tr),tr.instance}static registerSaveRouter(e){tr.getInstance().saveRouters.push(e)}static registerLoadRouter(e){tr.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return tr.getHandlers(e,"save")}static getLoadHandlers(e,n){return tr.getHandlers(e,"load",n)}static getHandlers(e,n,r){const o=[];return(n==="load"?tr.getInstance().loadRouters:tr.getInstance().saveRouters).forEach(s=>{const a=s(e,r);a!==null&&o.push(a)}),o}}const Mke=t=>tr.getSaveHandlers(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nk="tensorflowjs",rk=1,Hl="models_store",ka="model_info_store";function ZV(){if(!ee().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function ok(t){const e=t.result;e.createObjectStore(Hl,{keyPath:"modelPath"}),e.createObjectStore(ka,{keyPath:"modelPath"})}class wu{constructor(e){if(this.indexedDB=ZV(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,o)=>{const i=this.indexedDB.open(nk,rk);i.onupgradeneeded=()=>ok(i),i.onsuccess=()=>{const s=i.result;if(n==null){const a=s.transaction(Hl,"readonly"),u=a.objectStore(Hl).get(this.modelPath);u.onsuccess=()=>{if(u.result==null)return s.close(),o(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(u.result.modelArtifacts)},u.onerror=c=>(s.close(),o(u.error)),a.oncomplete=()=>s.close()}else{n.weightData=cf.join(n.weightData);const a=QV(n),l=s.transaction(ka,"readwrite");let u=l.objectStore(ka),c;try{c=u.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(f){return o(f)}let d;c.onsuccess=()=>{d=s.transaction(Hl,"readwrite");const f=d.objectStore(Hl);let h;try{h=f.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:a})}catch(p){return o(p)}h.onsuccess=()=>r({modelArtifactsInfo:a}),h.onerror=p=>{u=l.objectStore(ka);const m=u.delete(this.modelPath);m.onsuccess=()=>(s.close(),o(h.error)),m.onerror=g=>(s.close(),o(h.error))}},c.onerror=f=>(s.close(),o(c.error)),l.oncomplete=()=>{d==null?s.close():d.oncomplete=()=>s.close()}}},i.onerror=s=>o(i.error)})}}wu.URL_SCHEME="indexeddb://";const JV=t=>ee().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(wu.URL_SCHEME)?Fke(t.slice(wu.URL_SCHEME.length)):null;tr.registerSaveRouter(JV);tr.registerLoadRouter(JV);function Fke(t){return new wu(t)}function Lke(t){return t.startsWith(wu.URL_SCHEME)?t.slice(wu.URL_SCHEME.length):t}class Bke{constructor(){this.indexedDB=ZV()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(nk,rk);r.onupgradeneeded=()=>ok(r),r.onsuccess=()=>{const o=r.result,i=o.transaction(ka,"readonly"),a=i.objectStore(ka).getAll();a.onsuccess=()=>{const l={};for(const u of a.result)l[u.modelPath]=u.modelArtifactsInfo;e(l)},a.onerror=l=>(o.close(),n(a.error)),i.oncomplete=()=>o.close()},r.onerror=o=>n(r.error)})}async removeModel(e){return e=Lke(e),new Promise((n,r)=>{const o=this.indexedDB.open(nk,rk);o.onupgradeneeded=()=>ok(o),o.onsuccess=()=>{const i=o.result,s=i.transaction(ka,"readwrite"),a=s.objectStore(ka),l=a.get(e);let u;l.onsuccess=()=>{if(l.result==null)return i.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const c=a.delete(e),d=()=>{u=i.transaction(Hl,"readwrite");const h=u.objectStore(Hl).delete(e);h.onsuccess=()=>n(l.result.modelArtifactsInfo),h.onerror=p=>r(l.error)};c.onsuccess=d,c.onerror=f=>(d(),i.close(),r(l.error))}},l.onerror=c=>(i.close(),r(l.error)),s.oncomplete=()=>{u==null?i.close():u.oncomplete=()=>i.close()}},o.onerror=i=>r(o.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ws="/",uc="tensorflowjs_models",eU="info",zke="model_topology",jke="weight_specs",Wke="weight_data",Vke="model_metadata";function tU(t){return{info:[uc,t,eU].join(ws),topology:[uc,t,zke].join(ws),weightSpecs:[uc,t,jke].join(ws),weightData:[uc,t,Wke].join(ws),modelMetadata:[uc,t,Vke].join(ws)}}function nU(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function Uke(t){const e=t.split(ws);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(ws)}function Gke(t){return t.startsWith(Su.URL_SCHEME)?t.slice(Su.URL_SCHEME.length):t}class Su{constructor(e){if(!ee().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=tU(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),o=QV(e),i=cf.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Rke(i));const s={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(s)),{modelArtifactsInfo:o}}catch{throw nU(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${o.modelTopologyBytes}, weightSpecsBytes=${o.weightSpecsBytes}, weightDataBytes=${o.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const o=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(o==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=o;const i=this.LS.getItem(this.keys.modelMetadata);if(i!=null){const a=JSON.parse(i);n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,a.signature!=null&&(n.signature=a.signature),a.userDefinedMetadata!=null&&(n.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(n.modelInitializer=a.modelInitializer),a.initializerSignature!=null&&(n.initializerSignature=a.initializerSignature),a.trainingConfig!=null&&(n.trainingConfig=a.trainingConfig)}const s=this.LS.getItem(this.keys.weightData);if(s==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=Pke(s),n}}Su.URL_SCHEME="localstorage://";const rU=t=>ee().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Su.URL_SCHEME)?Hke(t.slice(Su.URL_SCHEME.length)):null;tr.registerSaveRouter(rU);tr.registerLoadRouter(rU);function Hke(t){return new Su(t)}class Kke{constructor(){M(ee().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),M(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=uc+ws,r=ws+eU;for(let o=0;o<this.LS.length;++o){const i=this.LS.key(o);if(i.startsWith(n)&&i.endsWith(r)){const s=Uke(i);e[s]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){e=Gke(e);const n=tU(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return nU(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QD="://";class Fi{constructor(){this.managers={}}static getInstance(){return Fi.instance==null&&(Fi.instance=new Fi),Fi.instance}static registerManager(e,n){M(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(QD)&&(e=e.slice(0,e.indexOf(QD))),M(e.length>0,()=>"scheme must not be an empty string.");const r=Fi.getInstance();M(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=Fi.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(Fi.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qke{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!ee().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const o=this.functionRefs[r.data.index];o(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return AV(e)}}if(ee().get("IS_BROWSER")){ee().setPlatform("browser",new qke);try{Fi.registerManager(Su.URL_SCHEME,new Kke)}catch{}try{Fi.registerManager(wu.URL_SCHEME,new Bke)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xke={importFetch:()=>require("node-fetch")};let qw;class Yke{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return ee().global.fetch!=null?ee().global.fetch(e,n):(qw==null&&(qw=Xke.importFetch()),qw(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}ee().get("IS_NODE")&&!ee().get("IS_BROWSER")&&ee().setPlatform("node",new Yke);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ve(t,e="float32",n){return e=e||"float32",Zs(t),new Pn(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qke(t,e){const n=W(t,"x","cast");if(!V$e(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},o={dtype:e};return K.runKernel(dm,r,o)}const Se=X({cast_:Qke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zke(t){const n={x:W(t,"x","clone","string_or_numeric")};return K.runKernel($m,n)}const ou=X({clone_:Zke});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jke(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */UV();const eIe={buffer:Ve,cast:Se,clone:ou,print:Jke};wke(eIe);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tIe(t,e){let n=W(t,"a","add"),r=W(e,"b","add");[n,r]=Jt(n,r);const o={a:n,b:r};return K.runKernel(uf,o)}const fe=X({add_:tIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nIe(t,e){let n=W(t,"a","floorDiv"),r=W(e,"b","floorDiv");[n,r]=Jt(n,r);const o={a:n,b:r};return K.runKernel(Sm,o)}const oU=X({floorDiv_:nIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rIe(t,e){let n=W(t,"a","div"),r=W(e,"b","div");if([n,r]=Jt(n,r),n.dtype==="int32"&&r.dtype==="int32")return oU(n,r);const o={a:n,b:r},i={};return K.runKernel(gm,o,i)}const Oe=X({div_:rIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oIe(t,e){let n=W(t,"a","mul"),r=W(e,"b","mul");[n,r]=Jt(n,r);const o={a:n,b:r};return K.runKernel(Rm,o)}const H=X({mul_:oIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iIe(t){const e=W(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return K.runKernel(fb,n)}else{const n={x:e};return K.runKernel(ib,n)}}const nr=X({abs_:iIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sIe(t){const n={x:W(t,"x","acos")};return K.runKernel(om,n)}const aIe=X({acos_:sIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lIe(t){const n={x:W(t,"x","acosh")};return K.runKernel(im,n)}const uIe=X({acosh_:lIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cIe(t,e=null,n=!1){const o={x:W(t,"x","all","bool")},i={axis:e,keepDims:n};return K.runKernel(oE,o,i)}const iU=X({all_:cIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dIe(t,e=null,n=!1){const o={x:W(t,"x","any","bool")},i={axis:e,keepDims:n};return K.runKernel(iE,o,i)}const ik=X({any_:dIe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fIe(t,e=0){const r={x:W(t,"x","argMax")},o={axis:e};return K.runKernel(sb,r,o)}const $p=X({argMax_:fIe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hIe(t,e=0){const r={x:W(t,"x","argMin")},o={axis:e};return K.runKernel(ab,r,o)}const pIe=X({argMin_:hIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mIe(t){const n={x:W(t,"x","asin")};return K.runKernel(sm,n)}const gIe=X({asin_:mIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yIe(t){const n={x:W(t,"x","asinh")};return K.runKernel(am,n)}const vIe=X({asinh_:yIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xIe(t){const n={x:W(t,"x","atan")};return K.runKernel(lm,n)}const bIe=X({atan_:xIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wIe(t,e){let n=W(t,"a","atan2"),r=W(e,"b","atan2");[n,r]=Jt(n,r);const o={a:n,b:r};return K.runKernel(cm,o)}const SIe=X({atan2_:wIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CIe(t){const n={x:W(t,"x","atanh")};return K.runKernel(um,n)}const $Ie=X({atanh_:CIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jm(t,e,n,r,o="NHWC",i){const s=t[3],a=[...e,s],l=ea(o);return Mn(t,a,n,i,r,null,null,l)}function Uo(t,e,n,r,o,i,s="channelsLast"){const[a,l]=kp(e);let u;if(s==="channelsLast")u=[a,l,t[3],t[3]];else if(s==="channelsFirst")u=[a,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${s}`);return Mn(t,u,n,r,o,i,!1,s)}function Js(t,e,n,r,o,i,s="NDHWC"){const[a,l,u]=sk(e);let c,d;if(s==="NDHWC")d="channelsLast",c=[a,l,u,t[4],t[4]];else if(s==="NCDHW")d="channelsFirst",c=[a,l,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${s}`);return gl(t,c,n,r,o,!1,d,i)}function Mn(t,e,n,r,o,i,s=!1,a="channelsLast"){let[l,u,c,d]=[-1,-1,-1,-1];if(a==="channelsLast")[l,u,c,d]=t;else if(a==="channelsFirst")[l,d,u,c]=t;else throw new Error(`Unknown dataFormat ${a}`);const[f,h,,p]=e,[m,g]=kp(n),[y,v]=kp(r),x=jc(f,y),b=jc(h,v),{padInfo:w,outHeight:S,outWidth:$}=TIe(o,u,c,m,g,x,b,i,a),C=s?p*d:p;let k;return a==="channelsFirst"?k=[l,C,S,$]:a==="channelsLast"&&(k=[l,S,$,C]),{batchSize:l,dataFormat:a,inHeight:u,inWidth:c,inChannels:d,outHeight:S,outWidth:$,outChannels:C,padInfo:w,strideHeight:m,strideWidth:g,filterHeight:f,filterWidth:h,effectiveFilterHeight:x,effectiveFilterWidth:b,dilationHeight:y,dilationWidth:v,inShape:t,outShape:k,filterShape:e}}function gl(t,e,n,r,o,i=!1,s="channelsLast",a){let[l,u,c,d,f]=[-1,-1,-1,-1,-1];if(s==="channelsLast")[l,u,c,d,f]=t;else if(s==="channelsFirst")[l,f,u,c,d]=t;else throw new Error(`Unknown dataFormat ${s}`);const[h,p,m,,g]=e,[y,v,x]=sk(n),[b,w,S]=sk(r),$=jc(h,b),C=jc(p,w),k=jc(m,S),{padInfo:I,outDepth:T,outHeight:E,outWidth:_}=EIe(o,u,c,d,y,v,x,$,C,k,a),N=i?g*f:g;let P;return s==="channelsFirst"?P=[l,N,T,E,_]:s==="channelsLast"&&(P=[l,T,E,_,N]),{batchSize:l,dataFormat:s,inDepth:u,inHeight:c,inWidth:d,inChannels:f,outDepth:T,outHeight:E,outWidth:_,outChannels:N,padInfo:I,strideDepth:y,strideHeight:v,strideWidth:x,filterDepth:h,filterHeight:p,filterWidth:m,effectiveFilterDepth:$,effectiveFilterHeight:C,effectiveFilterWidth:k,dilationDepth:b,dilationHeight:w,dilationWidth:S,inShape:t,outShape:P,filterShape:e}}function kIe(t,e,n,r,o){r==null&&(r=KE(t,e,n));const i=t[0],s=t[1],a=Ip((i-e+2*r)/n+1,o),l=Ip((s-e+2*r)/n+1,o);return[a,l]}function IIe(t,e,n,r,o,i){o==null&&(o=KE(t,e[0],r[0]));const s=[0,0,0,n];for(let a=0;a<3;a++)t[a]+2*o>=e[a]&&(s[a]=Ip((t[a]-e[a]+2*o)/r[a]+1,i));return s}function KE(t,e,n,r=1){const o=jc(e,r);return Math.floor((t[0]*(n-1)-n+o)/2)}function kp(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function sk(t){return typeof t=="number"?[t,t,t]:t}function jc(t,e){return e<=1?t:t+(t-1)*(e-1)}function TIe(t,e,n,r,o,i,s,a,l){let u,c,d;if(typeof t=="number"){u={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const h=kIe([e,n],i,r,t,a);c=h[0],d=h[1]}else if(t==="same"){c=Math.ceil(e/r),d=Math.ceil(n/o);const f=Math.max(0,(c-1)*r+i-e),h=Math.max(0,(d-1)*o+s-n),p=Math.floor(f/2),m=f-p,g=Math.floor(h/2),y=h-g;u={top:p,bottom:m,left:g,right:y,type:"SAME"}}else if(t==="valid")u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-i+1)/r),d=Math.ceil((n-s+1)/o);else if(typeof t=="object"){const f=l==="channelsLast"?t[1][0]:t[2][0],h=l==="channelsLast"?t[1][1]:t[2][1],p=l==="channelsLast"?t[2][0]:t[3][0],m=l==="channelsLast"?t[2][1]:t[3][1];u={top:f,bottom:h,left:p,right:m,type:f===0&&h===0&&p===0&&m===0?"VALID":"EXPLICIT"},c=Ip((e-i+f+h)/r+1,a),d=Ip((n-s+p+m)/o+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:u,outHeight:c,outWidth:d}}function EIe(t,e,n,r,o,i,s,a,l,u,c){let d,f,h,p;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const g=IIe([e,n,r,1],[a,l,u],1,[o,i,s],t,c);f=g[0],h=g[1],p=g[2]}else if(t==="same"){f=Math.ceil(e/o),h=Math.ceil(n/i),p=Math.ceil(r/s);const m=(f-1)*o+a-e,g=(h-1)*i+l-n,y=(p-1)*s+u-r,v=Math.floor(m/2),x=m-v,b=Math.floor(g/2),w=g-b,S=Math.floor(y/2),$=y-S;d={top:b,bottom:w,left:S,right:$,front:v,back:x,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:f,outHeight:h,outWidth:p}}function Ip(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function Cu(t){const[e,n,r]=kp(t);return e===1&&n===1&&r===1}function Kn(t,e){return Cu(t)||Cu(e)}function $u(t){return kp(t).every(e=>e>0)}function ea(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Nr(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")M(Nd(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(o=>{M(Nd(o),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${o}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NIe(t,e){const r={x:W(t,"x","reshape","string_or_numeric")},o={shape:e};return K.runKernel(Hb,r,o)}const q=X({reshape_:NIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AIe(t,e,n,r,o){const i=W(t,"x","avgPool","float32"),s=1;M(Kn(n,s),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);let a=i,l=!1;i.rank===3&&(l=!0,a=q(i,[1,i.shape[0],i.shape[1],i.shape[2]])),M(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),Nr("avgPool",r,o);const u={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:o};let d=K.runKernel(lb,u,c);return d=Se(d,i.dtype),l?q(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const qE=X({avgPool_:AIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OIe(t,e,n,r,o,i="NDHWC"){const s=W(t,"x","avgPool3d","float32");let a=s,l=!1;s.rank===4&&(l=!0,a=q(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),M(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),M(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),M(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Nr("avgPool3d",r,o);const u={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:o,dataFormat:i};let d=K.runKernel(ub,u,c);return d=Se(d,a.dtype),l?q(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const _Ie=X({avgPool3d_:OIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RIe(t,e=0){M(t.length>=1,()=>"Pass at least one tensor to concat");const n=qV(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),n.length===1)return ou(n[0]);const r=n,o={axis:e};return K.runKernel(hb,r,o)}const Sr=X({concat_:RIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PIe(t,e,n=!1,r=!1){let o=W(t,"a","matMul"),i=W(e,"b","matMul");[o,i]=Jt(o,i);const s={a:o,b:i},a={transposeA:n,transposeB:r};return K.runKernel(cb,s,a)}const st=X({matMul_:PIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DIe(t){const n={x:W(t,"x","sigmoid","float32")};return K.runKernel(Um,n)}const df=X({sigmoid_:DIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MIe(t,e,n){const r=W(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const o={x:r},i={begin:e,size:n};return K.runKernel(Qb,o,i)}const Ct=X({slice_:MIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FIe(t){const n={x:W(t,"x","tanh","float32")};return K.runKernel(Ym,n)}const l1=X({tanh_:FIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LIe(t,e,n){const r=W(t,"x","batchToSpaceND"),o=e.reduce((a,l)=>a*l);M(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),M(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),M(r.shape[0]%o===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${o}`);const i={x:r},s={blockShape:e,crops:n};return K.runKernel(db,i,s)}const XE=X({batchToSpaceND_:LIe});function BIe(t){let e;return t.rank===0||t.rank===1?e=q(t,[1,1,1,t.size]):t.rank===2?e=q(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=q(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zIe(t,e,n,r,o,i){i==null&&(i=.001);const s=W(t,"x","batchNorm"),a=W(e,"mean","batchNorm"),l=W(n,"variance","batchNorm");let u;o!=null&&(u=W(o,"scale","batchNorm"));let c;r!=null&&(c=W(r,"offset","batchNorm")),M(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),M(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),M(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const f={x:BIe(s),scale:u,offset:c,mean:a,variance:l},h={varianceEpsilon:i},p=K.runKernel(Sb,f,h);return q(p,s.shape)}const u1=X({batchNorm_:zIe});function jIe(t,e,n,r,o,i){const s=W(t,"x","batchNorm"),a=W(e,"mean","batchNorm"),l=W(n,"variance","batchNorm");let u;o!=null&&(u=W(o,"scale","batchNorm"));let c;return r!=null&&(c=W(r,"offset","batchNorm")),M(s.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${s.rank}.`),M(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),M(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),u!=null&&M(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&M(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),u1(s,a,l,c,u,i)}const WIe=X({batchNorm2d_:jIe});function VIe(t,e,n,r,o,i){const s=W(t,"x","batchNorm"),a=W(e,"mean","batchNorm"),l=W(n,"variance","batchNorm");let u;o!=null&&(u=W(o,"scale","batchNorm"));let c;return r!=null&&(c=W(r,"offset","batchNorm")),M(s.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${s.rank}.`),M(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),M(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),u!=null&&M(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&M(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),u1(s,a,l,c,u,i)}const UIe=X({batchNorm3d_:VIe});function GIe(t,e,n,r,o,i){const s=W(t,"x","batchNorm"),a=W(e,"mean","batchNorm"),l=W(n,"variance","batchNorm");let u;o!=null&&(u=W(o,"scale","batchNorm"));let c;return r!=null&&(c=W(r,"offset","batchNorm")),M(s.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${s.rank}.`),M(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),M(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),u!=null&&M(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&M(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),u1(s,a,l,c,u,i)}const HIe=X({batchNorm4d_:GIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KIe(t,e,n){const r=W(t,"x","bincount"),o=W(e,"weights","bincount");M(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),M(n>=0,()=>`size must be non-negative, but got ${n}.`),M(o.size===r.size||o.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${o.shape}.`);const i={x:r,weights:o},s={size:n};return K.runKernel(lE,i,s)}const qIe=X({bincount_:KIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XIe(t,e){let n=W(t,"broadcastTo","x");const r=n.shape;if(Zs(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const u=n.shape.slice();for(;u.length<e.length;)u.unshift(1);n=q(n,u)}const o=n.shape,i=Array.from(e);for(let u=e.length-1;u>=0;u--)if(o[u]===e[u])i[u]=1;else if(n.shape[u]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(i.map((u,c)=>u>1?c:-1).filter(u=>u>=0).length===0)return ou(n);const a={x:n},l={reps:i};return K.runKernel(Qm,a,l)}const bh=X({broadcastTo_:XIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YIe(t){const n={x:W(t,"x","ceil","float32")};return K.runKernel(fm,n)}const QIe=X({ceil_:YIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c1(t,e,n){Zs(t),n=n||af(e);const r={shape:t,value:e,dtype:n};return K.runKernel(CE,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZIe(t,e,n){const r=W(t,"x","clipByValue");if(M(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return c1(r.shape,e,r.dtype);const o={x:r},i={clipValueMin:e,clipValueMax:n};return K.runKernel(hm,o,i)}const lo=X({clipByValue_:ZIe});function JIe(t){return Sr(t,0)}const eTe=X({concat1d_:JIe});function tTe(t,e){return Sr(t,e)}const nTe=X({concat2d_:tTe});function rTe(t,e){return Sr(t,e)}const oTe=X({concat3d_:rTe});function iTe(t,e){return Sr(t,e)}const sTe=X({concat4d_:iTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aTe(t,e,n,r,o="NHWC",i=[1,1],s){const a=W(t,"x","conv2d","float32"),l=W(e,"filter","conv2d","float32");let u=a,c=!1;a.rank===3&&(c=!0,u=q(a,[1,a.shape[0],a.shape[1],a.shape[2]])),M(u.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),M(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Nr("conv2d",r,s);const d=o==="NHWC"?u.shape[3]:u.shape[1];M(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),M(Kn(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),M($u(i),()=>"Error in conv2D: Dilated rates should be larger than 0."),M($u(n),()=>"Error in conv2D: Strides should be larger than 0.");const f={x:u,filter:l},h={strides:n,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s},p=K.runKernel(pb,f,h);return c?q(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const ku=X({conv2d_:aTe});function lTe(t,e,n,r,o="NWC",i=1,s){const a=W(t,"x","conv1d"),l=W(e,"filter","conv1d");let u=a,c=!1;a.rank===2&&(c=!0,u=q(a,[1,a.shape[0],a.shape[1]])),M(u.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),M(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Nr("conv1d",r,s),M(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),M(Kn(n,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${i}'`),M($u(i),()=>"Error in conv1D: Dilated rates should be larger than 0."),M($u(n),()=>"Error in conv1D: Stride should be larger than 0."),M(o==="NWC",()=>`Error in conv1d: got dataFormat of ${o} but only NWC is currently supported.`);const d=q(l,[1,l.shape[0],l.shape[1],l.shape[2]]),f=q(u,[u.shape[0],1,u.shape[1],u.shape[2]]),g=ku(f,d,[1,n],r,"NHWC",[1,i],s);return c?q(g,[g.shape[2],g.shape[3]]):q(g,[g.shape[0],g.shape[2],g.shape[3]])}const sU=X({conv1d_:lTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uTe(t,e,n,r,o,i="NHWC",s){M(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,l=e,u=!1;e.rank===3&&(u=!0,l=q(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),M(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),M(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),M(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const c=i==="NHWC"?a[3]:a[1],d=i==="NHWC"?l.shape[3]:l.shape[1];M(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),M(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),Nr("conv2dDerInput",o,s);const f={dy:l,filter:n},h={strides:r,pad:o,dataFormat:i,dimRoundingMode:s,inputShape:a},p=K.runKernel(mb,f,h);return u?q(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const YE=X({conv2DBackpropInput_:uTe});function cTe(t,e,n,r,o,i){const s=W(t,"x","conv2dTranspose"),a=W(e,"filter","conv2dTranspose");return YE(n,s,a,r,o,"NHWC",i)}const aU=X({conv2dTranspose_:cTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dTe(t,e,n,r,o="NDHWC",i=[1,1,1]){const s=W(t,"x","conv3d"),a=W(e,"filter","conv3d");let l=s,u=!1;s.rank===4&&(u=!0,l=q(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),M(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),M(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),M(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),M(Kn(n,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),M(o==="NDHWC",()=>`Error in conv3d: got dataFormat of ${o} but only NDHWC is currently supported.`),M($u(i),()=>"Error in conv3D: Dilated rates should be larger than 0."),M($u(n),()=>"Error in conv3D: Strides should be larger than 0.");const c={x:l,filter:a},d={strides:n,pad:r,dataFormat:o,dilations:i},f=K.runKernel(gb,c,d);return u?q(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const fTe=X({conv3d_:dTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hTe(t,e,n,r,o){M(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let i=t,s=e,a=!1;e.rank===4&&(a=!0,s=q(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),i=[1,t[0],t[1],t[2],t[3]]);const l=i[4],u=s.shape[4];M(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),M(s.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${s.rank}`),M(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),M(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),M(u===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`);const c={dy:s,filter:n},d={pad:o,strides:r,inputShape:i},f=K.runKernel(hE,c,d);return a?q(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const lU=X({conv3DBackpropInput_:hTe});function pTe(t,e,n,r,o){const i=W(t,"x","conv3dTranspose"),s=W(e,"filter","conv3dTranspose");return lU(n,i,s,r,o)}const mTe=X({conv3dTranspose_:pTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gTe(t){const n={x:W(t,"x","cos","float32")};return K.runKernel(pm,n)}const QE=X({cos_:gTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yTe(t){const n={x:W(t,"x","cosh","float32")};return K.runKernel(mm,n)}const uU=X({cosh_:yTe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vTe(t,e=0,n=!1,r=!1){const i={x:W(t,"x","cumprod")},s={axis:e,exclusive:n,reverse:r};return K.runKernel(pE,i,s)}const ak=X({cumprod_:vTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xTe(t,e=0,n=!1,r=!1){const i={x:W(t,"x","cumsum")},s={axis:e,exclusive:n,reverse:r};return K.runKernel(yb,i,s)}const cU=X({cumsum_:xTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bTe(t,e,n,r=!1){const o=W(t,"x","denseBincount"),i=W(e,"weights","denseBincount");M(o.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${o.dtype}`),M(o.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${o.rank}.`),M(n>=0,()=>`size must be non-negative, but got ${n}.`),M(i.size===o.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${o.shape}, weights shape: ${i.shape}.`);const s={x:o,weights:i},a={size:n,binaryOutput:r};return K.runKernel(gE,s,a)}const ZD=X({denseBincount_:bTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wTe(t,e,n="NHWC"){const r=W(t,"x","depthToSpace","float32"),o=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],s=n==="NHWC"?r.shape[3]:r.shape[1];M(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),M(o*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${e}  for depthToSpace with input shape
    ${r.shape}`),M(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e} for depthToSpace with input shape
        ${r.shape}`),M(s%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${s} for depthToSpace with input shape ${r.shape}`);const a={x:r},l={blockSize:e,dataFormat:n};return K.runKernel(yE,a,l)}const STe=X({depthToSpace_:wTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CTe(t,e,n,r,o="NHWC",i=[1,1],s){const a=W(t,"x","depthwiseConv2d","float32"),l=W(e,"filter","depthwiseConv2d","float32");let u=a,c=!1;a.rank===3&&(c=!0,u=q(a,[1,a.shape[0],a.shape[1],a.shape[2]])),M(u.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),M(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const d=o==="NHWC"?u.shape[3]:u.shape[1];M(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),Nr("depthwiseConv2d",r,s);const f={x:u,filter:l},h={strides:n,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s},p=K.runKernel(vb,f,h);return c?q(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const ZE=X({depthwiseConv2d_:CTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Te(t,e,n,r,o=[1,1],i="NHWC"){const s=W(t,"x","dilation2d"),a=W(e,"filter","dilation2d");M(s.rank===3||s.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${s.rank}.`),M(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),M(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let l=s,u=!1;s.rank===3&&(l=q(s,[1,s.shape[0],s.shape[1],s.shape[2]]),u=!0),M(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);const c={x:l,filter:a},d={strides:n,pad:r,dilations:o},f=K.runKernel(xb,c,d);return u?q(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const kTe=X({dilation2d_:$Te});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rd(t,e){const n=t.length,r=[];for(let o=0;o<n;o++){const i=n-1-o,s=t[i]||1;(e[e.length-1-o]||1)>1&&s===1&&r.unshift(i)}return r}function yn(t,e){const n=[];for(let r=0;r<e.length;r++){const o=t[t.length-r-1],i=e.length-r-1,s=e[i];(o==null||o===1&&s>1)&&n.unshift(i)}return n}function Fe(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let o=0;o<n;o++){let i=t[t.length-o-1];i==null&&(i=1);let s=e[e.length-o-1];if(s==null&&(s=1),i===1)r[n-o-1]=s;else if(s===1)r[n-o-1]=i;else if(i!==s){const a=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(a)}else r[n-o-1]=i}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ITe(t,e){let n=W(t,"a","equal","string_or_numeric"),r=W(e,"b","equal","string_or_numeric");[n,r]=Jt(n,r),Fe(n.shape,r.shape);const o={a:n,b:r};return K.runKernel(bb,o)}const ss=X({equal_:ITe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TTe(t,e,n){const r=W(e,"a","where"),o=W(n,"b","where"),i=W(t,"condition","where","bool"),s=Fe(Fe(i.shape,r.shape),o.shape),a=bh(i,s),l=bh(r,s),u=bh(o,s),c={condition:a,t:l,e:u};return K.runKernel(Yb,c)}const lr=X({where_:TTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ETe(t){const n={x:W(t,"x","zerosLike")};return K.runKernel(o1,n)}const et=X({zerosLike_:ETe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NTe(t,e){let n=W(t,"a","div"),r=W(e,"b","div");[n,r]=Jt(n,r);const o=Oe(n,r),i=et(o),s=ss(r,i);return lr(s,i,o)}const ATe=X({divNoNan_:NTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OTe(t,e){const n=W(t,"t1","dot"),r=W(e,"t2","dot");M((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const o=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];if(M(o===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${o} and ${i}.`),n.rank===1&&r.rank===1){const s=q(n,[1,-1]),a=q(r,[-1,1]),l=st(s,a);return q(l,[])}else if(n.rank===1&&r.rank===2){const s=q(n,[1,-1]),a=q(r,[r.shape[0],r.shape[1]]),l=st(s,a);return q(l,[l.size])}else if(n.rank===2&&r.rank===1){const s=q(r,[-1,1]),a=st(n,s);return q(a,[a.size])}else{const s=q(r,[r.shape[0],r.shape[1]]);return st(n,s)}}const _Te=X({dot_:OTe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RTe(t,...e){const n=e.map((o,i)=>W(o,`tensors${i}`,"einsum")),r={equation:t};return K.runKernel(bE,n,r)}const Gf=X({einsum_:RTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PTe(t){const n={x:W(t,"x","elu","float32")};return K.runKernel(ym,n)}const d1=X({elu_:PTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DTe(t){let e=W(t,"x","erf");M(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=Se(e,"float32"));const n={x:e};return K.runKernel(vm,n)}const dU=X({erf_:DTe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JE(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function fU(t,e,n){const r=t.length+e.length,o=[];let i=0,s=0;for(let a=0;a<r;a++)n.indexOf(a)===-1?o.push(t[i++]):o.push(e[s++]);return o}function Nn(t,e){const n=[],r=t.length;for(let i=0;i<r;i++)e.indexOf(i)===-1&&n.push(t[i]);const o=e.map(i=>t[i]);return[n,o]}function an(t,e){const n=e.map(r=>1);return fU(t,n,e)}function Fn(t,e,n){M(JE(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function Ut(t,e){if(JE(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function yl(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function en(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MTe(t,e=null,n=!1){const o={x:W(t,"x","max")},i={reductionIndices:e,keepDims:n};return K.runKernel(_b,o,i)}const wi=X({max_:MTe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FTe(t,e=null,n=!1){const o={x:W(t,"x","min")},i={axis:e,keepDims:n};return K.runKernel(Mb,o,i)}const b0=X({min_:FTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LTe(t,e){let n=W(t,"base","pow"),r=W(e,"exp","pow");[n,r]=Jt(n,r);const o={a:n,b:r};return K.runKernel(Pm,o)}const Iu=X({pow_:LTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function at(t,e){if((zo(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&zo(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return a1(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BTe(t){const n={x:W(t,"x","sqrt","float32")};return K.runKernel(Hm,n)}const Hn=X({sqrt_:BTe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zTe(t){const e=W(t,"x","square"),n={};return K.runKernel("Square",{x:e},n)}const Et=X({square_:zTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jTe(t,e=null,n=!1){let r=W(t,"x","sum");r.dtype==="bool"&&(r=Se(r,"int32"));const o={x:r},i={axis:e,keepDims:n};return K.runKernel(Zb,o,i)}const Ae=X({sum_:jTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WTe(t,e="euclidean",n=null,r=!1){t=W(t,"x","norm");const o=hU(t,e,n);let i=o.shape;if(r){const s=Ue(n,t.shape);i=an(o.shape,s)}return q(o,i)}function hU(t,e,n=null){if(t.rank===0)return nr(t);if(t.rank!==1&&n===null)return hU(q(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return Ae(nr(t),n);if(e===1/0)return wi(nr(t),n);if(e===-1/0)return b0(nr(t),n);if(e==="euclidean"||e===2)return Hn(Ae(Iu(nr(t),at(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return wi(Ae(nr(t),n[0]),n[1]-1);if(e===1/0)return wi(Ae(nr(t),n[1]),n[0]);if(e===-1/0)return b0(Ae(nr(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return Hn(Ae(Et(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const f1=X({norm_:WTe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VTe(t,e=null,n=!1){return f1(t,"euclidean",e,n)}const UTe=X({euclideanNorm_:VTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GTe(t){const n={x:W(t,"x","exp")};return K.runKernel(xm,n)}const as=X({exp_:GTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HTe(t,e=0){const n=W(t,"x","expandDims","string_or_numeric");M(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},o={dim:e};return K.runKernel(wb,r,o)}const vr=X({expandDims_:HTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KTe(t){const n={x:W(t,"x","expm1")};return K.runKernel(bm,n)}const qTe=X({expm1_:KTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XTe(t,e){const n=W(t,"x","tile","string_or_numeric");M(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},o={reps:e};return K.runKernel(Qm,r,o)}const yi=X({tile_:XTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YTe(t,e,n,r="float32"){e==null&&(e=t);const o=Ve([t,e],r),i=t<=e?t:e;for(let a=0;a<i;++a)o.set(1,a,a);const s=q(o.toTensor(),[t,e]);if(n==null)return s;if(n.length===1)return yi(vr(s,0),[n[0],1,1]);if(n.length===2)return yi(vr(vr(s,0),0),[n[0],n[1],1,1]);if(n.length===3)return yi(vr(vr(vr(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const pU=X({eye_:YTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QTe(t){const n={x:W(t,"x","floor","float32")};return K.runKernel(wm,n)}const h1=X({floor_:QTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZTe(t,e,n=0,r=0){const o=W(t,"x","gather"),i=W(e,"indices","gather","int32"),s={x:o,indices:i},a={axis:n,batchDims:r};return K.runKernel(Cb,s,a)}const e2=X({gather_:ZTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JTe(t,e){let n=W(t,"a","greater","string_or_numeric"),r=W(e,"b","greater","string_or_numeric");[n,r]=Jt(n,r),Fe(n.shape,r.shape);const o={a:n,b:r};return K.runKernel($b,o)}const fo=X({greater_:JTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eEe(t,e){let n=W(t,"a","greaterEqual","string_or_numeric"),r=W(e,"b","greaterEqual","string_or_numeric");[n,r]=Jt(n,r),Fe(n.shape,r.shape);const o={a:n,b:r};return K.runKernel(Cm,o)}const Vu=X({greaterEqual_:eEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tEe(t){const n={input:W(t,"input","imag")};return K.runKernel(IE,n)}const t2=X({imag_:tEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nEe(t){const n={x:W(t,"x","isFinite")};return K.runKernel(km,n)}const rEe=X({isFinite_:nEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oEe(t){const n={x:W(t,"x","isInf")};return K.runKernel(Im,n)}const iEe=X({isInf_:oEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sEe(t){const n={x:W(t,"x","isNaN")};return K.runKernel(Tm,n)}const aEe=X({isNaN_:sEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lEe(t,e=.2){const r={x:W(t,"x","leakyRelu")},o={alpha:e};return K.runKernel(kb,r,o)}const n2=X({leakyRelu_:lEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uEe(t,e){let n=W(t,"a","less","string_or_numeric"),r=W(e,"b","less","string_or_numeric");[n,r]=Jt(n,r),Fe(n.shape,r.shape);const o={a:n,b:r};return K.runKernel(Ib,o)}const w0=X({less_:uEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cEe(t,e){let n=W(t,"a","lessEqual","string_or_numeric"),r=W(e,"b","lessEqual","string_or_numeric");[n,r]=Jt(n,r),Fe(n.shape,r.shape);const o={a:n,b:r};return K.runKernel(Tb,o)}const ff=X({lessEqual_:cEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dEe(t,e=5,n=1,r=1,o=.5){const i=W(t,"x","localResponseNormalization");M(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),M(Nd(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let s=i,a=!1;i.rank===3&&(a=!0,s=q(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const l={x:s},u={depthRadius:e,bias:n,alpha:r,beta:o},c=K.runKernel(Ob,l,u);return a?q(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const fEe=X({localResponseNormalization_:dEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hEe(t){const n={x:W(t,"x","log","float32")};return K.runKernel(Em,n)}const ls=X({log_:hEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pEe(t){const n={x:W(t,"x","log1p")};return K.runKernel(Nm,n)}const mU=X({log1p_:pEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mEe(t,e){M(G$(t),()=>"The f passed in variableGrads(f) must be a function"),M(e==null||Array.isArray(e)&&e.every(u=>u instanceof x0),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const u in K.registeredVariables)e.push(K.registeredVariables[u])}const r=n?e.filter(u=>!u.trainable):null,o=e.length;e=e.filter(u=>u.trainable),M(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${o} variables is trainable.`);const i=!0,{value:s,grads:a}=K.gradients(t,e,null,i);M(a.some(u=>u!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),M(s.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${s.rank} tensor`);const l={};return e.forEach((u,c)=>{a[c]!=null&&(l[u.name]=a[c])}),r!=null&&r.forEach(u=>l[u.name]=null),{value:s,grads:l}}function Pd(t){return K.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gEe(t){const n={x:W(t,"x","neg")};return K.runKernel(Lb,n)}const Zt=X({neg_:gEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yEe(t){const n={x:W(t,"x","softplus")};return K.runKernel(Gm,n)}const eg=X({softplus_:yEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vEe(t){const e=W(t,"x","logSigmoid");return Pd(r=>({value:Zt(eg(Zt(r))),gradFunc:s=>H(s,df(Zt(r)))}))(e)}const xEe=X({logSigmoid_:vEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bEe(t,e){let n=W(t,"a","sub"),r=W(e,"b","sub");[n,r]=Jt(n,r);const o={a:n,b:r};return K.runKernel(qm,o)}const _e=X({sub_:bEe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wEe(t,e=-1){const n=W(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return Pd((o,i)=>{const a=wi(o,e,!0),l=_e(o,a),u=_e(Se(l,"float32"),ls(Ae(as(l),e,!0)));return i([u]),{value:u,gradFunc:(d,f)=>{const[h]=f,p=!0,m=as(h);return _e(d,H(Ae(d,e,p),m))}}})(n)}const gU=X({logSoftmax_:wEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SEe(t,e=null,n=!1){const r=W(t,"x","logSumExp"),o=Ue(e,r.shape),i=wi(r,o,!0),s=_e(r,i),a=as(s),l=Ae(a,o),u=ls(l),c=fe(q(i,u.shape),u);if(n){const d=an(c.shape,o);return q(c,d)}return c}const yU=X({logSumExp_:SEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CEe(t,e){const n=W(t,"a","logicalAnd","bool"),r=W(e,"b","logicalAnd","bool");Fe(n.shape,r.shape);const o={a:n,b:r};return K.runKernel(Eb,o)}const Us=X({logicalAnd_:CEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ee(t){const n={x:W(t,"x","logicalNot","bool")};return K.runKernel(Nb,n)}const r2=X({logicalNot_:$Ee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kEe(t,e){const n=W(t,"a","logicalOr","bool"),r=W(e,"b","logicalOr","bool");Fe(n.shape,r.shape);const o={a:n,b:r};return K.runKernel(Ab,o)}const vU=X({logicalOr_:kEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IEe(t,e){const n=W(t,"a","logicalXor","bool"),r=W(e,"b","logicalXor","bool");return Fe(n.shape,r.shape),Us(vU(t,e),r2(Us(t,e)))}const TEe=X({logicalXor_:IEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EEe(t,e,n,r,o){const i=W(t,"x","maxPool"),s=1;let a=i,l=!1;i.rank===3&&(l=!0,a=q(i,[1,i.shape[0],i.shape[1],i.shape[2]])),M(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),M(Kn(n,s),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),Nr("maxPool",r,o);const u={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:o},d=K.runKernel(Rb,u,c);return l?q(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const o2=X({maxPool_:EEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NEe(t,e=[1,1,1],n,r,o,i="NDHWC"){const s=W(t,"x","maxPool3d");let a=s,l=!1;s.rank===4&&(l=!0,a=q(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),M(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),M(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),Nr("maxPool3d",r,o);const u={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:o,dataFormat:i},d=K.runKernel(Pb,u,c);return l?q(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const AEe=X({maxPool3d_:NEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OEe(t,e){let n=W(t,"a","maximum"),r=W(e,"b","maximum");[n,r]=Jt(n,r),n.dtype==="bool"&&(n=Se(n,"int32"),r=Se(r,"int32")),Fe(n.shape,r.shape);const o={a:n,b:r};return K.runKernel(Am,o)}const vl=X({maximum_:OEe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ee(t,e=null,n=!1){const o={x:W(t,"x","mean")},i={axis:e,keepDims:n};return K.runKernel(Db,o,i)}const sn=X({mean_:_Ee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $n(t,e="float32"){if(Zs(t),e==="complex64"){const r=$n(t,"float32"),o=$n(t,"float32");return _d(r,o)}const n=Gn(re(t),e);return K.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xl(t,e="float32"){if(Zs(t),e==="complex64"){const r=xl(t,"float32"),o=$n(t,"float32");return _d(r,o)}const n=eE(re(t),e);return K.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function REe(t,e){let n=W(t,"a","minimum"),r=W(e,"b","minimum");[n,r]=Jt(n,r),n.dtype==="bool"&&(n=Se(n,"int32"),r=Se(r,"int32")),Fe(n.shape,r.shape);const o={a:n,b:r};return K.runKernel(Om,o)}const Tp=X({minimum_:REe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PEe(t,e,n){M(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=W(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");M(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const o=n==="reflect"?1:0;for(let a=0;a<r.rank;a++)M(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),M(e[a][0]>=0&&e[a][0]<=r.shape[a]-o&&e[a][1]>=0&&e[a][1]<=r.shape[a]-o,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-o} or less than 0 for input of shape ${r.shape}`);const i={paddings:e,mode:n},s={x:r};return K.runKernel(Fb,s,i)}const DEe=X({mirrorPad_:PEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MEe(t,e){let n=W(t,"a","mod"),r=W(e,"b","mod");[n,r]=Jt(n,r);const o={a:n,b:r};return K.runKernel(_m,o)}const FEe=X({mod_:MEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LEe(t,e=null,n=!1){t=W(t,"x","moments");const r=Ue(e,t.shape),o=sn(t,r,n);let i=o.shape;n||(i=an(o.shape,r));const s=Et(_e(Se(t,"float32"),q(o,i))),a=sn(s,r,n);return{mean:o,variance:a}}const i2=X({moments_:LEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BEe(t,e){let n=W(t,"a","notEqual","string_or_numeric"),r=W(e,"b","notEqual","string_or_numeric");[n,r]=Jt(n,r),Fe(n.shape,r.shape);const o={a:n,b:r};return K.runKernel(Bb,o)}const S0=X({notEqual_:BEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zEe(t,e,n=1,r=0,o="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const s={indices:W(t,"indices","oneHot","int32")},a={dtype:o,depth:e,onValue:n,offValue:r};return K.runKernel(jb,s,a)}const xU=X({oneHot_:zEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jEe(t){const n={x:W(t,"x","onesLike")};return K.runKernel(zb,n)}const jo=X({onesLike_:jEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WEe(t,e,n=0){const r=W(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const o={paddings:e,constantValue:n},i={x:r};return K.runKernel(Vb,i,o)}const s2=X({pad_:WEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VEe(t,e,n){const r=W(t,"x","spaceToBatchND");M(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),M(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),M(r.shape.reduce((s,a,l)=>l>0&&l<=e.length?s&&(a+n[l-1][0]+n[l-1][1])%e[l-1]===0:s,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const o={x:r},i={blockShape:e,paddings:n};return K.runKernel(Jb,o,i)}const a2=X({spaceToBatchND_:VEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UEe(t,e,n,r,o,i,s){o==null&&(o=[1,1]),i==null&&(i=1),r===0&&(r="valid");const a=W(t,"x","maxPool");let l=a,u=!1;a.rank===3&&(u=!0,l=q(a,[1,a.shape[0],a.shape[1],a.shape[2]])),M(Kn(i,o),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${o}'`);const c=Uo(l.shape,e,i,o,r),d=[c.dilationHeight,c.dilationWidth];let f;r==="same"?f=HEe([c.filterHeight,c.filterWidth],d):f=[[0,0],[0,0]];const h=d[0]===1&&d[1]===1,[p,m]=GEe([c.inHeight,c.inWidth],d,f),g=h?r:"valid",y=h?l:a2(l,d,p),x=(n==="avg"?()=>qE(y,e,i,g,s):()=>o2(y,e,i,g,s))(),b=h?x:XE(x,d,m);return u?q(b,[b.shape[1],b.shape[2],b.shape[3]]):b}function GEe(t,e,n){const r=n.map(c=>c[0]),o=n.map(c=>c[1]),i=t.concat(r,o),s=e.map((c,d)=>(c-i[d]%c)%c),a=o.map((c,d)=>c+s[d]),l=e.map((c,d)=>[r[d],a[d]]),u=e.map((c,d)=>[0,s[d]]);return[l,u]}function HEe(t,e){const r=t.map((s,a)=>s+(s-1)*(e[a]-1)).map(s=>s-1),o=r.map(s=>Math.floor(s/2)),i=r.map((s,a)=>s-o[a]);return r.map((s,a)=>[o[a],i[a]])}const KEe=X({pool_:UEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qEe(t,e){const n=W(t,"x","prelu"),r=W(e,"alpha","prelu"),o={x:n,alpha:r};return K.runKernel(Ub,o)}const l2=X({prelu_:qEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XEe(t,e=null,n=!1){let r=W(t,"x","prod");r.dtype==="bool"&&(r=Se(r,"int32"));const o={x:r},i={axis:e,keepDims:n};return K.runKernel(Gb,o,i)}const YEe=X({prod_:XEe});var u2={exports:{}};u2.exports;(function(t){(function(e,n,r){function o(l){var u=this,c=a();u.next=function(){var d=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=d-(u.c=d|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function i(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function s(l,u){var c=new o(l),d=u&&u.state,f=c.next;return f.int32=function(){return c.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&i(d,c),f.state=function(){return i(c,{})}),f}function a(){var l=4022871197,u=function(c){c=String(c);for(var d=0;d<c.length;d++){l+=c.charCodeAt(d);var f=.02519603282416938*l;l=f>>>0,f-=l,f*=l,l=f>>>0,f-=l,l+=f*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=s:this.alea=s})(Io,t)})(u2);var QEe=u2.exports,c2={exports:{}};c2.exports;(function(t){(function(e,n,r){function o(a){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function i(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function s(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=s:this.xor128=s})(Io,t)})(c2);var ZEe=c2.exports,d2={exports:{}};d2.exports;(function(t){(function(e,n,r){function o(a){var l=this,u="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function i(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function s(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=s:this.xorwow=s})(Io,t)})(d2);var JEe=d2.exports,f2={exports:{}};f2.exports;(function(t){(function(e,n,r){function o(a){var l=this;l.next=function(){var c=l.x,d=l.i,f,h;return f=c[d],f^=f>>>7,h=f^f<<24,f=c[d+1&7],h^=f^f>>>10,f=c[d+3&7],h^=f^f>>>3,f=c[d+4&7],h^=f^f<<7,f=c[d+7&7],f=f^f<<13,h^=f^f<<9,c[d]=h,l.i=d+1&7,h};function u(c,d){var f,h=[];if(d===(d|0))h[0]=d;else for(d=""+d,f=0;f<d.length;++f)h[f&7]=h[f&7]<<15^d.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8?h[7]=-1:h[f],c.x=h,c.i=0,f=256;f>0;--f)c.next()}u(l,a)}function i(a,l){return l.x=a.x.slice(),l.i=a.i,l}function s(a,l){a==null&&(a=+new Date);var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(c.x&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=s:this.xorshift7=s})(Io,t)})(f2);var e2e=f2.exports,h2={exports:{}};h2.exports;(function(t){(function(e,n,r){function o(a){var l=this;l.next=function(){var c=l.w,d=l.X,f=l.i,h,p;return l.w=c=c+1640531527|0,p=d[f+34&127],h=d[f=f+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,p=d[f]=p^h,l.i=f,p+(c^c>>>16)|0};function u(c,d){var f,h,p,m,g,y=[],v=128;for(d===(d|0)?(h=d,d=null):(d=d+"\0",h=0,v=Math.max(v,d.length)),p=0,m=-32;m<v;++m)d&&(h^=d.charCodeAt((m+32)%d.length)),m===0&&(g=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,m>=0&&(g=g+1640531527|0,f=y[m&127]^=h+g,p=f==0?p+1:0);for(p>=128&&(y[(d&&d.length||0)&127]=-1),p=127,m=4*128;m>0;--m)h=y[p+34&127],f=y[p=p+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,y[p]=h^f;c.w=g,c.X=y,c.i=p}u(l,a)}function i(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function s(a,l){a==null&&(a=+new Date);var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(c.X&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=s:this.xor4096=s})(Io,t)})(h2);var t2e=h2.exports,p2={exports:{}};p2.exports;(function(t){(function(e,n,r){function o(a){var l=this,u="";l.next=function(){var d=l.b,f=l.c,h=l.d,p=l.a;return d=d<<25^d>>>7^f,f=f-h|0,h=h<<24^h>>>8^p,p=p-d|0,l.b=d=d<<20^d>>>12^f,l.c=f=f-h|0,l.d=h<<16^f>>>16^p,l.a=p-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):u+=a;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function i(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function s(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=s:this.tychei=s})(Io,t)})(p2);var n2e=p2.exports,bU={exports:{}};const r2e={},o2e=Object.freeze(Object.defineProperty({__proto__:null,default:r2e},Symbol.toStringTag,{value:"Module"})),i2e=U8(o2e);(function(t){(function(e,n,r){var o=256,i=6,s=52,a="random",l=r.pow(o,i),u=r.pow(2,s),c=u*2,d=o-1,f;function h(b,w,S){var $=[];w=w==!0?{entropy:!0}:w||{};var C=y(g(w.entropy?[b,x(n)]:b??v(),3),$),k=new p($),I=function(){for(var T=k.g(i),E=l,_=0;T<u;)T=(T+_)*o,E*=o,_=k.g(1);for(;T>=c;)T/=2,E/=2,_>>>=1;return(T+_)/E};return I.int32=function(){return k.g(4)|0},I.quick=function(){return k.g(4)/4294967296},I.double=I,y(x(k.S),n),(w.pass||S||function(T,E,_,N){return N&&(N.S&&m(N,k),T.state=function(){return m(k,{})}),_?(r[a]=T,E):T})(I,C,"global"in w?w.global:this==r,w.state)}function p(b){var w,S=b.length,$=this,C=0,k=$.i=$.j=0,I=$.S=[];for(S||(b=[S++]);C<o;)I[C]=C++;for(C=0;C<o;C++)I[C]=I[k=d&k+b[C%S]+(w=I[C])],I[k]=w;($.g=function(T){for(var E,_=0,N=$.i,P=$.j,F=$.S;T--;)E=F[N=d&N+1],_=_*o+F[d&(F[N]=F[P=d&P+E])+(F[P]=E)];return $.i=N,$.j=P,_})(o)}function m(b,w){return w.i=b.i,w.j=b.j,w.S=b.S.slice(),w}function g(b,w){var S=[],$=typeof b,C;if(w&&$=="object")for(C in b)try{S.push(g(b[C],w-1))}catch{}return S.length?S:$=="string"?b:b+"\0"}function y(b,w){for(var S=b+"",$,C=0;C<S.length;)w[d&C]=d&($^=w[d&C]*19)+S.charCodeAt(C++);return x(w)}function v(){try{var b;return f&&(b=f.randomBytes)?b=b(o):(b=new Uint8Array(o),(e.crypto||e.msCrypto).getRandomValues(b)),x(b)}catch{var w=e.navigator,S=w&&w.plugins;return[+new Date,e,S,e.screen,x(n)]}}function x(b){return String.fromCharCode.apply(0,b)}if(y(r.random(),n),t.exports){t.exports=h;try{f=i2e}catch{}}else r["seed"+a]=h})(typeof self<"u"?self:Io,[],Math)})(bU);var s2e=bU.exports,a2e=QEe,l2e=ZEe,u2e=JEe,c2e=e2e,d2e=t2e,f2e=n2e,Uu=s2e;Uu.alea=a2e;Uu.xor128=l2e;Uu.xorwow=u2e;Uu.xorshift7=c2e;Uu.xor4096=d2e;Uu.tychei=f2e;var m2=Uu;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wU{constructor(e,n,r,o,i){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const s=i||Math.random();this.random=m2.alea(s.toString())}nextValue(){if(!isNaN(this.nextVal)){const o=this.nextVal;return this.nextVal=NaN,o}let e,n,r=!1;for(;!r;){let o,i,s;do o=2*this.random()-1,i=2*this.random()-1,s=o*o+i*i;while(s>=1||s===0);const a=Math.sqrt(-2*Math.log(s)/s);e=this.mean+this.stdDev*o*a,n=this.mean+this.stdDev*i*a,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class h2e{constructor(e=0,n=1,r,o){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,o==null&&(o=Math.random()),typeof o=="number"&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=m2.alea(o)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p2e(t,e=0,n=1,r,o){if(Zs(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const i=new wU(e,n,r,!1,o),s=Ve(t,r);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}const m2e=X({randomNormal_:p2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g2e(t,e=0,n=1,r="float32",o){Zs(t);const i=Ve(t,r),s=new h2e(e,n,null,o);for(let a=0;a<i.values.length;a++)i.values[a]=s.nextValue();return i.toTensor()}const tg=X({randomUniform_:g2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ep(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const o={start:t,stop:e,step:n,dtype:r};return K.runKernel(RE,{},o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y2e(t){const n={input:W(t,"input","real")};return K.runKernel(PE,n)}const C0=X({real_:y2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v2e(t){const n={x:W(t,"x","reciprocal")};return K.runKernel(Dm,n)}const x2e=X({reciprocal_:v2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b2e(t){const n={x:W(t,"x","relu")};return K.runKernel(Mm,n)}const Gu=X({relu_:b2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w2e(t){const n={x:W(t,"x","relu6")};return K.runKernel(Fm,n)}const SU=X({relu6_:w2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S2e(t,e){const r={x:W(t,"x","reverse")},o={dims:e};return K.runKernel(Xb,r,o)}const Tu=X({reverse_:S2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C2e(t){const n={x:W(t,"x","round")};return K.runKernel(Lm,n)}const CU=X({round_:C2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $2e(t){const n={x:W(t,"x","rsqrt","float32")};return K.runKernel(Bm,n)}const $U=X({rsqrt_:$2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k2e(t){const n={x:W(t,"x","selu")};return K.runKernel(zm,n)}const kU=X({selu_:k2e});function I2e(t,e,n,r,o,i=[1,1],s="NHWC"){const a=W(t,"x","separableConv2d"),l=W(e,"depthwiseFilter","separableConv2d"),u=W(n,"pointwiseFilter","separableConv2d");let c=a,d=!1;if(a.rank===3&&(d=!0,c=q(a,[1,a.shape[0],a.shape[1],a.shape[2]])),s==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");M(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),M(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),M(u.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),M(u.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),M(u.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);const f=l.shape[2],h=l.shape[3];M(u.shape[2]===f*h,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${f*h}, but got ${u.shape[2]}.`);const p=ZE(c,l,r,o,s,i),g=ku(p,u,1,"valid",s);return d?q(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const IU=X({separableConv2d_:I2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T2e(t){const n={x:W(t,"x","sign")};return K.runKernel(Vm,n)}const E2e=X({sign_:T2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N2e(t){const n={x:W(t,"x","sin","float32")};return K.runKernel(jm,n)}const TU=X({sin_:N2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A2e(t){const n={x:W(t,"x","sinh")};return K.runKernel(Wm,n)}const EU=X({sinh_:A2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O2e(t,e,n){const r=W(t,"x","slice1d");return M(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Ct(r,[e],[n])}const g2=X({slice1d_:O2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _2e(t,e,n){const r=W(t,"x","slice2d");return M(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Ct(r,e,n)}const NU=X({slice2d_:_2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R2e(t,e,n){const r=W(t,"x","slice3d");return M(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Ct(r,e,n)}const y2=X({slice3d_:R2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P2e(t,e,n){const r=W(t,"x","slice4d");return M(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Ct(r,e,n)}const $0=X({slice4d_:P2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D2e(t,e=-1){const n=W(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},o={dim:e};return K.runKernel(t1,r,o)}const v2=X({softmax_:D2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M2e(t){M(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return K.runKernel(SE,e)}const AU=X({fft_:M2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F2e(t){M(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return K.runKernel(kE,e)}const lk=X({ifft_:F2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L2e(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const o=q(t,[n,e]);r=lk(o)}else{const o=[n,2*(e-1)],i=q(C0(t),[n,e]),s=q(t2(t),[n,e]),a=Tu(Ct(i,[0,1],[n,e-2]),1),l=H(Tu(Ct(s,[0,1],[n,e-2]),1),at(-1)),u=Sr([i,a],1),c=Sr([s,l],1),d=q(_d(u,c),[o[0],o[1]]);r=lk(d)}if(r=C0(r),t.rank===3&&t.shape[0]!==0){const o=r,i=t.shape[0];r=q(r,[i,r.shape[0]/i,r.shape[1]]),o.dispose()}return r}const B2e=X({irfft_:L2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z2e(t,e,n=0){const o={x:W(t,"x","split")},i={numOrSizeSplits:e,axis:n};return K.runKernel(e1,o,i)}const io=X({split_:z2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j2e(t,e){M(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let o;if(e!=null&&e<n){const p=t.shape.map(g=>0),m=t.shape.map(g=>g);m[t.shape.length-1]=e,o=Ct(t,p,m),n=e}else if(e!=null&&e>n){const p=t.shape.map(m=>m);p[t.shape.length-1]=e-n,o=Sr([t,$n(p)],t.shape.length-1),n=e}else o=t;const i=et(o),s=q(_d(o,i),[r,n]),a=AU(s),l=Math.floor(n/2)+1,u=C0(a),c=t2(a),d=io(u,[l,n-l],u.shape.length-1),f=io(c,[l,n-l],c.shape.length-1),h=o.shape.slice();return h[o.shape.length-1]=l,q(_d(d[0],f[0]),h)}const W2e=X({rfft_:j2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V2e(t,e){let n=W(t,"a","squaredDifference"),r=W(e,"b","squaredDifference");[n,r]=Jt(n,r),Fe(n.shape,r.shape);const o={a:n,b:r},i={};return K.runKernel(Km,o,i)}const U2e=X({squaredDifference_:V2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G2e(t,e){const n=W(t,"x","squeeze","string_or_numeric");return q(n,pl(n.shape,e).newShape)}const ng=X({squeeze_:G2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H2e(t,e=0){const n=qV(t,"tensors","stack","string_or_numeric");M(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&M(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,o={axis:e};return K.runKernel(Wb,r,o)}const Gs=X({stack_:H2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K2e(t,e=0){const r={x:W(t,"x","step")},o={alpha:e};return K.runKernel(Zm,r,o)}const rg=X({step_:K2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q2e(t,e,n,r,o=0,i=0,s=0,a=0,l=0){const c={x:W(t,"x","stridedSlice","string_or_numeric")},d={begin:e,end:n,strides:r,beginMask:o,endMask:i,ellipsisMask:s,newAxisMask:a,shrinkAxisMask:l};return K.runKernel(BE,c,d)}const X2e=X({stridedSlice_:q2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y2e(t){const n={x:W(t,"x","tan","float32")};return K.runKernel(Xm,n)}const Q2e=X({tan_:Y2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lr(t,e){eV(t);const n=s1(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return a1(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function za(t,e,n){if(eV(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=s1(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return a1(t,e,r,n)}function OU(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,o=e.rank>1?e.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${o}.`;if(n.rank<o)throw new Error(i+` update.rank < ${o}. `);if(t.length<r+(n.rank-o))throw new Error(i+` Output shape length < ${r+(n.rank-o)}`);if(n.rank!==o+t.length-r)throw new Error(i+` update.rank != ${o+t.length-r}`);for(let s=0;s<o;++s)if(n.shape[s]!==e.shape[s])throw new Error(i+` updates.shape[${s}] (${n.shape[s]}) != indices.shape[${s}] (${e.shape[s]}).`);for(let s=0;s<n.rank-o;++s)if(n.shape[s+o]!==t[s+r])throw new Error(i+` updates.shape[${s+o}] (${n.shape[s+o]}) != shape[${s+o}] (${t[s+o]})`)}function Z2e(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}OU(n,e,t)}function Hu(t,e,n){const r=e.shape.length,o=r>1?e.shape[r-1]:1,i=n.length;let s=1;for(let d=o;d<i;++d)s*=n[d];const a=o<1?1:o,l=re(e.shape)/a,u=[...Ne(n.slice(0,o)),1],c=re(n);return{sliceRank:o,numUpdates:l,sliceSize:s,strides:u,outputSize:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J2e(t,e=1,n=!0){const r=W(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const o=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>o)throw new Error(`'k' passed to topk() must be <= the last dimension (${o}) but got ${e}`);const i={x:r},s={k:e,sorted:n},[a,l]=K.runKernel(zE,i,s);return{values:a,indices:l}}const eNe=X({topk_:J2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tNe(t,e=0,n=1,r,o){if(Zs(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const i=new wU(e,n,r,!0,o),s=Ve(t,r);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}const _U=X({truncatedNormal_:tNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nNe(t,e=0){const n=W(t,"x","unique","string_or_numeric");M(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},o={axis:e},[i,s]=K.runKernel(WE,r,o);return{values:i,indices:s}}const rNe=X({unique_:nNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oNe(t,e,n){const r=W(t,"x","unsortedSegmentSum"),o=W(e,"segmentIds","unsortedSegmentSum","int32");M(Nd(n),()=>"numSegments must be of dtype int");const i={x:r,segmentIds:o},s={numSegments:n};return K.runKernel(r1,i,s)}const RU=X({unsortedSegmentSum_:oNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iNe(t,e=0){const n=W(t,"x","unstack","string_or_numeric");M(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},o={axis:e};return K.runKernel(n1,r,o)}const Eu=X({unstack_:iNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sNe(t,e=!0,n,r){return K.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PU(t,e){const n=[];for(let i=0;i<e.length;i++)e[i]&&n.push(i);const r=Ve(t,"int32"),o=Ve([n.length,t.length],"int32");for(let i=0;i<n.length;i++){const s=r.indexToLoc(n[i]),a=i*t.length;o.values.set(s,a)}return o.toTensor()}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aNe(t,e,n){const r=W(t,"x","transpose");if(e==null&&(e=r.shape.map((s,a)=>a).reverse()),M(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(s=>{M(s>=0&&s<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const o={x:r},i={perm:e};return r.dtype==="complex64"?Q(()=>{let s=C0(r),a=t2(r);return s=K.runKernel(zc,{x:s},i),a=K.runKernel(zc,{x:a},i),n&&(a=Zt(a)),_d(s,a)}):K.runKernel(zc,o,i)}const Je=X({transpose_:aNe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lNe(t,e){if(e==null)return t.shape.slice();if(ut(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uNe(t,e,n,r){const o=W(t,"x","dropout");if(M(o.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${o.dtype} tensor instead.`),M(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof cn?o.clone():o;const i=lNe(o,n),s=1-e,a=Oe(h1(fe(tg(i,0,1,"float32",r),s)),s);return H(o,a)}const cNe=X({dropout_:uNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dNe(t,e,n,r,o,i="NHWC",s){let a=t;t.rank===3&&(a=q(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=q(e,[1,e.shape[0],e.shape[1],e.shape[2]])),M(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),M(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),M(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const u=i==="NHWC"?a.shape[3]:a.shape[1],c=i==="NHWC"?l.shape[3]:l.shape[1];M(u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`),M(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),Nr("conv2dDerFilter",o,s);const d={x:a,dy:l},f={strides:r,pad:o,dataFormat:i,dimRoundingMode:s,filterShape:n};return K.runKernel(dE,d,f)}const x2=X({conv2DBackpropFilter_:dNe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b2(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return H(t,rg(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function w2(t,e){let n=e;const r=yn(t.shape,e.shape);return r.length>0&&(n=Ae(n,r)),q(n,t.shape)}function S2(t,e,n,r){if(e==="linear")return t;if(e==="relu")return Gu(t);if(e==="elu")return d1(t);if(e==="relu6")return SU(t);if(e==="prelu")return l2(t,n);if(e==="leakyrelu")return n2(t,r);if(e==="sigmoid")return df(t);throw new Error(`Unknown fused activation ${e}.`)}const C2=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fNe({x:t,filter:e,strides:n,pad:r,dataFormat:o="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:a,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(l=l||"linear",C2(K.state.gradientDepth,l)===!1){M(o==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${o} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let S=ku(t,e,n,r,o,i,s);return a!=null&&(S=fe(S,a)),S2(S,l,u,c)}const d=W(t,"x","conv2d","float32"),f=W(e,"filter","conv2d","float32");let h=d,p=!1;d.rank===3&&(p=!0,h=q(d,[1,d.shape[0],d.shape[1],d.shape[2]])),M(h.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`),M(f.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${f.rank}.`),Nr("fused conv2d",r,s);const m=o==="NHWC"?h.shape[3]:h.shape[1];M(f.shape[2]===m,()=>`Error in conv2d: depth of input (${m}) must match input depth for filter ${f.shape[2]}.`),M(Kn(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);const g=Mn(h.shape,f.shape,n,i,r,s);let y;a!=null&&(y=W(a,"bias","fused conv2d"),[y]=Jt(y,d),o==="NHWC"?Fe(g.outShape,y.shape):(M(y.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${y.shape.length}.`),M(y.shape.length===0||y.shape[0]===g.outChannels||y.shape[0]===1,()=>`Error in fused conv2d: bias shape (${y.shape}) is not compatible with the number of output channels (${g.outChannels})`)));let v;if(u!=null){const S=u.shape;if(M(S.length<=1||S.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${S.length}.`),S.length===1)M(S[0]===1||S[0]===g.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${S}) is not compatible with the number of output channels (${g.outChannels}).`);else if(S.length===3)try{Fe(S,g.outShape)}catch{const C=`Error in fused conv2d: PReLU activation weights (${S}) is not compatible with the output shape of the conv2d (${g.outShape}).`;throw Error(C)}v=W(u,"prelu weights","fused conv2d")}const x=(S,$)=>{M(o==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${o} but only NHWC is currently supported.`);const[C,k,I,T]=$,E=b2(S,I,l);M(Cu(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);const _=YE(k.shape,E,C,n,r),N=x2(k,E,C.shape,n,r),P=[_,N];if(T!=null){const F=w2(T,E);P.push(F)}return P},b={x:h,filter:f,bias:y,preluActivationWeights:v},w={strides:n,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s,activation:l,leakyreluAlpha:c};return a==null?Pd(($,C,k)=>{let I=K.runKernel(g0,b,w);return k([C,$,I]),p&&(I=q(I,[I.shape[1],I.shape[2],I.shape[3]])),{value:I,gradFunc:x}})(h,f):Pd(($,C,k,I)=>{let T=K.runKernel(g0,b,w);return I([C,$,T,k]),p&&(T=q(T,[T.shape[1],T.shape[2],T.shape[3]])),{value:T,gradFunc:x}})(h,f,y)}const hNe=X({fusedConv2d_:fNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pNe(t,e,n,r,o,i=[1,1],s){let a=t;t.rank===3&&(a=q(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=q(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={x:a,dy:l},c={strides:r,pad:o,dimRoundingMode:s,dilations:i,filterShape:n};return K.runKernel(vE,u,c)}const mNe=X({depthwiseConv2dNativeBackpropFilter_:pNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gNe(t,e,n,r,o,i=[1,1],s){let a=e,l=!1;e.rank===3&&(l=!0,a=q(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={dy:a,filter:n},c={strides:r,pad:o,dimRoundingMode:s,dilations:i,inputShape:t},d=K.runKernel(xE,u,c);return l?q(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const yNe=X({depthwiseConv2dNativeBackpropInput_:gNe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vNe({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:o,activation:i="linear",preluActivationWeights:s,leakyreluAlpha:a=.2}){if(C2(K.state.gradientDepth,i)===!1){let T=st(t,e,n,r);return o!=null&&(T=fe(T,o)),S2(T,i,s,a)}let l=W(t,"a","fused matMul"),u=W(e,"b","fused matMul");[l,u]=Jt(l,u);const c=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=r?u.shape[u.rank-1]:u.shape[u.rank-2],f=n?l.shape[l.rank-1]:l.shape[l.rank-2],h=r?u.shape[u.rank-2]:u.shape[u.rank-1],p=l.shape.slice(0,-2),m=u.shape.slice(0,-2),g=re(p),y=re(m);M(c===d,()=>`Error in fused matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${n} and transposeB=${r} must match.`);const x=Fe(l.shape.slice(0,-2),u.shape.slice(0,-2)).concat([f,h]),b=n?q(l,[g,c,f]):q(l,[g,f,c]),w=r?q(u,[y,h,d]):q(u,[y,d,h]);let S;o!=null&&(S=W(o,"bias","fused matMul"),[S]=Jt(S,l),Fe(x,S.shape));let $;s!=null&&($=W(s,"prelu weights","fused matMul"));const C=(T,E)=>{const[_,N,P,F]=E,L=b2(q(T,P.shape),P,i);let A,O;if(!n&&!r?(A=st(L,N,!1,!0),O=st(_,L,!0,!1)):!n&&r?(A=st(L,N,!1,!1),O=st(L,_,!0,!1)):n&&!r?(A=st(N,L,!1,!0),O=st(_,L,!1,!1)):(A=st(N,L,!0,!0),O=st(L,_,!0,!0)),o!=null){const j=w2(F,L);return[A,O,j]}else return[A,O]},k={a:b,b:w,bias:S,preluActivationWeights:$},I={transposeA:n,transposeB:r,activation:i,leakyreluAlpha:a};return o==null?Pd((E,_,N)=>{const P=K.runKernel(m0,k,I);return N([E,_,P]),{value:q(P,x),gradFunc:C}})(b,w):Pd((E,_,N,P)=>{const F=K.runKernel(m0,k,I);return P([E,_,F,N]),{value:q(F,x),gradFunc:C}})(b,w,S)}const JD=X({fusedMatMul_:vNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xNe(t,e,n,r,o="bilinear",i=0){const s=W(t,"image","cropAndResize"),a=W(e,"boxes","cropAndResize","float32"),l=W(n,"boxInd","cropAndResize","int32"),u=a.shape[0];M(s.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${s.rank}.`),M(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${a.shape}.`),M(l.rank===1&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${a.shape}.`),M(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),M(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),M(o==="bilinear"||o==="nearest",()=>`method must be bilinear or nearest, but was ${o}`);const c={image:s,boxes:a,boxInd:l},d={method:o,extrapolationValue:i,cropSize:r};return K.runKernel(mE,c,d)}const bNe=X({cropAndResize_:xNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wNe(t){const e=W(t,"image","flipLeftRight","float32");M(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return K.runKernel($E,n,{})}const SNe=X({flipLeftRight_:wNe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CNe(t){const e=W(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];M(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),M(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const o=new Array(e.rank);return o.fill(1,0,n),o[n]=3,yi(e,o)}const $Ne=X({grayscaleToRGB_:CNe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kNe(t){const e=W(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];M(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),M(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const o=e.dtype,i=Se(e,"float32"),s=Lr([.2989,.587,.114]);let a;switch(e.rank){case 2:a=Gf("ij,j->i",i,s);break;case 3:a=Gf("ijk,k->ij",i,s);break;case 4:a=Gf("ijkl,l->ijk",i,s);break;case 5:a=Gf("ijklm,m->ijkl",i,s);break;case 6:a=Gf("ijklmn,n->ijklm",i,s);break;default:throw new Error("Not a valid tensor rank.")}return a=vr(a,-1),Se(a,o)}const INe=X({rgbToGrayscale_:kNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TNe(t,e,n=0,r=.5){const o=W(t,"image","rotateWithOffset","float32");M(o.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${o.rank}.`);const i={image:o},s={radians:e,fillValue:n,center:r};return K.runKernel(VE,i,s)}const ENe=X({rotateWithOffset_:TNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hf(t,e,n,r,o,i){r==null&&(r=.5),o==null&&(o=Number.NEGATIVE_INFINITY),i==null&&(i=0);const s=t.shape[0];return n=Math.min(n,s),M(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),M(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),M(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),M(e.rank===1,()=>"scores must be a 1D tensor"),M(e.shape[0]===s,()=>`scores has incompatible shape with boxes. Expected ${s}, but was ${e.shape[0]}`),M(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NNe(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY){const i=W(t,"boxes","nonMaxSuppression","float32"),s=W(e,"scores","nonMaxSuppression","float32"),a=hf(i,s,n,r,o);n=a.maxOutputSize,r=a.iouThreshold,o=a.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:o};return K.runKernel(AE,{boxes:i,scores:s},l)}const ANe=X({nonMaxSuppression_:NNe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ONe(t,e,n){const r=_Ne(t,e,n),o=r<0?-(r+1):r;t.splice(o,0,e)}function _Ne(t,e,n){return PNe(t,e,n||RNe)}function RNe(t,e){return t>e?1:t<e?-1:0}function PNe(t,e,n){let r=0,o=t.length,i=0,s=!1;for(;r<o;){i=r+(o-r>>>1);const a=n(e,t[i]);a>0?r=i+1:(o=i,s=!a)}return s?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $2(t,e,n,r,o){return T2(t,e,n,r,o,0)}function k2(t,e,n,r,o,i){return T2(t,e,n,r,o,0,!1,i,!0)}function I2(t,e,n,r,o,i){return T2(t,e,n,r,o,i,!0)}function T2(t,e,n,r,o,i,s=!1,a=!1,l=!1){const u=[];for(let g=0;g<e.length;g++)e[g]>o&&u.push({score:e[g],boxIndex:g,suppressBeginIndex:0});u.sort(eM);const c=i>0?-.5/i:0,d=[],f=[];for(;d.length<n&&u.length>0;){const g=u.pop(),{score:y,boxIndex:v,suppressBeginIndex:x}=g;if(y<o)break;let b=!1;for(let w=d.length-1;w>=x;--w){const S=DNe(t,v,d[w]);if(S>=r){b=!0;break}if(g.score=g.score*MNe(r,c,S),g.score<=o)break}g.suppressBeginIndex=d.length,b||(g.score===y?(d.push(v),f.push(g.score)):g.score>o&&ONe(u,g,eM))}const h=d.length,p=n-h;a&&p>0&&(d.push(...new Array(p).fill(0)),f.push(...new Array(p).fill(0)));const m={selectedIndices:d};return s&&(m.selectedScores=f),l&&(m.validOutputs=h),m}function DNe(t,e,n){const r=t.subarray(e*4,e*4+4),o=t.subarray(n*4,n*4+4),i=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(o[0],o[2]),c=Math.min(o[1],o[3]),d=Math.max(o[0],o[2]),f=Math.max(o[1],o[3]),h=(a-i)*(l-s),p=(d-u)*(f-c);if(h<=0||p<=0)return 0;const m=Math.max(i,u),g=Math.max(s,c),y=Math.min(a,d),v=Math.min(l,f),x=Math.max(y-m,0)*Math.max(v-g,0);return x/(h+p-x)}function MNe(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function eM(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function FNe(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY){const i=W(t,"boxes","nonMaxSuppressionAsync"),s=W(e,"scores","nonMaxSuppressionAsync"),a=hf(i,s,n,r,o);n=a.maxOutputSize,r=a.iouThreshold,o=a.scoreThreshold;const l=await Promise.all([i.data(),s.data()]),u=l[0],c=l[1],{selectedIndices:d}=$2(u,c,n,r,o);return i!==t&&i.dispose(),s!==e&&s.dispose(),Lr(d,"int32")}const LNe=FNe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BNe(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,i=0){const s=W(t,"boxes","nonMaxSuppression"),a=W(e,"scores","nonMaxSuppression"),l=hf(s,a,n,r,o,i);n=l.maxOutputSize,r=l.iouThreshold,o=l.scoreThreshold,i=l.softNmsSigma;const u={boxes:s,scores:a},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:i},d=K.runKernel(_E,u,c);return{selectedIndices:d[0],selectedScores:d[1]}}const zNe=X({nonMaxSuppressionWithScore_:BNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function jNe(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,i=0){const s=W(t,"boxes","nonMaxSuppressionAsync"),a=W(e,"scores","nonMaxSuppressionAsync"),l=hf(s,a,n,r,o,i);n=l.maxOutputSize,r=l.iouThreshold,o=l.scoreThreshold,i=l.softNmsSigma;const u=await Promise.all([s.data(),a.data()]),c=u[0],d=u[1],{selectedIndices:f,selectedScores:h}=I2(c,d,n,r,o,i);return s!==t&&s.dispose(),a!==e&&a.dispose(),{selectedIndices:Lr(f,"int32"),selectedScores:Lr(h)}}const WNe=jNe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VNe(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,i=!1){const s=W(t,"boxes","nonMaxSuppression"),a=W(e,"scores","nonMaxSuppression"),l=hf(s,a,n,r,o,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,f={boxes:s,scores:a},h={maxOutputSize:u,iouThreshold:c,scoreThreshold:d,padToMaxOutputSize:i},p=K.runKernel(OE,f,h);return{selectedIndices:p[0],validOutputs:p[1]}}const UNe=X({nonMaxSuppressionPadded_:VNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function GNe(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,i=!1){const s=W(t,"boxes","nonMaxSuppressionAsync"),a=W(e,"scores","nonMaxSuppressionAsync"),l=hf(s,a,n,r,o,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,[f,h]=await Promise.all([s.data(),a.data()]),{selectedIndices:p,validOutputs:m}=k2(f,h,u,c,d,i);return s!==t&&s.dispose(),a!==e&&a.dispose(),{selectedIndices:Lr(p,"int32"),validOutputs:at(m,"int32")}}const HNe=GNe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KNe(t,e,n=!1,r=!1){const o=W(t,"images","resizeBilinear");M(o.rank===3||o.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${o.rank}.`),M(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),M(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=o,s=!1;o.rank===3&&(s=!0,i=q(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const a={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},u=K.runKernel(qb,a,l);return s?q(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const DU=X({resizeBilinear_:KNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qNe(t,e,n=!1,r=!1){const o=W(t,"images","resizeNearestNeighbor");M(o.rank===3||o.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${o.rank}.`),M(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),M(o.dtype==="float32"||o.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),M(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=o,s=!1;o.rank===3&&(s=!0,i=q(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const a={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},u=K.runKernel(Kb,a,l);return s?q(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const MU=X({resizeNearestNeighbor_:qNe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XNe(t,e="binary",n=!1,r=.5){const o=W(t,"image","threshold"),i=.2989,s=.587,a=.114,l=o.shape[0]*o.shape[1];let u=H(Lr([r]),255),c,d,f,h;if(M(o.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${o.rank}.`),M(o.shape[2]===3||o.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${o.shape[2]}.`),M(o.dtype==="int32"||o.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${o.dtype}.`),M(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),o.shape[2]===3){[c,d,f]=io(o,[1,1,1],-1);const g=H(c,i),y=H(d,s),v=H(f,a);h=fe(fe(g,y),v)}else h=t;if(e==="otsu"){const g=qIe(Se(CU(h),"int32"),XV([]),256);u=YNe(g,l)}const p=n?ff(h,u):fo(h,u);return Se(H(p,255),"int32")}function YNe(t,e){let n=Lr([-1]),r=Lr([0]),o=Lr([0]),i,s,a,l,u,c;for(let d=0;d<t.size-1;d++){i=Ct(t,0,d+1),s=Ct(t,d+1),u=Oe(Ae(i),e),c=Oe(Ae(s),e);const f=Ae(H(i,Ep(0,i.size)));a=Oe(f,Ae(i));const h=c1(s.shape,i.size),p=fe(Ep(0,s.size),h),m=H(s,p);l=Oe(Ae(m),Ae(s));const g=_e(a,l),y=_e(a,l),v=H(u,c);o=H(H(v,g),y);const x=fo(o,r);r=lr(x,o,r),n=lr(x,Lr([d]),n)}return n}const QNe=X({threshold_:XNe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZNe(t,e,n="nearest",r="constant",o=0,i){const s=W(t,"image","transform","float32"),a=W(e,"transforms","transform","float32");M(s.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${s.rank}.`),M(a.rank===2&&(a.shape[0]===s.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),M(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);const l={image:s,transforms:a},u={interpolation:n,fillMode:r,fillValue:o,outputShape:i};return K.runKernel(jE,l,u)}const JNe=X({transform_:ZNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eAe(t,e,n){const r=W(t,"a","bandPart");M(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const o=r.shape,[i,s]=r.shape.slice(-2);let a,l;typeof e=="number"?(M(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),M(e<=i,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${i}).`),a=W(e<0?i:e,"numLower","bandPart")):(M(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=lr(w0(e,0),i,Tp(e,i))),typeof n=="number"?(M(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),M(n<=s,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${s}).`),l=W(n<0?s:n,"numUpper","bandPart")):(M(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=lr(w0(n,0),s,Tp(n,s)));const u=q(Ep(0,i,1,"int32"),[-1,1]),c=Ep(0,s,1,"int32"),d=_e(u,c),f=Us(ff(d,a),Vu(d,Zt(l))),h=$n([i,s],r.dtype);return q(Gs(Eu(q(r,[-1,i,s])).map(p=>lr(f,p,h))),o)}const tAe=X({bandPart_:eAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nAe(t){let e;if(Array.isArray(t)){e=!1,M(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const o=t[0].shape[0];for(let i=1;i<t.length;++i)M(t[i].shape[0]===o,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[i].shape[0]} vs. ${o})`)}else e=!0,t=io(t,t.shape[0],0).map(o=>ng(o,[0]));M(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let o=0;o<t.length;++o)n.push(K.tidy(()=>{let i=r[o];if(o>0)for(let s=0;s<o;++s){const a=H(Ae(H(n[s],i)),n[s]);i=_e(i,a)}return Oe(i,f1(i,"euclidean"))}));return e?Gs(n,0):n}const rAe=X({gramSchmidt_:nAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oAe(t,e=!1){if(M(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return tM(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,u)=>l*u),r=Eu(q(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),o=[],i=[];r.forEach(l=>{const[u,c]=tM(l,e);o.push(u),i.push(c)});const s=q(Gs(o,0),t.shape),a=q(Gs(i,0),t.shape);return[s,a]}}function tM(t,e=!1){return K.tidy(()=>{M(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let o=pU(n),i=ou(t);const s=za([[1]],[1,1]);let a=ou(s);const l=n>=r?r:n;for(let u=0;u<l;++u){const c=i,d=a,f=o;[a,i,o]=K.tidy(()=>{const h=Ct(i,[u,u],[n-u,1]),p=f1(h),m=Ct(i,[u,u],[1,1]),g=lr(fo(m,0),za([[-1]]),za([[1]])),y=_e(m,H(g,p)),v=Oe(h,y);v.shape[0]===1?a=ou(s):a=Sr([s,Ct(v,[1,0],[v.shape[0]-1,v.shape[1]])],0);const x=Zt(Oe(st(g,y),p)),b=Ct(i,[u,0],[n-u,r]),w=H(x,a),S=Je(a);if(u===0)i=_e(b,st(w,st(S,b)));else{const k=_e(b,st(w,st(S,b)));i=Sr([Ct(i,[0,0],[u,r]),k],0)}const $=Je(w),C=Ct(o,[0,u],[n,o.shape[1]-u]);if(u===0)o=_e(C,st(st(C,a),$));else{const k=_e(C,st(st(C,a),$));o=Sr([Ct(o,[0,0],[n,u]),k],1)}return[a,i,o]}),Ke([c,d,f])}return!e&&n>r&&(o=Ct(o,[0,0],[n,r]),i=Ct(i,[0,0],[r,r])),[o,i]})}const iAe=X({qr_:oAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ts={flipLeftRight:SNe,grayscaleToRGB:$Ne,resizeNearestNeighbor:MU,resizeBilinear:DU,rgbToGrayscale:INe,rotateWithOffset:ENe,cropAndResize:bNe,nonMaxSuppression:ANe,nonMaxSuppressionAsync:LNe,nonMaxSuppressionWithScore:zNe,nonMaxSuppressionWithScoreAsync:WNe,nonMaxSuppressionPadded:UNe,nonMaxSuppressionPaddedAsync:HNe,threshold:QNe,transform:JNe},sAe={bandPart:tAe,gramSchmidt:rAe,qr:iAe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aAe=new Map,lAe=new Map;class pf{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class ko{constructor(){this.classNameMap={}}static getMap(){return ko.instance==null&&(ko.instance=new ko),ko.instance}static register(e){ko.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function de(t,e,n){M(t.className!=null,()=>"Class being registered does not have the static className property defined."),M(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),M(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,o=e+">"+r;return ko.register(t),aAe.set(o,t),lAe.set(t,o),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bl extends pf{minimize(e,n=!1,r){const{value:o,grads:i}=this.computeGradients(e,r);if(r!=null){const s=r.map(a=>({name:a.name,tensor:i[a.name]}));this.applyGradients(s)}else this.applyGradients(i);return Ke(i),n?o:(o.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return mEe(e,n)}dispose(){this.iterations_!=null&&Ke(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:at(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(bl,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FU extends bl{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=K.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{const i=K.registeredVariables[r],s=!1;this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${r}/accum_grad`,variable:Q(()=>et(i).variable(s))}),this.accumulatedUpdates[o]==null&&(this.accumulatedUpdates[o]={originalName:`${r}/accum_var`,variable:Q(()=>et(i).variable(s))});const a=Array.isArray(e)?e[o].tensor:e[r];if(a==null)return;const l=this.accumulatedGrads[o].variable,u=this.accumulatedUpdates[o].variable;Q(()=>{const c=fe(H(l,this.rho),H(Et(a),1-this.rho)),d=H(Oe(Hn(fe(u,this.epsilon)),Hn(fe(l,this.epsilon))),a),f=fe(H(u,this.rho),H(Et(d),1-this.rho));l.assign(c),u.assign(f);const h=fe(H(d,-this.learningRate),i);i.assign(h)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(Ke(this.accumulatedGrads.map(e=>e.variable)),Ke(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LU extends bl{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{const i=K.registeredVariables[r];this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${r}/accumulator`,variable:Q(()=>c1(i.shape,this.initialAccumulatorValue).variable(!1))});const s=Array.isArray(e)?e[o].tensor:e[r];if(s==null)return;const a=this.accumulatedGrads[o].variable;Q(()=>{const l=fe(a,Et(s));a.assign(l);const u=fe(H(Oe(s,Hn(fe(l,K.backend.epsilon()))),-this.learningRate),i);i.assign(u)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&Ke(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BU extends bl{static get className(){return"Adam"}constructor(e,n,r,o=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=o,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Q(()=>{this.accBeta1=at(n).variable(),this.accBeta2=at(r).variable()}),o==null&&(this.epsilon=K.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Q(()=>{const r=_e(1,this.accBeta1),o=_e(1,this.accBeta2);n.forEach((i,s)=>{const a=K.registeredVariables[i],l=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${i}/m`,variable:Q(()=>et(a).variable(l))}),this.accumulatedSecondMoment[s]==null&&(this.accumulatedSecondMoment[s]={originalName:`${i}/v`,variable:Q(()=>et(a).variable(l))});const u=Array.isArray(e)?e[s].tensor:e[i];if(u==null)return;const c=this.accumulatedFirstMoment[s].variable,d=this.accumulatedSecondMoment[s].variable,f=fe(H(c,this.beta1),H(u,1-this.beta1)),h=fe(H(d,this.beta2),H(Et(u),1-this.beta2)),p=Oe(f,r),m=Oe(h,o);c.assign(f),d.assign(h);const g=fe(H(Oe(p,fe(Hn(m),this.epsilon)),-this.learningRate),a);a.assign(g)}),this.accBeta1.assign(H(this.accBeta1,this.beta1)),this.accBeta2.assign(H(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Ke(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&Ke(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),Q(()=>{this.accBeta1.assign(Iu(this.beta1,this.iterations_+1)),this.accBeta2.assign(Iu(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zU extends bl{static get className(){return"Adamax"}constructor(e,n,r,o=null,i=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=o,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Q(()=>{this.iteration=at(0).variable(),this.accBeta1=at(n).variable()}),o==null&&(this.epsilon=K.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Q(()=>{const r=_e(1,this.accBeta1),o=Oe(-this.learningRate,fe(H(this.iteration,this.decay),1));n.forEach((i,s)=>{const a=K.registeredVariables[i],l=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${i}/m`,variable:et(a).variable(l)}),this.accumulatedWeightedInfNorm[s]==null&&(this.accumulatedWeightedInfNorm[s]={originalName:`${i}/v`,variable:et(a).variable(l)});const u=Array.isArray(e)?e[s].tensor:e[i];if(u==null)return;const c=this.accumulatedFirstMoment[s].variable,d=this.accumulatedWeightedInfNorm[s].variable,f=fe(H(c,this.beta1),H(u,1-this.beta1)),h=H(d,this.beta2),p=nr(u),m=vl(h,p);c.assign(f),d.assign(m);const g=fe(H(Oe(o,r),Oe(f,fe(m,this.epsilon))),a);a.assign(g)}),this.iteration.assign(fe(this.iteration,1)),this.accBeta1.assign(H(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Ke(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&Ke(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class E2 extends bl{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{const i=Array.isArray(e)?e[o].tensor:e[r];if(i==null)return;const s=K.registeredVariables[r];Q(()=>{const a=fe(H(this.c,i),s);s.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=es(at(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jU extends E2{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=at(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{const i=K.registeredVariables[r];this.accumulations[o]==null&&(this.accumulations[o]={originalName:`${r}/momentum`,variable:Q(()=>et(i).variable(!1))});const s=this.accumulations[o].variable,a=Array.isArray(e)?e[o].tensor:e[r];a!=null&&Q(()=>{let l;const u=fe(H(this.m,s),a);this.useNesterov?l=fe(H(this.c,fe(a,H(u,this.m))),i):l=fe(H(this.c,u),i),s.assign(u),i.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&Ke(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WU extends bl{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,o=null,i=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=o,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,o==null&&(this.epsilon=K.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{const i=K.registeredVariables[r],s=!1;this.accumulatedMeanSquares[o]==null&&(this.accumulatedMeanSquares[o]={originalName:`${r}/rms`,variable:Q(()=>et(i).variable(s))}),this.accumulatedMoments[o]==null&&(this.accumulatedMoments[o]={originalName:`${r}/momentum`,variable:Q(()=>et(i).variable(s))}),this.accumulatedMeanGrads[o]==null&&this.centered&&(this.accumulatedMeanGrads[o]={originalName:`${r}/mg`,variable:Q(()=>et(i).variable(s))});const a=Array.isArray(e)?e[o].tensor:e[r];if(a==null)return;const l=this.accumulatedMeanSquares[o].variable,u=this.accumulatedMoments[o].variable;Q(()=>{const c=fe(H(l,this.decay),H(Et(a),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[o].variable,f=fe(H(d,this.decay),H(a,1-this.decay)),h=Oe(H(a,this.learningRate),Hn(_e(c,fe(Et(f),this.epsilon)))),p=fe(H(u,this.momentum),h);l.assign(c),d.assign(f),u.assign(p);const m=_e(i,p);i.assign(m)}else{const d=fe(H(l,this.decay),H(Et(a),1-this.decay)),f=fe(H(u,this.momentum),Oe(H(a,this.learningRate),Hn(fe(d,this.epsilon))));l.assign(d),u.assign(f);const h=_e(i,f);i.assign(h)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&Ke(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&Ke(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&Ke(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uAe=[FU,LU,BU,zU,jU,WU,E2];function cAe(){for(const t of uAe)de(t)}function N2(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(re(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const o=e.shape,i=o[o.length-1];let s=1;for(let d=0;d<o.length-1;++d)s*=o[d];const a=t.shape,l=o.slice();l.pop();let u=1;for(let d=i;d<n;++d)u*=a[d],l.push(a[d]);const c=[...Ne(t.shape).map(d=>d/u),1].slice(0,i);return[l,s,u,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uk=-2,dAe=-1;function A2(t,e,n){const r=t.shape.length;M(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),M(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let o=0;o<r;++o)M(e[o]+n[o]<=t.shape[o],()=>`Error in slice${r}D: begin[${o}] + size[${o}] (${e[o]+n[o]}) would overflow input.shape[${o}] (${t.shape[o]})`)}function fAe(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function O2(t,e,n){const r=[];for(let o=0;o<t.length;o++)r[o]=Math.ceil((e[o]-t[o])/n[o]);return r}function VU(t,e,n,r){const o=[...t];for(let i=o.length;i<r.length;i++)o.push(1);for(let i=0;i<n;i++)i===0?o[e]=1:(o.splice(e,0,1),o.pop());return o}function UU(t,e,n){return n<=t?n:n-(e-1)}function GU(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function hAe(t,e,n,r,o,i,s,a,l){const u=t.length;let c=new Array(u),d=new Array(u),f=new Array(u);if(e.length&&n>0){const h=e[0],p=n+1;c=HU(s,h,p,r,t),d=KU(a,h,p,o,t),f=VU(i,h,p,t)}else for(let h=0;h<u;h++)c[h]=XU(s,r,i,t,h,l),d[h]=YU(a,o,i,t,h,l),f[h]=qU(i,h,l);return{begin:c,end:d,strides:f}}function HU(t,e,n,r,o){const i=[...o],s=GU(n,e);for(let a=0;a<i.length;a++)if(s.indexOf(a)>-1)i[a]=0;else{const l=UU(e,n,a);let u=r[l];t&1<<l&&(u=0),i[a]=u}return i}function KU(t,e,n,r,o){const i=[...o],s=GU(n,e);for(let a=0;a<i.length;a++)if(s.indexOf(a)>-1)i[a]=Number.MAX_SAFE_INTEGER;else{const l=UU(e,n,a);let u=r[l];t&1<<l&&(u=Number.MAX_SAFE_INTEGER),i[a]=u}for(let a=0;a<i.length;a++){const l=o[a];i[a]<0&&(i[a]+=l),i[a]=xu(0,i[a],o[a])}return i}function qU(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function XU(t,e,n,r,o,i){let s=e[o];const a=n[o]||1;(t&1<<o||i&1<<o||s==null)&&(a>0?s=Number.MIN_SAFE_INTEGER:s=Number.MAX_SAFE_INTEGER);const l=r[o];return s<0&&(s+=l),s=xu(0,s,l-1),s}function YU(t,e,n,r,o,i){let s=e[o];const a=n[o]||1;(t&1<<o||i&1<<o||s==null)&&(a>0?s=Number.MAX_SAFE_INTEGER:s=Number.MIN_SAFE_INTEGER);const l=r[o];return s<0&&(s+=l),a>0?s=xu(0,s,l):s=xu(-1,s,l-1),s}function _2(t,e,n){let r=n.length;for(let o=0;o<n.length;o++)if(n[o]>1){r=o;break}for(let o=r+1;o<n.length;o++)if(e[o]>0||n[o]!==t[o])return!1;return!0}function R2(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function p1(t,e,n){let r;const o=t.shape.length;typeof e=="number"?r=[e,...new Array(o-1).fill(0)]:e.length<o?r=e.concat(new Array(o-e.length).fill(0)):r=e.slice(),r.forEach(s=>{M(s!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(o).fill(-1):typeof n=="number"?i=[n,...new Array(o-1).fill(-1)]:n.length<o?i=n.concat(new Array(o-n.length).fill(-1)):i=n,i=i.map((s,a)=>s>=0?s:(M(s===-1,()=>`Negative size values should be exactly -1 but got ${s} for the slice() size at index ${a}.`),t.shape[a]-r[a])),[r,i]}function P2(t,e,n,r,o,i,s,a,l){let u;if(r==null?(u=new Array(e.length),u.fill(1)):u=r,s!=null&&s&s-1)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const d={dims:u.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:u.slice(),beginMask:o,endMask:i,ellipsisMask:s,newAxisMask:a,shrinkAxisMask:l};for(let x=0;x<d.dims;x++)c&&1<<x&a&&d.numAddAxisAfterEllipsis++,1<<x&s&&(c=!0);c||(d.ellipsisMask|=1<<d.dims,d.dims++);const f={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};pAe(d,f);let h=!0,p=!0,m=!0;const g=[],y=[];for(let x=0;x<t.length;++x){if(f.strides[x]===0)throw Error(`strides[${x}] must be non-zero`);const b=!!(f.shrinkAxisMask&1<<x),w=t[x];if(w===-1){g.push(b?1:-1);continue}const S=[f.beginMask&1<<x,f.endMask&1<<x],$=[f.strides[x]>0?0:-1,f.strides[x]>0?w:w-1];if(b&&f.strides[x]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&f.strides[x]===1;const C=!!(f.beginMask&1<<x&&f.endMask&1<<x);if(f.beginValid&&f.endValid){if(b){const E=f.begin[x]<0?w+f.begin[x]:f.begin[x];if(f.begin[x]=E,f.end[x]=f.begin[x]+1,E<0||E>=w)throw Error(`slice index ${f.begin[x]} of dimension ${x} out of bounds.`)}else f.begin[x]=nM(f.begin[x],0,f.strides[x],w,S,$),f.end[x]=nM(f.end[x],1,f.strides[x],w,S,$);const T=f.strides[x]===1&&f.begin[x]===0&&f.end[x]===w;h=h&&T,p=p&&(x===0&&f.strides[x]===1||T)}else h=h&&f.strides[x]===1&&C,p=p&&(x===0&&f.strides[x]===1||C);let k,I=!1;if(f.beginValid&&f.endValid?(k=f.end[x]-f.begin[x],I=!0):b?(k=1,I=!0):C&&w>=0&&(f.strides[x]<0?k=-w:k=w,I=!0),I){let T;k===0||k<0!=f.strides[x]<0?T=0:T=Math.trunc(k/f.strides[x])+(k%f.strides[x]!==0?1:0),g.push(T)}else g.push(-1)}for(let x=0;x<f.finalShapeGatherIndices.length;++x){const b=f.finalShapeGatherIndices[x];b>=0?y.push(g[b]):b===uk&&y.push(1)}return{finalShapeSparse:y.filter((x,b)=>f.finalShapeGatherIndices[b]!==uk),finalShape:y,isIdentity:h,sliceDim0:p,isSimpleSlice:m,begin:f.begin,end:f.end,strides:f.strides}}function pAe(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const o=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<o;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(uk),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(dAe),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function nM(t,e,n,r,o,i){if(o[e])return n>0?i[e]:i[e+1&1];{const s=t<0?r+t:t;return s<i[0]?i[0]:s>i[1]?i[1]:s}}const mAe=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:A2,computeFlatOffset:R2,computeOutShape:O2,getNormalizedAxes:hAe,isSliceContinous:_2,maskToAxes:fAe,parseSliceParams:p1,sliceInfo:P2,startForAxis:XU,startIndicesWithElidedDims:HU,stopForAxis:YU,stopIndicesWithElidedDims:KU,stridesForAxis:qU,stridesWithElidedDims:VU},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gAe{static sgd(e){return new E2(e)}static momentum(e,n,r=!1){return new jU(e,n,r)}static rmsprop(e,n=.9,r=0,o=null,i=!1){return new WU(e,n,r,o,i)}static adam(e=.001,n=.9,r=.999,o=null){return new BU(e,n,r,o)}static adadelta(e=.001,n=.95,r=null){return new FU(e,n,r)}static adamax(e=.002,n=.9,r=.999,o=null,i=0){return new zU(e,n,r,o,i)}static adagrad(e,n=.1){return new LU(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pl=gAe;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yAe=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function QU(){return new Promise(t=>yAe(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D2(t,e){const n=t[0].length;t.forEach((o,i)=>{M(o.length===n,()=>`Error in concat${n}D: rank of tensors[${i}] must be the same as the rank of the rest (${n})`)}),M(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((o,i)=>{for(let s=0;s<n;s++)M(s===e||o[s]===r[s],()=>`Error in concat${n}D: Shape of tensors[${i}] (${o}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function ts(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var pi;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(pi||(pi={}));function ZU(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let o=1;o<n.length;++o){const i=n[o],s=r[r.length-n.length+o],a=r[s];if(i>=0)if(a>=0){if(a!==i)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${o+t}] = ${i} but shape[${o+t}] = ${a}`)}else r[s]=i}return r}function JU(t){const e={FIRST_DIM_SIZE:pi.FIRST_DIM_SIZE,VALUE_ROWIDS:pi.VALUE_ROWIDS,ROW_LENGTHS:pi.ROW_LENGTHS,ROW_SPLITS:pi.ROW_SPLITS,ROW_LIMITS:pi.ROW_LIMITS,ROW_STARTS:pi.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function eG(t){return t.length===0?0:t[0]===pi.FIRST_DIM_SIZE?t.length-1:t.length}function tG(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let o=0;o<Math.min(n,r-1);++o){const i=t[o],s=e[o+1];if(i>=0&&s>=0&&i!==1&&i!==s)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${o-t.length}] = ${i} but ragged tensor input.flatValues.shape[${o-t.length}] = ${s}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M2=30;function m1(t){return t<=M2?t:H$(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F2(t,e,n){const r=n*(typeof t=="number"?t:t[0]),o=e*(typeof t=="number"?t:t[1]);return[r,o]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function og(t,e,n,r=!0){let o=[];if(r)o=o.concat(e.slice(0)),o.push(t[0]/n),o=o.concat(t.slice(1));else{o=o.concat(t[0]);const i=e.length;for(let s=0;s<i;++s)o=o.concat([t[s+1]/e[s],e[s]]);o=o.concat(t.slice(i+1))}return o}function ig(t,e,n=!0){const r=[];if(n){r.push(e);for(let o=e+1;o<t;++o)o<=2*e?(r.push(o),r.push(o-(e+1))):r.push(o)}else{const o=[],i=[];for(let s=1;s<t;++s)s>=e*2+1||s%2===1?i.push(s):o.push(s);r.push(...o),r.push(0),r.push(...i)}return r}function sg(t,e,n,r=!0){const o=[];r?o.push(t[0]/n):o.push(t[0]*n);for(let i=1;i<t.length;++i)i<=e.length?r?o.push(e[i-1]*t[i]):o.push(t[i]/e[i-1]):o.push(t[i]);return o}function L2(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function B2(t,e,n){const r=t.slice(0,1);for(let o=0;o<n;++o)r.push(t[o+1]-e[o][0]-e[o][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g1=1.7580993408473768,y1=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z2=.3275911,j2=.254829592,W2=-.284496736,V2=1.421413741,U2=-1.453152027,G2=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hs(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function nG(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function rG(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let o=0;o<t.length;o+=4)n[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:n,imag:r}}function oG(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let o=2;o<t.length;o+=4)n[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:n,imag:r}}function H2(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function iG(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function sG(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let o=0;o<Math.ceil(t/2);o++){const i=(e?2:-2)*Math.PI*(o/t);n[o]=Math.cos(i),r[o]=Math.sin(i)}return{real:n,imag:r}}function aG(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),o=Math.cos(r),i=Math.sin(r);return{real:o,imag:i}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xw="->",vAe=/->/g,rM=",",oM="...";function K2(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(vAe,"").length)/Xw.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${Xw}").`);const[r,o]=t.split(Xw);M(r.indexOf(oM)===-1,()=>`The ellipsis notation ("${oM}") is not supported yet.`);const i=r.split(rM),s=i.length;if(e!==s)throw new Error(`Expected ${s} input tensors, received ${e}`);if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let f=0;f<o.length;++f){const h=o[f];if(!i.some(p=>p.indexOf(h)!==-1))throw new Error(`Output subscripts contain the label ${h} not present in the input subscripts.`);a.indexOf(h)===-1&&a.push(h)}for(let f=0;f<r.length;++f){const h=r[f];a.indexOf(h)===-1&&h!==rM&&a.push(h)}const l=new Array(i.length);for(let f=0;f<s;++f){if(new Set(i[f].split("")).size!==i[f].length)throw new Error(`Found duplicate axes in input component ${i[f]}. Support for duplicate axes in input is not implemented yet.`);l[f]=[];for(let h=0;h<i[f].length;++h)l[f].push(a.indexOf(i[f][h]))}const u=a.length,c=o.length,d=[];for(let f=c;f<u;++f)d.push(f);return{allDims:a,summedDims:d,idDims:l}}function q2(t,e){let n=new Array(t);n.fill(-1);for(let o=0;o<e.length;++o)n[e[o]]=o;const r=[];for(let o=0;o<t;++o)n[o]===-1&&r.push(o);return n=n.filter(o=>o!==-1),{permutationIndices:n,expandDims:r}}function X2(t,e,n){const r=new Array(t);for(let o=0;o<n.length;++o){const i=n[o].shape;for(let s=0;s<e[o].length;++s)r[e[o][s]]===void 0?r[e[o][s]]=i[s]:M(r[e[o][s]]===i[s],()=>`Expected dimension ${r[e[o][s]]} at axis ${s} of input shaped ${JSON.stringify(i)}, but got dimension ${i[s]}`)}}function Y2(t,e){const n=t,r=[];let o=0;t.length===0&&n.push(-1),o=t.length+1;for(let s=0;s<o;++s)r.push([]);const i=[];for(let s=0;s<n.length;++s){const a=n[s],l=xAe(e,a);for(const u of l)i.indexOf(u)===-1&&(r[s].push(u),i.push(u))}return{path:n,steps:r}}function Q2(t){return t.every((e,n)=>e===n)}function xAe(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function Z2(t,e,n=0){let r=[];if(typeof e=="number")M(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const o=e.reduce((s,a)=>(a===-1&&(s+=1),s),0);M(o<=1,()=>"There should be only one negative value in split array.");const i=e.indexOf(-1);if(i!==-1){const s=e.reduce((a,l)=>l>0?a+l:a);e[i]=t.shape[n]-s}M(t.shape[n]===e.reduce((s,a)=>s+a),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lG(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function uG(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function cG(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dG(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function fG(t,e){return`size ${t} must be non-negative, not ${e}`}function hG(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function pG(t,e){const n=re(t),r=re(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function mG(t,e){const n=re(t),r=re(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ck(){return"segment ids must be >= 0"}function gG(){return"segment ids are not increasing"}function yG(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function vG(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xG(t,e){let n=!1,r;for(t<=M2?(r=t,n=!0):r=H$(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=H$(t,r+1);return r}function bG(t,e,n){const r=[],o=t.length;for(let i=0;i<o;i++)i!==e?r.push(t[i]):r.push(n);return r}function J2(t,e,n,r){const o=e.shape.length,i=t.shape.length;if(r!==0&&(r<-o||r>o))throw new Error(`Expect batchDims in the range of [-${o}, ${o}], but got ${r}`);if(r<0&&(r+=o),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const s=t.shape[n],a=[];let l=1,u=1,c=1;for(let d=0;d<r;++d)a.push(t.shape[d]),l*=t.shape[d];for(let d=r;d<n;d++)a.push(t.shape[d]),u*=t.shape[d];for(let d=r;d<o;d++)a.push(e.shape[d]);for(let d=n+1;d<i;d++)a.push(t.shape[d]),c*=t.shape[d];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:s,outputShape:a}}const bAe=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:J2,computeOutShape:bG,segOpComputeOptimalWindowSize:xG},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ks(t){try{return t.map(e=>Ja(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function wG(t){return t.map(e=>Ba(e))}const wAe=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:j2,ERF_A2:W2,ERF_A3:V2,ERF_A4:U2,ERF_A5:G2,ERF_P:z2,PARALLELIZE_THRESHOLD:M2,get RowPartitionType(){return pi},SELU_SCALE:y1,SELU_SCALEALPHA:g1,applyActivation:S2,assertAndGetBroadcastShape:Fe,assertAxesAreInnerMostDims:Fn,assertParamsConsistent:D2,assignToTypedArray:iG,axesAreInnerMostDims:JE,calculateShapes:Hu,checkEinsumDimSizes:X2,checkPadOnDimRoundingMode:Nr,combineLocations:fU,combineRaggedTensorToTensorShapes:ZU,complexWithEvenIndex:rG,complexWithOddIndex:oG,computeConv2DInfo:Mn,computeConv3DInfo:gl,computeDefaultPad:KE,computeDilation2DInfo:Jm,computeOptimalWindowSize:m1,computeOutAndReduceShapes:Nn,computeOutShape:ts,computePool2DInfo:Uo,computePool3DInfo:Js,convertConv2DDataFormat:ea,decodeEinsumEquation:K2,eitherStridesOrDilationsAreOne:Kn,expandShapeToKeepDim:an,exponent:aG,exponents:sG,fromStringArrayToUint8:wG,fromUint8ToStringArray:Ks,getAxesPermutation:Ut,getBroadcastDims:Rd,getComplexWithIndex:H2,getEinsumComputePath:Y2,getEinsumPermutation:q2,getFusedBiasGradient:w2,getFusedDyActivation:b2,getImageCenter:F2,getInnerMostAxes:en,getPermuted:ig,getRaggedRank:eG,getReductionAxes:yn,getReshaped:og,getReshapedPermuted:sg,getRowPartitionTypesHelper:JU,getSliceBeginCoords:L2,getSliceSize:B2,getSparseFillEmptyRowsIndicesDenseShapeMismatch:lG,getSparseFillEmptyRowsNegativeIndexErrorMessage:uG,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:cG,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:hG,getSparseReshapeInputOutputMismatchErrorMessage:mG,getSparseReshapeInputOutputMultipleErrorMessage:pG,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:dG,getSparseReshapeNegativeOutputDimErrorMessage:fG,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:vG,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:ck,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:gG,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:yG,getUndoAxesPermutation:yl,isIdentityPermutation:Q2,log:rke,mergeRealAndImagArrays:Hs,prepareAndValidate:N2,prepareSplitSize:Z2,segment_util:bAe,shouldFuse:C2,slice_util:mAe,splitRealAndImagArrays:nG,stridesOrDilationsArePositive:$u,tupleValuesAreOne:Cu,upcastType:Vr,validateDefaultValueShape:tG,validateInput:Z2e,validateUpdateShape:OU,warn:eo},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */cAe();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SG={kernelName:ib,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>H(t,rg(Se(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SAe={kernelName:om,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Et(Se(n,"float32")),o=Hn(_e(at(1),r));return Zt(Oe(t,o))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CAe={kernelName:im,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Hn(_e(Et(Se(n,"float32")),1));return Oe(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ae={kernelName:uf,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Fe(n.shape,r.shape);return{a:()=>{let a=t;const l=yn(n.shape,o);return l.length>0&&(a=Ae(a,l)),q(a,n.shape)},b:()=>{let a=t;const l=yn(r.shape,o);return l.length>0&&(a=Ae(a,l)),q(a,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kAe={kernelName:rE,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,o)=>{n[o]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IAe={kernelName:sb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>et(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TAe={kernelName:ab,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>et(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EAe={kernelName:sm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(t,Hn(_e(at(1),Et(Se(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NAe={kernelName:am,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Hn(fe(at(1),Et(Se(n,"float32"))));return Oe(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AAe={kernelName:cm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Fe(n.shape,r.shape);return{a:()=>{const a=fe(Et(n),Et(r));let l=H(t,Oe(r,a));const u=yn(n.shape,o);return u.length>0&&(l=Ae(l,u)),q(l,n.shape)},b:()=>{const a=fe(Et(n),Et(r));let l=Zt(H(t,Oe(n,a)));const u=yn(r.shape,o);return u.length>0&&(l=Ae(l,u)),q(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OAe={kernelName:lm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(t,fe(Et(Se(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ae={kernelName:um,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(t,_e(at(1),Et(Se(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RAe(t,e,n,r,o,i){const s=W(t,"dy","avgPool3dGrad"),a=W(e,"input","avgPool3dGrad");let l=s,u=a,c=!1;a.rank===4&&(c=!0,l=q(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),u=q(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),M(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),M(u.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`),Nr("avgPool3dGrad",o,i);const d={dy:l,input:u},f={filterSize:n,strides:r,pad:o,dimRoundingMode:i},h=K.runKernel(aE,d,f);return c?q(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const PAe=X({avgPool3dGrad_:RAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DAe={kernelName:ub,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:o,strides:i,pad:s,dimRoundingMode:a}=n;return{x:()=>PAe(t,r,o,i,s,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MAe(t,e,n,r,o){const i=W(t,"dy","avgPoolGrad"),s=W(e,"input","avgPoolGrad");M(s.rank===i.rank,()=>`Rank of input (${s.rank}) does not match rank of dy (${i.rank})`);let a=s,l=i,u=!1;s.rank===3&&(u=!0,a=q(s,[1,s.shape[0],s.shape[1],s.shape[2]]),l=q(i,[1,i.shape[0],i.shape[1],i.shape[2]])),M(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),M(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);const c={dy:l,input:a},d={filterSize:n,strides:r,pad:o},f=K.runKernel(sE,c,d);return u?q(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const FAe=X({avgPoolGrad_:MAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LAe={kernelName:lb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:o,strides:i,pad:s}=n;return{x:()=>FAe(t,r,o,i,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BAe={kernelName:cb,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,o]=e,{transposeA:i,transposeB:s}=n;return!i&&!s?{a:()=>st(t,o,!1,!0),b:()=>st(r,t,!0,!1)}:!i&&s?{a:()=>st(t,o,!1,!1),b:()=>st(t,r,!0,!1)}:i&&!s?{a:()=>st(o,t,!1,!0),b:()=>st(r,t,!1,!1)}:{a:()=>st(o,t,!0,!0),b:()=>st(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zAe={kernelName:db,gradFunc:(t,e,n)=>{const{blockShape:r,crops:o}=n;return{x:()=>a2(t,r,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jAe={kernelName:J$e,gradFunc:(t,e,n)=>{const r=n,o=r.inputShape,i=r.shape,s=Array.from(i);for(let l=o.length-1;l>=0;l--)if(o[l]===i[l])s[l]=1;else if(o[l]!==1)throw new Error(`broadcastTo(): [${o}] cannot be broadcast to [${i}].`);const a=[];for(let l=0;l<s.length;l++)s[l]>1&&a.push(l);return{x:()=>Ae(t,a,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WAe={kernelName:dm,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VAe={kernelName:fm,gradFunc:t=>({x:()=>et(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UAe={kernelName:hm,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:o,clipValueMax:i}=n;return{x:()=>lr(Us(Vu(r,o),ff(r,i)),t,et(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GAe={kernelName:fb,inputsToSave:["x"],gradFunc:SG.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HAe={kernelName:hb,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(l=>l.shape),{axis:o}=n,i=Ue(o,e[0].shape)[0],s=r.map(l=>l[i]);return io(t,s,i).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KAe={kernelName:pb,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,o]=e,{dilations:i,strides:s,pad:a,dataFormat:l}=n;return M(Cu(i),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`),{x:()=>YE(r.shape,t,o,s,a,l),filter:()=>x2(r,t,o.shape,s,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qAe={kernelName:mb,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,o]=e,{strides:i,pad:s,dataFormat:a,dimRoundingMode:l}=n;return{dy:()=>ku(t,o,i,s,a,1,l),filter:()=>x2(t,r,o.shape,i,s,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XAe(t,e,n,r,o){let i=t;t.rank===4&&(i=q(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let s=e;s.rank===4&&(s=q(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),M(i.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${i.shape}.`),M(s.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${s.shape}.`),M(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),M(i.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${i.shape[4]}) must match input depth in filter (${n[3]}.`),M(s.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${s.shape[4]}) must match output depth for filter (${n[4]}).`);const a={x:i,dy:s},l={strides:r,pad:o,filterShape:n};return K.runKernel(fE,a,l)}const YAe=X({conv3DBackpropFilter_:XAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QAe={kernelName:gb,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:o,pad:i}=n;M(Cu(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[s,a]=e;return{x:()=>lU(s.shape,t,a,o,i),filter:()=>YAe(s,t,a.shape,o,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZAe={kernelName:pm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>H(Zt(TU(Se(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JAe={kernelName:mm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>H(EU(Se(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eOe={kernelName:yb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:o,exclusive:i,reverse:s}=n;return{x:()=>{const a=Ut([o],r.rank);let l=cU(t,o,i,!s);return a!=null&&(l=Je(l,a)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tOe={kernelName:vb,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:o,pad:i,dimRoundingMode:s}=n,a=r??[1,1];M(Cu(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[l,u]=e;return M(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),M(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`),M(l.shape[3]===u.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`),M(Kn(o,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${o} and dilations '${a}'.`),Nr("depthwiseConv2d",i,s),{x:()=>yNe(l.shape,t,u,o,i,a,s),filter:()=>mNe(l,t,u.shape,o,i,a,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nOe={kernelName:xb,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,o]=e,i={x:r,filter:o,dy:t},s={x:r,filter:o,dy:t};return{x:()=>K.runKernel(K$,i,n),filter:()=>K.runKernel(q$,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rOe={kernelName:ym,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>K.runKernel(wE,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oOe={kernelName:vm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=H(as(Zt(Et(n))),2/Math.sqrt(Math.PI));return{x:()=>H(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iOe={kernelName:xm,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>H(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sOe={kernelName:wb,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>q(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aOe={kernelName:bm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>H(t,as(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lOe={kernelName:wm,gradFunc:t=>({x:()=>et(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uOe={kernelName:Sm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Fe(n.shape,r.shape);return{a:()=>{const a=Oe(t,Se(r,"float32")),l=yn(n.shape,o);return l.length>0?q(Ae(a,l),n.shape):a},b:()=>{let a=H(t,Se(n,"float32"));const l=yn(r.shape,o);l.length>0&&(a=q(Ae(a,l),r.shape));const u=Et(r);return Zt(Oe(a,Se(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cOe={kernelName:Sb,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[o,i,s,a]=e,l=a??at(1),u=yn(i.shape,o.shape),c=[];if(i.rank===1){for(let b=0;b<o.shape.length-1;++b)c.push(o.shape[b]);c.push(1)}const d=_e(o,i),f=H(t,l),h=$U(fe(s,at(r))),p=H(H(H(h,h),h),at(-.5));return{x:()=>i.rank===1?q(H(H(t,yi(q(h,[1,1,1,i.shape[0]]),c)),l),o.shape):q(H(H(t,h),l),o.shape),mean:()=>{let b=H(H(h,at(-1)),f);return i.rank===1&&(b=Ae(b,u)),q(b,i.shape)},variance:()=>{let b=H(H(p,d),f);return i.rank===1&&(b=Ae(b,u)),q(b,i.shape)},scale:()=>{const b=H(d,h);let w=H(t,b);return i.rank===1&&(w=Ae(w,u)),q(w,i.shape)},offset:()=>{let b=t;return i.rank===1&&(b=Ae(b,u)),q(b,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dOe={kernelName:Cb,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,o]=e,{axis:i,batchDims:s}=n,a=Ue(i,r.shape)[0],l=(u,c,d)=>()=>{const f=u.shape,h=c.size,p=f.slice(0,a),m=p.length,g=f.slice(i,f.length).slice(1),y=g.length,v=iM(0,m),x=iM(m+1,m+1+y),b=sM([p,[h],g]),w=q(d,b),S=q(c,[h]),$=sM([[m],v,x]),C=Je(w,$);let k=RU(C,S,u.shape[a]);const I=yl($);return k=Je(k,I),k};if(s===1){const u=r.shape[0],c=r.split(u,0);return{x:()=>Gs(c.map((h,p)=>l(h,o.slice(p,1),t.slice(p,1))())).reshape(r.shape),indices:()=>o}}else return{x:l(r,o,t),indices:()=>o}}};function iM(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function sM(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fOe={kernelName:Cm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>et(n),b:()=>et(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hOe={kernelName:$m,gradFunc:t=>({x:()=>Se(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pOe={kernelName:km,gradFunc:t=>({x:()=>et(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mOe={kernelName:Im,gradFunc:t=>({x:()=>et(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gOe={kernelName:Tm,gradFunc:t=>({x:()=>et(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yOe={kernelName:kb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:o}=n,i=fo(r,0);return{x:()=>lr(i,t,H(t,o))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vOe={kernelName:Nm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(t,fe(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xOe={kernelName:Em,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(t,Se(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bOe={kernelName:tke,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:o}=n;return{logits:()=>{const s=as(r);return _e(t,H(Ae(t,o,!0),s))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wOe(t,e,n,r=5,o=1,i=1,s=.5){const a={x:t,y:e,dy:n},l={depthRadius:r,bias:o,alpha:i,beta:s};return K.runKernel(TE,a,l)}const SOe=X({localResponseNormalizationBackprop_:wOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const COe={kernelName:Ob,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,o]=e,{depthRadius:i,bias:s,alpha:a,beta:l}=n;return{x:()=>SOe(r,o,t,i,s,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CG(t,e,n,r){return e.rank<n.rank&&(e=q(e,an(e.shape,r))),t.rank<n.rank&&(t=q(t,an(t.shape,r))),{x:()=>H(t,Se(ss(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aM={kernelName:_b,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:o}=r,i=e[0],s=e[1],a=Ue(o,i.shape),l=CG(t,s,i,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Oe={kernelName:Am,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>H(t,Se(Vu(n,r),"float32")),b:()=>H(t,Se(w0(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kOe(t,e,n,r,o,i,s){const a=W(t,"dy","maxPool3dGrad"),l=W(e,"input","maxPool3dGrad"),u=W(n,"output","maxPool3dGrad");let c=a,d=l,f=u,h=!1;l.rank===4&&(h=!0,c=q(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),d=q(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),f=q(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),M(c.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),M(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),M(f.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${f.rank}.`),Nr("maxPool3dGrad",i,s);const p={dy:c,input:d,output:f},m={filterSize:r,strides:o,pad:i,dimRoundingMode:s},g=K.runKernel(NE,p,m);return h?q(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const IOe=X({maxPool3dGrad_:kOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TOe={kernelName:Pb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,o]=e,{filterSize:i,strides:s,pad:a,dimRoundingMode:l}=n;return{x:()=>IOe(t,r,o,i,s,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EOe(t,e,n,r,o,i,s){const a=W(t,"dy","maxPoolGrad"),l=W(e,"input","maxPoolGrad"),u=W(n,"output","maxPoolGrad");M(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),M(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),M(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),Nr("maxPoolGrad",i,s);const c={dy:a,input:l,output:u},d={filterSize:r,strides:o,pad:i,dimRoundingMode:s};return K.runKernel(EE,c,d)}const NOe=X({maxPoolGrad_:EOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AOe={kernelName:Rb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,o]=e,{filterSize:i,strides:s,pad:a}=n;return{x:()=>NOe(t,r,o,i,s,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OOe={kernelName:Db,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:o}=n,i=Ue(o,r.shape),a=Nn(r.shape,i)[1],l=re(a);return{x:()=>{const c=r.shape.slice();i.forEach(h=>{c[h]=1});const d=q(t,c);return Oe(H(d,xl(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Oe={kernelName:Mb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:o}=r,[i,s]=e,a=Ue(o,i.shape),l=CG(t,s,i,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ROe={kernelName:Om,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>H(t,Se(ff(n,r),"float32")),b:()=>H(t,Se(fo(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const POe={kernelName:Fb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:o}=n,i=o.map(s=>s[0]);return{x:()=>Ct(t,i,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DOe={kernelName:_m,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Fe(n.shape,r.shape);return{a:()=>{const a=yn(n.shape,o);return a.length>0?q(Ae(t,a),n.shape):t},b:()=>{const a=H(t,Zt(h1(Oe(n,r)))),l=yn(r.shape,o);return l.length>0?q(Ae(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MOe={kernelName:Rm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Fe(n.shape,r.shape);return{a:()=>{const a=H(t,Se(r,"float32")),l=yn(n.shape,o);return l.length>0?q(Ae(a,l),n.shape):a},b:()=>{const a=H(t,Se(n,"float32")),l=yn(r.shape,o);return l.length>0?q(Ae(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FOe={kernelName:Lb,gradFunc:t=>({x:()=>Zt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LOe={kernelName:jb,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>$n(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BOe={kernelName:zb,gradFunc:t=>({x:()=>et(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zOe={kernelName:Wb,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return Eu(t,r).map(i=>()=>i)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lM={kernelName:Vb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:o}=n,i=o.map(s=>s[0]);return{x:()=>Ct(t,i,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jOe={kernelName:Pm,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,o]=e,i=n,s=r,a=Fe(i.shape,s.shape);return{a:()=>{const c=Se(s,"float32");let d=H(t,H(c,Iu(i,_e(c,at(1)))));const f=yn(i.shape,a);return f.length>0&&(d=Ae(d,f)),q(d,i.shape)},b:()=>{const c=fo(i,0),d=lr(c,ls(i),et(i));let f=H(t,H(o,d));const h=yn(s.shape,a);return h.length>0&&(f=Ae(f,h)),q(f,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WOe={kernelName:Ub,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,o=fo(n,0);return{x:()=>lr(o,t,H(t,r)),alpha:()=>{let i=lr(o,et(t),H(t,n));const s=yn(r.shape,t.shape);return s.length>0&&(i=Ae(i,s)),q(i,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VOe(t,e,n){const r=t.shape.slice();r[n]=1;const o=q(e,r),i=ak(t,n,!0,!1),s=ak(t,n,!0,!0),a=H(i,s);return H(o,a)}function UOe(t,e,n){const r=t.shape.length,o=r-n.length,i=Ut(n,r);let s=t;i!=null&&(s=Je(t,i));const a=s.shape.slice(),u=a.splice(r-n.length,n.length).reduce((f,h)=>f*h,1);a.push(u);const c=s.reshape(a);let d=VOe(c,e,o);if(d=d.reshape(s.shape),i!=null){const f=yl(i);d=Je(d,f)}return d}const GOe={kernelName:Gb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:o}=n;let i=[];return o==null?i=r.shape.map((s,a)=>a):typeof o=="number"?i=[o]:i=o,{x:()=>UOe(r,t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HOe={kernelName:gm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Fe(n.shape,r.shape);return{a:()=>{const a=Oe(t,Se(r,"float32")),l=yn(n.shape,o);return l.length>0?q(Ae(a,l),n.shape):a},b:()=>{let a=H(t,Se(n,"float32"));const l=yn(r.shape,o);l.length>0&&(a=q(Ae(a,l),r.shape));const u=Et(r);return Zt(Oe(a,Se(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KOe={kernelName:Dm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(t,Zt(Et(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qOe={kernelName:Fm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=H(ff(n,6),rg(n));return{x:()=>H(t,Se(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XOe={kernelName:Mm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>H(t,Se(rg(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YOe={kernelName:Hb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>q(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QOe={kernelName:qb,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,o={dy:t,images:r};return{images:()=>K.runKernel(ME,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZOe={kernelName:Kb,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,o={dy:t,images:r};return{images:()=>K.runKernel(DE,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JOe={kernelName:Xb,gradFunc:(t,e,n)=>{const{dims:r}=n,o=Ue(r,t.shape);return{x:()=>Tu(t,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e_e={kernelName:Lm,gradFunc:t=>({x:()=>et(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t_e={kernelName:Bm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Zt(Oe(t,H(Iu(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n_e={kernelName:Yb,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>Se(et(n),"float32"),t:()=>H(t,Se(n,t.dtype)),e:()=>H(t,Se(r2(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r_e={kernelName:zm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=fo(n,at(0)),o=at(g1),i=at(y1),s=H(t,i),a=H(H(t,o),as(Se(n,"float32")));return lr(r,s,a)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o_e={kernelName:Um,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>H(t,H(n,_e(at(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i_e={kernelName:Vm,gradFunc:t=>({x:()=>et(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s_e={kernelName:jm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>H(QE(Se(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a_e={kernelName:Wm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>H(uU(Se(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l_e={kernelName:Qb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:o,size:i}=n,s=r.shape,[a,l]=p1(r,o,i),u=[];for(let c=0;c<t.rank;c++)u.push([a[c],s[c]-a[c]-l[c]]);return{x:()=>s2(t,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u_e={kernelName:t1,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:o}=n,i=!0,s=H(t,r);return{logits:()=>_e(s,H(Ae(s,[o],i),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c_e={kernelName:Gm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>H(t,df(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uM={kernelName:Jb,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:o}=n;return{x:()=>XE(t,r,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cM={kernelName:e1,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>Sr(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d_e={kernelName:Hm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(t,H(Hn(Se(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f_e={kernelName:FE,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>H(t,H(Se(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h_e={kernelName:Km,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=at(2);return{a:()=>H(t,H(o,_e(n,r))),b:()=>H(t,H(o,_e(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p_e={kernelName:Zm,gradFunc:t=>({x:()=>et(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m_e={kernelName:qm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Fe(n.shape,r.shape);return{a:()=>{let a=t;const l=yn(n.shape,o);return l.length>0&&(a=Ae(a,l)),q(a,n.shape)},b:()=>{let a=t;const l=yn(r.shape,o);return l.length>0&&(a=Ae(a,l)),q(Zt(a),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g_e={kernelName:Zb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,o=r.shape.slice(),{axis:i}=n;Ue(i,r.shape).forEach(u=>{o[u]=1});const a=q(t,o),l=H(a,xl(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y_e={kernelName:Xm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(t,Et(QE(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v_e={kernelName:Ym,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>H(_e(at(1),Et(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x_e={kernelName:Qm,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:o}=n;return{x:()=>{let s=et(r);if(r.rank===1)for(let a=0;a<o[0];++a)s=fe(s,Ct(t,[a*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)s=fe(s,Ct(t,[a*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)for(let u=0;u<o[2];++u)s=fe(s,Ct(t,[a*r.shape[0],l*r.shape[1],u*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)for(let u=0;u<o[2];++u)for(let c=0;c<o[3];++c)s=fe(s,Ct(t,[a*r.shape[0],l*r.shape[1],u*r.shape[2],c*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return s}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b_e={kernelName:zc,gradFunc:(t,e,n)=>{const r=n,{perm:o}=r,i=yl(o);return{x:()=>Je(t,i)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w_e={kernelName:n1,gradFunc:(t,e,n)=>{const r=n,{axis:o}=r;return{value:()=>Gs(t,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S_e={kernelName:r1,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>C_e(t,n)}}};function C_e(t,e){const n=vl(e,et(e)),r=e2(t,n);let o=Vu(e,at(0,"int32"));const i=r.rank-o.rank;for(let a=0;a<i;++a)o=vr(o,a+1);o=Us(o,xl(r.shape,"bool"));const s=et(r);return lr(o,r,s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $_e={kernelName:o1,gradFunc:t=>({x:()=>et(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k_e=[SG,SAe,CAe,$Ae,kAe,IAe,TAe,EAe,NAe,AAe,OAe,_Ae,DAe,LAe,BAe,zAe,jAe,WAe,VAe,UAe,GAe,HAe,qAe,KAe,QAe,ZAe,JAe,eOe,tOe,nOe,HOe,rOe,oOe,iOe,sOe,aOe,uOe,lOe,cOe,dOe,fOe,hOe,pOe,mOe,gOe,yOe,vOe,xOe,bOe,COe,aM,aM,$Oe,TOe,AOe,OOe,_Oe,ROe,POe,DOe,MOe,FOe,LOe,BOe,zOe,lM,lM,jOe,WOe,GOe,KOe,qOe,XOe,YOe,QOe,ZOe,JOe,e_e,t_e,n_e,r_e,o_e,i_e,s_e,a_e,l_e,u_e,c_e,uM,uM,cM,cM,d_e,h_e,f_e,p_e,m_e,g_e,y_e,v_e,x_e,b_e,w_e,S_e,$_e];for(const t of k_e)oke(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.abs=function(){return this.throwIfDisposed(),nr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.acos=function(){return this.throwIfDisposed(),aIe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.acosh=function(){return this.throwIfDisposed(),uIe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.add=function(t){return this.throwIfDisposed(),fe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.all=function(t,e){return this.throwIfDisposed(),iU(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.any=function(t,e){return this.throwIfDisposed(),ik(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.argMax=function(t){return this.throwIfDisposed(),$p(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.argMin=function(t){return this.throwIfDisposed(),pIe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.asScalar=function(){return this.throwIfDisposed(),M(this.size===1,()=>"The array must have only 1 element."),q(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.asType=function(t){return this.throwIfDisposed(),Se(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.as1D=function(){return this.throwIfDisposed(),q(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.as2D=function(t,e){return this.throwIfDisposed(),q(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),q(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),q(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.as5D=function(t,e,n,r,o){return this.throwIfDisposed(),q(this,[t,e,n,r,o])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.asin=function(){return this.throwIfDisposed(),gIe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.asinh=function(){return this.throwIfDisposed(),vIe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.atan=function(){return this.throwIfDisposed(),bIe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.atan2=function(t){return this.throwIfDisposed(),SIe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.atanh=function(){return this.throwIfDisposed(),$Ie(this)};ne().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),qE(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),XE(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.batchNorm=function(t,e,n,r,o){return this.throwIfDisposed(),u1(this,t,e,n,r,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.broadcastTo=function(t){return this.throwIfDisposed(),bh(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.cast=function(t){return this.throwIfDisposed(),Se(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.ceil=function(){return this.throwIfDisposed(),QIe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),lo(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof cn&&(t=[t]),Sr([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.conv1d=function(t,e,n,r,o,i){return this.throwIfDisposed(),sU(this,t,e,n,r,o,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.conv2dTranspose=function(t,e,n,r,o){return this.throwIfDisposed(),aU(this,t,e,n,r,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.conv2d=function(t,e,n,r,o,i){return this.throwIfDisposed(),ku(this,t,e,n,r,o,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.cos=function(){return this.throwIfDisposed(),QE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.cosh=function(){return this.throwIfDisposed(),uU(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),ak(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),cU(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),STe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.depthwiseConv2d=function(t,e,n,r,o,i){return this.throwIfDisposed(),ZE(this,t,e,n,r,o,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.dilation2d=function(t,e,n,r,o){return this.throwIfDisposed(),kTe(this,t,e,n,r,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.divNoNan=function(t){return this.throwIfDisposed(),ATe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.div=function(t){return this.throwIfDisposed(),Oe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.dot=function(t){return this.throwIfDisposed(),_Te(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.elu=function(){return this.throwIfDisposed(),d1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.equal=function(t){return this.throwIfDisposed(),ss(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.erf=function(){return this.throwIfDisposed(),dU(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),UTe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.exp=function(){return this.throwIfDisposed(),as(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.expandDims=function(t){return this.throwIfDisposed(),vr(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.expm1=function(){return this.throwIfDisposed(),qTe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.fft=function(){return this.throwIfDisposed(),AU(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.flatten=function(){return this.throwIfDisposed(),q(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.floor=function(){return this.throwIfDisposed(),h1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.floorDiv=function(t){return this.throwIfDisposed(),oU(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.gather=function(t,e,n){return this.throwIfDisposed(),e2(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.greaterEqual=function(t){return this.throwIfDisposed(),Vu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.greater=function(t){return this.throwIfDisposed(),fo(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.ifft=function(){return this.throwIfDisposed(),lk(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.irfft=function(){return this.throwIfDisposed(),B2e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.isFinite=function(){return this.throwIfDisposed(),rEe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.isInf=function(){return this.throwIfDisposed(),iEe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.isNaN=function(){return this.throwIfDisposed(),aEe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.leakyRelu=function(t){return this.throwIfDisposed(),n2(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.lessEqual=function(t){return this.throwIfDisposed(),ff(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.less=function(t){return this.throwIfDisposed(),w0(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),fEe(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.logSigmoid=function(){return this.throwIfDisposed(),xEe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.logSoftmax=function(t){return this.throwIfDisposed(),gU(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),yU(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.log=function(){return this.throwIfDisposed(),ls(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.log1p=function(){return this.throwIfDisposed(),mU(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.logicalAnd=function(t){return this.throwIfDisposed(),Us(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.logicalNot=function(){return this.throwIfDisposed(),r2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.logicalOr=function(t){return this.throwIfDisposed(),vU(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.logicalXor=function(t){return this.throwIfDisposed(),TEe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),st(this,t,e,n)};ne().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),o2(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.max=function(t,e){return this.throwIfDisposed(),wi(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.maximum=function(t){return this.throwIfDisposed(),vl(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.mean=function(t,e){return this.throwIfDisposed(),sn(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.min=function(t,e){return this.throwIfDisposed(),b0(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.minimum=function(t){return this.throwIfDisposed(),Tp(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),DEe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.mod=function(t){return this.throwIfDisposed(),FEe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.mul=function(t){return this.throwIfDisposed(),H(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.neg=function(){return this.throwIfDisposed(),Zt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.norm=function(t,e,n){return this.throwIfDisposed(),f1(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.notEqual=function(t){return this.throwIfDisposed(),S0(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),xU(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.onesLike=function(){return this.throwIfDisposed(),jo(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.pad=function(t,e){return this.throwIfDisposed(),s2(this,t,e)};ne().prototype.pool=function(t,e,n,r,o,i){return this.throwIfDisposed(),KEe(this,t,e,n,r,o,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.pow=function(t){return this.throwIfDisposed(),Iu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.prelu=function(t){return this.throwIfDisposed(),l2(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.prod=function(t,e){return this.throwIfDisposed(),YEe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.reciprocal=function(){return this.throwIfDisposed(),x2e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.relu=function(){return this.throwIfDisposed(),Gu(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.relu6=function(){return this.throwIfDisposed(),SU(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.reshapeAs=function(t){return this.throwIfDisposed(),q(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.reshape=function(t){return this.throwIfDisposed(),q(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),DU(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),MU(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.reverse=function(t){return this.throwIfDisposed(),Tu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.rfft=function(){return this.throwIfDisposed(),W2e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.round=function(){return this.throwIfDisposed(),CU(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.rsqrt=function(){return this.throwIfDisposed(),$U(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.selu=function(){return this.throwIfDisposed(),kU(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.separableConv2d=function(t,e,n,r,o,i){return this.throwIfDisposed(),IU(this,t,e,n,r,o,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.sigmoid=function(){return this.throwIfDisposed(),df(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.sign=function(){return this.throwIfDisposed(),E2e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.sin=function(){return this.throwIfDisposed(),TU(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.sinh=function(){return this.throwIfDisposed(),EU(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.slice=function(t,e){return this.throwIfDisposed(),Ct(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.softmax=function(t){return this.throwIfDisposed(),v2(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.softplus=function(){return this.throwIfDisposed(),eg(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),a2(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.split=function(t,e){return this.throwIfDisposed(),io(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.sqrt=function(){return this.throwIfDisposed(),Hn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.square=function(){return this.throwIfDisposed(),Et(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.squaredDifference=function(t){return this.throwIfDisposed(),U2e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.squeeze=function(t){return this.throwIfDisposed(),ng(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof cn?[this,t]:[this,...t];return Gs(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.step=function(t){return this.throwIfDisposed(),rg(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.stridedSlice=function(t,e,n,r,o,i,s,a){return this.throwIfDisposed(),X2e(this,t,e,n,r,o,i,s,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.sub=function(t){return this.throwIfDisposed(),_e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.sum=function(t,e){return this.throwIfDisposed(),Ae(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.tan=function(){return this.throwIfDisposed(),Q2e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.tanh=function(){return this.throwIfDisposed(),l1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.tile=function(t){return this.throwIfDisposed(),yi(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.toBool=function(){return this.throwIfDisposed(),Se(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.toFloat=function(){return this.throwIfDisposed(),Se(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.toInt=function(){return this.throwIfDisposed(),Se(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.topk=function(t,e){return this.throwIfDisposed(),eNe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.transpose=function(t){return this.throwIfDisposed(),Je(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.unique=function(t){return this.throwIfDisposed(),rNe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),RU(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.unstack=function(t){return this.throwIfDisposed(),Eu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.where=function(t,e){return this.throwIfDisposed(),lr(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ne().prototype.zerosLike=function(){return this.throwIfDisposed(),et(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class ji extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ji.prototype)}}class _o extends Error{constructor(e){super(e),Object.setPrototypeOf(this,_o.prototype)}}class G extends Error{constructor(e){super(e),Object.setPrototypeOf(this,G.prototype)}}class ze extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ze.prototype)}}class eN extends Error{constructor(e){super(e),Object.setPrototypeOf(this,eN.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class $G{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Nu(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function Wi(t,e){if(!t)throw new eN(e)}function dM(t,e){let n=0;for(const r of t)r===e&&n++;return n}function xr(t){return t.length===1?t[0]:t}function ft(t){return Array.isArray(t)?t:[t]}function xs(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function Ml(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let vo={};function tN(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function dk(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>dk(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:dk(r))}}}function ag(t,e={},n={},r="object",o=!1){if(typeof t=="string"){const i=t;let s;if(i in n)s=n[i];else if(i in vo)s=vo[i];else if(s=e[i],s==null)throw new G(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return s}else{const i=t;if(i.className==null||i.config==null)throw new G(`${r}: Improper config format: ${JSON.stringify(i)}.
'className' and 'config' must set.`);const s=i.className;let a,l;if(s in n?[a,l]=n[s]:s in vo?[a,l]=vo.className:s in e&&([a,l]=e[s]),a==null)throw new G(`Unknown ${r}: ${s}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const u={};for(const h of Object.keys(vo))u[h]=vo[h];for(const h of Object.keys(n))u[h]=n[h];const c=i.config;c.customObjects=u;const d=Object.assign({},vo);for(const h of Object.keys(n))vo[h]=n[h];dk(i.config);const f=l(a,i.config,n,o);return vo=Object.assign({},d),f}else{const u=Object.assign({},vo);for(const d of Object.keys(n))vo[d]=n[d];const c=new a(i.config);return vo=Object.assign({},u),c}}}function I_e(t,e){return t<e?-1:t>e?1:0}function sy(t,e){return-1*I_e(t,e)}function ja(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function T_e(t){if(t==null)throw new G(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function Ku(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new G(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function nN(t,e,n=0,r=1/0){return Wi(n>=0),Wi(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(o=>typeof o===e)}function Tn(t,e){Array.isArray(t)?(M(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>Tn(n,`element ${r+1} of ${e}`))):M(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${kG(t)}.`)}function kG(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>kG(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function E_e(t,e,n){let r=n!=null?n():gr(),o;return(...s)=>{const a=n!=null?n():gr();return a-r<e||(r=a,o=t(...s)),o}}function IG(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let N_e=0;function TG(){return N_e++}const ay={};function v1(t=""){return t in ay||(ay[t]=0),ay[t]+=1,t+ay[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const A_e=["channelsFirst","channelsLast"],O_e=["nearest","bilinear"],__e=["valid","same","causal"],R_e=["max","avg"],P_e=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const ic=new Map;function tn(t){Ku(A_e,"DataFormat",t)}function D_e(t){Ku(O_e,"InterpolationFormat",t)}function ho(t){Ku(__e,"PaddingMode",t)}function EG(t){Ku(R_e,"PoolMode",t)}const wh=[],fM="/";function iu(t,e){wh.push(t);try{const n=e();return wh.pop(),n}catch(n){throw wh.pop(),n}}function M_e(){return wh.length===0?"":wh.join(fM)+fM}function NG(t){if(!OG(t))throw new Error("Not a valid tensor name: '"+t+"'");return M_e()+t}function AG(t){if(!OG(t))throw new Error("Not a valid tensor name: '"+t+"'");ic.has(t)||ic.set(t,0);const e=ic.get(t);if(ic.set(t,ic.get(t)+1),e>0){const n=`${t}_${e}`;return ic.set(n,1),n}else return t}const F_e=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function OG(t){return!!t.match(F_e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function L_e(t){return t===parseInt(t.toString(),10)}function Wa(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let o=e;o<n;++o)r*=t[o];return r}function Dd(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function el(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function Ti(t,e){if(e<t)throw new G(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Yw;function fn(){return Yw==null&&(Yw=Oke().epsilon()),Yw}function Ei(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ns(t,e){return Se(t,e)}function lg(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),q(t,n)}function B_e(t,e){return Q(()=>{if(t.shape.length!==2)throw new G(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=lg(t,1);return fk(n,[1,e,1])})}function z_e(t){const e=[Wa(t.shape)];return q(t,e)}function j_e(t){if(t.rank<=1)throw new G(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],Wa(t.shape,1)];return q(t,e)}function su(t,e,n){return Q(()=>{switch(t.rank){case 1:return g2(t,e,n);case 2:return NU(t,[e,0],[n,t.shape[1]]);case 3:return y2(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return $0(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return Ct(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return Ct(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new G(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function Qw(t,e,n){return Q(()=>{switch(t.rank){case 1:return g2(t,e,n);case 2:return NU(t,[0,e],[t.shape[0],n]);case 3:return y2(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return $0(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new G(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function ly(t,e,n,r){return Q(()=>{switch(t.rank){case 1:return g2(t,e,n);case 2:switch(r){case 1:return su(t,e,n);case 2:return Qw(t,e,n);default:throw new G(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return su(t,e,n);case 2:return y2(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return Qw(t,e,n);default:throw new G(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return su(t,e,n);case 2:return $0(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return $0(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return Qw(t,e,n);default:throw new G(`The axis is not within the rank of the tensor ${r}`)}default:throw new G(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function rN(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),Sr(t,e)}function hM(t,e){switch(t.rank){case 1:return eTe([t,e]);case 2:return nTe([t,e],0);case 3:return oTe([t,e],0);case 4:return sTe([t,e],0);default:throw new G(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function fk(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new G(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return yi(t,e)}function x1(t,e=0,n=1,r,o){return m2e(t,e,n,r,o)}function rs(t,e,n,r){if(t.rank<2||e.rank<2)throw new ze(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const o=t.shape.slice(-1)[0],i=e.shape.slice(-2)[0];if(o!==i)throw new ze(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return JD({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?hk(t.rank,r,Ei()):null,activation:n});{const o=t.shape.slice(),i=o.pop();t=q(t,[-1,i]);const s=e.shape.slice(),a=s.pop(),l=s.pop(),u=[...s,a],c=Array.from({length:e.rank},(p,m)=>m===0?e.rank-2:m<=e.rank-2?m-1:m);e=q(Je(e,c),[l,-1]);const d=[...o,...u];return q(JD({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?hk(t.rank,r,Ei()):null,activation:n}),d)}}function _G(t,e,n){return Q(()=>(Array.isArray(e)?e=Lr(e,"int32"):e=Se(e,"int32"),e2(t,e,n)))}function ug(t){return H(t,t)}function hk(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new G(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?q(e,[1,r[0],1,1,1]):q(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?q(e,[1,1,1,1,r[0]]):q(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?q(e,[1,r[0],1,1]):q(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?q(e,[1,1,1,r[0]]):q(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?q(e,[1,r[0],1]):q(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?q(e,[1,1,r[0]]):q(e,[1].concat(r))}else if(t<3)return e;throw new G(`Unsupported input rank by biasAdd: ${e.rank}`)}function _i(t,e,n){return Q(()=>(n==null&&(n=Ei()),tn(n),fe(t,hk(t.rank,e,n))))}function W_e(t,e=1){if(e!==1)throw new ze(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return d1(t)}function V_e(t){return Q(()=>Oe(t,fe(nr(t),1)))}function RG(t,e,n,r){return Q(()=>cNe(t,e,n,r))}function U_e(t){return Q(()=>{const e=fe(.5,H(.2,t));return lo(e,0,1)})}function cg(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const G_e=["fanIn","fanOut","fanAvg"],H_e=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function K_e(t){Ku(G_e,"FanMode",t)}function q_e(t){Ku(H_e,"Distribution",t)}class Go extends pf{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class PG extends Go{apply(e,n){return $n(e,n)}}PG.className="Zeros";de(PG);class oN extends Go{apply(e,n){return xl(e,n)}}oN.className="Ones";de(oN);class DG extends Go{constructor(e){if(super(),typeof e!="object")throw new G(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new G(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return Q(()=>H(at(this.value),xl(e,n)))}getConfig(){return{value:this.value}}}DG.className="Constant";de(DG);class MG extends Go{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return tg(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}MG.className="RandomUniform";de(MG);class FG extends Go{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new ze(`randomNormal does not support dType ${n}.`);return x1(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}FG.className="RandomNormal";de(FG);class LG extends Go{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new ze(`truncatedNormal does not support dType ${n}.`);return _U(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}LG.className="TruncatedNormal";de(LG);class BG extends Go{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return Q(()=>{if(e.length!==2||e[0]!==e[1])throw new G("Identity matrix initializer can only be used for 2D square matrices.");return H(this.gain,pU(e[0]))})}getConfig(){return{gain:this.gain}}}BG.className="Identity";de(BG);function X_e(t,e="channelsLast"){let n,r;if(tn(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const o=Wa(t,2);n=t[1]*o,r=t[0]*o}else if(e==="channelsLast"){const o=Wa(t,0,t.length-2);n=t[t.length-2]*o,r=t[t.length-1]*o}}else{const o=Wa(t);n=Math.sqrt(o),r=Math.sqrt(o)}return[n,r]}class Ur extends Go{constructor(e){if(super(),e.scale<0)throw new G(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,K_e(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,q_e(this.distribution),this.seed=e.seed}apply(e,n){const r=X_e(e),o=r[0],i=r[1];let s=this.scale;if(this.mode==="fanIn"?s/=Math.max(1,o):this.mode==="fanOut"?s/=Math.max(1,i):s/=Math.max(1,(o+i)/2),this.distribution==="normal"){const a=Math.sqrt(s);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new ze(`${this.getClassName()} does not support dType ${n}.`);return _U(e,0,a,n,this.seed)}else{const a=Math.sqrt(3*s);return tg(e,-a,a,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Ur.className="VarianceScaling";de(Ur);class iN extends Ur{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ur.className}}iN.className="GlorotUniform";de(iN);class sN extends Ur{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ur.className}}sN.className="GlorotNormal";de(sN);class aN extends Ur{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ur.className}}aN.className="HeNormal";de(aN);class lN extends Ur{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ur.className}}lN.className="HeUniform";de(lN);class uN extends Ur{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ur.className}}uN.className="LeCunNormal";de(uN);class cN extends Ur{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ur.className}}cN.className="LeCunUniform";de(cN);class zG extends Go{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return Q(()=>{if(e.length<2)throw new ze("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=re(e.slice(0,-1)),o=e[e.length-1],i=r*o;i>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${i}) elements: Slowness may result.`);const s=[Math.max(o,r),Math.min(o,r)],a=x1(s,0,1,n,this.seed),l=sAe.qr(a,!1);let u=l[0];const d=l[1].flatten().stridedSlice([0],[Math.min(o,r)*Math.min(o,r)],[Math.min(o,r)+1]);return u=H(u,d.sign()),r<o&&(u=u.transpose()),H(at(this.gain),u.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}zG.className="Orthogonal";de(zG);const pM={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function mM(t,e={}){return ag(t,ko.getMap().classNameMap,e,"initializer")}function Vt(t){return tN(t)}function Lt(t){if(typeof t=="string"){const e=t in pM?pM[t]:t;if(e==="GlorotNormal")return new sN;if(e==="GlorotUniform")return new iN;if(e==="HeNormal")return new aN;if(e==="HeUniform")return new lN;if(e==="LeCunNormal")return new uN;if(e==="LeCunUniform")return new cN;{const n={};return n.className=e,n.config={},mM(n)}}else return t instanceof Go?t:mM(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function pk(t){return Array.isArray(t)&&Array.isArray(t[0])}function k0(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function Pe(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new G(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function nt(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new G(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function I0(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,o)=>r*o);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const gM="Variable";class Y_e{constructor(e,n="float32",r=gM,o=!0,i=null){this.dtype=n??"float32",this.shape=e.shape,this.id=TG(),r=r??gM,this.originalName=NG(r),this.name=AG(this.originalName),this.trainable_=o,this.constraint=i,this.val=sNe(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),Q_e(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function Q_e(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function mk(t){return t.map(e=>e.read())}function dN(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class hn{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class us{constructor(e,n,r,o,i,s,a){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=o,this.callArgs=i,this.outputTensorIndex=a,this.id=TG(),s!=null&&(this.originalName=NG(s),this.name=AG(this.originalName)),this.rank=n.length}}let Z_e=0,b1=class{constructor(e,n){this.callArgs=n,this.id=Z_e++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},J_e=0;class Ge extends pf{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=J_e++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=xs(r)+"_"+v1(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let i=null;e.batchSize!=null&&(i=e.batchSize),r=[i].concat(e.inputShape)}this.batchInputShape=r;let o=e.dtype;o==null&&(o=e.inputDType),o==null&&(o="float32"),this.dtype=o}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new _o(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new G(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return xr(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return xr(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new ji(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new ji(`Layer ${this.name} is not connected, no input to return.`);return xr(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new ji(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new ji(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return xr(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=ft(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=ft(this.inputSpec);if(n.length!==r.length)throw new G(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let o=0;o<n.length;o++){const i=n[o],s=r[o];if(s==null)continue;const a=i.rank;if(s.ndim!=null&&a!==s.ndim)throw new G(`Input ${o} is incompatible with layer ${this.name}: expected ndim=${s.ndim}, found ndim=${a}`);if(s.maxNDim!=null&&a>s.maxNDim)throw new G(`Input ${o} is incompatible with layer ${this.name}: expected max_ndim=${s.maxNDim}, found ndim=${a}`);if(s.minNDim!=null&&a<s.minNDim)throw new G(`Input ${o} is incompatible with layer ${this.name}: expected min_ndim=${s.minNDim}, found ndim=${a}.`);if(s.dtype!=null&&i.dtype!==s.dtype)throw new G(`Input ${o} is incompatible with layer ${this.name} : expected dtype=${s.dtype}, found dtype=${i.dtype}.`);if(s.axes){const l=i.shape;for(const u in s.axes){const c=Number(u),d=s.axes[u],f=c>=0?l[c]:l[l.length+c];if(d!=null&&[d,null].indexOf(f)===-1)throw new G(`Input ${o} is incompatible with layer ${this.name}: expected axis ${c} of input shape to have value ${d} but got shape ${l}.`)}}if(s.shape!=null)for(let l=0;l<s.shape.length;++l){const u=s.shape[l],c=i.shape[l];if(u!=null&&c!=null&&u!==c)throw new G(`Input ${o} is incompatible with layer ${this.name}: expected shape=${s.shape}, found shape=${i.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=ft(e),o=nRe(e),i=rRe(e);if(o===i)throw new G("Arguments to apply() must be all SymbolicTensors or all Tensors");return iu(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const s=[];for(const a of ft(e))s.push(a.shape);this.build(xr(s)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&i&&(this._refCount=1)}if(this.assertInputCompatibility(e),i){let s=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,s);const a=ft(s),l=[];for(let u of a)r.indexOf(u)!==-1&&(u=u.clone()),l.push(u);if(s=xr(l),this.activityRegularizer!=null)throw new ze("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return s}else{const s=eRe(e),a=this.computeOutputShape(s);let l;const u=tRe(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?s[0]:s),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((c,d)=>new us(u,c,this,ft(e),n,this.name,d)):l=new us(u,a,this,ft(e),n,this.name),this.addInboundNode(e,l,null,null,s,a,n),this._refCount++,this.activityRegularizer!=null)throw new ze("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,o)=>{r!=null&&e[o]!=null&&e[o]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new ji(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new ji(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new _o(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return I0(this.weights)}build(e){this.built=!0}getWeights(e=!1){return mk(e?this.trainableWeights:this.weights)}setWeights(e){Q(()=>{const n=this.weights;if(n.length!==e.length)throw new G(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],o=mk(n);for(let i=0;i<o.length;++i){const s=o[i],a=n[i],l=e[i];if(!ut(s.shape,l.shape))throw new G(`Layer weight shape ${s.shape} not compatible with provided weight shape ${l.shape}`);r.push([a,l])}dN(r)})}addWeight(e,n,r,o,i,s,a,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new G(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(o=l!=null?l():Lt("zeros"));const u=o.apply(n,r),c=new Y_e(u,r,e,s,a);return u.dispose(),i!=null&&this.addLoss(()=>i.apply(c.read())),s==null&&(s=!0),s?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=ft(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,r){if(!this.supportsMasking)return;const o=this.computeMask(e,r),i=ft(n),s=ft(o);if(i.length!==s.length)throw new Error(`${this.name} outputs ${i.length} tensors but ${i.length} masks for those tensors`);for(let a=0;a<i.length;a++)i[a].kerasMask=s[a]}addInboundNode(e,n,r,o,i,s,a=null){const l=ft(e);n=ft(n),r=ft(r),o=ft(o),i=k0(i),s=k0(s);const u=[],c=[],d=[];for(const f of l)u.push(f.sourceLayer),c.push(f.nodeIndex),d.push(f.tensorIndex);new b1({outboundLayer:this,inboundLayers:u,nodeIndices:c,tensorIndices:d,inputTensors:l,outputTensors:n,inputMasks:r,outputMasks:o,inputShapes:i,outputShapes:s},a);for(let f=0;f<n.length;f++)n[f].sourceLayer=this,n[f].nodeIndex=this.inboundNodes.length-1,n[f].tensorIndex=f}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function eRe(t){t=ft(t);const e=[];for(const n of t)e.push(n.shape);return xr(e)}function tRe(t){return"float32"}function jG(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const o=[];for(let i=0;i<r.inboundLayers.length;i++){const s=r.inputTensors[i],a=r.inboundLayers[i],l=r.nodeIndices[i],u=jG(s,a,l);for(const c of u)o.indexOf(c)===-1&&o.push(c)}return o}}}function nRe(t){let e=!0;for(const n of ft(t))if(!(n instanceof us)){e=!1;break}return e}function rRe(t){let e=!0;for(const n of ft(t))if(n instanceof us){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class dg extends Ge{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:v1("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new G("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new G("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new G("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const o=new us(this.dtype,this.batchInputShape,this,[],{},this.name);o.nodeIndex=0,o.tensorIndex=0,new b1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new G(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}dg.className="InputLayer";de(dg);function oRe(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new G("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new dg({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function iRe(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return Se(e,t.dtype)}catch{throw new G(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class Ia{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof Ia)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=iRe(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new G(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof us){if(this.id2Value[e.id]==null)throw new G(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new G(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof us){if(this.id2Value[e.id]==null)throw new G(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new G(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&Ke(this.id2Mask)}}const T0=new $G,E0=new $G;function sRe(t){T0!=null&&T0.setMaxEntries(t),E0!=null&&E0.setMaxEntries(t)}function th(t,e,n,r){const o=n==null?!1:n.training,i=Array.isArray(t),s=i?t:[t],a=s.map(p=>p.name),l=[],u=e.names();for(const p of a)u.indexOf(p)!==-1?l.push(e.getValue(p)):l.push(null);const c=a.join(",")+"|"+e.names().sort().join(",");let d=T0.get(c),f;if(d==null){const p=aRe(s,e);d=p.sorted,f=p.recipientCounts,T0.put(c,d),E0.put(c,f)}f={},o||Object.assign(f,E0.get(c));const h=new Ia(e);for(let p=0;p<d.length;++p){const m=d[p],g=m.sourceLayer;if(g instanceof dg)continue;const y=[],v=[],x=[];let b=!1;for(const k of m.inputs){const I=h.getValue(k),T=h.getMask(k);y.push(I),v.push(T),T!=null&&(b=!0),o||(f[k.name]--,f[k.name]===0&&!e.hasKey(k)&&a.indexOf(k.name)===-1&&!I.isDisposed&&k.sourceLayer.stateful!==!0&&x.push(I))}b&&(n=n||{},n.mask=v[0]);const w=ft(g.apply(y,n));let S=null;g.supportsMasking&&(S=g.computeMask(y,v));const $=uRe(m),C=Array.isArray($)?$:[$];for(let k=0;k<C.length;++k){h.hasKey(C[k])||h.add(C[k],w[k],Array.isArray(S)?S[0]:S);const I=a.indexOf(C[k].name);I!==-1&&(l[I]=w[k])}o||Ke(x)}return h.disposeMasks(),i?l:l[0]}function aRe(t,e){M(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const o=yM(t[0],e);n=o.sorted,r=o.recipientMap}else{const o=new Set;for(const i of t){const{sorted:s,recipientMap:a}=yM(i,e);for(const l of s)o.has(l.name)||(n.push(l),o.add(l.name));for(const l in a)r[l]==null&&(r[l]=new Set),a[l].forEach(u=>r[l].add(u))}}return{sorted:n,recipientCounts:lRe(r)}}function lRe(t){const e={};for(const n in t)e[n]=t[n].size;return e}function yM(t,e){const n=new Set,r=[],o={};for(const a of e.names())n.add(a);const i=[],s=[];for(i.push(t);i.length>0;){const a=i[i.length-1];if(n.has(a.name)){i.pop();continue}const l=s[s.length-1]===i.length-1;if(a.inputs.length===0||l)i.pop(),r.push(a),n.add(a.name),l&&s.pop();else{s.push(i.length-1);for(const u of a.inputs)o[u.name]==null&&(o[u.name]=new Set),o[u.name].add(a.name),!n.has(u.name)&&i.push(u)}}return{sorted:r,recipientMap:o}}function uRe(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const o of t.sourceLayer.inboundNodes[r].outputTensors)if(o.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cRe=ee();cRe.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,sRe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function fN(t,e){return Q(()=>Hn(Ae(H(t,t),e,!0)))}class fg extends pf{getConfig(){return{}}}class WG extends fg{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Q(()=>{const n=fN(e,this.axis),r=lo(n,0,this.maxValue);return H(e,Oe(r,fe(fn(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}WG.className="MaxNorm";de(WG);class VG extends fg{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Q(()=>Oe(e,fe(fn(),fN(e,this.axis))))}getConfig(){return{axis:this.axis}}}VG.className="UnitNorm";de(VG);class UG extends fg{apply(e){return Gu(e)}}UG.className="NonNeg";de(UG);class GG extends fg{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Q(()=>{const n=fN(e,this.axis),r=fe(H(this.rate,lo(n,this.minValue,this.maxValue)),H(1-this.rate,n));return H(e,Oe(r,fe(fn(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}GG.className="MinMaxNorm";de(GG);const vM={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function mn(t){return tN(t)}function xM(t,e={}){return ag(t,ko.getMap().classNameMap,e,"constraint")}function gn(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in vM?vM[t]:t,config:{}};return xM(n)}else return t instanceof fg?t:xM(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function Il(t){if(t==null)return;const e=[],n=[],r=[];for(const o in t){const i=t[o];if(typeof i!="number"){const s=i;e.push(s.data()),n.push(o),r.push(s)}}if(e.length>0){const o=await Promise.all(e);for(let i=0;i<o.length;++i)t[n[i]]=o[i][0];Ke(r)}}function HG(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var bM;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(bM||(bM={}));const dRe=125;class Np{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class fRe{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class hRe extends Np{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const o in n){const i=n[o];if(typeof i=="number")this.totals.hasOwnProperty(o)||(this.totals[o]=0),this.totals[o]=this.totals[o]+i*r;else{let s;o in this.totals?s=this.totals[o]:this.totals[o]=0;const a=Q(()=>fe(this.totals[o],H(i,r)));this.totals[o]=a,s!=null&&s.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:Q(()=>{const o=H(Oe(1,this.seen),this.totals[r]);n[r]=o,this.totals[r].dispose(),es(n[r])}))}}class pRe extends Np{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const i in this.history){const s=this.history[i];for(let a=0;a<s.length;++a)if(typeof s[a]!="number"){const l=s[a];e.push(l.data()),n.push(i),r.push(a)}}const o=await Promise.all(e);for(let i=0;i<o.length;++i)this.history[n[i]][r[i]].dispose(),this.history[n[i]][r[i]]=o[i][0]}}class mRe extends Np{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||QU,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=dRe),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");U$(this.yieldEvery)&&(this.maybeWait=E_e(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const o=[];this.yield!=null&&(await Il(r),o.push(this.yield(e,n,r))),o.push(this.nextFrameFunc()),await Promise.all(o)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await Il(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await Il(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await Il(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await Il(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):U$(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await Il(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await Il(e),await this.trainEnd(e))}}function KG(t,e){return t==null&&(t={}),t instanceof Np?[t]:Array.isArray(t)&&t[0]instanceof Np?t:ft(t).map(r=>new mRe(r,e))}class bo{constructor(){}static registerCallbackConstructor(e,n){M(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),bo.checkForDuplicate(n),bo.constructors[e]==null&&(bo.constructors[e]=[]),bo.constructors[e].push(n)}static checkForDuplicate(e){for(const n in bo.constructors)bo.constructors[+n].forEach(o=>{if(o===e)throw new G("Duplicate callback constructor.")})}static clear(){bo.constructors={}}static createCallbacks(e){const n=[];for(const r in bo.constructors){const o=+r;e>=o&&n.push(...bo.constructors[o])}return n.map(r=>new r)}}bo.constructors={};function qG(t,e,n,r,o,i,s,a,l){const u=new pRe,c=[new hRe,...bo.createCallbacks(e)];t!=null&&c.push(...t),c.push(u);const d=new fRe(c);return d.setParams({epochs:n,initialEpoch:r,samples:o,steps:i,batchSize:s,verbose:e,doValidation:a,metrics:l}),{callbackList:d,history:u}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Rs(t,e={},n=!1){return ag(t,ko.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function N0(t,e){return Q(()=>{t.dtype!=="float32"&&(t=Se(t,"float32"));const n=Ae(ug(t),e,!0),r=c1(n.shape,fn()),o=Hn(vl(n,r));return Oe(t,o)})}function w1(t,e){return Q(()=>sn(ug(_e(e,t)),-1))}function hN(t,e){return Q(()=>sn(nr(_e(e,t)),-1))}function pN(t,e){return Q(()=>{const n=_e(t,e),r=lo(nr(t),fn(),Number.MAX_VALUE),o=nr(Oe(n,r));return H(100,sn(o,-1))})}function gRe(t,e){return Q(()=>{const n=lo(e,fn(),Number.MAX_VALUE),r=ls(fe(1,n)),o=lo(t,fn(),Number.MAX_VALUE),i=ls(fe(1,o));return sn(ug(_e(r,i)),-1)})}function yRe(t,e){return Q(()=>{const n=vl(0,_e(1,H(t,e)));return sn(ug(n),-1)})}function vRe(t,e){return Q(()=>{const n=vl(0,_e(1,H(t,e)));return sn(n,-1)})}function xRe(t,e){return Q(()=>{const n=Ae(H(t,e),-1),r=wi(H(_e(1,t),e),-1);return vl(0,fe(1,_e(r,n)))})}function bRe(t,e){return Q(()=>{const n=Math.log(2),r=_e(e,t),o=_e(fe(r,eg(H(-2,r))),n);return sn(o,-1)})}function Ap(t,e,n=!1){return Q(()=>{if(n)e=v2(e);else{const r=Ae(e,e.shape.length-1,!0);e=Oe(e,r)}return e=lo(e,fn(),1-fn()),Zt(Ae(H(Se(t,"float32"),ls(e)),e.shape.length-1))})}function A0(t,e,n=!1){return Q(()=>{const r=Se(h1(z_e(t)),"int32");e=lo(e,fn(),1-fn());const o=e.shape,i=q(xU(r,o[o.length-1]),o);return Ap(i,e,n)})}function wRe(t,e){if(!ut(t.shape,e.shape))throw new G(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return Q(()=>{const n=Gu(e),r=Zt(nr(e));return fe(_e(n,H(e,t)),mU(as(r)))})}function S1(t,e){return Q(()=>{let n;return n=lo(e,fn(),1-fn()),n=ls(Oe(n,_e(1,n))),sn(wRe(t,n),-1)})}function SRe(t,e){return Q(()=>{const n=lo(t,fn(),1),r=lo(e,fn(),1);return Ae(H(t,ls(Oe(n,r))),-1)})}function CRe(t,e){return Q(()=>{const n=ls(fe(fn(),e));return sn(_e(e,H(t,n)),-1)})}function XG(t,e){return Q(()=>{const n=N0(t,-1),r=N0(e,-1),o=H(n,r);return Zt(Ae(o,-1))})}const O0={meanSquaredError:w1,meanAbsoluteError:hN,meanAbsolutePercentageError:pN,meanSquaredLogarithmicError:gRe,squaredHinge:yRe,hinge:vRe,categoricalHinge:xRe,logcosh:bRe,categoricalCrossentropy:Ap,sparseCategoricalCrossentropy:A0,binaryCrossentropy:S1,kullbackLeiblerDivergence:SRe,poisson:CRe,cosineProximity:XG};function Zw(t){if(typeof t=="string"){if(t in O0)return O0[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new G(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function YG(t,e){return Q(()=>{const n=H(.5,jo(e)),r=ns(fo(e,n),t.dtype);return sn(ss(t,r),-1)})}function QG(t,e){return Q(()=>ns(ss($p(t,-1),$p(e,-1)),"float32"))}function $Re(t,e){return Q(()=>Se(Ae(Us(ss(t,1),ss(e,1))),"float32"))}function kRe(t,e){return Q(()=>Se(Ae(Us(ss(t,0),ss(e,1))),"float32"))}function IRe(t,e){return Q(()=>{const n=$Re(t,e),r=kRe(t,e),o=fe(n,r);return Se(lr(fo(o,0),Oe(n,o),0),"float32")})}function TRe(t,e){return S1(t,e)}function ERe(t,e){return t.rank===e.rank&&(t=ng(t,[t.rank-1])),e=$p(e,-1),e.dtype!==t.dtype&&(e=Se(e,t.dtype)),Se(ss(t,e),"float32")}const NRe=w1,ARe=w1,ORe=hN,_Re=hN,RRe=pN,PRe=pN,ZG=Ap,DRe=XG,JG=A0,_0={binaryAccuracy:YG,categoricalAccuracy:QG,precision:IRe,categoricalCrossentropy:ZG,sparseCategoricalCrossentropy:JG,mse:NRe,MSE:ARe,mae:ORe,MAE:_Re,mape:RRe,MAPE:PRe,cosine:DRe};function MRe(t){if(typeof t=="string"&&t in _0)return _0[t];if(typeof t!="string"&&t!=null)return t;throw new G(`Unknown metric ${t}`)}function uy(t){if(Wi(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(O0))if(O0[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(_0))if(_0[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function FRe(t){const e={Adagrad:()=>Pl.adagrad(.01),Adadelta:()=>Pl.adadelta(1,.95,fn()),Adam:()=>Pl.adam(.001,.9,.999,fn()),Adamax:()=>Pl.adamax(.002,.9,.999,fn(),0),RMSProp:()=>Pl.rmsprop(.001,.9,0,fn()),SGD:()=>Pl.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new G(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const wM=1*1024*1024;function SM(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!gk(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>wM&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${wM}.`)}}function gk(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!gk(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!gk(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function LRe(t,e,n,r=console.log){const o=zRe(t),i=["Layer (type)","Input Shape","Output shape","Param #"];o?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(c=>Math.floor(e*c)));let s;if(!o){i.push("Receives inputs"),s=[];for(const c in t.nodesByDepth)s.push(...t.nodesByDepth[c])}r("_".repeat(e)),R0(i,n,r),r("=".repeat(e));const a=t.layers;for(let c=0;c<a.length;++c)o?jRe(a[c],n,r):WRe(a[c],n,s,r),r((c===a.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=BRe(t),u=I0(t.nonTrainableWeights);r(`Total params: ${l+u}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${u}`),r("_".repeat(e))}function BRe(t){let e;return t.collectedTrainableWeights!=null?e=I0(t.collectedTrainableWeights):e=I0(t.trainableWeights),e}function zRe(t){let e=!0;const n=[],r=[];for(const o in t.nodesByDepth)n.push(t.nodesByDepth[o]);for(const o of n){if(o.length>1||o.length===1&&o[0].inboundLayers.length>1){e=!1;break}r.push(...o)}if(e)for(const o of t.layers){let i=!1;for(const s of o.inboundNodes)if(r.indexOf(s)!==-1)if(i){e=!1;break}else i=!0;if(!e)break}return e}function R0(t,e,n=console.log){let r="";for(let o=0;o<t.length;++o)o>0&&(r=r.slice(0,r.length-1)+" "),r+=t[o],r=r.slice(0,e[o]),r+=" ".repeat(e[o]-r.length);n(r)}function jRe(t,e,n){let r,o;try{o=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{o="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const i=t.name,s=t.getClassName(),a=[`${i} (${s})`,o,r,t.countParams().toString()];R0(a,e,n)}function WRe(t,e,n,r){let o,i;try{i=t.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{i="multiple"}try{o=JSON.stringify(t.outputShape)}catch{o="multiple"}const s=[];for(const d of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(d)===-1))for(let f=0;f<d.inboundLayers.length;++f){const h=d.inboundLayers[f].name,p=d.nodeIndices[f],m=d.tensorIndices[f];s.push(`${h}[${p}][${m}]`)}const a=t.name,l=t.getClassName(),u=s.length===0?"":s[0],c=[`${a} (${l})`,i,o,t.countParams().toString(),u];R0(c,e,r);for(let d=1;d<s.length;++d)R0(["","","","",s[d]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function e5(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function yk(t,e){if(t===null)return null;if(typeof t=="string")return Ml(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let o=0;o<r;++o){const i=t[o];e5(e,o,i)?n.push(i):n.push(yk(i,e))}return n}else{const n={};for(const r of Object.keys(t)){const o=t[r];if(r==="name"&&typeof o=="string")n[r]=o;else{const i=Ml(r);n[i]=yk(o,i)}}return n}}function vk(t,e){if(t==null)return null;if(typeof t=="string")return xs(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let o=0;o<r;++o){const i=t[o];e5(e,o,i)?n.push(i):n.push(vk(i,e))}return n}else{const n={};for(const r of Object.keys(t)){const o=t[r],i=xs(r);(r==="name"||r==="className")&&typeof o=="string"?n[i]=o:n[i]=vk(o,r)}return n}}/** @license See the LICENSE file. */const t5="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const VRe=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class ri extends Ge{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const v=this.getClassName().toLowerCase();this.name=v1(v)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],ja(this.inputs).length!==this.inputs.length)throw new G(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(v=>v.name)}`);ja(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(v=>v.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const v of this.outputs){const x=v.sourceLayer,b=v.nodeIndex,w=v.tensorIndex;this.outputLayers.push(x),this.outputLayersNodeIndices.push(b),this.outputLayersTensorIndices.push(w)}for(const v of this.inputs){const x=v.sourceLayer,b=v.nodeIndex,w=v.tensorIndex;Wi(b===0,"input layer has >1 nodes"),Wi(w===0,"input layer has >1 tensors"),this.inputLayers.push(x),this.inputLayersNodeIndices.push(b),this.inputLayersTensorIndices.push(w)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let v=0;v<this.inputLayers.length;v++){const x=this.inputLayers[v];if(!(x instanceof dg))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${v} (0-based) originates from layer type ${x.getClassName()}.`);this.inputNames.push(x.name),this.feedInputShapes.push(x.batchInputShape),this.feedInputNames.push(x.name)}for(const v of this.outputLayers)this.outputNames.push(v.name);this.internalInputShapes=this.inputs.map(v=>v.shape),this.internalOutputShapes=this.outputs.map(v=>v.shape);const n={},r={},o={},i={},s={},a=[],l=(v,x,b,w,S,$)=>{(w==null||S==null||$==null)&&(w=v.sourceLayer,S=v.nodeIndex,$=v.tensorIndex);const C=w.inboundNodes[S];if(b.indexOf(C)!==-1)throw new _o(`The tensor ${v.name} at layer "${w.name}" is part of a cycle.`);if(x.indexOf(C)!==-1)return;this.containerNodes.add(ri.nodeKey(w,S)),w.id in s||(s[w.id]=Object.keys(s).length),b.indexOf(C)===-1&&b.push(C);const k=C.inboundLayers.length;for(let I=0;I<k;I++){const T=C.inputTensors[I],E=C.inboundLayers[I],_=C.nodeIndices[I],N=C.tensorIndices[I];l(T,x,b,E,_,N)}for(x.push(C);b.indexOf(C)>=0;)b.splice(b.indexOf(C),1);a.push(C)},u=[],c=[];for(const v of this.outputs)l(v,u,c);const d=a.slice().reverse();for(const v of d){r[v.id]=v,v.id in n||(n[v.id]=0);let x=n[v.id];const b=o[v.outboundLayer.id]==null?0:o[v.outboundLayer.id];x=Math.max(x,b),o[v.outboundLayer.id]=x,i[v.outboundLayer.id]=v.outboundLayer,n[v.id]=x;for(let w=0;w<v.inboundLayers.length;w++){const S=v.inboundLayers[w],$=v.nodeIndices[w],C=S.inboundNodes[$],k=n[C.id]==null?0:n[C.id];n[C.id]=Math.max(x+1,k),r[C.id]=C}}const f={};for(const v in n){const x=n[v];x in f||(f[x]=[]),f[x].push(r[v])}const h={};for(const v in o){const x=o[v];x in h||(h[x]=[]),h[x].push(i[v])}let p=Object.keys(h).map(v=>parseInt(v,10)).sort(sy);this.layers=[];for(const v of p){const x=h[v];x.sort((b,w)=>{const S=s[b.id],$=s[w.id];return S<$?-1:S>$?1:0});for(const b of x)b instanceof ri&&this.internalContainerRefs.push(b),this.layers.push(b)}this.layersByDepth=h,p=Object.keys(f).map(v=>parseInt(v,10)).sort(sy);const m=this.inputs.slice(),g=[];for(const v of p)for(const x of f[v]){const b=x.outboundLayer;if(b!=null){for(const w of x.inputTensors)if(m.indexOf(w)===-1)throw new _o(`Graph disconnected: cannot obtain value for tensor ${w} at layer "${b.name}". The following previous layers were accessed without issue: ${g}`);for(const w of x.outputTensors)m.push(w);g.push(b.name)}}this.nodesByDepth=f;const y=this.layers.map(v=>v.name);for(const v of y){const x=y.filter(b=>b===v).length;if(x!==1)throw new _o(`The name "${v}" is used ${x} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(y))}this.outboundNodes=[],this.inboundNodes=[],new b1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(v=>null),outputMasks:this.outputs.map(v=>null),inputShapes:this.inputs.map(v=>v.shape),outputShapes:this.outputs.map(v=>v.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new G("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let o=0;const i=VRe(e);i&&this.parseWeights(e);for(const a of this.layers)for(const[l,u]of a.weights.entries()){const c=i?`${u.name.split("/").slice(0,-1).join("/")+"/"}${l}`:u.originalName;if(r[c]!=null)throw new G(`Duplicate weight name: ${c}`);r[c]=u,o++}const s=[];for(const a in e){let l=a;if(r[a]==null){const u=a.split("/");l=u.slice(0,-2).concat([u[u.length-1]]).join("/")}if(r[l]!=null)s.push([r[l],e[a]]);else if(n)throw new G(`Provided weight data has no target variable: ${a}`);delete r[l]}if(n){const a=[];for(const l in r)a.push(l);if(a.length>0)throw new G(`${a.length} of ${o} weights are not set: ${a}`)}dN(s)}parseWeights(e){for(const n in Object.keys(e)){const r=n.split("/"),o=["vars","layer_checkpoint_dependencies"],i=r.map(s=>s.startsWith("_")?s.slice(1):s).filter(s=>!o.includes(s)).join("/");i!==n&&(e[i]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${t5}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=vk(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return Q(()=>{e=ft(e);const r=new Ia;for(let o=0;o<this.inputs.length;++o)r.add(this.inputs[o],e[o]);return th(this.outputs,r,n)})}computeMask(e,n){return Q(()=>{e=ft(e);let r;return n==null?r=Nu(null,e.length):r=ft(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=k0(e);if(n.length!==this.inputLayers.length)throw new G(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let a=0;a<n.length;a++){const l=this.inputLayers[a],u=n[a],c=l.name+"_0_0";r[c]=u}const o=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(sy);if(o.length>1)for(const a of o){const l=this.nodesByDepth[a];for(const u of l){const c=u.outboundLayer;if(this.inputLayers.map(m=>m.id).indexOf(c.id)!==-1)continue;const d=[];for(let m=0;m<u.inboundLayers.length;m++){const g=u.inboundLayers[m],y=u.nodeIndices[m],v=u.tensorIndices[m],x=`${g.name}_${y}_${v}`,b=r[x];d.push(b)}const f=c.computeOutputShape(xr(d)),h=k0(f),p=c.inboundNodes.indexOf(u);for(let m=0;m<h.length;m++){const g=`${c.name}_${p}_${m}`;r[g]=h[m]}}}const i=[],s=[];for(let a=0;a<this.outputLayers.length;a++){const l=this.outputLayers[a],u=this.outputLayersNodeIndices[a],c=this.outputLayersTensorIndices[a],d=`${l.name}_${u}_${c}`;s.push(d)}for(let a=0;a<s.length;a++){const l=s[a];Wi(l in r),i.push(r[l])}return xr(i)}runInternalGraph(e,n){n==null&&(n=Nu(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const u=this.inputs[l],c=e[l],d=n[l];r[u.id]=[c,d]}const o=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(sy);for(const l of o){const u=this.nodesByDepth[l];for(const c of u){const d=c.outboundLayer,f=c.inputTensors,h=c.outputTensors,p=new Array;for(const m of f)m.id in r&&p.push(r[m.id]);if(p.length===f.length){let m={},g,y,v,x;if(c.callArgs!=null&&(m=c.callArgs),p.length===1){const[b,w]=p[0];m.mask==null&&(m.mask=w),v=ft(d.call(b,m)),x=ft(d.computeMask(b,w)),g=[b],y=[w]}else g=p.map(b=>b[0]),y=p.map(b=>b[1]),m.mask==null&&(m.mask=y),v=ft(d.call(g,m)),x=ft(d.computeMask(g,y));if(d.activityRegularizer)throw new ze("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let b=0;b<h.length;++b){const w=h[b],S=v[b],$=x[b];r[w.id]=[S,$]}}}}const i=[],s=[],a=[];for(const l of this.outputs){Wi(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[u,c]=r[l.id];a.push(u.shape),i.push(u),s.push(c)}return[i,s,a]}buildNodeConversionMap(e){const n={};let r;for(const o of this.layers){r=o instanceof ri?1:0;for(let i=0;i<o.inboundNodes.length;i++){const s=ri.nodeKey(o,i);this.containerNodes.has(s)&&(n[s]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new G("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new G(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new G(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return Q(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const o=ri.nodeKey(n,r);this.containerNodes.has(o)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const s of this.layers){const a=s.getClassName(),l=s.getConfig(),u=[];for(let d=0;d<s.inboundNodes.length;d++){const f=s.inboundNodes[d],h=ri.nodeKey(s,d);let p={};if(this.containerNodes.has(h)){if(f.callArgs)try{JSON.stringify(f.callArgs),p=f.callArgs}catch{console.warn(`Layer ${s.name} was passed non-serializable keyword arguments: ${f.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),p={}}if(f.inboundLayers.length>0){const m=[];for(let g=0;g<f.inboundLayers.length;g++){const y=f.inboundLayers[g],v=f.nodeIndices[g],x=f.tensorIndices[g],b=ri.nodeKey(y,v);let w=n[b];w==null&&(w=0),m.push([y.name,w,x,p])}u.push(m)}}}const c={};c.name=s.name,c.className=a,c.config=l,c.inboundNodes=u,r.push(c)}e.layers=r;const o=[];for(let s=0;s<this.inputLayers.length;s++){const a=this.inputLayers[s],l=this.inputLayersNodeIndices[s],u=ri.nodeKey(a,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);const d=this.inputLayersTensorIndices[s];o.push([a.name,c,d])}e.inputLayers=o;const i=[];for(let s=0;s<this.outputLayers.length;s++){const a=this.outputLayers[s],l=this.outputLayersNodeIndices[s],u=ri.nodeKey(a,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);const d=this.outputLayersTensorIndices[s];i.push([a.name,c,d])}return e.outputLayers=i,e}static fromConfig(e,n,r={},o=!1){const i={},s={};function a(g,y){g.name in s?s[g.name].push(y):s[g.name]=[y]}function l(g,y){const v=[];let x;for(const b of y){const w=b[0],S=b[1],$=b[2];if(x=b[3]==null?{}:b[3],!(w in i)){a(g,y);return}const C=i[w];if(C.inboundNodes.length<=S){a(g,y);return}const k=C.inboundNodes[S];v.push(k.outputTensors[$])}v.length>0&&g.apply(xr(v),x)}function u(g){const y=g.name,v=Rs(g,n.customObjects!=null?n.customObjects:{});v.setFastWeightInitDuringBuild(o),i[y]=v,g.inboundNodes.forEach(b=>{if(!(b instanceof Array))throw new G(`Corrupted configuration, expected array for nodeData: ${b}`);a(v,b)})}const c=n.name,d=n.layers;for(const g of d)u(g);for(;!T_e(s);)for(const g of d){const y=i[g.name];if(y.name in s){const v=s[y.name];delete s[y.name];for(const x of v)l(y,x)}}const f=[],h=[],p=n.inputLayers;for(const g of p){const y=g[0],v=g[1],x=g[2];Wi(y in i);const w=i[y].inboundNodes[v].outputTensors;f.push(w[x])}const m=n.outputLayers;for(const g of m){const y=g[0],v=g[1],x=g[2];Wi(y in i);const w=i[y].inboundNodes[v].outputTensors;h.push(w[x])}return new e({inputs:f,outputs:h,name:c})}get stateful(){if(this._stateful)throw new G("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){Q(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function URe(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(o=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const o=[];return e.forEach(i=>{i in t?o.push(t[i]):o.push(null)}),o}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function n5(t,e){return URe(t,e,"classWeight")}async function r5(t,e,n,r){if(n!=null){const o=Q(()=>{if(t.shape.length===1)return ou(t);if(t.shape.length===2){if(t.shape[1]>1)return $p(t,1);if(t.shape[1]===1)return q(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),i=Array.from(await o.data());Ke(o);const s=[];return i.forEach(a=>{if(n[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);s.push(n[a])}),Lr(s,"float32")}else return null}function GRe(t,e){return H(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const HRe=32;function o5(t,e){let n,r;const o=e;n=o.xs,r=o.ys,M(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const i=CM("input",t.inputNames,n),s=CM("output",t.outputNames,r),a=i[0].shape[0];M(i.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${i.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),M(s.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${s.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<i.length;l++)M(i[l].shape[0]===a,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${i[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);for(let l=0;l<s.length;l++)M(s[l].shape[0]===a,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${s[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);return{xs:i,ys:s}}function CM(t,e,n){if(n instanceof cn)return[n];if(Array.isArray(n))return M(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const o of e){if(n[o]==null)throw new G(`The feature data generated by the dataset lacks the required ${t} key '${o}'.`);r.push(n[o])}return r}}function KRe(t){if(t.length===3)throw new ze("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function qRe(t,e,n){const r=n.batchesPerEpoch!=null;if(M(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),M(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),M(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),M(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),M(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const o=n.validationData!=null;let i,s;if(o)if($M(n.validationData))M(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const g=KRe(n.validationData);i=g.xs,s=g.ys}const a=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let u;o?u=l.slice().concat(l.map(g=>"val_"+g)):u=l.slice();const c=KG(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,{callbackList:f,history:h}=qG(c,d,n.epochs,null,null,XRe(e,n),null,o,u);f.setModel(t),t.history=h,await f.onTrainBegin(),t.stopTraining_=!1;let p=n.initialEpoch==null?0:n.initialEpoch,m=await e.iterator();for(;p<n.epochs;){const g={};await f.onEpochBegin(p);let y=0,v=0;for(r||(m=await e.iterator());!r||y<n.batchesPerEpoch;){const x=await m.next();if(r&&x.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${y} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(x.value!=null){const{xs:b,ys:w}=o5(t,x.value),S={};S.batch=v,S.size=b[0].shape[0],await f.onBatchBegin(v,S);const $=[];if(n.classWeight!=null){const I=n5(n.classWeight,t.outputNames);for(let T=0;T<I.length;++T)$.push(await r5(w[T],null,I[T]))}const C=b.concat(w).concat($),k=a(C);Ke(C);for(let I=0;I<l.length;++I){const T=l[I],E=k[I];S[T]=E,es(E)}await f.onBatchEnd(v,S),HG(S),v++,y++}if(r?y>=n.batchesPerEpoch:x.done){if(o){let b;$M(n.validationData)?b=ft(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):b=ft(t.evaluate(i,s,{batchSize:n.validationBatchSize==null?HRe:n.validationBatchSize,verbose:0}));for(let w=0;w<t.metricsNames.length;++w)g[`val_${t.metricsNames[w]}`]=b[w]}break}if(t.stopTraining_)break}if(await f.onEpochEnd(p,g),p++,t.stopTraining_)break}return await f.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function XRe(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function $M(t){return typeof t.iterator=="function"}function YRe(t){return typeof t.next=="function"}async function QRe(t,e,n){n=n||{};const r=n.batches!=null,o=t.testFunction;let i=[];if(n.verbose>0)throw new ze("Verbose mode is not implemented yet.");M(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const s=YRe(e)?e:await e.iterator();let a=0,l=0;for(;!r||l<n.batches;){const u=await s.next();if(i=Q(()=>{if(u.value){const{xs:c,ys:d}=o5(t,u.value),f=c.concat(d),h=Q(()=>o(f));if(Ke(f),l===0)for(let m=0;m<h.length;++m)i.push(at(0));const p=f[0].shape[0];for(let m=0;m<h.length;++m){const g=h[m],y=i[m];i[m]=Q(()=>fe(i[m],H(p,g))),l>0&&Ke(y)}Ke(h),a+=p,++l}return i}),u.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let u=0;u<i.length;++u){const c=i[u];i[u]=Oe(i[u],a),Ke(c)}return xr(i)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Jw(t){M(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function Hf(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>su(r,e,n-e)):su(t,e,n-e)}function xk(t,e){return Q(()=>t==null?null:Array.isArray(t)?t.map(n=>xk(n,e)):_G(t,e.dtype==="int32"?e:Se(e,"int32")))}function eS(t,e){const n=[];let r=0,o=null;for(;r<t;)o=r+e,o>=t&&(o=t),n.push([r,o]),r=o;return n}function i5(t){const e=[];t instanceof cn&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(lg(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function ni(t,e){if(t==null)return;const n=[];if(e instanceof cn)n.push(e.id);else if(Array.isArray(e))e.forEach(o=>n.push(o.id));else if(e!=null)for(const o in e){const i=e[o];n.push(i.id)}const r=[];if(t instanceof cn)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(o=>{n.indexOf(o.id)===-1&&r.push(o)});else if(t!=null)for(const o in t){const i=t[o];n.indexOf(i.id)===-1&&r.push(i)}r.forEach(o=>{o.isDisposed||o.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ZRe(t){return t instanceof cn}function bk(t){return Array.isArray(t)}function kM(t){return!ZRe(t)&&!bk(t)}function IM(t,e,n,r=!0,o=""){if(e==null||e.length===0){if(t!=null){let s=!1;if(bk(t)&&t.length>0)s=!0;else if(kM(t)){for(const a in t)if(t.hasOwnProperty(a)){s=!0;break}}else s=!0;if(s)throw new G(`Error when checking model ${o} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(s=>null);let i;if(kM(t)){t=t,i=[];for(const s of e){if(t[s]==null)throw new G(`No data provided for "${s}". Need data for each key in: ${e}`);i.push(t[s])}}else if(bk(t)){if(t=t,t.length!==e.length)throw new G(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);i=t}else{if(t=t,e.length>1)throw new G(`The model ${o} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);i=[t]}if(i=i5(i),n!=null)for(let s=0;s<e.length;++s){if(n[s]==null)continue;const a=i[s];if(a.shape.length!==n[s].length)throw new G(`Error when checking ${o}: expected ${e[s]} to have ${n[s].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<n[s].length;++l){if(l===0&&!r)continue;const u=a.shape[l],c=n[s][l];if(c!=null&&c>=0&&u!==c)throw new G(`${o} expected a batch of elements where each example has shape [${n[s].slice(1,n[s].length)}] (i.e.,tensor shape [*,${n[s].slice(1,n[s].length)}]) but the ${o} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return i}function JRe(t,e,n){const r=ja(t.map(i=>i.shape[0]));r.sort();const o=ja(e.map(i=>i.shape[0]));if(o.sort(),r.length>1)throw new G(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(i=>i.shape))}`);if(o.length>1)throw new G(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(i=>i.shape))}`);if(r.length>0&&o.length>0&&!ut(r,o))throw new G(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${o[0]} target sample(s).`)}function ePe(t,e,n){const r=[w1,S1,Ap];for(let o=0;o<t.length;++o){const i=t[o],s=e[o],a=n[o];if(s!=null){if(s===Ap&&i.shape[i.shape.length-1]===1)throw new G(`You are passing a target array of shape ${i.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(s)!==-1){const l=i.shape.slice(1),u=a.slice(1);for(let c=0;c<l.length;++c){const d=l[c],f=u[c];if(f!=null&&d!==f)throw new G(`A target Tensor with shape ${i.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function TM(t,e,n,r=!0,o=""){let i;if(Array.isArray(t)){if(t.length!==e.length)throw new G(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);i=t}else{if(e.length>1)throw new G(`The model expects ${e.length} ${o} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);i=[t]}if(n!=null)for(let s=0;s<e.length;++s){if(n[s]==null)continue;const a=i[s];if(a.shape.length!==n[s].length)throw new G(`Error when checking ${o}: expected ${e[s]} to have ${n[s].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<n[s].length;++l){if(l===0&&!r)continue;const u=a.shape[l],c=n[s][l];if(c!=null&&c!==u)throw new G(`Error when checking ${o}: expected ${e[s]} to have shape ${JSON.stringify(n[s])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function tPe(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const o of e){let i=n.hasOwnProperty(o)?n[o]:[];Array.isArray(i)||(i=[i]),r.push(i)}return r}}const nPe="layers-model";class Wc extends ri{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new G("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");LRe(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=FRe(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof bl))throw new G("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const s in e.loss)if(this.outputNames.indexOf(s)===-1)throw new G(`Unknown entry in loss dictionary: "${s}". Only expected the following keys: ${this.outputNames}`);for(const s of this.outputNames)e.loss[s]==null&&console.warn(`Output "${s}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${s} during training`),n.push(Zw(e.loss[s]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new G(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(a=>Zw(a))}else{const s=Zw(e.loss);this.outputs.forEach(a=>{n.push(s)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let s=0;s<this.outputs.length;++s){const a=this.internalOutputShapes[s],l=this.outputNames[s];this.feedOutputNames.push(l),this.feedOutputShapes.push(a),this.feedLossFns.push(this.lossFunctions[s])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],iu("loss",()=>{for(let s=0;s<this.outputs.length;++s){if(r.indexOf(s)!==-1)continue;const a=this.lossFunctions[s];this.outputs.length>1&&(this.metricsTensors.push([a,s]),this.metricsNames.push(this.outputNames[s]+"_loss"))}});const o=tPe(e.metrics,this.outputNames),i=(s,a,l)=>{this.outputNames.length>1&&(a=this.outputNames[s]+"_"+a),this.metricsNames.push(a),this.metricsTensors.push([l,s])};iu("metric",()=>{for(let s=0;s<this.outputs.length;++s){if(r.indexOf(s)!==-1)continue;const a=o[s];(u=>{const c="";let d,f,h;for(const p of u){if(typeof p=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(p)!==-1){const g=this.internalOutputShapes[s];g[g.length-1]===1||this.lossFunctions[s]===S1?["accuracy","acc"].indexOf(p)!==-1?f=YG:["crossentropy","ce"].indexOf(p)!==-1&&(f=TRe):this.lossFunctions[s]===A0?["accuracy","acc"].indexOf(p)!==-1?f=ERe:["crossentropy","ce"].indexOf(p)!==-1&&(f=JG):["accuracy","acc"].indexOf(p)!==-1?f=QG:["crossentropy","ce"].indexOf(p)!==-1&&(f=ZG);let y;["accuracy","acc"].indexOf(p)!==-1?y="acc":["crossentropy","ce"].indexOf(p)!==-1&&(y="ce"),h=f,d=c+y}else h=MRe(p),d=c+uy(p);let m;iu(d,()=>{m=h}),i(s,d,m)}})(a)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const o=r.batchSize==null?32:r.batchSize;Jw(o);const s=this.standardizeUserDataXY(e,n,!0,o);try{const a=s[0].concat(s[1]);this.makeTestFunction();const l=this.testFunction,u=this.testLoop(l,a,o,r.verbose,r.steps);return xr(u)}finally{ni(s[0],e),ni(s[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),QRe(this,e,n)}checkNumSamples(e,n,r,o="steps"){let i;if(r!=null){if(i=null,n!=null)throw new G(`If ${o} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?i=e[0].shape[0]:i=e.shape[0];else throw new G(`Either the input data should have a defined shape, or ${o} shoud be specified.`);return i}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new G("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),o=r?n:[n],i=this.retrieveSymbolicTensors(o),s=new Ia;if(e instanceof cn&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new G(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)s.add(this.inputs[l],e[l])}else for(const l of this.inputs){const u=e[l.name];if(u==null)throw new G(`No value is provided for the model's input ${l.name}`);s.add(l,u)}const a=th(i,s);return r?a:a[0]}retrieveSymbolicTensors(e){const n=Nu(null,e.length);let r=e.length;for(const o of this.layers){const i=Array.isArray(o.output)?o.output:[o.output],s=i.map(a=>a.name);for(let a=0;a<e.length;++a){const l=s.indexOf(e[a]);if(l!==-1&&(n[a]=i[l],r--),r===0)break}if(r===0)break}if(r>0){const o=[];throw n.forEach((i,s)=>{i==null&&o.push(e[s])}),new G(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(o)}`)}return n}predictLoop(e,n=32,r=!1){return Q(()=>{const o=this.checkNumSamples(e);if(r)throw new ze("Verbose predictLoop() is not implemented yet.");const i=eS(o,n),s=this.outputs.map(a=>[]);for(let a=0;a<i.length;++a)Q(()=>{const u=i[a][0],c=i[a][1],d=Hf(e,u,c),f=[];if(Array.isArray(d))for(let p=0;p<d.length;++p)f.push({key:this.inputs[p],value:d[p]});else f.push({key:this.inputs[0],value:d});const h=new Ia(f);return th(this.outputs,h)}).forEach((u,c)=>s[c].push(u));return xr(s.map(a=>Sr(a,0)))})}predict(e,n={}){const r=i5(e);TM(r,this.inputNames,this.feedInputShapes,!1);try{const o=n.batchSize==null?32:n.batchSize;return Jw(o),this.predictLoop(r,o)}finally{ni(r,e)}}predictOnBatch(e){TM(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,o){if(this.optimizer_==null)throw new _o("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const i=[];for(let s=0;s<this.feedOutputShapes.length;++s){const a=this.feedOutputShapes[s];this.feedLossFns[s]===A0?i.push(a.slice(0,a.length-1).concat([1])):i.push(a)}if(e=IM(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=IM(n,this.feedOutputNames,i,!1,"target"),JRe(e,n),ePe(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&o!=null&&o>0&&e[0].shape[0]%o!==0)throw new G(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${o}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,o,i=!0,s){const[a,l]=this.standardizeUserDataXY(e,n,i,s);if(r!=null)throw new Error("sample weight is not supported yet.");let u=null;if(o!=null){const c=n5(o,this.outputNames);u=[];for(let d=0;d<c.length;++d)u.push(await r5(l[d],null,c[d]))}return[a,l,u]}testLoop(e,n,r,o=0,i){return Q(()=>{const s=this.checkNumSamples(n,r,i,"steps"),a=[];if(o>0)throw new ze("Verbose mode is not implemented yet.");if(i!=null)throw new ze("steps mode in testLoop() is not implemented yet");{const l=eS(s,r),u=Lr(Ti(0,s));for(let c=0;c<l.length;++c){const d=l[c][0],f=l[c][1],h=su(u,d,f-d),p=xk(n,h),m=e(p);if(c===0)for(let g=0;g<m.length;++g)a.push(at(0));for(let g=0;g<m.length;++g){const y=m[g];a[g]=fe(a[g],H(f-d,y))}}for(let c=0;c<a.length;++c)a[c]=Oe(a[c],s)}return a})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const o=e[r];let i=o;if(dM(e,o)>1){const s=dM(e.slice(0,r),o);i+=`_${s}`}n.push(i)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),o=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),s=[],a=()=>{const d=[];for(let m=0;m<this.inputs.length;++m)d.push({key:this.inputs[m],value:r[m]});const f=new Ia(d),h=th(this.outputs,f,{training:!0});let p;for(let m=0;m<this.lossFunctions.length;++m){const g=this.lossFunctions[m];let y=g(o[m],h[m]);i[m]!=null&&(y=GRe(y,i[m]));const v=sn(y);n.push(v),m===0?p=y:p=fe(p,y)}for(let m=0;m<this.metricsTensors.length;++m){let g;if(this.outputs.length>1&&m<this.outputs.length)g=n[m];else{const y=this.metricsTensors[m][0],v=this.metricsTensors[m][1];g=sn(y(o[v],h[v]))}es(g),s.push(g)}return p=sn(p),this.calculateLosses().forEach(m=>{p=fe(p,m)}),p},l=this.collectedTrainableWeights.map(d=>d.read());return[this.optimizer_.minimize(a,!0,l)].concat(s)}}makeTestFunction(){this.testFunction=e=>Q(()=>{const n=[];let r;const o=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=[];for(let u=0;u<this.inputs.length;++u)s.push({key:this.inputs[u],value:o[u]});const a=new Ia(s),l=th(this.outputs,a);for(let u=0;u<this.lossFunctions.length;++u){const c=this.lossFunctions[u],d=sn(c(i[u],l[u]));u===0?r=d:r=fe(r,d),n.push(r)}for(let u=0;u<this.metricsTensors.length;++u){const c=this.metricsTensors[u][0],d=this.metricsTensors[u][1],f=sn(c(i[d],l[d]));n.push(f)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let o,i,s,a,l,u,c,d,f;try{const h=r.batchSize==null?32:r.batchSize;Jw(h);const m=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,!1,h);o=m[0],i=m[1],f=m[2];let g=!1,y;if(r.validationData!=null&&r.validationData.length>0){if(g=!0,r.validationData.length===2)l=r.validationData[0],u=r.validationData[1];else throw r.validationData.length===3?new ze("validationData including sample weights is not supported yet."):new G(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const I=await this.standardizeUserData(l,u,null,null,!0,h);c=I[0],d=I[1],y=c.concat(d)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){g=!0;const k=Math.floor(o[0].shape[0]*(1-r.validationSplit)),I=o[0].shape[0];c=Hf(o,k,I),s=o,o=Hf(o,0,k),d=Hf(i,k,I),a=i,i=Hf(i,0,k),y=c.concat(d)}else r.validationSteps!=null&&(g=!0);const v=o.concat(i).concat(f);this.checkTrainableWeightsConsistency();const x=this.makeTrainFunction(),b=this.getDedupedMetricsNames();let w,S;g?(this.makeTestFunction(),w=this.testFunction,S=b.slice().concat(b.map(k=>"val_"+k))):(w=null,y=[],S=b.slice());const $=KG(r.callbacks,r.yieldEvery);return await this.fitLoop(x,v,b,h,r.epochs,r.verbose,$,w,y,r.shuffle,S,r.initialEpoch,null,null)}finally{this.isTraining=!1,ni(o,e),ni(i,n),ni(s,e),ni(a,n),ni(c,l),ni(d,u),f!=null&&Ke(f)}}async fitLoop(e,n,r,o,i,s,a,l,u,c,d,f,h,p){o==null&&(o=32),i==null&&(i=1),c==null&&(c=!0),f==null&&(f=0);let m=!1;if(l!=null&&u!=null&&(m=!0),p!=null&&(m=!0,h==null))throw new G("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const g=this.checkNumSamples(n,o,h,"steps_per_epoch");let y;g!=null&&(y=Ti(0,g)),s==null&&(s=1);const{callbackList:v,history:x}=qG(a,s,i,f,g,h,o,m,d);v.setModel(this),this.history=x,await v.onTrainBegin(),this.stopTraining_=!1;for(let b=f;b<i;++b){await v.onEpochBegin(b);const w={};if(h!=null)throw new ze("stepsPerEpoch mode is not implemented yet.");{if(c==="batch")throw new ze("batch shuffling is not implemneted yet");c&&z$e(y);const S=Lr(y),$=eS(g,o);for(let C=0;C<$.length;++C){const k={};if(await v.onBatchBegin(C,k),Q(()=>{const I=$[C][0],T=$[C][1],E=su(S,I,T-I);k.batch=C,k.size=T-I;const _=xk(n,E),N=e(_);for(let P=0;P<r.length;++P){const F=r[P],L=N[P];k[F]=L,es(L)}if(C===$.length-1&&m){const P=this.testLoop(l,u,o);for(let F=0;F<r.length;++F){const L=r[F],A=P[F];es(A),w["val_"+L]=A}}}),await v.onBatchEnd(C,k),HG(k),this.stopTraining_)break}S.dispose()}if(await v.onEpochEnd(b,w),this.stopTraining_)break}return await v.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return qRe(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),o=r[0],i=r[1],a=this.makeTrainFunction()(o.concat(i)),l=[];for(const u of a){const c=await u.data();l.push(c[0])}return Ke(a),ni(r[0],e),ni(r[1],n),xr(l)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,o=r?this.trainableWeights:this.weights,i=this.getWeights(r);for(let s=0;s<o.length;++s)r&&!o[s].trainable||n.push({name:o[s].originalName,tensor:i[s]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=KD().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-KD().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=xs(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>xs(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const o of n)if(typeof r[o]=="string")e[o]=xs(r[o]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[xs(uy(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>xs(uy(e)));{const e={};for(const n in this.metrics)e[n]=xs(uy(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=yk(e.optimizer_config),r=Rs(n);let o;if(typeof e.loss=="string")o=Ml(e.loss);else if(Array.isArray(e.loss))o=e.loss.map(s=>Ml(s));else if(e.loss!=null){o={};for(const s in e.loss)o[s]=Ml(e.loss[s])}let i;if(Array.isArray(e.metrics))i=e.metrics.map(s=>Ml(s));else if(e.metrics!=null){i={};for(const s in e.metrics)i[s]=Ml(e.metrics[s])}this.compile({loss:o,metrics:i,optimizer:r})}async save(e,n){if(typeof e=="string"){const u=Mke(e);if(u.length===0)throw new G(`Cannot find any save handlers for URL '${e}'`);if(u.length>1)throw new G(`Found more than one (${u.length}) save handlers for URL '${e}'`);e=u[0]}if(e.save==null)throw new G("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await XD(this.getNamedWeights(n)),a={modelTopology:this.toJSON(null,!1),format:nPe,generatedBy:`TensorFlow.js tfjs-layers v${t5}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){a.trainingConfig=this.getTrainingConfig();const u="optimizer",{data:c,specs:d}=await XD(await this.optimizer.getWeights(),u);r.specs.push(...d),r.data=Dke([r.data,c])}return this.userDefinedMetadata!=null&&(SM(this.userDefinedMetadata,this.name,!0),a.userDefinedMetadata=this.userDefinedMetadata),a.weightData=r.data,a.weightSpecs=r.specs,e.save(a)}setUserDefinedMetadata(e){SM(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}Wc.className="Model";de(Wc);class s5 extends Wc{}s5.className="Functional";de(s5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Md extends Wc{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:v1("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new G(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof Md||e instanceof Wc;let r;if(n){if(r=e,r.outputs.length!==1)throw new G("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new G("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new G("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const o=oRe({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(o)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new G(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new G("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=jG(this.outputs[0])}this.inboundNodes=[],new b1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Nu(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(o=>o.shape),outputShapes:this.outputs[0].shape})}else{const o=e.apply(this.outputs[0]);if(Array.isArray(o))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[o],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(nt(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Wc({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new _o("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new _o("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new _o("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new _o("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},o=!1){let i,s={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new G("Legacy serialization format not supported yet.");i=n}else M(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),i=n.layers,delete n.layers,s=n;const a=new e(s);if(!(a instanceof Md))throw new ze(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const l of i){const c=Rs(l,void 0,o);o&&c.setFastWeightInitDuringBuild(!0),a.add(c)}return a}set stopTraining(e){if(this.model==null)throw new G("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new G("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}Md.className="Sequential";de(Md);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function rPe(t){return new Md(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let qn=class extends pf{getConfig(){return{}}};class a5 extends qn{apply(e,n=1){return W_e(e,n)}}a5.className="elu";de(a5);class l5 extends qn{apply(e){return kU(e)}}l5.className="selu";de(l5);class u5 extends qn{apply(e){return Gu(e)}}u5.className="relu";de(u5);class c5 extends qn{apply(e){return Q(()=>Tp(6,Gu(e)))}}c5.className="relu6";de(c5);class d5 extends qn{apply(e){return e}}d5.className="linear";de(d5);class f5 extends qn{apply(e){return df(e)}}f5.className="sigmoid";de(f5);class h5 extends qn{apply(e){return U_e(e)}}h5.className="hardSigmoid";de(h5);class p5 extends qn{apply(e){return eg(e)}}p5.className="softplus";de(p5);class m5 extends qn{apply(e){return V_e(e)}}m5.className="softsign";de(m5);class g5 extends qn{apply(e){return l1(e)}}g5.className="tanh";de(g5);let mN=class extends qn{apply(e,n=-1){return v2(e,n)}};mN.className="softmax";de(mN);class y5 extends qn{apply(e,n=-1){return gU(e,n)}}y5.className="logSoftmax";de(y5);class v5 extends qn{apply(e){return Q(()=>Q(()=>{const n=Math.sqrt(2),r=H(.5,fe(1,dU(Oe(e,n))));return H(e,r)}))}}v5.className="gelu";de(v5);class x5 extends qn{apply(e){return Q(()=>H(.5,H(e,fe(1,l1(H(Hn(Oe(2,Math.PI)),fe(e,H(.044715,Iu(e,3)))))))))}}x5.className="gelu_new";de(x5);class b5 extends qn{apply(e){return Q(()=>H(e,l1(eg(e))))}}b5.className="mish";de(b5);class w5 extends qn{apply(e,n=1){return Q(()=>H(df(H(e,n)),e))}}w5.className="swish";de(w5);function tl(t){return t.getClassName()}function tS(t,e={}){return ag(t,ko.getMap().classNameMap,e,"activation")}function nl(t){if(t==null){const e={};return e.className="linear",e.config={},tS(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},tS(e)}else return t instanceof qn?t:tS(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function oPe(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class S5 extends pf{}class C5 extends S5{constructor(e){super(),oPe(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return Q(()=>{let n=$n([1]);return this.hasL1&&(n=fe(n,Ae(H(this.l1,nr(e))))),this.hasL2&&(n=fe(n,Ae(H(this.l2,ug(e))))),q(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}C5.className="L1L2";de(C5);const EM={l1l2:"L1L2"};function wt(t){return tN(t)}function NM(t,e={}){return ag(t,ko.getMap().classNameMap,e,"regularizer")}function Bt(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in EM?EM[t]:t,config:{}};return NM(n)}else return t instanceof S5?t:NM(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class $5 extends Ge{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=Pe(e);let r=Gu(e);return this.maxValue!=null&&(r=lo(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}$5.className="ReLU";de($5);class k5 extends Ge{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Pe(e);return n2(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}k5.className="LeakyReLU";de(k5);class I5 extends Ge{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=Lt(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Bt(e.alphaRegularizer),this.alphaConstraint=gn(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new G(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=nt(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const o of this.sharedAxes)n[o-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let o=1;o<e.length;++o)r[o]=e[o];this.inputSpec=[new hn({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=Pe(e),l2(e,this.alpha.read())}getConfig(){const e={alphaInitializer:Vt(this.alphaInitializer),alphaRegularizer:wt(this.alphaRegularizer),alphaConstraint:mn(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}I5.className="PReLU";de(I5);let T5=class extends Ge{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new ze(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Pe(e);return d1(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};T5.className="ELU";de(T5);class E5 extends Ge{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=Pe(e);return H(r,Se(fo(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}E5.className="ThresholdedReLU";de(E5);class N5 extends Ge{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new mN().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return Q(()=>{let r=Pe(e);const o=n.mask;if(o!=null){const i=H(_e(xl(r.shape),Se(o,r.dtype)),at(-1e9));r=fe(r,i)}return this.axis instanceof Array?this.axis.length>1?as(_e(r,yU(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}N5.className="Softmax";de(N5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Vc(t,e,n){if(typeof t=="number")return Nu(t,e);if(t.length!==e)throw new G(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const o=t[r];if(!L_e(o))throw new G(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${o}`)}return t}function Si(t,e,n,r,o=1){if(t==null)return t;const i=e+(e-1)*(o-1);let s;return n==="same"?s=t:s=t-i+1,Math.floor((s+r-1)/r)}function Vi(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+el([n-e,0]);else if(r==="same")t=t*e;else throw new G(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function gN(t,e){return Q(()=>(tn(e),e==="channelsFirst"?Je(t,[0,2,3,1]):t))}function A5(t,e){return Q(()=>(tn(e),e==="channelsFirst"?Je(t,[0,2,3,4,1]):t))}function iPe(t,e,n,r=1,o="valid",i,s=1){return Q(()=>{if(i==null&&(i=Ei()),tn(i),t.shape.length!==3)throw new G(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new G(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new G(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(i==="channelsFirst"&&(t=Je(t,[0,2,1])),o==="causal")throw new ze("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=sU(t,e,r,o==="same"?"same":"valid","NWC",s);return n!=null&&(a=_i(a,n)),a})}function AM(t,e,n,r=[1,1],o="valid",i,s,a=null){return Q(()=>{if(i==null&&(i=Ei()),tn(i),t.rank!==3&&t.rank!==4)throw new G(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new G(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=gN(t,i);if(o==="causal")throw new ze("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=hNe({x:l,filter:e,strides:r,pad:o==="same"?"same":"valid",dilations:s,dataFormat:"NHWC",bias:n,activation:a}),i==="channelsFirst"&&(l=Je(l,[0,3,1,2])),l})}function sPe(t,e,n,r=[1,1,1],o="valid",i,s){return Q(()=>{if(i==null&&(i=Ei()),tn(i),t.rank!==4&&t.rank!==5)throw new G(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new G(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let a=A5(t,i);if(o==="causal")throw new ze("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=fTe(a,e,r,o==="same"?"same":"valid","NDHWC",s),n!=null&&(a=_i(a,n)),i==="channelsFirst"&&(a=Je(a,[0,4,1,2,3])),a})}class C1 extends Ge{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",C1.verifyArgs(n),this.rank=e,Tn(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new ze(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Vc(n.kernelSize,e,"kernelSize"),this.strides=Vc(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,ho(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,tn(this.dataFormat),this.activation=nl(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=Lt(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=gn(n.biasConstraint),this.biasRegularizer=Bt(n.biasRegularizer),this.activityRegularizer=Bt(n.activityRegularizer),this.dilationRate=Vc(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new G(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new G(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new G(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(Wi("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!nN(e.kernelSize,"number",1,3))throw new G(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:tl(this.activation),useBias:this.useBias,biasInitializer:Vt(this.biasInitializer),biasRegularizer:wt(this.biasRegularizer),activityRegularizer:wt(this.activityRegularizer),biasConstraint:mn(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class mf extends C1{constructor(e,n){super(e,n),this.kernel=null,mf.verifyArgs(n),this.filters=n.filters,Tn(this.filters,"filters"),this.kernelInitializer=Lt(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=gn(n.kernelConstraint),this.kernelRegularizer=Bt(n.kernelRegularizer)}build(e){e=nt(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new G(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],o=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return Q(()=>{e=Pe(e);let r;const o=this.bias==null?null:this.bias.read(),i=IG(this.activation.getClassName());if(i!=null&&this.rank===2)r=AM(e,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate,i);else{if(this.rank===1)r=iPe(e,this.kernel.read(),o,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=AM(e,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=sPe(e,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new ze("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=nt(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let i=0;i<r.length;++i){const s=Si(r[i],this.kernelSize[i],this.padding,this.strides[i],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[i]);n.push(s)}let o=[e[0]];return this.dataFormat==="channelsLast"?(o=o.concat(n),o.push(this.filters)):(o.push(this.filters),o=o.concat(n)),o}getConfig(){const e={filters:this.filters,kernelInitializer:Vt(this.kernelInitializer),kernelRegularizer:wt(this.kernelRegularizer),kernelConstraint:mn(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new G(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class hg extends mf{constructor(e){super(2,e),hg.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!nN(e.kernelSize,"number",1,2))throw new G(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}hg.className="Conv2D";de(hg);class pg extends mf{constructor(e){super(3,e),pg.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new G(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}pg.className="Conv3D";de(pg);class O5 extends hg{constructor(e){if(super(e),this.inputSpec=[new hn({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new G(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=nt(e),e.length!==4)throw new G("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new G("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],o=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",o,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new hn({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return Q(()=>{let r=Pe(e);if(r.shape.length!==4)throw new G(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const o=r.shape,i=o[0];let s,a;this.dataFormat==="channelsFirst"?(s=2,a=3):(s=1,a=2);const l=o[s],u=o[a],c=this.kernelSize[0],d=this.kernelSize[1],f=this.strides[0],h=this.strides[1],p=Vi(l,f,c,this.padding),m=Vi(u,h,d,this.padding),g=[i,p,m,this.filters];this.dataFormat!=="channelsLast"&&(r=Je(r,[0,2,3,1]));let y=aU(r,this.kernel.read(),g,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(y=Je(y,[0,3,1,2])),this.bias!=null&&(y=_i(y,this.bias.read(),this.dataFormat)),this.activation!=null&&(y=this.activation.apply(y)),y})}computeOutputShape(e){e=nt(e);const n=e.slice();let r,o,i;this.dataFormat==="channelsFirst"?(r=1,o=2,i=3):(r=3,o=1,i=2);const s=this.kernelSize[0],a=this.kernelSize[1],l=this.strides[0],u=this.strides[1];return n[r]=this.filters,n[o]=Vi(n[o],l,s,this.padding),n[i]=Vi(n[i],u,a,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}O5.className="Conv2DTranspose";de(O5);class _5 extends pg{constructor(e){if(super(e),this.inputSpec=[new hn({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new G(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=nt(e),e.length!==5)throw new G("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new G("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],o=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",o,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new hn({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return Q(()=>{let r=Pe(e);if(r.shape.length!==5)throw new G(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const o=r.shape,i=o[0];let s,a,l;this.dataFormat==="channelsFirst"?(l=2,s=3,a=4):(l=1,s=2,a=3);const u=o[l],c=o[s],d=o[a],f=this.kernelSize[0],h=this.kernelSize[1],p=this.kernelSize[2],m=this.strides[0],g=this.strides[1],y=this.strides[2],v=Vi(u,m,f,this.padding),x=Vi(c,g,h,this.padding),b=Vi(d,y,p,this.padding),w=[i,v,x,b,this.filters];this.dataFormat!=="channelsLast"&&(r=Je(r,[0,2,3,4,1]));let S=mTe(r,this.kernel.read(),w,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(S=Je(S,[0,4,1,2,3])),this.bias!==null&&(S=_i(S,this.bias.read(),this.dataFormat)),this.activation!==null&&(S=this.activation.apply(S)),S})}computeOutputShape(e){e=nt(e);const n=e.slice();let r,o,i,s;this.dataFormat==="channelsFirst"?(r=1,o=2,i=3,s=4):(r=4,o=1,i=2,s=3);const a=this.kernelSize[0],l=this.kernelSize[1],u=this.kernelSize[2],c=this.strides[0],d=this.strides[1],f=this.strides[2];return n[r]=this.filters,n[o]=Vi(n[o],c,a,this.padding),n[i]=Vi(n[i],d,l,this.padding),n[s]=Vi(n[s],f,u,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}_5.className="Conv3DTranspose";de(_5);class R5 extends mf{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new G("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new G("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new G(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=Lt(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Bt(n.depthwiseRegularizer),this.depthwiseConstraint=gn(n.depthwiseConstraint),this.pointwiseInitializer=Lt(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Bt(n.pointwiseRegularizer),this.pointwiseConstraint=gn(n.pointwiseConstraint)}build(e){if(e=nt(e),e.length<this.rank+2)throw new G(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new G(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],o=this.kernelSize.concat([r,this.depthMultiplier]),i=[];for(let a=0;a<this.rank;++a)i.push(1);i.push(r*this.depthMultiplier,this.filters);const s=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",o,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,s,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,s,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,s,this.biasConstraint):this.bias=null,this.inputSpec=[new hn({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return Q(()=>{e=Pe(e);let r;if(this.rank===1)throw new ze("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=Je(e,[0,2,3,1])),r=IU(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=_i(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=Je(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Vt(this.depthwiseInitializer),e.pointwiseInitializer=Vt(this.pointwiseInitializer),e.depthwiseRegularizer=wt(this.depthwiseRegularizer),e.pointwiseRegularizer=wt(this.pointwiseRegularizer),e.depthwiseConstraint=mn(this.depthwiseConstraint),e.pointwiseConstraint=mn(this.pointwiseConstraint),e}}R5.className="SeparableConv";class P5 extends R5{constructor(e){super(2,e)}}P5.className="SeparableConv2D";de(P5);class $1 extends mf{constructor(e){super(1,e),$1.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!nN(e.kernelSize,"number",1,1))throw new G(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}$1.className="Conv1D";de($1);class D5 extends Ge{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return Q(()=>{if(e=Pe(e),this.dataFormat==="channelsLast"){const r=ly(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return ly(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=ly(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return ly(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}D5.className="Cropping2D";de(D5);class M5 extends Ge{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,tn(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,D_e(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return Q(()=>{let r=Pe(e);const o=r.shape;if(this.dataFormat==="channelsFirst"){r=Je(r,[0,2,3,1]);const i=this.size[0]*o[2],s=this.size[1]*o[3],a=this.interpolation==="nearest"?Ts.resizeNearestNeighbor(r,[i,s]):Ts.resizeBilinear(r,[i,s]);return Je(a,[0,3,1,2])}else{const i=this.size[0]*o[1],s=this.size[1]*o[2];return this.interpolation==="nearest"?Ts.resizeNearestNeighbor(r,[i,s]):Ts.resizeBilinear(r,[i,s])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}M5.className="UpSampling2D";de(M5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function aPe(t,e,n=[1,1],r="valid",o,i){return Q(()=>{o==null&&(o=Ei()),tn(o);let s=gN(t,o);if(t.rank!==4)throw new G(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new G(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return s=ZE(s,e,n,r==="same"?"same":"valid","NHWC",i),o==="channelsFirst"&&(s=Je(s,[0,3,1,2])),s})}class F5 extends C1{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=Lt(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=gn(e.depthwiseConstraint),this.depthwiseRegularizer=Bt(e.depthwiseRegularizer)}build(e){if(e=nt(e),e.length<4)throw new G(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new G(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],o=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",o,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Q(()=>{e=Pe(e);let r=aPe(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=_i(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=nt(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],o=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,i=Si(n,this.kernelSize[0],this.padding,this.strides[0]),s=Si(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],o,i,s]:[e[0],i,s,o]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Vt(this.depthwiseInitializer),e.depthwiseRegularizer=wt(this.depthwiseRegularizer),e.depthwiseConstraint=mn(this.depthwiseRegularizer),e}}F5.className="DepthwiseConv2D";de(F5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function L5(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new G("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function o(i){return i==null||Array.isArray(i)?i:[i]}return e=o(e),n=o(n),{inputs:t,initialState:e,constants:n}}function B5(t,e,n,r=!1,o,i,s=!1,a=!1){return Q(()=>{const l=e.shape.length;if(l<3)throw new G(`Input should be at least 3D, but is ${l}D.`);const u=[1,0].concat(Ti(2,l));e=Je(e,u),s&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),o!=null&&(o=Se(Se(o,"bool"),"float32"),o.rank===l-1&&(o=vr(o,-1)),o=Je(o,u)),r&&(e=Tu(e,0),o!=null&&(o=Tu(o,0)));const c=[];let d,f=n;const h=e.shape[0],p=Eu(e);let m;o!=null&&(m=Eu(o));for(let y=0;y<h;++y){const v=p[y],x=Q(()=>t(v,f));if(o==null)d=x[0],f=x[1];else{const b=Q(()=>{const w=m[y],S=_e(jo(w),w),$=fe(H(x[0],w),H(f[0],S)),C=f.map((k,I)=>fe(H(x[1][I],w),H(k,S)));return{output:$,newStates:C}});d=b.output,f=b.newStates}a&&c.push(d)}let g;return a&&(g=Gs(c,1)),[d,g,f]})}class wl extends Ge{constructor(e){super(e);let n;if(e.cell==null)throw new G("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new xN({cells:e.cell}):n=e.cell,n.stateSize==null)throw new G("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new hn({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Ti(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){pk(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let o;if(this.returnSequences?o=[e[0],e[1],r]:o=[e[0],r],this.returnState){const i=[];for(const s of n)i.push([e[0],s]);return[o].concat(i)}else return o}computeMask(e,n){return Q(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const o=this.states.map(i=>null);return[r].concat(o)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new ze("Constants support is not implemented in RNN yet.");pk(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new hn({shape:[n,null,...r]});const o=[e[0]].concat(e.slice(2));this.cell.build(o);let i;if(Array.isArray(this.cell.stateSize)?i=this.cell.stateSize:i=[this.cell.stateSize],this.stateSpec!=null){if(!ut(this.stateSpec.map(s=>s.shape[s.shape.length-1]),i))throw new G(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=i.map(s=>new hn({shape:[null,s]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){Q(()=>{if(!this.stateful)throw new ji("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new G("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(o=>$n([r,o])):this.states_=[$n([r,this.cell.stateSize])];else if(e==null)Ke(this.states_),this.keptStates!=null&&(Ke(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(o=>$n([r,o])):this.states_[0]=$n([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new G(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):Ke(this.states_);for(let o=0;o<this.states_.length;++o){const i=e[o],s=Array.isArray(this.cell.stateSize)?this.cell.stateSize[o]:this.cell.stateSize,a=[r,s];if(!ut(i.shape,a))throw new G(`State ${o} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${i.shape}`);this.states_[o]=i}}this.states_=this.states_.map(o=>es(o.clone()))})}apply(e,n){let r=n==null?null:n.initialState,o=n==null?null:n.constants;n==null&&(n={});const i=L5(e,r,o,this.numConstants);e=i.inputs,r=i.initialState,o=i.constants;let s=[],a=[];if(r!=null){n.initialState=r,s=s.concat(r),this.stateSpec=[];for(const u of r)this.stateSpec.push(new hn({shape:u.shape}));a=a.concat(this.stateSpec)}if(o!=null&&(n.constants=o,s=s.concat(o),this.numConstants=o.length),s[0]instanceof us){const u=[e].concat(s),c=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=c;const f=super.apply(u,n);return this.inputSpec=d,f}else return super.apply(e,n)}call(e,n){return Q(()=>{const r=n==null?null:n.mask,o=n==null?null:n.training;let i=n==null?null:n.initialState;e=Pe(e),i==null&&(this.stateful?i=this.states_:i=this.getInitialState(e));const s=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(i.length!==s)throw new G(`RNN Layer has ${s} state(s) but was passed ${i.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:o},u=B5((p,m)=>{const g=this.cell.call([p].concat(m),a);return[g[0],g.slice(1)]},e,i,this.goBackwards,r,null,this.unroll,this.returnSequences),c=u[0],d=u[1],f=u[2];this.stateful&&this.resetStates(f,o);const h=this.returnSequences?d:c;return this.returnState?[h].concat(f):h})}getInitialState(e){return Q(()=>{let n=$n(e.shape);return n=Ae(n,[1,2]),n=lg(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?fk(n,[1,r]):n):this.cell.stateSize>1?[fk(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===wl.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const o=n.cell,i=Rs(o,r);return new e(Object.assign(n,{cell:i}))}}wl.className="RNN";de(wl);class k1 extends Ge{}class yN extends k1{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Tn(this.units,"units"),this.activation=nl(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Lt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Lt(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Lt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Bt(e.kernelRegularizer),this.recurrentRegularizer=Bt(e.recurrentRegularizer),this.biasRegularizer=Bt(e.biasRegularizer),this.kernelConstraint=gn(e.kernelConstraint),this.recurrentConstraint=gn(e.recurrentConstraint),this.biasConstraint=gn(e.biasConstraint),this.dropout=Dd([1,el([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Dd([1,el([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=nt(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Q(()=>{if(e=e,e.length!==2)throw new G(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const o=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=rl({ones:()=>jo(e),rate:this.dropout,training:o,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=rl({ones:()=>jo(r),rate:this.recurrentDropout,training:o,dropoutFunc:this.dropoutFunc}));let i;const s=this.dropoutMask,a=this.recurrentDropoutMask;s!=null?i=rs(H(e,s),this.kernel.read()):i=rs(e,this.kernel.read()),this.bias!=null&&(i=_i(i,this.bias.read())),a!=null&&(r=H(r,a));let l=fe(i,rs(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:tl(this.activation),useBias:this.useBias,kernelInitializer:Vt(this.kernelInitializer),recurrentInitializer:Vt(this.recurrentInitializer),biasInitializer:Vt(this.biasInitializer),kernelRegularizer:wt(this.kernelRegularizer),recurrentRegularizer:wt(this.recurrentRegularizer),biasRegularizer:wt(this.biasRegularizer),activityRegularizer:wt(this.activityRegularizer),kernelConstraint:mn(this.kernelConstraint),recurrentConstraint:mn(this.recurrentConstraint),biasConstraint:mn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}yN.className="SimpleRNNCell";de(yN);class z5 extends wl{constructor(e){e.cell=new yN(e),super(e)}call(e,n){return Q(()=>{this.cell.dropoutMask!=null&&(Ke(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Ke(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,o=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:o,initialState:i})})}static fromConfig(e,n){return new e(n)}}z5.className="SimpleRNN";de(z5);class vN extends k1{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new G("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Tn(this.units,"units"),this.activation=nl(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=nl(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Lt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Lt(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Lt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Bt(e.kernelRegularizer),this.recurrentRegularizer=Bt(e.recurrentRegularizer),this.biasRegularizer=Bt(e.biasRegularizer),this.kernelConstraint=gn(e.kernelConstraint),this.recurrentConstraint=gn(e.recurrentConstraint),this.biasConstraint=gn(e.biasConstraint),this.dropout=Dd([1,el([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Dd([1,el([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=nt(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Q(()=>{if(e=e,e.length!==2)throw new G(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let o=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=rl({ones:()=>jo(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=rl({ones:()=>jo(o),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,s=this.recurrentDropoutMask;let a,l,u;0<this.dropout&&this.dropout<1&&(e=H(e,i[0]));let c=rs(e,this.kernel.read());this.useBias&&(c=_i(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(o=H(o,s[0]));const d=this.recurrentKernel.read(),[f,h]=io(d,[2*this.units,this.units],d.rank-1),p=rs(o,f),[m,g,y]=io(c,3,c.rank-1),[v,x]=io(p,2,p.rank-1);a=this.recurrentActivation.apply(fe(m,v)),l=this.recurrentActivation.apply(fe(g,x));const b=rs(H(l,o),h);u=this.activation.apply(fe(y,b));const w=fe(H(a,o),H(fe(1,Zt(a)),u));return[w,w]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:tl(this.activation),recurrentActivation:tl(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Vt(this.kernelInitializer),recurrentInitializer:Vt(this.recurrentInitializer),biasInitializer:Vt(this.biasInitializer),kernelRegularizer:wt(this.kernelRegularizer),recurrentRegularizer:wt(this.recurrentRegularizer),biasRegularizer:wt(this.biasRegularizer),activityRegularizer:wt(this.activityRegularizer),kernelConstraint:mn(this.kernelConstraint),recurrentConstraint:mn(this.recurrentConstraint),biasConstraint:mn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}vN.className="GRUCell";de(vN);class j5 extends wl{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new vN(e),super(e)}call(e,n){return Q(()=>{this.cell.dropoutMask!=null&&(Ke(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Ke(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,o=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:o,initialState:i})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}j5.className="GRU";de(j5);class I1 extends k1{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Tn(this.units,"units"),this.activation=nl(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=nl(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Lt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Lt(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Lt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=Bt(e.kernelRegularizer),this.recurrentRegularizer=Bt(e.recurrentRegularizer),this.biasRegularizer=Bt(e.biasRegularizer),this.kernelConstraint=gn(e.kernelConstraint),this.recurrentConstraint=gn(e.recurrentConstraint),this.biasConstraint=gn(e.biasConstraint),this.dropout=Dd([1,el([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Dd([1,el([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=nt(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let o;if(this.useBias){if(this.unitForgetBias){const i=this.biasInitializer,s=this.units;o=new(n=class extends Go{apply(l,u){const c=i.apply([s]),d=new oN().apply([s]),f=i.apply([s*2]);return hM(hM(c,d),f)}},n.className="CustomInit",n)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,o,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return Q(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new G(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let o=e[1];const i=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=rl({ones:()=>jo(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=rl({ones:()=>jo(o),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const s=this.dropoutMask,a=this.recurrentDropoutMask;let l,u,c,d;0<this.dropout&&this.dropout<1&&(e=H(e,s[0]));let f=rs(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(o=H(o,a[0])),f=fe(f,rs(o,this.recurrentKernel.read())),this.useBias&&(f=_i(f,this.bias.read()));const[h,p,m,g]=io(f,4,f.rank-1);l=this.recurrentActivation.apply(h),u=this.recurrentActivation.apply(p),c=fe(H(u,i),H(l,this.activation.apply(m))),d=this.recurrentActivation.apply(g);const y=H(d,this.activation.apply(c));return[y,y,c]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:tl(this.activation),recurrentActivation:tl(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Vt(this.kernelInitializer),recurrentInitializer:Vt(this.recurrentInitializer),biasInitializer:Vt(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:wt(this.kernelRegularizer),recurrentRegularizer:wt(this.recurrentRegularizer),biasRegularizer:wt(this.biasRegularizer),activityRegularizer:wt(this.activityRegularizer),kernelConstraint:mn(this.kernelConstraint),recurrentConstraint:mn(this.recurrentConstraint),biasConstraint:mn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}I1.className="LSTMCell";de(I1);class W5 extends wl{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new I1(e),super(e)}call(e,n){return Q(()=>{this.cell.dropoutMask!=null&&(Ke(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Ke(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,o=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:o,initialState:i})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}W5.className="LSTM";de(W5);class xN extends k1{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return Q(()=>{e=e;let r=e.slice(1);const o=[];for(const a of this.cells.slice().reverse())Array.isArray(a.stateSize)?o.push(r.splice(0,a.stateSize.length)):o.push(r.splice(0,1));o.reverse();const i=[];let s;for(let a=0;a<this.cells.length;++a){const l=this.cells[a];r=o[a],a===0?s=[e[0]].concat(r):s=[s[0]].concat(r),s=l.call(s,n),i.push(s.slice(1))}r=[];for(const a of i.slice().reverse())r.push(...a);return[s[0]].concat(r)})}build(e){pk(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,o)=>{iu(`RNNCell_${o}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=i=>({className:i.getClassName(),config:i.getConfig()}),o={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),o)}static fromConfig(e,n,r={}){const o=[];for(const i of n.cells)o.push(Rs(i,r));return new e({cells:o})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return mk(e)}setWeights(e){const n=[];for(const r of this.cells){const o=r.weights.length,i=e.splice(o);for(let s=0;s<r.weights.length;++s)n.push([r.weights[s],i[s]])}dN(n)}}xN.className="StackedRNNCells";de(xN);function rl(t){const{ones:e,rate:n,training:r=!1,count:o=1,dropoutFunc:i}=t,s=()=>i!=null?i(e(),n):RG(e(),n),a=()=>cg(s,e,r);return!o||o<=1?es(a().clone()):Array(o).fill(void 0).map(a).map(u=>es(u.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var lPe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};class V5 extends wl{constructor(e){if(e.unroll)throw new ze("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new ze("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new hn({ndim:5})]}call(e,n){return Q(()=>{if(this.cell.dropoutMask!=null&&(Ke(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Ke(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new G("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,o=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:o,initialState:i})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return Q(()=>{const{stateSize:n}=this.cell,r=e.shape,o=this.computeSingleOutputShape(r),i=[o[0],...o.slice(2)],s=$n(i);return Array.isArray(n)?Array(n.length).fill(s):[s]})}resetStates(e,n=!1){Q(()=>{if(!this.stateful)throw new ji("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,o=this.computeSingleOutputShape(r),i=[o[0],...o.slice(2)];if(r[0]==null)throw new G("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>$n(i)):this.states_=[$n(i)];else if(e==null)Ke(this.states_),this.keptStates!=null&&(Ke(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>$n(i)):this.states_[0]=$n(i);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new G(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):Ke(this.states_);for(let a=0;a<this.states_.length;++a){const l=e[a],u=i;if(!ut(l.shape,u))throw new G(`State ${a} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${l.shape}`);this.states_[a]=l}}this.states_=this.states_.map(a=>es(a.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:o,padding:i,strides:s,dilationRate:a}=this.cell,l=n==="channelsFirst",u=e[l?3:2],c=e[l?4:3],d=Si(u,o[0],i,s[0],a[0]),f=Si(c,o[1],i,s[1],a[1]);return[...e.slice(0,2),...l?[r,d,f]:[d,f,r]]}}V5.className="ConvRNN2D";class bN extends I1{constructor(e){const{filters:n,kernelSize:r,strides:o,padding:i,dataFormat:s,dilationRate:a}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,Tn(this.filters,"filters"),this.kernelSize=Vc(r,2,"kernelSize"),this.kernelSize.forEach(l=>Tn(l,"kernelSize")),this.strides=Vc(o||1,2,"strides"),this.strides.forEach(l=>Tn(l,"strides")),this.padding=i||"valid",ho(this.padding),this.dataFormat=s||"channelsLast",tn(this.dataFormat),this.dilationRate=Vc(a||1,2,"dilationRate"),this.dilationRate.forEach(l=>Tn(l,"dilationRate"))}build(e){var n;e=nt(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new G(`The channel dimension of the input should be defined. Found ${e[r]}`);const o=e[r],i=4,s=this.kernelSize.concat([o,this.filters*i]);this.kernel=this.addWeight("kernel",s,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,this.filters*i]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const u=this.biasInitializer,c=this.filters;l=new(n=class extends Go{apply(f,h){const p=u.apply([c]),m=xl([c]),g=u.apply([c*2]);return rN([p,m,g])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*i],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return Q(()=>{if(e.length!==3)throw new G(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,o=e[0],i=e[1],s=e[2],a=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=rl({ones:()=>jo(o),rate:this.dropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,u=(j,V,z)=>!V||!V[z]?j:H(V[z],j);let c=u(o,l,0),d=u(o,l,1),f=u(o,l,2),h=u(o,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=rl({ones:()=>jo(i),rate:this.recurrentDropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const p=this.recurrentDropoutMask;let m=u(i,p,0),g=u(i,p,1),y=u(i,p,2),v=u(i,p,3);const x=3,[b,w,S,$]=io(this.kernel.read(),a,x),[C,k,I,T]=this.useBias?io(this.bias.read(),a):[null,null,null,null];c=this.inputConv(c,b,C,this.padding),d=this.inputConv(d,w,k,this.padding),f=this.inputConv(f,S,I,this.padding),h=this.inputConv(h,$,T,this.padding);const[E,_,N,P]=io(this.recurrentKernel.read(),a,x);m=this.recurrentConv(m,E),g=this.recurrentConv(g,_),y=this.recurrentConv(y,N),v=this.recurrentConv(v,P);const F=this.recurrentActivation.apply(fe(c,m)),L=this.recurrentActivation.apply(fe(d,g)),A=fe(H(L,s),H(F,this.activation.apply(fe(f,y)))),O=H(this.recurrentActivation.apply(fe(h,v)),this.activation.apply(A));return[O,O,A]})}getConfig(){const e=super.getConfig(),n=lPe(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,n,r,o){const i=ku(e,n,this.strides,o||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?_i(i,r,this.dataFormat):i}recurrentConv(e,n){return ku(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}bN.className="ConvLSTM2DCell";de(bN);class U5 extends V5{constructor(e){const n=new bN(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}U5.className="ConvLSTM2D";de(U5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class T1 extends Ge{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let o=0;o<this.noiseShape.length;++o)r.push(this.noiseShape[o]==null?n[o]:this.noiseShape[o]);return r}call(e,n){return Q(()=>{this.invokeCallHook(e,n);const r=Pe(e);if(0<this.rate&&this.rate<1){const o=n.training==null?!1:n.training,i=this.getNoiseShape(r);return cg(()=>RG(r,this.rate,i,this.seed),()=>r,o)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}T1.className="Dropout";de(T1);class G5 extends T1{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}G5.className="SpatialDropout1D";de(G5);class wN extends Ge{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,Tn(this.units,"units"),this.activation=nl(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=Lt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Lt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=gn(e.kernelConstraint),this.biasConstraint=gn(e.biasConstraint),this.kernelRegularizer=Bt(e.kernelRegularizer),this.biasRegularizer=Bt(e.biasRegularizer),this.activityRegularizer=Bt(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=nt(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=nt(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return Q(()=>{this.invokeCallHook(e,n);const r=Pe(e),o=IG(this.activation.getClassName());let i;return o!=null?i=rs(r,this.kernel.read(),o,this.bias?this.bias.read():null):(i=rs(r,this.kernel.read()),this.bias!=null&&(i=_i(i,this.bias.read())),this.activation!=null&&(i=this.activation.apply(i))),i})}getConfig(){const e={units:this.units,activation:tl(this.activation),useBias:this.useBias,kernelInitializer:Vt(this.kernelInitializer),biasInitializer:Vt(this.biasInitializer),kernelRegularizer:wt(this.kernelRegularizer),biasRegularizer:wt(this.biasRegularizer),activityRegularizer:wt(this.activityRegularizer),kernelConstraint:mn(this.kernelConstraint),biasConstraint:mn(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}wN.className="Dense";de(wN);class H5 extends Ge{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=nt(e);for(const n of e.slice(1))if(n==null)throw new G(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],Wa(e,1)]}call(e,n){return Q(()=>{this.invokeCallHook(e,n);let r=Pe(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const o=[0];for(let i=2;i<r.rank;++i)o.push(i);o.push(1),r=Je(r,o)}return j_e(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}H5.className="Flatten";de(H5);class K5 extends Ge{constructor(e){super(e),this.supportsMasking=!0,this.activation=nl(e.activation)}call(e,n){return Q(()=>{this.invokeCallHook(e,n);const r=Pe(e);return this.activation.apply(r)})}getConfig(){const e={activation:tl(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}K5.className="Activation";de(K5);class q5 extends Ge{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return Q(()=>(e=Pe(e),B_e(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}q5.className="RepeatVector";de(q5);class X5 extends Ge{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",o=n.slice();let i=1,s=null;for(let l=0;l<o.length;++l){const u=o[l];if(this.isUnknown(u))if(s===null)s=l;else throw new G("Can only specifiy one unknown dimension.");else i*=u}const a=Wa(e);if(s!==null){if(i===0||a%i!==0)throw new G(r);o[s]=a/i}else if(a!==i)throw new G(r);return o}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return Q(()=>{this.invokeCallHook(e,n);const r=Pe(e),o=r.shape,i=o.slice(0,1).concat(this.fixUnknownDimension(o.slice(1),this.targetShape));return q(r,i)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}X5.className="Reshape";de(X5);class Y5 extends Ge{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=Ti(1,e.dims.length+1);if(!ut(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new hn({ndim:this.dims.length+1})]}computeOutputShape(e){e=nt(e);const n=e.slice();return this.dims.forEach((r,o)=>{n[o+1]=e[r]}),n}call(e,n){return Je(Pe(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}Y5.className="Permute";de(Y5);class Q5 extends Ge{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=Pe(e);return ik(S0(r,this.maskValue),-1)}call(e,n){return Q(()=>{this.invokeCallHook(e,n);const r=Pe(e),s=ik(S0(r,this.maskValue),-1,!0);return H(r,Se(s,r.dtype))})}}Q5.className="Masking";de(Q5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Z5 extends Ge{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(ft(e.inputLength))}this.inputDim=e.inputDim,Tn(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Tn(this.outputDim,"outputDim"),this.embeddingsInitializer=Lt(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Bt(e.embeddingsRegularizer),this.activityRegularizer=Bt(e.activityRegularizer),this.embeddingsConstraint=gn(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return Q(()=>this.maskZero?(e=Pe(e),S0(e,et(e))):null)}computeOutputShape(e){if(e=nt(e),this.inputLength==null)return[...e,this.outputDim];const n=ft(this.inputLength);if(n.length!==e.length-1)throw new G(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let o=0;o<n.length;++o){const i=n[o],s=e[o+1];if(i!=null&&s!=null&&i!==s)throw new G(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);i==null&&(n[r]=s),r++}}return[e[0],...n,this.outputDim]}call(e,n){return Q(()=>{this.invokeCallHook(e,n);let r=Pe(e);r.dtype!=="int32"&&(r=ns(r,"int32"));const o=_G(this.embeddings.read(),q(r,[r.size]));return q(o,nt(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Vt(this.embeddingsInitializer),embeddingsRegularizer:wt(this.embeddingsRegularizer),activityRegularizer:wt(this.activityRegularizer),embeddingsConstraint:mn(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}Z5.className="Embedding";de(Z5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class qu extends Ge{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new ze}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let o=0;o<n.length;++o){const i=e[e.length-n.length+o],s=n[o];if(i==null||s==null||i<0||s<0)r.push(null);else if(i===1)r.push(s);else if(s===1)r.push(i);else{if(i!==s)throw new G("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(i)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[nt(e)]),e=e,e.length<2)throw new G(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const i of e)i!=null&&i[0]!==null&&n.push(i[0]);if(n=ja(n),n.length>1)throw new G(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let i=1;i<e.length;++i){const s=e[i]==null?null:e[i].slice(1);r=this.computeElementwiseOpOutputShape(r,s)}const o=e.map(i=>i.length);e.indexOf(null)===-1&&ja(o).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return Q(()=>{if(e=e,this.reshapeRequired){const r=[],o=e.map(i=>i.rank);if(o.indexOf(null)===-1){const i=el(o);for(let s of e){const a=s.rank;for(let l=0;l<i-a;++l)s=lg(s,1);r.push(s)}return this.mergeFunction(r)}else{let i=!1;for(const l of e){const u=l.rank;if(u==null){const c=l.shape,d=c[0],f=c.slice(1).concat([d]);let h=q(l,[d].concat(Wa(c.slice(1))));h=Je(h,[1,0]),h=q(h,f),r.push(h),i=!0}else if(u>1){const c=Ti(1,u).concat([0]);r.push(Je(l,c)),i=!0}else r.push(l)}let s=this.mergeFunction(r);const a=s.rank;if(i){if(a==null){const l=s.shape,u=l.length,c=l[u-1],d=[c].concat(l.slice(0,l.length-1));s=q(Je(q(s,[-1,c]),[1,0]),d)}else if(a>1){const l=[a-1].concat(Ti(0,a-1));s=Je(s,l)}}return s}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let o=1;o<e.length;++o){const i=e[o]==null?null:e[o].slice(1);n=this.computeElementwiseOpOutputShape(n,i)}let r=[];for(const o of e)o!=null&&o[0]!==null&&r.push(o[0]);return r=ja(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return Q(()=>{if(n==null)return null;if(!Array.isArray(n))throw new G("`mask` should be an Array");if(!Array.isArray(e))throw new G("`inputs` should be an Array");if(n.length!==e.length)throw new G(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(o=>o==null))return null;n=n.map(o=>o==null?o:vr(o,0));let r=n[0];for(let o=1;o<n.length-1;++o)r=Us(r,n[o]);return r})}}class J5 extends qu{constructor(e){super(e)}mergeFunction(e){return Q(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=fe(n,e[r]);return n})}}J5.className="Add";de(J5);class eH extends qu{constructor(e){super(e)}mergeFunction(e){return Q(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=H(n,e[r]);return n})}}eH.className="Multiply";de(eH);class tH extends qu{constructor(e){super(e)}mergeFunction(e){return Q(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=fe(n,e[r]);return H(1/e.length,n)})}}tH.className="Average";de(tH);class nH extends qu{constructor(e){super(e)}mergeFunction(e){return Q(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=vl(n,e[r]);return n})}}nH.className="Maximum";de(nH);class rH extends qu{constructor(e){super(e)}mergeFunction(e){return Q(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Tp(n,e[r]);return n})}}rH.className="Minimum";de(rH);class oH extends qu{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new G("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const o of e)if(o!=null){n=!1;break}if(n)return;const r=[];for(let o=0;o<e.length;++o){const i=e[o].slice();i.splice(this.axis,1);let s=!1;for(const a of r)if(ut(a,i)){s=!0;break}s||r.push(i)}if(r.length>1)throw new G("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return Q(()=>rN(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new G("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),o=this.axis<0?r.length+this.axis:this.axis;for(const i of n.slice(1)){if(r[o]==null||i[o]==null){r[o]=null;break}r[o]+=i[o]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new G("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new G("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new G(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return Q(()=>{let r=!0;if(n.forEach(s=>{if(s!=null){r=!1;return}}),r)return null;const o=[];for(let s=0;s<e.length;++s)n[s]==null?o.push(Se(jo(e[s]),"bool")):n[s].rank<e[s].rank?o.push(vr(n[s],-1)):o.push(n[s]);const i=Sr(o,this.axis);return iU(i,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}oH.className="Concatenate";de(oH);function Kf(t,e){for(;t<0;)t+=e;return t}function uPe(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new ze("batchDot is not implemented for tensors of 4D or higher rank yet");if(M(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),M(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new ze("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,o=e.shape.length;n==null&&(n=[r-1,o-2]);const i=n;return Q(()=>{let s;if(r>o){s=r-o;const l=[];for(let u=0;u<s;++u)l.push(1);e=q(e,e.shape.concat(l))}else if(o>r){s=o-r;const l=[];for(let u=0;u<s;++u)l.push(1);t=q(t,t.shape.concat(l))}else s=0;let a;if(t.shape.length===2&&e.shape.length===2)i[0]===i[1]?a=Ae(H(t,e),i[0]):a=Ae(H(Je(t,[1,0]),e),i[1]);else{const l=i[0]!==t.shape.length-1,u=i[1]===e.shape.length-1;a=st(t,e,l,u)}if(s>0){let l;r>o?l=r+o-3:l=r-1;const u=[];for(let c=l;c<l+s;++c)u.push(c);a=ng(a,u)}return a.shape.length===1&&(a=vr(a,1)),a})}class iH extends qu{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){M(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new ze("Dot layer does not support tensors of 4D or higher rank yet.");const o=this.interpretAxes(n,r);if(n[o[0]]!==r[o[1]])throw new G(`Dimension incompatibility: ${n[o[0]]} !== ${r[o[1]]}`)}mergeFunction(e){if(e.length!==2)throw new G(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],o;return Array.isArray(this.axes)?o=this.axes.map((i,s)=>Kf(i,e[s].shape.length)):o=[Kf(this.axes,n.shape.length),Kf(this.axes,r.shape.length)],this.normalize&&(n=N0(n,o[0]),r=N0(r,o[1])),uPe(n,r,o)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[Kf(this.axes,e.length),Kf(this.axes,n.length)],r}computeOutputShape(e){M(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new ze("Dot layer does not support tensors of 4D or higher rank yet.");const o=this.interpretAxes(n,r);n.splice(o[0],1),r.splice(o[1],1),r.splice(0,1);const i=n.concat(r);return i.length===1&&i.push(1),i}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}iH.className="Dot";de(iH);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class sH extends Ge{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return Q(()=>{this.invokeCallHook(e,n);const r=Pe(e);return cg(()=>fe(x1(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}sH.className="GaussianNoise";de(sH);class aH extends Ge{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return Q(()=>{this.invokeCallHook(e,n);const r=Pe(e);return this.rate>0&&this.rate<1?cg(()=>{const i=Math.sqrt(this.rate/(1-this.rate));return H(r,x1(r.shape,1,i))},()=>r,n.training||!1):r})}}aH.className="GaussianDropout";de(aH);class lH extends Ge{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Pe(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return Q(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return cg(()=>{const i=Pe(e),l=-1.6732632423543772*1.0507009873554805;let u=Vu(tg(r),this.rate);u=ns(u,"float32");const c=((1-this.rate)*(1+this.rate*l**2))**-.5,d=-c*l*this.rate,f=fe(H(i,u),H(fe(u,-1),l));return fe(H(f,c),d)},()=>Pe(e),n.training||!1)}return e})}}lH.className="AlphaDropout";de(lH);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Op(t,e,n,r,o,i=.001){let s;if(t.rank===2)s=WIe(t,e,n,r,o,i);else if(t.rank===3)s=UIe(t,e,n,r,o,i);else if(t.rank===4)s=HIe(t,e,n,r,o,i);else throw new ze(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return s}function cPe(t,e,n,r,o=.001){return Q(()=>{const i=i2(t,r),s=i.mean,a=i.variance;return[Op(t,s,a,n,e,o),s,a]})}function dPe(t,e,n,r,o=.001){return Q(()=>{const i=i2(t,r),s=i.mean,a=i.variance,l=[];for(const p of Ti(0,t.rank))r.indexOf(p)!==-1?l.push(1):l.push(t.shape[p]);const u=q(s,l),c=q(a,l),d=e==null?null:q(e,l),f=n==null?null:q(n,l);return[Op(t,u,c,f,d,o),s,a]})}function fPe(t,e,n,r,o=.001){return ut(r.slice().sort(),Ti(0,t.rank-1))?cPe(t,e,n,r,o):dPe(t,e,n,r,o)}class uH extends Ge{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Lt(e.betaInitializer||"zeros"),this.gammaInitializer=Lt(e.gammaInitializer||"ones"),this.movingMeanInitializer=Lt(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Lt(e.movingVarianceInitializer||"ones"),this.betaConstraint=gn(e.betaConstraint),this.gammaConstraint=gn(e.gammaConstraint),this.betaRegularizer=Bt(e.betaRegularizer),this.gammaRegularizer=Bt(e.gammaRegularizer)}build(e){e=nt(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new G(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new hn({ndim:e.length,axes:{[n]:r}})];const o=[r];this.scale&&(this.gamma=this.addWeight("gamma",o,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",o,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",o,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",o,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return Q(()=>{const r=n.training==null?!1:n.training,o=Pe(e),i=o.shape,s=i.length,a=Ti(0,s),l=this.axis>=0?this.axis:this.axis+s;a.splice(l,1);const u=Nu(1,s);u[l]=i[l];const c=a.slice();c.sort();const d=!ut(c,Ti(0,s).slice(0,s-1)),f=()=>{if(d){const v=q(this.movingMean.read(),u),x=q(this.movingVariance.read(),u),b=this.center?q(this.beta.read(),u):null,w=this.scale?q(this.gamma.read(),u):null;return Op(o,v,x,b,w,this.epsilon)}else return Op(o,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return f();const[h,p,m]=fPe(o,this.gamma.read(),this.beta.read(),a,this.epsilon),g=(v,x,b)=>{Q(()=>{const w=1-b,S=v.read(),$=H(_e(S,x),w);v.write(_e(S,$))})};return(()=>{g(this.movingMean,p,this.momentum),g(this.movingVariance,m,this.momentum)})(),h})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Vt(this.betaInitializer),gammaInitializer:Vt(this.gammaInitializer),movingMeanInitializer:Vt(this.movingMeanInitializer),movingVarianceInitializer:Vt(this.movingVarianceInitializer),betaRegularizer:wt(this.betaRegularizer),gammaRegularizer:wt(this.gammaRegularizer),betaConstraint:mn(this.betaConstraint),gammaConstraint:mn(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}uH.className="BatchNormalization";de(uH);class cH extends Ge{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Lt(e.betaInitializer||"zeros"),this.gammaInitializer=Lt(e.gammaInitializer||"ones"),this.betaRegularizer=Bt(e.betaRegularizer),this.gammaRegularizer=Bt(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=nt(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let i=0;i<this.axis.length;++i)this.axis[i]<0&&(this.axis[i]+=n);for(const i of this.axis)if(i<0||i>=n)throw new Error(`Invalid axis: ${i}`);if(this.axis.length!==ja(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(i=>e[i]),o=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,o):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,o):this.beta=null,this.built=!0}call(e,n){const r=Pe(e),o=r.shape,i=o.length;return Q(()=>{let{mean:a,variance:l}=i2(r,this.axis,!0);const u=Nu(1,i);for(const m of this.axis)u[m]=o[m];const c=m=>m!=null&&m.shape.length!==i?q(m,u):m;let d=this.scale?c(this.gamma.read()):null,f=this.center?c(this.beta.read()):null;const h=[],p=[];for(let m=0;m<i;++m)this.axis.indexOf(m)!==-1?(h.push(o[m]),p.push(1)):(h.push(1),p.push(o[m]));return a=yi(a,h),l=yi(l,h),d!=null&&(d=yi(d,p)),f!=null&&(f=yi(f,p)),Op(r,a,l,f,d,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Vt(this.betaInitializer),gammaInitializer:Vt(this.gammaInitializer),betaRegularizer:wt(this.betaRegularizer),gammaRegularizer:wt(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}cH.className="LayerNormalization";de(cH);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function hPe(t,e,n){return Q(()=>{if(t.rank!==4)throw new G(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new G("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=Ei()),n!=="channelsLast"&&n!=="channelsFirst")throw new G(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],s2(t,r)})}class dH extends Ge{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?Ei():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new G(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new G(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new G(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new hn({ndim:4})]}computeOutputShape(e){e=nt(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return Q(()=>hPe(Pe(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}dH.className="ZeroPadding2D";de(dH);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function E1(t,e,n,r,o,i){return Q(()=>{tn(o),EG(i),ho(r),n==null&&(n=[1,1]),r==null&&(r="valid"),o==null&&(o=Ei()),i==null&&(i="max"),t=gN(t,o);let s;const a=r==="same"?"same":"valid";return i==="max"?s=o2(t,e,n,a):s=qE(t,e,n,a),o==="channelsFirst"&&(s=Je(s,[0,3,1,2])),s})}function fH(t,e,n,r,o,i){return Q(()=>{tn(o),EG(i),ho(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),o==null&&(o=Ei()),i==null&&(i="max"),t=A5(t,o);let s;const a=r==="same"?"same":"valid";return i==="max"?s=AEe(t,e,n,a):s=_Ie(t,e,n,a),o==="channelsFirst"&&(s=Je(s,[0,4,1,2,3])),s})}class hH extends Ge{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new G(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(Tn(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new G(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);Tn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,ho(this.padding),this.inputSpec=[new hn({ndim:3})]}computeOutputShape(e){e=nt(e);const n=Si(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return Q(()=>{this.invokeCallHook(e,n),e=lg(Pe(e),2);const r=this.poolingFunction(Pe(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return ng(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class pH extends hH{constructor(e){super(e)}poolingFunction(e,n,r,o,i){return tn(i),ho(o),E1(e,n,r,o,i,"max")}}pH.className="MaxPooling1D";de(pH);class mH extends hH{constructor(e){super(e)}poolingFunction(e,n,r,o,i){return tn(i),ho(o),E1(e,n,r,o,i,"avg")}}mH.className="AveragePooling1D";de(mH);class gH extends Ge{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new G(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];Tn(this.poolSize,"poolSize"),Tn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,tn(this.dataFormat),ho(this.padding),this.inputSpec=[new hn({ndim:4})]}computeOutputShape(e){e=nt(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=Si(n,this.poolSize[0],this.padding,this.strides[0]),r=Si(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return Q(()=>(this.invokeCallHook(e,n),this.poolingFunction(Pe(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class yH extends gH{constructor(e){super(e)}poolingFunction(e,n,r,o,i){return tn(i),ho(o),E1(e,n,r,o,i,"max")}}yH.className="MaxPooling2D";de(yH);class vH extends gH{constructor(e){super(e)}poolingFunction(e,n,r,o,i){return tn(i),ho(o),E1(e,n,r,o,i,"avg")}}vH.className="AveragePooling2D";de(vH);class xH extends Ge{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new G(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Tn(this.poolSize,"poolSize"),Tn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,tn(this.dataFormat),ho(this.padding),this.inputSpec=[new hn({ndim:5})]}computeOutputShape(e){e=nt(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],o=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=Si(n,this.poolSize[0],this.padding,this.strides[0]),r=Si(r,this.poolSize[1],this.padding,this.strides[1]),o=Si(o,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,o]:[e[0],n,r,o,e[4]]}call(e,n){return Q(()=>(this.invokeCallHook(e,n),this.poolingFunction(Pe(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class bH extends xH{constructor(e){super(e)}poolingFunction(e,n,r,o,i){return tn(i),ho(o),fH(e,n,r,o,i,"max")}}bH.className="MaxPooling3D";de(bH);class wH extends xH{constructor(e){super(e)}poolingFunction(e,n,r,o,i){return tn(i),ho(o),fH(e,n,r,o,i,"avg")}}wH.className="AveragePooling3D";de(wH);class SH extends Ge{constructor(e){super(e),this.inputSpec=[new hn({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new ze}}class CH extends SH{constructor(e){super(e||{})}call(e,n){return Q(()=>{const r=Pe(e);return sn(r,1)})}}CH.className="GlobalAveragePooling1D";de(CH);class $H extends SH{constructor(e){super(e||{})}call(e,n){return Q(()=>{const r=Pe(e);return wi(r,1)})}}$H.className="GlobalMaxPooling1D";de($H);class kH extends Ge{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,tn(this.dataFormat),this.inputSpec=[new hn({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new ze}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class IH extends kH{call(e,n){return Q(()=>{const r=Pe(e);return this.dataFormat==="channelsLast"?sn(r,[1,2]):sn(r,[2,3])})}}IH.className="GlobalAveragePooling2D";de(IH);class TH extends kH{call(e,n){return Q(()=>{const r=Pe(e);return this.dataFormat==="channelsLast"?wi(r,[1,2]):wi(r,[2,3])})}}TH.className="GlobalMaxPooling2D";de(TH);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class EH extends Ge{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const o=n.layer,i=Rs(o,r);delete n.layer;const s={layer:i};return Object.assign(s,n),new e(s)}}class NH extends EH{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=nt(e),e.length<3)throw new G(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=nt(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),o=e[1];return[r[0],o].concat(r.slice(1))}call(e,n){return Q(()=>(e=Pe(e),B5((s,a)=>[Pe(this.layer.call(s,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}NH.className="TimeDistributed";de(NH);function pPe(t){Ku(P_e,"BidirectionalMergeMode",t)}const mPe="concat";class AH extends EH{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=Rs(r),n.goBackwards=n.goBackwards!==!0;const o={};if(o.className=e.layer.getClassName(),o.config=n,this.backwardLayer=Rs(o),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?mPe:e.mergeMode,pPe(this.mergeMode),e.weights)throw new ze("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,o,i;return this.returnState&&(i=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,o=[r]):this.mergeMode==null?o=[r,r.slice()]:o=[r],this.returnState?this.mergeMode==null?o.concat(i).concat(i.slice()):[r].concat(i).concat(i.slice()):xr(o)}apply(e,n){let r=n==null?null:n.initialState,o=n==null?null:n.constants;n==null&&(n={});const i=L5(e,r,o,this.numConstants);if(e=i.inputs,r=i.initialState,o=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&o==null)return super.apply(e,n);const s=[],a=[];if(r!=null){const u=r.length;if(u%2>0)throw new G("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,s.push(...r);const c=r.map(d=>new hn({shape:d.shape}));this.forwardLayer.stateSpec=c.slice(0,u/2),this.backwardLayer.stateSpec=c.slice(u/2),a.push(...c)}if(o!=null)throw new ze("Support for constants in Bidirectional layers is not implemented yet.");const l=s[0]instanceof us;for(const u of s)if(u instanceof us!==l)throw new G("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const u=[e].concat(s),c=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=c;const f=super.apply(u,n);return this.inputSpec=d,f}else return super.apply(e,n)}call(e,n){return Q(()=>{const r=n.initialState;let o,i;if(r==null)o=this.forwardLayer.call(e,n),i=this.backwardLayer.call(e,n);else{const l=r.slice(0,r.length/2),u=r.slice(r.length/2);o=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),i=this.backwardLayer.call(e,Object.assign(n,{initialState:u}))}let s;this.returnState&&(Array.isArray(o)&&(s=o.slice(1).concat(i.slice(1))),o=o[0],i=i[0]),this.returnSequences&&(i=Tu(i,1));let a;return this.mergeMode==="concat"?a=rN([o,i]):this.mergeMode==="sum"?a=fe(o,i):this.mergeMode==="ave"?a=H(.5,fe(o,i)):this.mergeMode==="mul"?a=H(o,i):this.mergeMode==null&&(a=[o,i]),this.returnState?this.mergeMode==null?a.concat(s):[a].concat(s):a})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){iu(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),iu(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const i=this.forwardLayer.states.map(s=>null);return Array.isArray(r)?r.concat(i).concat(i):[r].concat(i).concat(i)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=Rs(n.layer);if(delete n.layer,n.numConstants!=null)throw new ze("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const o=n;return o.layer=r,new e(o)}}AH.className="Bidirectional";de(AH);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class OH extends Ge{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return Q(()=>(e=Pe(e),e.dtype!=="float32"&&(e=ns(e,"float32")),fe(H(e,this.scale),this.offset)))}}OH.className="Rescaling";de(OH);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:gPe,cropAndResize:yPe}=Ts;class _H extends Ge{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,o,i,s,a,l){return Q(()=>{let u,c=!1;const d=n/s,f=r/a,h=(o+n)/s,p=(i+r)/a,m=[d,f,h,p],g=[];e.rank===3?(c=!0,u=Gs([e])):u=e;for(let w=0;w<u.shape[0];w++)g.push(m);const y=XV(g,[g.length,4]),v=Ep(0,g.length,1,"int32"),b=yPe(u,y,v,[o,i],"nearest");return ns(c?Pe(Eu(b)):b,l)})}upsize(e,n,r,o){return Q(()=>{const i=gPe(e,[n,r]);return ns(i,o)})}call(e,n){return Q(()=>{const r=Pe(e),o=r.dtype,i=r.shape,s=i[i.length-3],a=i[i.length-2];let l=0;s!==this.height&&(l=Math.floor((s-this.height)/2));let u=0;return a!==this.width&&(u=Math.floor((a-this.width)/2),u===0&&(u=1)),l>=0&&u>=0?this.centerCrop(r,l,u,this.height,this.width,s,a,o):this.upsize(e,this.height,this.width,o)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=nt(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}_H.className="CenterCrop";de(_H);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function vPe(t,e,n,r){let o=Pe(t);if(o.dtype!=="int32"&&(o=ns(o,"int32")),e==="int")return o;const i=o.shape;if(o.rank===0&&(o=vr(o,-1)),e==="oneHot"&&o.shape[o.shape.length-1]!==1&&(o=vr(o,-1)),o.rank>2)throw new G(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${i} which would result in output rank ${o.rank}.`);const s=["multiHot","oneHot"].includes(e),a=o;let l;if(typeof r<"u"&&e==="count"?l=ZD(a,r,n,s):l=ZD(a,[],n,s),e!=="tfIdf")return l;if(r)return H(l,r);throw new G("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class RH extends Ge{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=nt(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return Q(()=>{e=Pe(e),e.dtype!=="int32"&&(e=ns(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new G(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=Pe(n.countWeights)}const o=wi(e),i=b0(e),s=fo(this.numTokens,o).bufferSync().get(0),a=Vu(i,0).bufferSync().get(0);if(!(s&&a))throw new G(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return vPe(e,this.outputMode,this.numTokens,r)})}}RH.className="CategoryEncoding";de(RH);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const xPe=["bilinear","nearest"],OM=new Set(xPe);class PH extends Ge{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(OM.has(e.interpolation))this.interpolation=e.interpolation;else throw new G(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=nt(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return Q(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return Ts.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return Ts.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...OM]} are supported`)})}}PH.className="Resizing";de(PH);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class DH{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}DH.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class MH extends Ge{constructor(e){super(e),this.randomGenerator=new DH(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}MH.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const bPe=["bilinear","nearest"],_M=new Set(bPe);class FH extends MH{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new G(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new G(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new G(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(_M.has(r))this.interpolation=r;else throw new G(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=nt(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return Q(()=>{const r=Pe(e);this.imgHeight=r.shape[r.shape.length-3];const o=r.shape[r.shape.length-2];this.widthFactor=tg([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let i=this.widthFactor.dataSync()[0]*o;i=Math.round(i);const s=[this.imgHeight,i];switch(this.interpolation){case"bilinear":return Ts.resizeBilinear(e,s);case"nearest":return Ts.resizeNearestNeighbor(e,s);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[..._M]} are supported`)}})}}FH.className="RandomWidth";de(FH);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function cy(t){return new wN(t)}function RM(t){return new T1(t)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wPe=ee();wPe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var PM;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(PM||(PM={}));var DM;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(DM||(DM={}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var MM;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(MM||(MM={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ie(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&M(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SPe=PU;class N1 extends QT{nextDataId(){return N1.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new JW(this,Mi())}write(e,n,r){this.firstUse&&(this.firstUse=!1,ee().get("IS_NODE")&&eo(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const o={id:this.nextDataId()};return this.data.set(o,{values:e,dtype:r,refCount:1}),o}makeTensorInfo(e,n,r){let o;if(n==="string"&&r!=null&&r.length>0&&rm(r[0])){const i=r.map(s=>Ba(s));o=this.write(i,e,n)}else o=this.write(r,e,n);return{dataId:o,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,o,i){this.data.set(e,{values:n,dtype:o,refCount:i})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const o=this.readSync(r.real.dataId),i=this.readSync(r.imag.dataId);return Hs(o,i)}return H$e(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(o=>Ja(o));return Ve(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Ve(e.shape,e.dtype,n)}makeOutput(e,n,r){return Mi().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=gr();return e(),{kernelMs:gr()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Ie([e],"where");const n=this.readSync(e.dataId);return SPe(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}N1.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LH(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const CPe=t=>{const{x:e}=t.inputs,n=t.backend;Ie(e,"abs");let r=new Float32Array(re(e.shape));const o=n.data.get(e.dataId).values;return r=LH(o),n.makeOutput(r,e.shape,e.dtype)},$Pe={kernelName:ib,backendName:"cpu",kernelFunc:CPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nn(t){return(e,n,r,o,i)=>{const s=Fe(e,n),a=s.length,l=Ne(s),u=re(s),c=Un(i,u),d=e.length,f=n.length,h=Ne(e),p=Ne(n),m=Rd(e,s),g=Rd(n,s);if(m.length+g.length===0)for(let y=0;y<c.length;++y)c[y]=t(r[y%r.length],o[y%o.length]);else for(let y=0;y<c.length;++y){const v=lf(y,a,l),x=v.slice(-d);m.forEach($=>x[$]=0);const b=Ji(x,d,h),w=v.slice(-f);g.forEach($=>w[$]=0);const S=Ji(w,f,p);c[y]=t(r[b],o[S])}return[c,s]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pr(t){const{inputs:e,backend:n}=t,{real:r,imag:o}=e,i=n.data.get(r.dataId).values,s=n.data.get(o.dataId).values,a=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(a.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(o.shape,"float32",s)},a}const kPe={kernelName:cE,backendName:"cpu",kernelFunc:Pr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P0(t,e,n="float32"){if(n==="complex64"){const o=P0(t,e,"float32"),i=P0(t,e,"float32");return Pr({inputs:{real:o,imag:i},backend:t})}const r=Gn(re(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cs(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const IPe={kernelName:$m,backendName:"cpu",kernelFunc:cs};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Au(t){const{inputs:e,backend:n}=t,{input:r}=e,o=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(o.dataId).values;return n.makeTensorInfo(o.shape,o.dtype,i)}const TPe={kernelName:PE,backendName:"cpu",kernelFunc:Au};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BH(t,e,n,r){if(r==="int32"){const o=Int32Array.from(t);return[e,"int32",o]}if(r==="bool"){const o=Wu([0],n),[i,s]=nn((a,l)=>a!==l?1:0)(e,[],t,o,"bool");return[s,"bool",i]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function ol(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{dtype:i}=r;if(i==="complex64"){if(o.dtype==="complex64")return cs({inputs:{x:o},backend:n});const c=P0(n,o.shape,o.dtype),d=ol({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),f=Pr({inputs:{real:d,imag:c},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),f}if(o.dtype==="complex64"){const c=Au({inputs:{input:o},backend:n}),d=ol({inputs:{x:c},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(c),d}if(!nV(o.dtype,i)){const c=cs({inputs:{x:o},backend:n});return{dataId:c.dataId,shape:c.shape,dtype:i}}const s=n.data.get(o.dataId).values,[a,l,u]=BH(s,o.shape,o.dtype,i);return n.makeTensorInfo(a,l,u)}const EPe={kernelName:dm,backendName:"cpu",kernelFunc:ol};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vn(t,e,n,r){return n==null?({inputs:o,backend:i})=>{const{a:s,b:a}=o,l=i;Ie([s,a],t);const u=l.data.get(s.dataId).values,c=l.data.get(a.dataId).values,d=s.dtype==="string"?Ks(u):u,f=s.dtype==="string"?Ks(c):c,h=r||s.dtype,[p,m]=e(s.shape,a.shape,d,f,h);return l.makeTensorInfo(m,h,p)}:({inputs:o,backend:i})=>{const{a:s,b:a}=o,l=i;if(s.dtype==="complex64"||a.dtype==="complex64"){const u=ol({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),c=l.data.get(u.dataId),d=c.complexTensorInfos.real,f=c.complexTensorInfos.imag,h=l.data.get(d.dataId).values,p=l.data.get(f.dataId).values,m=ol({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),g=l.data.get(m.dataId),y=g.complexTensorInfos.real,v=g.complexTensorInfos.imag,x=l.data.get(y.dataId).values,b=l.data.get(v.dataId).values,[w,S,$]=n(s.shape,a.shape,h,p,x,b),C=l.makeTensorInfo($,"float32",w),k=l.makeTensorInfo($,"float32",S),I=Pr({inputs:{real:C,imag:k},backend:l});return l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(m),l.disposeIntermediateTensorInfo(C),l.disposeIntermediateTensorInfo(k),I}else{const u=l.data.get(s.dataId).values,c=l.data.get(a.dataId).values,d=r||s.dtype,[f,h]=e(s.shape,a.shape,u,c,d);return l.makeTensorInfo(h,d,f)}}}function SN(t){return(e,n,r,o,i,s)=>{const a=Fe(e,n),l=re(a),u=a.length,c=Ne(a),d=Un("float32",l),f=Un("float32",l),h=Rd(e,a),p=Rd(n,a),m=Hs(r,o),g=Hs(i,s),y=e.length,v=Ne(e),x=n.length,b=Ne(n);if(h.length+p.length===0)for(let w=0;w<d.length;w++){const S=w%m.length,$=w%g.length,C=t(m[S*2],m[S*2+1],g[$*2],g[$*2+1]);d[w]=C.real,f[w]=C.imag}else for(let w=0;w<d.length;w++){const S=lf(w,u,c),$=S.slice(-y);h.forEach(E=>$[E]=0);const C=Ji($,y,v),k=S.slice(-x);p.forEach(E=>k[E]=0);const I=Ji(k,x,b),T=t(m[C*2],m[C*2+1],g[I*2],g[I*2+1]);d[w]=T.real,f[w]=T.imag}return[d,f,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zH=nn((t,e)=>t+e),NPe=SN((t,e,n,r)=>({real:t+n,imag:e+r})),Fd=vn(uf,zH,NPe),APe={kernelName:uf,backendName:"cpu",kernelFunc:Fd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CN(t,e,n,r,o){const i=re(r),s=Gn(o,n);for(let a=0;a<t.length;a++){const l=t[a];if(l<0)throw new Error("Input x must be non-negative!");l>=o||(i>0?s[l]+=e[a]:s[l]+=1)}return s}function jH(t,e,n,r=!1){const o=t.shape[0],i=t.shape[1],s=Ve([o,n],e.dtype);for(let a=0;a<o;a++)for(let l=0;l<i;l++){const u=t.get(a,l);if(u<0)throw new Error("Input x must be non-negative!");u>=n||(r?s.set(1,a,u):e.size>0?s.set(s.get(a,u)+e.get(a,l),a,u):s.set(s.get(a,u)+1,a,u))}return s}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WH=nn((t,e)=>t&e),OPe=vn(uE,WH),_Pe={kernelName:uE,backendName:"cpu",kernelFunc:OPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hs(t){return(e,n,r)=>{const o=Qt(n,e.length);for(let i=0;i<e.length;++i)o[i]=t(e[i],r);return o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pt(t,e,n){const r=hs(e);return Sl(t,r,n)}function Sl(t,e,n){return({inputs:r,attrs:o,backend:i})=>{const{x:s}=r;Ie(s,t);const a=i,l=a.data.get(s.dataId).values;let u;if(s.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");u=Ks(l)}else u=l;const c=n||s.dtype,d=e(u,c,o);return a.makeTensorInfo(s.shape,c,d)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VH=hs(t=>Math.ceil(t)),RPe=Sl(fm,VH),PPe={kernelName:fm,backendName:"cpu",kernelFunc:RPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UH(t,e,n,r){const o=Qt(n,re(e));if(r&&n!=="string"){let i=0;t.forEach(s=>{const a=re(s.shape);o.set(s.vals,i),i+=a})}else{let i=0;t.forEach(s=>{const a=n==="string"?Ks(s.vals):s.vals;let l=0;for(let u=0;u<s.shape[0];++u){const c=u*e[1]+i;for(let d=0;d<s.shape[1];++d)o[c+d]=a[l++]}i+=s.shape[1]})}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GH=nn((t,e)=>t===e?1:0),HH=vn(bb,GH,null,"bool"),DPe={kernelName:bb,backendName:"cpu",kernelFunc:HH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KH=hs(t=>Math.exp(t)),qH=Sl(xm,KH,"float32"),MPe={kernelName:xm,backendName:"cpu",kernelFunc:qH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XH=hs(t=>Math.expm1(t)),FPe=Sl(bm,XH),LPe={kernelName:bm,backendName:"cpu",kernelFunc:FPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YH=hs(t=>Math.floor(t)),BPe=Sl(wm,YH),zPe={kernelName:wm,backendName:"cpu",kernelFunc:BPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QH=nn((t,e)=>Math.floor(t/e)),jPe=vn(Sm,QH,null,"int32"),WPe={kernelName:Sm,backendName:"cpu",kernelFunc:jPe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZH(t,e,n,r,o,i,s,a,l){const u=Ve([r,i],n);for(let c=0;c<r;c++){const d=[];let f=0;for(let h=0;h<o;h++){const p=t[c*o+h];f+=p*s[h],d.push(p)}if(f<0||f>=l/i)throw new Error(`Invalid indices: ${d} does not index into ${a}`);for(let h=0;h<i;h++)u.values[c*i+h]=e.get(...e.indexToLoc(f*i+h))}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JH(t,e,n){const r=Ve(n,t.dtype);for(let o=0;o<r.size;++o){const s=r.indexToLoc(o).slice(),a=s[0],l=s[2],u=e.locToIndex([a,l]);s[2]=e.values[u];const c=t.locToIndex(s);0<=c&&c<t.values.length&&(r.values[o]=t.values[c])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e6=nn((t,e)=>t>e?1:0),VPe=vn($b,e6,null,"bool"),UPe={kernelName:$b,backendName:"cpu",kernelFunc:VPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t6=nn((t,e)=>t>=e?1:0),GPe=vn(Cm,t6,null,"bool"),HPe={kernelName:Cm,backendName:"cpu",kernelFunc:GPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n6=nn((t,e)=>t<e?1:0),KPe=vn(Ib,n6,null,"bool"),qPe={kernelName:Ib,backendName:"cpu",kernelFunc:KPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r6=nn((t,e)=>t<=e?1:0),XPe=vn(Tb,r6,null,"bool"),YPe={kernelName:Tb,backendName:"cpu",kernelFunc:XPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o6(t,e,n){const r=(e-t)/(n-1),o=Gn(n,"float32");o[0]=t;for(let i=1;i<o.length;i++)o[i]=o[i-1]+r;return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i6=hs(t=>Math.log(t)),QPe=Sl(Em,i6),ZPe={kernelName:Em,backendName:"cpu",kernelFunc:QPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s6(t,e,n,r){const o=Un(r,re(n));for(let i=0;i<o.length;++i){const s=i*e;let a=t[s];for(let l=0;l<e;++l){const u=t[s+l];(Number.isNaN(u)||u>a)&&(a=u)}o[i]=a}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a6=nn((t,e)=>Math.max(t,e)),JPe=vn(Am,a6),eDe={kernelName:Am,backendName:"cpu",kernelFunc:JPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l6=nn((t,e)=>Math.min(t,e)),tDe=vn(Om,l6),nDe={kernelName:Om,backendName:"cpu",kernelFunc:tDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $N=nn((t,e)=>t*e),rDe=SN((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),A1=vn(Rm,$N,rDe),oDe={kernelName:Rm,backendName:"cpu",kernelFunc:A1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u6(t,e,n){const r=ml(-1,n);return $N([],e,r,t,n)}function iDe(t){const{inputs:e,backend:n}=t,{x:r}=e;Ie(r,"neg");const o=n.data.get(r.dataId).values,[i,s]=u6(o,r.shape,r.dtype);return n.makeTensorInfo(s,r.dtype,i)}const sDe={kernelName:Lb,backendName:"cpu",kernelFunc:iDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c6=nn((t,e)=>t!==e?1:0),aDe=vn(Bb,c6,null,"bool"),lDe={kernelName:Bb,backendName:"cpu",kernelFunc:aDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kN(t,e,n,r,o){const i=e.length,s=re(e),a=Ne(e),l=Ne(o),u=Un(n,re(o));for(let c=0;c<s;++c){const d=lf(c,i,a),f=new Array(d.length);for(let p=0;p<f.length;p++)f[p]=d[r[p]];const h=Ji(f,i,l);u[h]=t[c]}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $r(t){const{inputs:e,attrs:n,backend:r}=t,{x:o}=e,{perm:i}=n;Ie(o,"transpose");const s=o.shape.length,a=new Array(s);for(let d=0;d<a.length;d++)a[d]=o.shape[i[d]];const l=r.data.get(o.dataId).values,u=kN(l,o.shape,o.dtype,i,a);return{dataId:r.write(u,a,o.dtype),shape:a,dtype:o.dtype}}const uDe={kernelName:zc,backendName:"cpu",kernelFunc:$r};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d6(t,e,n,r){const[o,i]=Nn(t,r),s=Vr(e,"int32"),a=Gn(re(o),s),l=re(i);for(let u=0;u<a.length;++u){const c=u*l;let d=1;for(let f=0;f<l;++f)d*=n[c+f];a[u]=d}return{outVals:a,outShape:o,outDtype:s}}function cDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:i,keepDims:s}=r;Ie(o,"prod");const a=o.shape.length,l=Ue(i,o.shape),u=Ut(l,a);let c=l,d=o;const f=[];u!=null&&(d=$r({inputs:{x:o},backend:n,attrs:{perm:u}}),f.push(d),c=en(c.length,a));const h=n.data.get(d.dataId).values,{outVals:p,outShape:m,outDtype:g}=d6(d.shape,d.dtype,h,c);let y=m;return s&&(y=an(m,l)),f.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(y,g,p)}const dDe={kernelName:Gb,backendName:"cpu",kernelFunc:cDe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fDe(t,e,n){t.forEach((r,o)=>{if(r<0||r>=n){const i=lf(o,e.length,Ne(e)).join(",");throw new Error(`indices[${i}] = ${r} is not in [0, ${n})`)}})}function hDe(t,e){for(let n=0;n<t.length;++n){const r=t[n],o=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>o)throw new Error("Ragged splits must not point past values");for(let i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}function pDe(t,e,n,r){const o=[];let i=0;const s=e.length-1+n.length,a=new Array(s).fill(null).map(()=>[0]);hDe(n,r);let l=1;for(let u=0;u<e.length-1;++u){l*=e[u];const c=e[u+1];for(let d=1;d<l+1;++d)a[u].push(d*c)}for(let u=0;u<t.length;++u){let c=t[u],d=t[u]+1;for(let f=0;f<n.length;++f){const h=n[f],p=f+e.length-1;if(p>=0){const m=a[p],g=m[m.length-1]-h[c];for(let y=c;y<d;++y)a[p].push(h[y+1]+g)}c=h[c],d=h[d]}d!==c&&(o.push([c,d]),i+=d-c)}return{outSplits:a,valueSlices:o,numValues:i}}function mDe(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,o=Qt("int32",r);e.push(o),t[n].forEach((i,s)=>o[s]=i)}return e}function FM(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function gDe(t,e,n,r,o,i){const s=FM(e,2)[1],a=FM(i,2)[1];let l=0;for(const u of n)for(let c=u[0];c<u[1];++c){for(let d=0;d<r;++d)o[l*a+d]=t[c*s+d];++l}}function yDe(t,e,n,r,o){const i=e.slice();i[0]=o;const s=Qt(n,re(i)),a=t.length,l=a===0?0:a/e[0];return gDe(t,e,r,l,s,i),[s,i]}function f6(t,e,n,r,o,i,s,a){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(fDe(i,s,l),r.length===0)throw new Error("params.rank must be nonzero");const u=r[0],{outSplits:c,valueSlices:d,numValues:f}=pDe(i,s,t,u),h=mDe(c),p=yDe(n,r,o,d,f);return[h,p[0],p[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LM=2147483647;function h6(t,e,n,r,o,i,s){if(e.length>1)throw new Error("starts must be a scalar or vector");if(o.length>1)throw new Error("limits must be a scalar or vector");if(s.length>1)throw new Error("deltas must be a scalar or vector");const a=e.length===0,l=o.length===0,u=s.length===0,c=[];a||c.push(e[0]),l||c.push(o[0]),u||c.push(s[0]);for(let g=1;g<c.length;++g)if(c[g]!==c[g-1])throw new Error("starts, limits, and deltas must have the same shape");const d=c.length===0?1:c[0],f=Qt("int32",d+1);f[0]=0;for(let g=0;g<d;++g){const y=a?t[0]:t[g],v=l?r[0]:r[g],x=u?i[0]:i[g];if(x===0)throw new Error("Requires delta != 0");let b;if(x>0&&v<y||x<0&&v>y)b=0;else if(b=Math.ceil(Math.abs((v-y)/x)),b>LM)throw new Error(`Requires ((limit - start) / delta) <= ${LM}`);f[g+1]=f[g]+b}const h=f[d],p=Qt(n,h);let m=0;for(let g=0;g<d;++g){const y=f[g+1]-f[g];let v=a?t[0]:t[g];const x=u?i[0]:i[g];for(let b=0;b<y;++b)p[m++]=v,v+=x}return[f,p]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var xo=pi;class D0{constructor(e,n,r,o,i,s,a,l,u,c){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=o,this.valuesDType=i,this.defaultValue=s,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=u,this.rowPartitionTypes=JU(c),this.raggedRank=eG(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===xo.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===xo.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case xo.VALUE_ROWIDS:return D0.getMaxWidthValueRowID(n);case xo.ROW_SPLITS:return D0.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${xo[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let o=0;o<n-1;++o){const i=e[o+1]-e[o];i>r&&(r=i)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,o=e[0],i=0;for(let s=1;s<n;++s){const a=e[s];a!==o&&(o=a,i=Math.max(s-r,i),r=s)}return Math.max(n-r,i)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return zM(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;tG(r,n);const o=this.tensorShapeFromTensor(this.shape,this.shapeShape),s=ZU(this.raggedRank,o,n);s[0]<0&&(s[0]=e);for(let a=1;a<=this.raggedRank;++a)s[a]<0&&(s[a]=this.getMaxWidth(a));return s}calculateFirstParentOutputIndex(e,n,r){const o=Math.min(e,r),i=[];let s=0;for(let a=0;a<o;++a,s+=n)i.push(s);for(let a=o;a<e;++a)i.push(-1);return M(i.length===e,()=>"Final length of result must be equal to firstDimension."),i}calculateOutputIndexRowSplit(e,n,r,o){const i=e.length,s=[];for(let a=0;a<i-1;++a){const l=e[a+1]-e[a];let u=Math.min(o,l),c=n[a];c===-1&&(u=0);for(let d=0;d<u;++d)s.push(c),c+=r;for(let d=0;d<l-u;++d)s.push(-1)}if(i>0&&s.length!==e[i-1])throw new Error("Invalid row split size.");return s}calculateOutputIndexValueRowID(e,n,r,o){const i=e.length,s=[];if(i===0)return[];let a=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let u=n[l];s.push(u);for(let c=1;c<i;++c){const d=e[c];if(d===l)u>=0&&(++a,a<o?u+=r:u=-1);else{if(a=0,l=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);u=n[d]}s.push(u)}if(s.length!==e.length)throw new Error("Invalid row ids.");return s}calculateOutputIndex(e,n,r,o){const i=this.getRowPartitionTensor(e),s=this.getRowPartitionTypeByDimension(e);switch(s){case xo.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,n,r,o);case xo.ROW_SPLITS:if(i.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(i,n,r,o);default:throw new Error(`Unsupported partition type: ${xo[s]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case xo.FIRST_DIM_SIZE:return e[0];case xo.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case xo.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${xo[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),o=new Array(this.raggedRank+1);o[o.length-1]=1;for(let l=o.length-2;l>=0;--l)o[l]=o[l+1]*r[l+1];const i=zM(r,!1),s=Qt(this.valuesDType,re(i));if(o[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,o[0],r[0]);for(let u=1;u<=this.raggedRank;++u)l=this.calculateOutputIndex(u-1,l,o[u],r[u]);this.setOutput(this.raggedRank,l,s,i)}return[i,s]}setOutput(e,n,r,o){if(r.length===0)return;const i=this.values,s=r;let a=o.slice();a=a.slice(e+1);const l=re(a),u=n.length;let c=this.defaultValue;if(c.length!==l&&c.length!==1){const p=this.defaultValueShape;Q(()=>{const m=q(c,p);c=bh(m,a).dataSync()})}let d=0,f=0,h=0;for(let p=0;p<=u;++p){let m=p<u?n[p]:-1;if(m===h){++h;continue}if(f<h){const g=i.subarray(d*l),y=s.subarray(f*l),v=(h-f)*l;BM(y,g,v)}if(p>=u){const g=r.length;m=Math.floor(g/l)}if(m>h)if(this.defaultValue.length===1)s.subarray(h*l,m*l).fill(this.defaultValue[0]),h=m;else for(;m>h;){const g=s.slice(h*l);BM(g,c,l),++h}m<0?(d=p+1,f=h):(d=p,f=h,h=f+1)}}}function BM(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function zM(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function p6(t,e,n,r,o,i,s,a,l,u){return new D0(t,e,n,r,o,i,s,a,l,u).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m6(t,e,n,r){const o=t===e,i=t<e&&n<0,s=e<t&&n>1;if(o||i||s)return Gn(0,r);const a=Math.abs(Math.ceil((e-t)/n)),l=Gn(a,r);e<t&&n===1&&(n=-1),l[0]=t;for(let u=1;u<l.length;u++)l[u]=l[u-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g6=hs(t=>1/Math.sqrt(t)),vDe=Sl(Bm,g6),xDe={kernelName:Bm,backendName:"cpu",kernelFunc:vDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kl(t,e,n,r,o,i,s,a,l,u){const c=[r/o,o],d=t.values,f=e.values;if(r===0)return Ve(n,e.dtype);const h=l instanceof Pn?l:Ve(c,e.dtype);typeof l=="string"||typeof l=="number"?h.values.fill(l):typeof l=="boolean"&&h.values.fill(+l);for(let p=0;p<i;p++){const m=[];let g=0;for(let y=0;y<s;y++){const v=d[p*s+y];m.push(v),g+=v*a[y]}if(g<0||g>=r/o)throw new Error(`Invalid indices: ${m} does not index into ${n}`);for(let y=0;y<o;y++)u?h.values[g*o+y]+=f[p*o+y]:h.values[g*o+y]=e.rank===0?f[0]:f[p*o+y]}return h}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bDe=hs(t=>1/(1+Math.exp(-t))),y6=pt(Um,t=>1/(1+Math.exp(-t))),wDe={kernelName:Um,backendName:"cpu",kernelFunc:y6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v6(t,e,n,r,o){const i=_2(r,e,n),s=re(n),a=Ne(r);if(i){const d=R2(e,a);return o==="string"?t.slice(d,d+s):t.subarray(d,d+s)}const l=o==="string"?Ks(t):t,u=Ve(r,o,l),c=Ve(n,o);for(let d=0;d<c.size;++d){const f=c.indexToLoc(d),h=f.map((p,m)=>p+e[m]);c.set(u.get(...h),...f)}return o==="string"?wG(c.values):c.values}function Ou(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{begin:i,size:s}=r;Ie(o,"slice");const[a,l]=p1(o,i,s);A2(o,a,l);const u=n.data.get(o.dataId).values,c=v6(u,a,l,o.shape,o.dtype);return n.makeTensorInfo(l,o.dtype,c)}const SDe={kernelName:Qb,backendName:"cpu",kernelFunc:Ou};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x6(t,e,n,r,o,i,s){const a=e[0],l=i[0],u=new Array(l),c=new Array(a),d=e[1];if(l===0){if(a!==0)throw new Error(lG(a));const g=Qt(n,0),y=Qt(o,0);return[g,[0,d],y,u,c]}let f=!0,h=0;const p=new Array(l).fill(0);for(let g=0;g<a;++g){const y=t[g*d];if(y<0)throw new Error(uG(g,y));if(y>=l)throw new Error(cG(g,y,l));++p[y],f=f&&y>=h,h=y}let m=!0;for(let g=0;g<l;++g){const y=p[g]===0;u[g]=y,m=m&&!y,p[g]=Math.max(p[g],1),g>0&&(p[g]+=p[g-1])}if(m&&f){const g=t,y=r;for(let v=0;v<a;++v)c[v]=v;return[g,[a,d],y,u,c]}else{const g=p[l-1],y=Qt(n,g*d),v=Qt(o,g),x=new Array(l).fill(0);for(let b=0;b<a;++b){const w=t[b*d],S=x[w],$=(w===0?0:p[w-1])+S;x[w]++;for(let C=0;C<d;++C)y[$*d+C]=t[b*d+C];v[$]=r[b],c[b]=$}for(let b=0;b<l;++b)if(x[b]===0){const S=b===0?0:p[b-1];y[S*d+0]=b;for(let $=1;$<d;++$)y[S*d+$]=0;v[S]=s}return[y,[g,d],v,u,c]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b6(t,e,n,r,o){const i=re(r),s=e[0],a=o.length,l=[];let u=1,c=-1;for(let g=0;g<a;++g){const y=o[g];if(y===-1){if(c!==-1)throw new Error(dG(c,g));c=g,l.push(1)}else{if(y<0)throw new Error(fG(g,y));u*=y,l.push(y)}}if(c!==-1){if(u<=0)throw new Error(hG());const g=Math.trunc(i/u);if(u*g!==i)throw new Error(pG(r,l));l[c]=g}if(re(l)!==i)throw new Error(mG(r,l));const f=r.length,h=[];if(f>0){h[f-1]=1;for(let g=f-2;g>=0;--g)h[g]=h[g+1]*r[g+1]}const p=[];if(a>0){p[a-1]=1;for(let g=a-2;g>=0;--g)p[g]=p[g+1]*l[g+1]}const m=Qt(n,s*a);for(let g=0;g<s;++g){let y=0;for(let v=0;v<f;++v)y+=t[g*f+v]*h[v];for(let v=0;v<a;++v)m[g*a+v]=Math.trunc(y/p[v]),y%=p[v]}return[m,[s,a],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IN(t,e,n,r,o,i=!1,s=0){const a=r.length,l=[e[0],t.length/e[0]],u=l[1],d=a>0?o[a-1]+1:0;if(d<0)throw new Error(ck());const f=e.slice();f[0]=d;const h=f.reduce((x,b)=>x*b,1),p=Qt(n,h);if(a===0)return d>0&&p.fill(s),[p,f];if(d<=0)throw new Error(ck());let m=0,g=1,y=0,v=o[m];for(;;){let x=0;if(g<a){if(x=o[g],v===x){++g;continue}if(v>=x)throw new Error(gG())}if(v<0||v>=d)throw new Error(yG(v,d));v>y&&p.fill(s,y*u,v*u);for(let b=m;b<g;++b){const w=r[b];if(w<0||w>=l[0])throw new Error(vG(b,r[b],l[0]));for(let S=0;S<u;S++)p[v*u+S]+=t[w*u+S]}if(i)for(let b=0;b<u;b++)p[v*u+b]/=g-m;if(m=g,++g,y=v+1,v=x,g>a)break}return y<d&&p.fill(s,y*u,d*u),[p,f]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CDe=hs(t=>Math.sqrt(t)),$De=pt(Hm,t=>Math.sqrt(t)),kDe={kernelName:Hm,backendName:"cpu",kernelFunc:$De};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w6=nn((t,e)=>{const n=t-e;return n*n}),IDe=vn(Km,w6),TDe={kernelName:Km,backendName:"cpu",kernelFunc:IDe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S6=hs((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:o}=e;return t.replace(new RegExp(n,r?"g":""),o)}),EDe=Sl(LE,S6),NDe={kernelName:LE,backendName:"cpu",kernelFunc:EDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C6(t,e,n,r){const o=Ve(t,e.dtype);for(let i=0;i<o.size;i++){const s=o.indexToLoc(i),a=new Array(s.length);for(let l=0;l<a.length;l++)a[l]=s[l]*n[l]+r[l];o.set(e.get(...a),...s)}return o}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ADe{constructor(e,n,r,o,i,s){this.separator=Ba(e),this.nGramWidths=n,this.leftPad=Ba(r),this.rightPad=Ba(o),this.padWidth=i,this.preserveShort=s}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,o,i,s){for(let a=0;a<i;++a){const l=this.getPadWidth(s),u=Math.max(0,l-a),c=Math.max(0,l-(i-(a+1))),d=s-(u+c),f=n+(u>0?0:a-l);let h=0;h+=u*this.leftPad.length;for(let v=0;v<d;++v)h+=e[f+v].length;h+=c*this.rightPad.length;const p=u+c+d-1;h+=p*this.separator.length,r[o+a]=new Uint8Array(h);const m=r[o+a];let g=0;const y=v=>v.forEach(x=>m[g++]=x);for(let v=0;v<u;++v)y(this.leftPad),y(this.separator);for(let v=0;v<d-1;++v)y(e[f+v]),y(this.separator);if(d>0){y(e[f+d-1]);for(let v=0;v<c;++v)y(this.separator),y(this.rightPad)}else{for(let v=0;v<c-1;++v)y(this.rightPad),y(this.separator);y(this.rightPad)}}}compute(e,n){const r=e.length,o=n.length;if(o>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let u=1;u<o;++u){let c=n[u]>=l;if(c=c&&n[u]<=r,!c)throw new Error(`Invalid split value ${n[u]}, must be in [${l}, ${r}]`);l=n[u]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const i=o-1,s=Qt("int32",o);if(r===0||o===0){const l=new Array(r);for(let u=0;u<=i;++u)s[u]=0;return[l,s]}s[0]=0;for(let l=1;l<=i;++l){const u=n[l]-n[l-1];let c=0;this.nGramWidths.forEach(d=>{c+=this.getNumNGrams(u,d)}),this.preserveShort&&u>0&&c===0&&(c=1),s[l]=s[l-1]+c}const a=new Array(s[i]);for(let l=0;l<i;++l){const u=n[l];let c=s[l];if(this.nGramWidths.forEach(d=>{const f=n[l+1]-n[l],h=this.getNumNGrams(f,d);this.createNGrams(e,u,a,c,h,d),c+=h}),this.preserveShort&&c===s[l]){const d=n[l+1]-n[l];if(d===0)continue;const f=d+2*this.padWidth;this.createNGrams(e,u,a,c,1,f)}}return[a,s]}}function $6(t,e,n,r,o,i,s,a){return new ADe(n,r,o,i,s,a).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ODe(t,e,n,r){if(!t.length)return;if(e.length===0){for(let i=0;i<t.length;++i)r.push(t.subarray(i,i+1));return}if(e.length===1){const i=e[0];let s=t.indexOf(i);for(;s!==-1;){const a=t.subarray(0,s);(!n||a.length!==0)&&r.push(a),t=t.subarray(s+1),s=t.indexOf(i)}(!n||t.length!==0)&&r.push(t);return}let o=0;for(let i=0;i<t.length+1;i++)if(i===t.length||e.indexOf(t[i])!==-1){const s=t.subarray(o,i);(!n||s.length!==0)&&r.push(s),o=i+1}}function k6(t,e,n){const r=t.length,o=[];let i=0,s=0;const a=new Array(r);for(let f=0;f<r;++f){const h=o.length;ODe(t[f],e,n,o);const p=o.length-h;a[f]=p,i+=p,s=Math.max(s,p)}const l=Qt("int32",i*2),u=new Array(i),c=[r,s];let d=0;for(let f=0;f<r;++f)for(let h=0;h<a[f];++h)l[d*2]=f,l[d*2+1]=h,u[d]=o[d],++d;return[l,u,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I6(t,e){const n=Qt("int32",t.length);for(let r=0;r<t.length;++r)n[r]=dke(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T6=nn((t,e)=>t-e),_De=SN((t,e,n,r)=>({real:t-n,imag:e-r})),TN=vn(qm,T6,_De),RDe={kernelName:qm,backendName:"cpu",kernelFunc:TN};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E6(t,e){const n=new Array(t.rank);for(let o=0;o<n.length;o++)n[o]=t.shape[o]*e[o];const r=Ve(n,t.dtype);for(let o=0;o<r.values.length;++o){const i=r.indexToLoc(o),s=new Array(t.rank);for(let l=0;l<s.length;l++)s[l]=i[l]%t.shape[l];const a=t.locToIndex(s);r.values[o]=t.values[a]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nh=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function N6(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const a=r-n+1,l=e-n+1,u=Math.log(a),c=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*c*(a-c)/a)*Math.sign(l-a/2),f=Math.max(n,Math.floor(e-l*c/a+d)),h=Math.min(r,Math.floor(e+(a-l)*c/a+d));N6(t,e,f,h)}const o=t[e];let i=n,s=r;for(ac(t,n,e),nh(t[r],o)>0&&ac(t,n,r);i<s;){for(ac(t,i,s),i++,s--;nh(t[i],o)<0;)i=i+1;for(;nh(t[s],o)>0;)s=s-1}nh(t[n],o)===0?ac(t,n,s):(s=s+1,ac(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}}function A6(t,e,n,r,o){const i=e[e.length-1],[s,a]=[t.length/i,i],l=Un(n,s*r),u=Un("int32",s*r);for(let d=0;d<s;d++){const f=d*a,h=t.subarray(f,f+a);let p=new Array(h.length);h.forEach((v,x)=>p[x]={value:v,index:x}),r<p.length&&(N6(p,r),p=p.slice(0,r)),o&&p.sort(nh);const m=d*r,g=l.subarray(m,m+r),y=u.subarray(m,m+r);for(let v=0;v<r;v++)g[v]=p[v].value,y[v]=p[v].index}const c=e.slice();return c[c.length-1]=r,[Ve(c,n,l),Ve(c,"int32",u)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O6(t,e,n,r){const o=Ue(e,n)[0],i=[1,n[0],1];for(let p=0;p<o;p++)i[0]*=n[p];i[1]=n[o];for(let p=o+1;p<n.length;p++)i[2]*=n[p];const s=new Map,a=new Int32Array(n[o]),l=new Pn(i,r,t),u=[],c=i[0]===1&&i[2]===1;for(let p=0;p<n[o];p++){let m;if(c)m=t[p].toString();else{const y=[];for(let v=0;v<i[0];v++)for(let x=0;x<i[2];x++)y.push(l.get(v,p,x));m=y.join(",")}const g=s.get(m);if(g!=null)a[p]=g;else{const y=s.size;s.set(m,y),a[p]=y,u.push(p)}}const d=i.slice();d[1]=s.size;const f=new Pn(d,r);u.forEach((p,m)=>{for(let g=0;g<i[0];g++)for(let y=0;y<i[2];y++)f.set(l.get(g,p,y),g,m,y)});const h=n.slice();return h[o]=d[1],{outputValues:f.values,outputShape:h,indices:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PDe=Object.freeze(Object.defineProperty({__proto__:null,addImpl:zH,bincountImpl:CN,bincountReduceImpl:jH,bitwiseAndImpl:WH,castImpl:BH,ceilImpl:VH,concatImpl:UH,equalImpl:GH,expImpl:KH,expm1Impl:XH,floorDivImpl:QH,floorImpl:YH,gatherNdImpl:ZH,gatherV2Impl:JH,greaterEqualImpl:t6,greaterImpl:e6,lessEqualImpl:r6,lessImpl:n6,linSpaceImpl:o6,logImpl:i6,maxImpl:s6,maximumImpl:a6,minimumImpl:l6,multiplyImpl:$N,negImpl:u6,notEqualImpl:c6,prodImpl:d6,raggedGatherImpl:f6,raggedRangeImpl:h6,raggedTensorToTensorImpl:p6,rangeImpl:m6,rsqrtImpl:g6,scatterImpl:Kl,sigmoidImpl:bDe,simpleAbsImpl:LH,sliceImpl:v6,sparseFillEmptyRowsImpl:x6,sparseReshapeImpl:b6,sparseSegmentReductionImpl:IN,sqrtImpl:CDe,squaredDifferenceImpl:w6,staticRegexReplaceImpl:S6,stridedSliceImpl:C6,stringNGramsImpl:$6,stringSplitImpl:k6,stringToHashBucketFastImpl:I6,subImpl:T6,tileImpl:E6,topKImpl:A6,transposeImpl:kN,uniqueImpl:O6},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */YV("cpu",()=>new N1,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _6=pt(ym,t=>t>=0?t:Math.exp(t)-1),DDe={kernelName:ym,backendName:"cpu",kernelFunc:_6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R6(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{alpha:i}=r;Ie([o],"leakyRelu");const s=re(o.shape),a=n.data.get(o.dataId).values,l=Un("float32",s);for(let u=0;u<a.length;u++)l[u]=a[u]<0?i*a[u]:a[u];return n.makeTensorInfo(o.shape,"float32",l)}const MDe={kernelName:kb,backendName:"cpu",kernelFunc:R6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FDe=nn((t,e)=>t<0?e*t:t);function P6(t){const{inputs:e,backend:n}=t,{x:r,alpha:o}=e;Ie([r,o],"prelu");const i=n.data.get(r.dataId).values,s=n.data.get(o.dataId).values,[a,l]=FDe(r.shape,o.shape,i,s,"float32");return n.makeTensorInfo(l,"float32",a)}const LDe={kernelName:Ub,backendName:"cpu",kernelFunc:P6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D6=pt(Mm,t=>Math.max(0,t)),BDe={kernelName:Mm,backendName:"cpu",kernelFunc:D6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M6=pt(Fm,t=>Math.min(Math.max(0,t),6)),zDe={kernelName:Fm,backendName:"cpu",kernelFunc:M6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M0(t,e,n,r,o){if(n==="linear")return cs({inputs:{x:e},backend:t});if(n==="relu")return D6({inputs:{x:e},backend:t});if(n==="elu")return _6({inputs:{x:e},backend:t});if(n==="relu6")return M6({inputs:{x:e},backend:t});if(n==="prelu")return P6({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return R6({inputs:{x:e},backend:t,attrs:{alpha:o}});if(n==="sigmoid")return y6({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kt(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{shape:i}=r,s=re(o.shape),a=tV(i,s),l=re(a);M(s===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${o.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`),n.incRef(o.dataId);const u=n.data.get(o.dataId);if(u.complexTensorInfos!=null){const c=u.complexTensorInfos.real,d=u.complexTensorInfos.imag;c.shape=a,d.shape=a}return{dataId:o.dataId,shape:a,dtype:o.dtype}}const jDe={kernelName:Hb,backendName:"cpu",kernelFunc:kt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F6(t){const{inputs:e,backend:n,attrs:r}=t,{a:o,b:i}=e,{transposeA:s,transposeB:a}=r;Ie([o,i],"matMul");const l=o.shape.length,u=i.shape.length,c=s?o.shape[l-2]:o.shape[l-1],d=a?i.shape[u-1]:i.shape[u-2],f=s?o.shape[l-1]:o.shape[l-2],h=a?i.shape[u-2]:i.shape[u-1],p=o.shape.slice(0,-2),m=i.shape.slice(0,-2),g=re(p),y=re(m),x=Fe(o.shape.slice(0,-2),i.shape.slice(0,-2)).concat([f,h]);M(c===d,()=>`Error in matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${o.shape} and ${i.shape} and transposeA=${s} and transposeB=${a} must match.`);const b=s?[g,c,f]:[g,f,c],w=a?[y,h,d]:[y,d,h],S=kt({inputs:{x:o},backend:n,attrs:{shape:b}}),$=kt({inputs:{x:i},backend:n,attrs:{shape:w}}),C=s?S.shape[1]:S.shape[2],k=s?S.shape[2]:S.shape[1],I=a?$.shape[1]:$.shape[2],T=Math.max(g,y),E=n.data.get(S.dataId).values,_=n.data.get($.dataId).values,N=Ne(S.shape),P=Ne($.shape),[F,L,A]=s?[N[0],1,N[1]]:[N[0],N[1],1],[O,j,V]=a?[1,P[1],P[0]]:[P[1],1,P[0]],z=k*I,U=Ve([T,k,I],S.dtype),Z=U.values,te=n.blockSize;for(let se=0;se<T;se++){const ue=se%g,ce=se%y;for(let Y=0;Y<k;Y+=te){const le=Math.min(Y+te,k);for(let oe=0;oe<I;oe+=te){const J=Math.min(oe+te,I);for(let be=0;be<C;be+=te){const me=Math.min(be+te,C);for(let ve=Y;ve<le;ve++)for(let pe=oe;pe<J;pe++){let Ee=0;for(let Ce=be;Ce<me;Ce++){const De=E[ue*F+ve*L+Ce*A],Me=_[Ce*O+pe*j+ce*V];Ee+=De*Me}Z[se*z+(ve*I+pe)]+=Ee}}}}}return n.disposeIntermediateTensorInfo(S),n.disposeIntermediateTensorInfo($),n.makeTensorInfo(x,U.dtype,U.values)}const WDe={kernelName:cb,backendName:"cpu",kernelFunc:F6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VDe(t){const{inputs:e,backend:n,attrs:r}=t,{a:o,b:i,bias:s,preluActivationWeights:a}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=r;let f,h,p;const m=[];f=F6({inputs:{a:o,b:i},attrs:{transposeA:l,transposeB:u},backend:n}),s&&(h=Fd({inputs:{a:f,b:s},backend:n}),m.push(f),f=h),c&&(p=M0(n,f,c,a,d),m.push(f),f=p);for(const y of m)n.disposeIntermediateTensorInfo(y);return f}const UDe={kernelName:m0,backendName:"cpu",kernelFunc:VDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GDe=pt(om,t=>Math.acos(t)),HDe={kernelName:om,backendName:"cpu",kernelFunc:GDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KDe=pt(im,t=>Math.acosh(t)),qDe={kernelName:im,backendName:"cpu",kernelFunc:KDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XDe(t){const{inputs:e,backend:n}=t,r=e;Ie(e,"addN");const o=r.map(a=>n.data.get(a.dataId).values),i=Ve(r[0].shape,r[0].dtype),s=i.values;for(let a=0;a<r.length;a++){const l=o[a];for(let u=0;u<s.length;u++)s[u]+=l[u]}return n.makeTensorInfo(i.shape,i.dtype,i.values)}const YDe={kernelName:rE,backendName:"cpu",kernelFunc:XDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:i,keepDims:s}=r;Ie(o,"all");const a=Ue(i,o.shape);let l=a;const u=Ut(l,o.shape.length);let c=o;u!=null&&(c=$r({inputs:{x:o},backend:n,attrs:{perm:u}}),l=en(l.length,o.shape.length)),Fn("all",l,c.shape.length);const[d,f]=Nn(c.shape,l),h=re(f),p=Gn(re(d),c.dtype),m=n.data.get(c.dataId).values;for(let y=0;y<p.length;++y){const v=y*h;let x=m[v];for(let b=0;b<h;++b){const w=m[v+b];x=x&&w}p[y]=x}u!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(d,c.dtype,p);if(s){const y=an(d,a),v=kt({inputs:{x:g},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(g),v}return g}const ZDe={kernelName:oE,backendName:"cpu",kernelFunc:QDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:i,keepDims:s}=r;Ie(o,"any");const a=Ue(i,o.shape);let l=a;const u=Ut(l,o.shape.length);let c=o;u!=null&&(c=$r({inputs:{x:o},backend:n,attrs:{perm:u}}),l=en(l.length,o.shape.length)),Fn("any",l,c.shape.length);const[d,f]=Nn(c.shape,l),h=re(f),p=Gn(re(d),c.dtype),m=n.data.get(c.dataId).values;for(let y=0;y<p.length;++y){const v=y*h;let x=m[v];for(let b=0;b<h;++b){const w=m[v+b];x=x||w}p[y]=x}u!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(d,c.dtype,p);if(s){const y=an(d,a),v=kt({inputs:{x:g},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(g),v}return g}const eMe={kernelName:iE,backendName:"cpu",kernelFunc:JDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:i}=r;Ie(o,"argMax");let s=Ue(i,o.shape);const a=Ut(s,o.shape.length);let l=o;const u=[];a!=null&&(l=$r({inputs:{x:o},backend:n,attrs:{perm:a}}),u.push(l),s=en(s.length,l.shape.length)),s=[s[0]],Fn("argMax",s,l.shape.length);const[c,d]=Nn(l.shape,s),f=re(c),h=Gn(f,"int32"),p=re(d),m=n.data.get(l.dataId).values;for(let g=0;g<h.length;++g){const y=g*p;let v=m[y],x=0;for(let b=0;b<p;++b){const w=m[y+b];w>v&&(v=w,x=b)}h[g]=x}return u.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(c,"int32",h)}const nMe={kernelName:sb,backendName:"cpu",kernelFunc:tMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:i}=r;Ie(o,"argMin");let s=Ue(i,o.shape);const a=Ut(s,o.shape.length);let l=o;const u=[];a!=null&&(l=$r({inputs:{x:o},backend:n,attrs:{perm:a}}),u.push(l),s=en(s.length,l.shape.length)),s=[s[0]],Fn("argMin",s,l.shape.length);const[c,d]=Nn(l.shape,s),f=re(c),h=Gn(f,"int32"),p=re(d),m=n.data.get(l.dataId).values;for(let g=0;g<h.length;++g){const y=g*p;let v=m[y],x=0;for(let b=0;b<p;++b){const w=m[y+b];w<v&&(v=w,x=b)}h[g]=x}return u.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(c,"int32",h)}const oMe={kernelName:ab,backendName:"cpu",kernelFunc:rMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iMe=pt(sm,t=>Math.asin(t)),sMe={kernelName:sm,backendName:"cpu",kernelFunc:iMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aMe=pt(am,t=>Math.asinh(t)),lMe={kernelName:am,backendName:"cpu",kernelFunc:aMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uMe=pt(lm,t=>Math.atan(t)),cMe={kernelName:lm,backendName:"cpu",kernelFunc:uMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dMe=nn((t,e)=>Math.atan2(t,e)),fMe=vn(cm,dMe),hMe={kernelName:cm,backendName:"cpu",kernelFunc:fMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pMe=pt(um,t=>Math.atanh(t)),mMe={kernelName:um,backendName:"cpu",kernelFunc:pMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EN(t,e,n,r,o,i){const s=o.strideHeight,a=o.strideWidth,l=o.dilationHeight,u=o.dilationWidth,c=o.effectiveFilterHeight,d=o.effectiveFilterWidth,f=o.padInfo.top,h=o.padInfo.left,p=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=Ve(o.outShape,n),g=m.values,y=o.outShape[1]*o.outShape[2]*o.outShape[3],v=o.outShape[2]*o.outShape[3],x=o.outShape[3];for(let b=0;b<o.batchSize;++b){const w=b*y,S=b*r[0];for(let $=0;$<o.inChannels;++$)for(let C=0;C<o.outHeight;++C){const k=C*s-f,I=Math.max(0,k),T=Math.min(o.inHeight,c+k),E=w+C*v;for(let _=0;_<o.outWidth;++_){const N=_*a-h,P=Math.max(0,N),F=Math.min(o.inWidth,d+N);let L=p,A=0,O=0;for(let V=I;V<T;V+=l){const z=S+V*r[1];for(let U=P;U<F;U+=u){const Z=z+U*r[2],te=t[Z+$];i==="max"&&te>L?L=te:i==="avg"&&(A+=te,O++)}if(isNaN(L))break}const j=E+_*x+$;g[j]=i==="avg"?A/O:L}}}return m}function L6(t,e,n,r,o=!1,i=!1){const s=Ve(r.outShape,"int32"),a=r.strideHeight,l=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterHeight,f=r.effectiveFilterWidth,h=r.padInfo.top,p=r.padInfo.left,m=Ve(e,n,t);for(let g=0;g<r.batchSize;++g)for(let y=0;y<r.inChannels;++y)for(let v=0;v<r.outHeight;++v){const x=v*a-h;let b=x;for(;b<0;)b+=u;const w=Math.min(r.inHeight,d+x);for(let S=0;S<r.outWidth;++S){const $=S*l-p;let C=$;for(;C<0;)C+=c;const k=Math.min(r.inWidth,f+$);let I=Number.NEGATIVE_INFINITY,T=-1;for(let E=b;E<w;E+=u){const _=E-x;for(let N=C;N<k;N+=c){const P=N-$,F=m.get(g,E,N,y);F>I&&(I=F,o?T=i?((g*r.inHeight+E)*r.inWidth+N)*r.inChannels+y:(E*r.inWidth+N)*r.inChannels+y:T=_*f+P)}}s.set(T,g,v,S,y)}}return s}function B6(t,e,n,r,o,i){const s=o.strideDepth,a=o.strideHeight,l=o.strideWidth,u=o.dilationDepth,c=o.dilationHeight,d=o.dilationWidth,f=o.effectiveFilterDepth,h=o.effectiveFilterHeight,p=o.effectiveFilterWidth,m=o.padInfo.front,g=o.padInfo.top,y=o.padInfo.left,v=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=Ve(o.outShape,n),b=x.values,w=o.outShape[1]*o.outShape[2]*o.outShape[3]*o.outShape[4],S=o.outShape[2]*o.outShape[3]*o.outShape[4],$=o.outShape[3]*o.outShape[4],C=o.outShape[4];for(let k=0;k<o.batchSize;++k){const I=k*w,T=k*r[0];for(let E=0;E<o.inChannels;++E)for(let _=0;_<o.outDepth;++_){const N=_*s-m;let P=N;for(;P<0;)P+=u;const F=Math.min(o.inDepth,f+N),L=I+_*S;for(let A=0;A<o.outHeight;++A){const O=A*a-g;let j=O;for(;j<0;)j+=c;const V=Math.min(o.inHeight,h+O),z=L+A*$;for(let U=0;U<o.outWidth;++U){const Z=U*l-y;let te=Z;for(;te<0;)te+=d;const se=Math.min(o.inWidth,p+Z),ue=z+U*C;let ce=v,Y=0,le=0;for(let J=P;J<F;J+=u){const be=T+J*r[1];for(let me=j;me<V;me+=c){const ve=be+me*r[2];for(let pe=te;pe<se;pe+=d){const Ee=ve+pe*r[3],Ce=t[Ee+E];if(i==="max"&&Ce>ce?ce=Ce:i==="avg"&&(Y+=Ce,le++),isNaN(ce))break}if(isNaN(ce))break}if(isNaN(ce))break}const oe=ue+E;b[oe]=i==="avg"?Y/Math.max(le,1):ce}}}}return x}function gMe(t,e){const n=Ve(e.outShape,"int32"),r=e.strideDepth,o=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,a=e.dilationHeight,l=e.dilationWidth,u=e.effectiveFilterDepth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,f=e.padInfo.front,h=e.padInfo.top,p=e.padInfo.left;for(let m=0;m<e.batchSize;++m)for(let g=0;g<e.inChannels;++g)for(let y=0;y<e.outDepth;++y){const v=y*r-f;let x=v;for(;x<0;)x+=s;const b=Math.min(e.inDepth,u+v);for(let w=0;w<e.outHeight;++w){const S=w*o-h;let $=S;for(;$<0;)$+=a;const C=Math.min(e.inHeight,c+S);for(let k=0;k<e.outWidth;++k){const I=k*i-p;let T=I;for(;T<0;)T+=l;const E=Math.min(e.inWidth,d+I);let _=Number.NEGATIVE_INFINITY,N=-1;for(let P=x;P<b;P+=s){const F=P-v;for(let L=$;L<C;L+=a){const A=L-S;for(let O=T;O<E;O+=l){const j=O-I,V=t.get(m,P,L,O,g);V>=_&&(_=V,N=F*c*d+A*c+j)}}}n.set(N,m,y,w,k,g)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e;Ie(o,"avgPool");const{filterSize:i,strides:s,pad:a,dimRoundingMode:l}=r,u=1;M(Kn(s,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${u}'`);const c=Uo(o.shape,i,s,u,a,l);let d;if(c.filterWidth===1&&c.filterHeight===1&&ut(c.inShape,c.outShape))d=cs({inputs:{x:o},backend:n});else{const f=n.data.get(o.dataId).values,h=Ne(o.shape),p=EN(f,o.shape,o.dtype,h,c,"avg");d=n.makeTensorInfo(c.outShape,o.dtype,p.values)}return d}const vMe={kernelName:lb,backendName:"cpu",kernelFunc:yMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{filterSize:i,strides:s,pad:a,dimRoundingMode:l,dataFormat:u}=r;Ie(o,"avgPool3d");const c=Js(o.shape,i,s,1,a,l,u),d=n.data.get(o.dataId).values,f=B6(d,o.shape,o.dtype,Ne(o.shape),c,"avg");return n.makeTensorInfo(f.shape,"float32",f.values)}const bMe={kernelName:ub,backendName:"cpu",kernelFunc:xMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wMe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:i}=e,{filterSize:s,strides:a,pad:l,dimRoundingMode:u}=r;Ie([o,i],"avgPool3DGrad");const c=Js(i.shape,s,a,1,l,u),d=c.strideDepth,f=c.strideHeight,h=c.strideWidth,p=c.filterDepth,m=c.filterHeight,g=c.filterWidth,y=c.dilationDepth,v=c.dilationHeight,x=c.dilationWidth,b=c.effectiveFilterDepth,w=c.effectiveFilterHeight,S=c.effectiveFilterWidth,$=b-1-c.padInfo.front,C=S-1-c.padInfo.left,k=w-1-c.padInfo.top,I=Ve(i.shape,"float32"),T=1/(p*m*g),E=n.bufferSync(o);for(let _=0;_<c.batchSize;++_)for(let N=0;N<c.inChannels;++N)for(let P=0;P<c.inDepth;++P)for(let F=0;F<c.inHeight;++F)for(let L=0;L<c.inWidth;++L){const A=P-$,O=F-k,j=L-C;let V=0;for(let z=0;z<b;z+=y){const U=(A+z)/d;if(!(U<0||U>=c.outDepth||Math.floor(U)!==U))for(let Z=0;Z<w;Z+=v){const te=(O+Z)/f;if(!(te<0||te>=c.outHeight||Math.floor(te)!==te))for(let se=0;se<S;se+=x){const ue=(j+se)/h;if(ue<0||ue>=c.outWidth||Math.floor(ue)!==ue)continue;const ce=E.get(_,U,te,ue,N);V+=ce}}}I.set(V*T,_,P,F,L,N)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}const SMe={kernelName:aE,backendName:"cpu",kernelFunc:wMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CMe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:i}=e,s=i;Ie([o,i],"avgPoolGrad");const{filterSize:a,strides:l,pad:u}=r,c=Uo(s.shape,a,l,1,u),d=c.strideHeight,f=c.strideWidth,h=c.filterHeight,p=c.filterWidth,m=c.dilationHeight,g=c.dilationWidth,y=c.effectiveFilterHeight,v=c.effectiveFilterWidth,x=v-1-c.padInfo.left,b=y-1-c.padInfo.top,w=Ve(s.shape,"float32"),S=1/(h*p),$=n.data.get(o.dataId).values,C=Ve(o.shape,"float32",$);for(let k=0;k<c.batchSize;++k)for(let I=0;I<c.inChannels;++I)for(let T=0;T<c.inHeight;++T)for(let E=0;E<c.inWidth;++E){const _=T-b,N=E-x;let P=0;for(let F=0;F<y;F+=m){const L=(_+F)/d;if(!(L<0||L>=c.outHeight||Math.floor(L)!==L))for(let A=0;A<v;A+=g){const O=(N+A)/f;if(O<0||O>=c.outWidth||Math.floor(O)!==O)continue;const j=C.get(k,L,O,I);P+=j}}w.set(P*S,k,T,E,I)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const $Me={kernelName:sE,backendName:"cpu",kernelFunc:CMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,scale:i,offset:s,mean:a,variance:l}=e;M(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),M(s==null||a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),M(i==null||a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Ie([o,a,l,i,s],"batchNorm");let{varianceEpsilon:u}=r;u==null&&(u=.001);const c=n.data.get(o.dataId).values,d=n.data.get(a.dataId).values,f=n.data.get(l.dataId).values,h=i?n.data.get(i.dataId).values:new Float32Array([1]),p=s?n.data.get(s.dataId).values:new Float32Array([0]),m=new Float32Array(c.length),g=p.length,y=h.length,v=f.length,x=d.length;let b=0,w=0,S=0,$=0;for(let C=0;C<c.length;++C)m[C]=p[b++]+(c[C]-d[w++])*h[S++]/Math.sqrt(f[$++]+u),b>=g&&(b=0),w>=x&&(w=0),S>=y&&(S=0),$>=v&&($=0);return n.makeTensorInfo(o.shape,o.dtype,m)}const IMe={kernelName:Sb,backendName:"cpu",kernelFunc:kMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{blockShape:i,crops:s}=r;Ie([o],"batchToSpaceND");const a=i.reduce((y,v)=>y*v),l=og(o.shape,i,a),u=ig(l.length,i.length),c=sg(o.shape,i,a),d=L2(s,i.length),f=B2(c,s,i.length),h=kt({inputs:{x:o},backend:n,attrs:{shape:l}}),p=$r({inputs:{x:h},backend:n,attrs:{perm:u}}),m=kt({inputs:{x:p},backend:n,attrs:{shape:c}}),g=Ou({inputs:{x:m},backend:n,attrs:{begin:d,size:f}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}const EMe={kernelName:db,backendName:"cpu",kernelFunc:TMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,weights:i}=e,{size:s}=r,a=n.data.get(o.dataId).values,l=n.data.get(i.dataId).values,u=CN(a,l,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,u)}const AMe={kernelName:lE,backendName:"cpu",kernelFunc:NMe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OMe(t){const{inputs:e,backend:n}=t,{s0:r,s1:o}=e,i=n.data.get(r.dataId).values,s=n.data.get(o.dataId).values,a=Fe(Array.from(i),Array.from(s));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const _Me={kernelName:aV,backendName:"cpu",kernelFunc:OMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RMe=pt(hm,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),PMe={kernelName:hm,backendName:"cpu",kernelFunc:RMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DMe=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(re(e.shape)),o=n.data.get(e.dataId),i=o.complexTensorInfos.real,s=o.complexTensorInfos.imag,a=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values;for(let u=0;u<a.length;u++){const c=a[u],d=l[u];r[u]=Math.hypot(c,d)}return n.makeOutput(r,e.shape,"float32")},MMe={kernelName:fb,backendName:"cpu",kernelFunc:DMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ld(t){const{inputs:e,backend:n}=t,{input:r}=e,o=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(o.dataId).values;return n.makeTensorInfo(o.shape,o.dtype,i)}const FMe={kernelName:IE,backendName:"cpu",kernelFunc:Ld};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bd(t){const{inputs:e,backend:n,attrs:r}=t,{axis:o}=r,i=Ue(o,e[0].shape)[0],s=e.map(m=>m.shape);D2(s,i);let a=ts(e.map(m=>m.shape),i);if(re(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(m=>re(m.shape)>0);if(l.length===1)return cs({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const m=l.map(b=>Au({inputs:{input:b},backend:n})),g=l.map(b=>Ld({inputs:{input:b},backend:n})),y=Bd({inputs:m,backend:n,attrs:{axis:i}}),v=Bd({inputs:g,backend:n,attrs:{axis:i}}),x=Pr({inputs:{real:y,imag:v},backend:n});return m.forEach(b=>n.disposeIntermediateTensorInfo(b)),g.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),x}const u=l.map(m=>{const y=[-1,re(m.shape.slice(i))];return kt({inputs:{x:m},backend:n,attrs:{shape:y}})}),c=u.map(m=>({vals:n.data.get(m.dataId).values,shape:m.shape}));a=ts(u.map(m=>m.shape),1);const d=u[0].shape[0]===1,f=UH(c,a,e[0].dtype,d),h=ts(l.map(m=>m.shape),i),p=n.makeTensorInfo(h,e[0].dtype,f);return u.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const LMe={kernelName:hb,backendName:"cpu",kernelFunc:Bd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z6(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:i}=e,{strides:s,pad:a,dataFormat:l,dilations:u,dimRoundingMode:c}=r;Ie([o,i],"conv2d");const d=ea(l),f=Mn(o.shape,i.shape,s,u,a,c,!1,d),h=f.filterHeight,p=f.filterWidth,m=f.dilationHeight,g=f.dilationWidth,y=f.padInfo.left,v=f.padInfo.top,x=f.dataFormat==="channelsLast",b=new Pn(f.outShape,o.dtype),w=Ne(o.shape),S=Ne(i.shape),$=w[0],C=x?w[1]:w[2],k=x?w[2]:1,I=x?1:w[1],T=b.strides[0],E=x?b.strides[1]:b.strides[2],_=x?b.strides[2]:1,N=x?1:b.strides[1],P=n.data.get(o.dataId).values,F=n.data.get(i.dataId).values,L=b.values;for(let A=0;A<f.batchSize;++A){const O=A*$,j=A*T;for(let V=0;V<f.outHeight;++V){const z=j+V*E,U=V*f.strideHeight-v;for(let Z=0;Z<h;++Z){const te=U+Z*m;if(te<0||te>=f.inHeight)continue;const se=Z*S[0],ue=O+te*C;for(let ce=0;ce<f.outWidth;++ce){const Y=z+ce*_,le=ce*f.strideWidth-y;for(let oe=0;oe<p;++oe){const J=le+oe*g;if(J<0||J>=f.inWidth)continue;const be=se+oe*S[1],me=ue+J*k;let ve=be;for(let pe=0;pe<f.inChannels;++pe){const Ee=P[me+pe*I];for(let Ce=0;Ce<f.outChannels;++Ce)L[Y+Ce*N]+=Ee*F[ve+Ce];ve+=f.outChannels}}}}}}return n.makeTensorInfo(b.shape,b.dtype,L)}const BMe={kernelName:pb,backendName:"cpu",kernelFunc:z6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,dy:i}=e,{strides:s,pad:a,dataFormat:l,dimRoundingMode:u,filterShape:c}=r;Ie([o,i],"conv2dBackpropFilter");const d=ea(l),f=Mn(o.shape,c,s,1,a,u,!1,d),{strideHeight:h,strideWidth:p,filterHeight:m,filterWidth:g}=f,y=f.dataFormat==="channelsLast",v=new Pn(f.filterShape,"float32"),x=f.padInfo.left,b=f.padInfo.top,w=n.data.get(o.dataId).values,S=n.data.get(i.dataId).values,$=new Pn(o.shape,o.dtype,w),C=new Pn(i.shape,i.dtype,S);for(let k=0;k<m;++k){const I=Math.max(0,Math.ceil((b-k)/h)),T=Math.min(f.outHeight,(f.inHeight+b-k)/h);for(let E=0;E<g;++E){const _=Math.max(0,Math.ceil((x-E)/p)),N=Math.min(f.outWidth,(f.inWidth+x-E)/p);for(let P=0;P<f.inChannels;++P)for(let F=0;F<f.outChannels;++F){let L=0;for(let A=0;A<f.batchSize;++A)for(let O=I;O<T;++O){const j=k+O*h-b;for(let V=_;V<N;++V){const z=E+V*p-x;y?L+=$.get(A,j,z,P)*C.get(A,O,V,F):L+=$.get(A,P,j,z)*C.get(A,F,O,V)}}v.set(L,k,E,P,F)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const jMe={kernelName:dE,backendName:"cpu",kernelFunc:zMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WMe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,filter:i}=e,{inputShape:s,strides:a,pad:l,dataFormat:u,dimRoundingMode:c}=r;Ie([o,i],"conv2dBackpropInput");const d=Ne(i.shape),f=Ne(o.shape);let h=ea(u);const p=Mn(s,i.shape,a,1,l,c,!1,h),m=new Pn(p.inShape,"float32"),g=m.values,y=n.data.get(o.dataId).values,v=n.data.get(i.dataId).values,[x,b,w]=d,{batchSize:S,filterHeight:$,filterWidth:C,inChannels:k,inHeight:I,inWidth:T,outChannels:E,outHeight:_,outWidth:N,strideHeight:P,strideWidth:F}=p;h=p.dataFormat;const L=$-1-p.padInfo.top,A=C-1-p.padInfo.left,O=h==="channelsLast",j=m.strides[0],V=O?m.strides[1]:m.strides[2],z=O?m.strides[2]:1,U=O?1:m.strides[1],Z=f[0],te=O?f[1]:f[2],se=O?f[2]:1,ue=O?1:f[1];for(let ce=0;ce<S;++ce)for(let Y=0;Y<k;++Y)for(let le=0;le<I;++le){const oe=le-L,J=Math.max(0,Math.ceil(oe/P)),be=Math.min(_,($+oe)/P);for(let me=0;me<T;++me){const ve=me-A,pe=Math.max(0,Math.ceil(ve/F)),Ee=Math.min(N,(C+ve)/F);let Ce=0;for(let Me=J;Me<be;++Me){const mt=Me*P-oe;for(let Ye=pe;Ye<Ee;++Ye){const Ot=Ye*F-ve,rt=Z*ce+te*Me+se*Ye,_t=x*($-1-mt)+b*(C-1-Ot)+w*Y;for(let We=0;We<E;++We){const ct=y[rt+ue*We],ln=v[_t+We];Ce+=ct*ln}}}const De=j*ce+V*le+z*me+U*Y;g[De]=Ce}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const VMe={kernelName:mb,backendName:"cpu",kernelFunc:WMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:i}=e,{strides:s,pad:a,dilations:l}=r;Ie([o,i],"conv3d");const u=gl(o.shape,i.shape,s,l,a),{filterDepth:c,filterHeight:d,filterWidth:f,dilationDepth:h,dilationHeight:p,dilationWidth:m,padInfo:g}=u,y=g.front,v=g.left,x=g.top,b=new Pn(u.outShape,o.dtype),w=n.data.get(o.dataId).values,S=n.data.get(i.dataId).values,$=b.values,C=Ne(o.shape),k=Ne(i.shape);for(let I=0;I<u.batchSize;++I){const T=I*C[0],E=I*b.strides[0];for(let _=0;_<u.outDepth;++_){const N=E+_*b.strides[1],P=_*u.strideDepth-y;for(let F=0;F<c;++F){const L=P+F*h;if(L<0||L>=u.inDepth)continue;const A=F*k[0],O=T+L*C[1];for(let j=0;j<u.outHeight;++j){const V=N+j*b.strides[2],z=j*u.strideHeight-x;for(let U=0;U<d;++U){const Z=z+U*p;if(Z<0||Z>=u.inHeight)continue;const te=A+U*k[1],se=O+Z*C[2];for(let ue=0;ue<u.outWidth;++ue){const ce=V+ue*u.outChannels,Y=ue*u.strideWidth-v;for(let le=0;le<f;++le){const oe=Y+le*m;if(oe<0||oe>=u.inWidth)continue;const J=te+le*k[2],be=se+oe*u.inChannels;let me=J;for(let ve=0;ve<u.inChannels;++ve){const pe=w[be+ve];for(let Ee=0;Ee<u.outChannels;++Ee)$[ce+Ee]+=pe*S[me+Ee];me+=u.outChannels}}}}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const GMe={kernelName:gb,backendName:"cpu",kernelFunc:UMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,dy:i}=e,{strides:s,pad:a,filterShape:l}=r;Ie([o,i],"conv3dBackpropFilterV2");const u=Ne(o.shape),c=Ne(i.shape),d=gl(o.shape,l,s,1,a),f=d.strideDepth,h=d.strideHeight,p=d.strideWidth,m=d.filterDepth,g=d.filterHeight,y=d.filterWidth,v=new Pn(d.filterShape,"float32"),x=v.values,[b,w,S,$]=v.strides,C=n.data.get(i.dataId).values,[k,I,T,E]=c,_=n.data.get(o.dataId).values,[N,P,F,L]=u,A=d.padInfo.front,O=d.padInfo.left,j=d.padInfo.top;for(let V=0;V<m;++V){const z=Math.max(0,Math.ceil((A-V)/f)),U=Math.min(d.outDepth,(d.inDepth+A-V)/f),Z=V*b;for(let te=0;te<g;++te){const se=Math.max(0,Math.ceil((j-te)/h)),ue=Math.min(d.outHeight,(d.inHeight+j-te)/h),ce=te*w+Z;for(let Y=0;Y<y;++Y){const le=Math.max(0,Math.ceil((O-Y)/p)),oe=Math.min(d.outWidth,(d.inWidth+O-Y)/p),J=Y*S+ce;for(let be=0;be<d.inChannels;++be){const me=be*$+J;for(let ve=0;ve<d.outChannels;++ve){let pe=0;for(let Ee=0;Ee<d.batchSize;++Ee){const Ce=Ee*N,De=Ee*k;for(let Me=z;Me<U;++Me){const Ye=(V+Me*f-A)*P+Ce,Ot=Me*I+De;for(let rt=se;rt<ue;++rt){const We=(te+rt*h-j)*F+Ye,ct=rt*T+Ot;for(let ln=le;ln<oe;++ln){const qo=(Y+ln*p-O)*L+We,po=ln*E+ct;pe+=_[qo+be]*C[po+ve]}}}}x[me+ve]=pe}}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const KMe={kernelName:fE,backendName:"cpu",kernelFunc:HMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qMe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,filter:i}=e,{pad:s,strides:a,inputShape:l}=r;Ie([o],"conv3dBackpropInputV2");const u=Ne(o.shape),c=Ne(i.shape),d=gl(l,i.shape,a,1,s),f=new Pn(d.inShape,"float32"),h=f.values,[p,m,g,y]=f.strides,v=n.data.get(o.dataId).values,[x,b,w,S]=u,$=n.data.get(i.dataId).values,[C,k,I,T]=c,{batchSize:E,filterDepth:_,filterHeight:N,filterWidth:P,inChannels:F,inDepth:L,inHeight:A,inWidth:O,outChannels:j,outDepth:V,outHeight:z,outWidth:U,strideDepth:Z,strideHeight:te,strideWidth:se}=d,ue=_-1-d.padInfo.front,ce=N-1-d.padInfo.top,Y=P-1-d.padInfo.left;for(let le=0;le<E;++le)for(let oe=0;oe<F;++oe)for(let J=0;J<L;++J){const be=J-ue,me=Math.max(0,Math.ceil(be/Z)),ve=Math.min(V,(_+be)/Z);for(let pe=0;pe<A;++pe){const Ee=pe-ce,Ce=Math.max(0,Math.ceil(Ee/te)),De=Math.min(z,(N+Ee)/te);for(let Me=0;Me<O;++Me){const mt=Me-Y,Ye=Math.max(0,Math.ceil(mt/se)),Ot=Math.min(U,(P+mt)/se);let rt=0;for(let _t=me;_t<ve;++_t){const We=_t*Z-be;for(let ct=Ce;ct<De;++ct){const ln=ct*te-Ee;for(let Ko=Ye;Ko<Ot;++Ko){const qo=Ko*se-mt,po=x*le+b*_t+w*ct+S*Ko,hr=C*(_-1-We)+k*(N-1-ln)+I*(P-1-qo)+T*oe;for(let Ar=0;Ar<j;++Ar){const Xo=v[po+Ar],wg=$[hr+Ar];rt+=Xo*wg}}}}h[p*le+m*J+g*pe+y*Me+oe]=rt}}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}const XMe={kernelName:hE,backendName:"cpu",kernelFunc:qMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YMe=pt(pm,t=>Math.cos(t)),QMe={kernelName:pm,backendName:"cpu",kernelFunc:YMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZMe=pt(mm,t=>Math.cosh(t)),JMe={kernelName:mm,backendName:"cpu",kernelFunc:ZMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eFe(t){const{inputs:e,backend:n,attrs:r}=t,{image:o,boxes:i,boxInd:s}=e,{cropSize:a,method:l,extrapolationValue:u}=r,[c,d,f,h]=o.shape,p=i.shape[0],[m,g]=a,y=Ve([p,m,g,h],"float32"),v=n.data.get(i.dataId).values,x=n.data.get(s.dataId).values,b=n.data.get(o.dataId).values,w=Ne(o.shape),S=Ne(y.shape);for(let $=0;$<p;$++){const C=$*4,k=v[C],I=v[C+1],T=v[C+2],E=v[C+3],_=x[$];if(_>=c)continue;const N=m>1?(T-k)*(d-1)/(m-1):0,P=g>1?(E-I)*(f-1)/(g-1):0;for(let F=0;F<m;F++){const L=m>1?k*(d-1)+F*N:.5*(k+T)*(d-1);if(L<0||L>d-1){for(let A=0;A<g;A++)for(let O=0;O<h;O++){const j=O+A*S[2]+F*S[1]+$*S[0];y.values[j]=u}continue}if(l==="bilinear"){const A=Math.floor(L),O=Math.ceil(L),j=L-A;for(let V=0;V<g;V++){const z=g>1?I*(f-1)+V*P:.5*(I+E)*(f-1);if(z<0||z>f-1){for(let se=0;se<h;se++){const ue=se+V*S[2]+F*S[1]+$*S[0];y.values[ue]=u}continue}const U=Math.floor(z),Z=Math.ceil(z),te=z-U;for(let se=0;se<h;se++){let ue=se+U*w[2]+A*w[1]+_*w[0];const ce=b[ue];ue=se+Z*w[2]+A*w[1]+_*w[0];const Y=b[ue];ue=se+U*w[2]+O*w[1]+_*w[0];const le=b[ue];ue=se+Z*w[2]+O*w[1]+_*w[0];const oe=b[ue],J=ce+(Y-ce)*te,be=le+(oe-le)*te;ue=se+V*S[2]+F*S[1]+$*S[0],y.values[ue]=J+(be-J)*j}}}else for(let A=0;A<g;++A){const O=g>1?I*(f-1)+A*P:.5*(I+E)*(f-1);if(O<0||O>f-1){for(let z=0;z<h;z++){const U=z+A*S[2]+F*S[1]+$*S[0];y.values[U]=u}continue}const j=Math.round(O),V=Math.round(L);for(let z=0;z<h;z++){const U=z+j*w[2]+V*w[1]+_*w[0],Z=z+A*S[2]+F*S[1]+$*S[0];y.values[Z]=b[U]}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const tFe={kernelName:mE,backendName:"cpu",kernelFunc:eFe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:i,exclusive:s,reverse:a}=r;Ie(o,"cumprod");const l=Ut([i],o.shape.length);let u=o;l!=null&&(u=$r({inputs:{x:o},backend:n,attrs:{perm:l}}));const c=en(1,o.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const d=Vr(u.dtype,"int32"),f=eE(re(u.shape),d),h=n.data.get(u.dataId).values,p=u.shape[u.shape.length-1],m=a?(y,v)=>y+p-v-1:(y,v)=>y+v;for(let y=0;y<h.length;y+=p)for(let v=0;v<p;v++){const x=m(y,v);if(v===0)f[x]=s?1:h[x];else{const b=m(y,v-1);f[x]=s?h[b]*f[b]:h[x]*f[b]}}const g=n.makeTensorInfo(u.shape,d,f);if(l!=null){const y=yl(l),v=$r({inputs:{x:g},backend:n,attrs:{perm:y}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(u),v}return g}const rFe={kernelName:pE,backendName:"cpu",kernelFunc:nFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:i,exclusive:s,reverse:a}=r;Ie(o,"cumsum");const l=Ut([i],o.shape.length);let u=o;l!=null&&(u=$r({inputs:{x:o},backend:n,attrs:{perm:l}}));const c=en(1,o.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const d=Vr(u.dtype,"int32"),f=Gn(re(u.shape),d),h=n.data.get(u.dataId).values,p=u.shape[u.shape.length-1],m=a?(y,v)=>y+p-v-1:(y,v)=>y+v;for(let y=0;y<h.length;y+=p)for(let v=0;v<p;v++){const x=m(y,v);if(v===0)f[x]=s?0:h[x];else{const b=m(y,v-1);f[x]=s?h[b]+f[b]:h[x]+f[b]}}const g=n.makeTensorInfo(u.shape,d,f);if(l!=null){const y=yl(l),v=$r({inputs:{x:g},backend:n,attrs:{perm:y}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(u),v}return g}const iFe={kernelName:yb,backendName:"cpu",kernelFunc:oFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,weights:i}=e,{size:s,binaryOutput:a}=r;if(o.shape.length===1){const l=n.data.get(o.dataId).values,u=n.data.get(i.dataId).values,c=CN(l,u,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,c)}else if(o.shape.length===2){const l=n.bufferSync(o),u=n.bufferSync(i),c=jH(l,u,s,a);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}const aFe={kernelName:gE,backendName:"cpu",kernelFunc:sFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{blockSize:i,dataFormat:s}=r;M(s==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${s}`);const a=o.shape[0],l=o.shape[1],u=o.shape[2],c=o.shape[3],d=l*i,f=u*i,h=c/(i*i),p=n.data.get(o.dataId).values,m=new Float32Array(a*d*f*h);let g=0;for(let y=0;y<a;++y)for(let v=0;v<d;++v){const x=Math.floor(v/i),b=v%i;for(let w=0;w<f;++w){const S=Math.floor(w/i),$=w%i,C=(b*i+$)*h;for(let k=0;k<h;++k){const T=k+C+c*(S+u*(x+l*y));m[g++]=p[T]}}}return n.makeTensorInfo([a,d,f,h],o.dtype,m)}const uFe={kernelName:yE,backendName:"cpu",kernelFunc:lFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j6(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:i}=e,{strides:s,pad:a,dilations:l,dimRoundingMode:u}=r;Ie([o,i],"depthwiseConv2DNative");const c=Ne(o.shape),d=Ne(i.shape);let f=l;f==null&&(f=[1,1]),M(Kn(s,f),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${f}'`);const h=Mn(o.shape,i.shape,s,f,a,u,!0),{filterHeight:p,filterWidth:m,dilationHeight:g,dilationWidth:y,padInfo:v}=h,x=v.left,b=v.top,w=h.outChannels/h.inChannels,S=new Pn(h.outShape,o.dtype),$=n.data.get(o.dataId).values,C=n.data.get(i.dataId).values,k=S.values;for(let I=0;I<h.batchSize;++I){const T=I*c[0],E=I*S.strides[0];for(let _=0;_<h.outHeight;++_){const N=E+_*S.strides[1],P=_*h.strideHeight-b;for(let F=0;F<p;++F){const L=P+F*g;if(L<0||L>=h.inHeight)continue;const A=F*d[0],O=T+L*c[1];for(let j=0;j<h.outWidth;++j){const V=N+j*S.strides[2],z=j*h.strideWidth-x;for(let U=0;U<m;++U){const Z=z+U*y;if(Z<0||Z>=h.inWidth)continue;const te=A+U*d[1],se=O+Z*h.inChannels;let ue=V,ce=te;for(let Y=0;Y<h.inChannels;++Y){const le=$[se+Y];for(let oe=0;oe<w;++oe)k[ue+oe]+=le*C[ce+oe];ue+=w,ce+=w}}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const cFe={kernelName:vb,backendName:"cpu",kernelFunc:j6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,dy:i}=e,{strides:s,dilations:a,pad:l,dimRoundingMode:u,filterShape:c}=r;Ie([o,i],"depthwiseConv2dNativeBackpropFilter");const d=Mn(o.shape,c,s,a,l,u,!0),{strideHeight:f,strideWidth:h,filterHeight:p,filterWidth:m}=d,g=new Pn(d.filterShape,"float32"),y=d.padInfo.left,v=d.padInfo.top,x=d.outChannels/d.inChannels,b=n.data.get(o.dataId).values,w=new Pn(o.shape,o.dtype,b),S=n.data.get(i.dataId).values,$=new Pn(i.shape,i.dtype,S);for(let C=0;C<p;++C){const k=Math.max(0,Math.ceil((v-C)/f)),I=Math.min(d.outHeight,(d.inHeight+v-C)/f);for(let T=0;T<m;++T){const E=Math.max(0,Math.ceil((y-T)/h)),_=Math.min(d.outWidth,(d.inWidth+y-T)/h);for(let N=0;N<d.outChannels;++N){const P=Math.trunc(N/x),F=N%x;let L=0;for(let A=0;A<d.batchSize;++A)for(let O=k;O<I;++O){const j=C+O*f-v;for(let V=E;V<_;++V){const z=T+V*h-y;L+=w.get(A,j,z,P)*$.get(A,O,V,N)}}g.set(L,C,T,P,F)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const fFe={kernelName:vE,backendName:"cpu",kernelFunc:dFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hFe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,filter:i}=e,{strides:s,dilations:a,pad:l,dimRoundingMode:u,inputShape:c}=r;Ie([o,i],"depthwiseConv2DNativeBackpropInput");const d=Ne(o.shape),f=Ne(i.shape),h=Mn(c,i.shape,s,a,l,u,!0),p=new Pn(h.inShape,"float32"),m=p.values,[g,y,v]=p.strides,x=n.data.get(o.dataId).values,[b,w,S]=d,$=n.data.get(i.dataId).values,[C,k,I]=f,{batchSize:T,filterHeight:E,filterWidth:_,inChannels:N,inHeight:P,inWidth:F,outChannels:L,outHeight:A,outWidth:O,strideHeight:j,strideWidth:V}=h,z=E-1-h.padInfo.top,U=_-1-h.padInfo.left,Z=L/N;for(let te=0;te<T;++te)for(let se=0;se<N;++se)for(let ue=0;ue<P;++ue){const ce=ue-z,Y=Math.max(0,Math.ceil(ce/j)),le=Math.min(A,(E+ce)/j);for(let oe=0;oe<F;++oe){const J=oe-U,be=Math.max(0,Math.ceil(J/V)),me=Math.min(O,(_+J)/V);let ve=0;for(let pe=Y;pe<le;++pe){const Ee=pe*j-ce;for(let Ce=be;Ce<me;++Ce){const De=Ce*V-J,Me=b*te+w*pe+S*Ce,mt=C*(E-1-Ee)+k*(_-1-De)+I*se;for(let Ye=0;Ye<Z;++Ye){const Ot=se*Z+Ye,rt=x[Me+Ot],_t=$[mt+Ye];ve+=rt*_t}}}m[g*te+y*ue+v*oe+se]=ve}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const pFe={kernelName:xE,backendName:"cpu",kernelFunc:hFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mFe(t){const{inputs:e,backend:n}=t,{x:r}=e,o=re(r.shape),i=n.data.get(r.dataId).values,s=Ve([o,o],r.dtype),a=s.values;for(let u=0;u<i.length;u++)a[u*o+u]=i[u];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,s.dtype,s.values)}const gFe={kernelName:lV,backendName:"cpu",kernelFunc:mFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yFe={kernelName:xb,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:o}=t,{strides:i,pad:s,dilations:a}=n,l=e,u=l.data.get(r.dataId).values,c=r.shape.length,d=l.data.get(o.dataId).values,f=o.shape.length,{batchSize:h,inHeight:p,inWidth:m,inChannels:g,outHeight:y,outWidth:v,padInfo:x,strideHeight:b,strideWidth:w,filterHeight:S,filterWidth:$,dilationHeight:C,dilationWidth:k,outShape:I}=Jm(r.shape,o.shape,i,s,"NHWC",a),T=re(I),E=I.length,_=Qt(r.dtype,T);for(let P=0;P<h;++P)for(let F=0;F<y;++F){const L=F*b-x.top;for(let A=0;A<v;++A){const O=A*w-x.left;for(let j=0;j<g;++j){let V=Number.MIN_SAFE_INTEGER;for(let U=0;U<S;++U){const Z=L+U*C;if(Z>=0&&Z<p)for(let te=0;te<$;++te){const se=O+te*k;if(se>=0&&se<m){const ue=Ji([P,Z,se,j],c,Ne(r.shape)),ce=Ji([U,te,j],f,Ne(o.shape)),Y=u[ue]+d[ce];Y>V&&(V=Y)}}}const z=Ji([P,F,A,j],E,Ne(I));_[z]=V}}}return{dataId:l.write(Wu(_,r.dtype),I,r.dtype),shape:I,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vFe={kernelName:q$,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:o,dy:i}=t,{strides:s,pad:a,dilations:l}=n,u=e,c=bi(r.shape,u.data.get(r.dataId).values),d=bi(o.shape,u.data.get(o.dataId).values),{batchSize:f,inHeight:h,inWidth:p,inChannels:m,outHeight:g,outWidth:y,padInfo:v,strideHeight:x,strideWidth:b,filterHeight:w,filterWidth:S,dilationHeight:$,dilationWidth:C,outShape:k}=Jm(r.shape,o.shape,s,a,"NHWC",l);M(i.rank===k.length,()=>`Error in ${q$}, dy must have the same rank as output ${k.length}, but got ${i.rank}`);const I=bi(k,u.data.get(i.dataId).values),T=oV(o.shape,o.dtype);for(let _=0;_<f;++_)for(let N=0;N<g;++N){const P=N*x-v.top;for(let F=0;F<y;++F){const L=F*b-v.left;for(let A=0;A<m;++A){let O=Number.MIN_SAFE_INTEGER,j=0,V=0;for(let z=0;z<w;++z){const U=P+z*$;if(U>=0&&U<h)for(let Z=0;Z<S;++Z){const te=L+Z*C;if(te>=0&&te<p){const se=c[_][U][te][A]+d[z][Z][A];se>O&&(O=se,j=z,V=Z)}}}T[j][V][A]+=I[_][N][F][A]}}}return{dataId:u.write(Wu(T,r.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xFe={kernelName:K$,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:o,dy:i}=t,{strides:s,pad:a,dilations:l}=n,u=e,c=bi(r.shape,u.data.get(r.dataId).values),d=bi(o.shape,u.data.get(o.dataId).values),{batchSize:f,inHeight:h,inWidth:p,inChannels:m,outHeight:g,outWidth:y,padInfo:v,strideHeight:x,strideWidth:b,filterHeight:w,filterWidth:S,dilationHeight:$,dilationWidth:C,outShape:k}=Jm(r.shape,o.shape,s,a,"NHWC",l);M(i.rank===k.length,()=>`Error in ${K$}, dy must have the same rank as output ${k.length}, but got ${i.rank}`);const I=bi(k,u.data.get(i.dataId).values),T=oV(r.shape,r.dtype);for(let _=0;_<f;++_)for(let N=0;N<g;++N){const P=N*x-v.top;for(let F=0;F<y;++F){const L=F*b-v.left;for(let A=0;A<m;++A){let O=Number.MIN_SAFE_INTEGER,j=P<0?0:P,V=L<0?0:L;for(let z=0;z<w;++z){const U=P+z*$;if(U>=0&&U<h)for(let Z=0;Z<S;++Z){const te=L+Z*C;if(te>=0&&te<p){const se=c[_][U][te][A]+d[z][Z][A];se>O&&(O=se,j=U,V=te)}}}T[_][j][V][A]+=I[_][N][F][A]}}}return{dataId:u.write(Wu(T,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bFe(t){const{inputs:e,backend:n,attrs:r}=t,{image:o}=e,{canvas:i,options:s}=r,{contextOptions:a,imageOptions:l}=s||{},u=(l==null?void 0:l.alpha)||1,c=(a==null?void 0:a.contextType)||"2d";if(c!=="2d")throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);const d=i.getContext(c,(a==null?void 0:a.contextAttributes)||{});if(d==null)throw new Error(`Could not get the context with ${c} type.`);const[f,h]=o.shape.slice(0,2),p=o.shape.length===2?1:o.shape[2],m=n.data.get(o.dataId).values,g=o.dtype==="float32"?255:1,y=new Uint8ClampedArray(h*f*4);for(let x=0;x<f*h;++x){const b=[0,0,0,255*u];for(let S=0;S<p;S++){const $=m[x*p+S];if(o.dtype==="float32"){if($<0||$>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${$}.`)}else if(o.dtype==="int32"&&($<0||$>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${$}.`);p===1?(b[0]=$*g,b[1]=$*g,b[2]=$*g):b[S]=$*g}const w=x*4;y[w+0]=Math.round(b[0]),y[w+1]=Math.round(b[1]),y[w+2]=Math.round(b[2]),y[w+3]=Math.round(b[3])}i.width=h,i.height=f;const v=new ImageData(y,h,f);return d.putImageData(v,0,0),o}const wFe={kernelName:eke,backendName:"cpu",kernelFunc:bFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mg(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:i,keepDims:s}=r;Ie(o,"sum");let a;o.dtype==="bool"?a=ol({inputs:{x:o},backend:n,attrs:{dtype:"int32"}}):a=cs({inputs:{x:o},backend:n});const l=a.shape.length,u=Ue(i,a.shape),c=Ut(u,l);let d=u,f=a;c!=null&&(f=$r({inputs:{x:a},backend:n,attrs:{perm:c}}),d=en(d.length,l)),Fn("sum",d,f.shape.length);const[h,p]=Nn(f.shape,d),m=Vr(f.dtype,"int32");let g=P0(n,h,m);const y=re(p),v=n.data.get(g.dataId).values,x=n.data.get(f.dataId).values;for(let b=0;b<v.length;++b){const w=b*y;let S=0;for(let $=0;$<y;++$)S+=x[w+$];v[b]=S}if(s){const b=an(g.shape,u),w=g;g=kt({inputs:{x:g},backend:n,attrs:{shape:b}}),n.disposeIntermediateTensorInfo(w)}return n.disposeIntermediateTensorInfo(a),c!=null&&n.disposeIntermediateTensorInfo(f),g}const SFe={kernelName:Zb,backendName:"cpu",kernelFunc:mg};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CFe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:o}=r,i=e,{allDims:s,summedDims:a,idDims:l}=K2(o,i.length);X2(s.length,l,i);const{path:u,steps:c}=Y2(a,l),d=c.length;let f=null,h=s.length;const p=[];for(let m=0;m<d;++m){for(const g of c[m]){const{permutationIndices:y,expandDims:v}=q2(h,l[g]);let x;Q2(y)?x=i[g]:(x=$r({inputs:{x:i[g]},backend:n,attrs:{perm:y}}),p.push(x));const b=x.shape.slice();for(let w=0;w<v.length;++w)b.splice(v[w],0,1);ut(x.shape,b)||(x=kt({inputs:{x},backend:n,attrs:{shape:b}}),p.push(x)),f===null?f=x:(f=A1({inputs:{a:x,b:f},backend:n}),p.push(f))}m<d-1&&(u[m]>=0&&(f=mg({inputs:{x:f},backend:n,attrs:{axis:u[m]-(s.length-h),keepDims:!1}}),p.push(f)),h--)}for(const m of p)m!==f&&n.disposeIntermediateTensorInfo(m);return f}const $Fe={kernelName:bE,backendName:"cpu",kernelFunc:CFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kFe(t){const{inputs:e,backend:n}=t,{dy:r,y:o}=e;Ie([r,o],"eluGrad");const i=new Float32Array(re(o.shape)),s=n.data.get(o.dataId).values,a=n.data.get(r.dataId).values;for(let l=0;l<s.length;++l){const u=s[l];u>=0?i[l]=a[l]:i[l]=a[l]*(u+1)}return n.makeTensorInfo(o.shape,"float32",i)}const IFe={kernelName:wE,backendName:"cpu",kernelFunc:kFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TFe=z2,EFe=j2,NFe=W2,AFe=V2,OFe=U2,_Fe=G2,RFe=pt(vm,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+TFe*n);return e*(1-((((_Fe*r+OFe)*r+AFe)*r+NFe)*r+EFe)*r*Math.exp(-n*n))}),PFe={kernelName:vm,backendName:"cpu",kernelFunc:RFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F0(t){const{inputs:e,backend:n,attrs:r}=t,{input:o}=e,{dim:i}=r,s=o.shape.length,a=o.shape.slice();let l=i;return i<0&&(M(-(s+1)<=i,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),l=s+i+1),a.splice(l,0,1),kt({inputs:{x:o},backend:n,attrs:{shape:a}})}const DFe={kernelName:wb,backendName:"cpu",kernelFunc:F0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MFe=nn((t,e)=>t/e),NN=vn(gm,MFe),wk={kernelName:gm,backendName:"cpu",kernelFunc:NN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W6(t,e,n){const r=t.shape,o=r[0],i=r[1],s=n.data.get(t.dataId),a=s.complexTensorInfos.real,l=s.complexTensorInfos.imag,u=[o,i],c=re(u),d=Un("float32",c),f=Un("float32",c);for(let g=0;g<o;g++){const y=Ou({inputs:{x:a},backend:n,attrs:{begin:[g,0],size:[1,i]}}),v=Ou({inputs:{x:l},backend:n,attrs:{begin:[g,0],size:[1,i]}}),x=Pr({inputs:{real:y,imag:v},backend:n}),{real:b,imag:w}=FFe(x,e,n),S=Hs(b,w);for(let $=0;$<i;$++){const C=H2(S,$);d[g*i+$]=C.real,f[g*i+$]=C.imag}n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(x)}const h=n.makeTensorInfo(u,"float32",d),p=n.makeTensorInfo(u,"float32",f),m=Pr({inputs:{real:h,imag:p},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),m}function FFe(t,e,n){const r=re(t.shape),o=n.data.get(t.dataId),i=n.data.get(o.complexTensorInfos.real.dataId).values,s=n.data.get(o.complexTensorInfos.imag.dataId).values;if(LFe(r)){const a=Sk(i,s,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const u=n.makeTensorInfo(l,"float32",a.real),c=n.makeTensorInfo(l,"float32",a.imag),d=n.makeTensorInfo([],"float32",ml(r,"float32")),f=cs({inputs:{x:d},backend:n}),h=wk.kernelFunc({inputs:{a:u,b:d},backend:n}),p=wk.kernelFunc({inputs:{a:c,b:f},backend:n}),m=n.data.get(h.dataId).values,g=n.data.get(p.dataId).values;return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),{real:m,imag:g}}return a}else{const a=Hs(i,s),l=BFe(a,r,e);return nG(l)}}function LFe(t){return(t&t-1)===0}function Sk(t,e,n,r,o){if(n===1)return{real:t,imag:e};const i=Hs(t,e),s=n/2,a=rG(i),l=a.real,u=a.imag,c=[l.length],d=o.makeTensorInfo(c,"float32",l),f=o.makeTensorInfo(c,"float32",u),h=Pr({inputs:{real:d,imag:f},backend:o}),p=oG(i),m=p.real,g=p.imag,y=[m.length],v=o.makeTensorInfo(y,"float32",m),x=o.makeTensorInfo(y,"float32",g),b=Pr({inputs:{real:v,imag:x},backend:o}),w=Sk(l,u,s,r,o),S=w.real,$=w.imag,C=[S.length],k=o.makeTensorInfo(C,"float32",S),I=o.makeTensorInfo(C,"float32",$),T=Pr({inputs:{real:k,imag:I},backend:o}),E=Sk(m,g,s,r,o),_=E.real,N=E.imag,P=[_.length],F=o.makeTensorInfo(P,"float32",_),L=o.makeTensorInfo(P,"float32",N),A=Pr({inputs:{real:F,imag:L},backend:o}),O=sG(n,r),j=[O.real.length],V=o.makeTensorInfo(j,"float32",O.real),z=o.makeTensorInfo(j,"float32",O.imag),U=Pr({inputs:{real:V,imag:z},backend:o}),Z=A1({inputs:{a:U,b:A},backend:o}),te=Fd({inputs:{a:T,b:Z},backend:o}),se=TN({inputs:{a:T,b:Z},backend:o}),ue=Au({inputs:{input:te},backend:o}),ce=Au({inputs:{input:se},backend:o}),Y=Ld({inputs:{input:te},backend:o}),le=Ld({inputs:{input:se},backend:o}),oe=Bd({inputs:[ue,ce],backend:o,attrs:{axis:0}}),J=Bd({inputs:[Y,le],backend:o,attrs:{axis:0}}),be=o.data.get(oe.dataId).values,me=o.data.get(J.dataId).values;return o.disposeIntermediateTensorInfo(d),o.disposeIntermediateTensorInfo(f),o.disposeIntermediateTensorInfo(h),o.disposeIntermediateTensorInfo(v),o.disposeIntermediateTensorInfo(x),o.disposeIntermediateTensorInfo(b),o.disposeIntermediateTensorInfo(k),o.disposeIntermediateTensorInfo(I),o.disposeIntermediateTensorInfo(T),o.disposeIntermediateTensorInfo(F),o.disposeIntermediateTensorInfo(L),o.disposeIntermediateTensorInfo(A),o.disposeIntermediateTensorInfo(V),o.disposeIntermediateTensorInfo(z),o.disposeIntermediateTensorInfo(U),o.disposeIntermediateTensorInfo(Z),o.disposeIntermediateTensorInfo(te),o.disposeIntermediateTensorInfo(se),o.disposeIntermediateTensorInfo(ue),o.disposeIntermediateTensorInfo(Y),o.disposeIntermediateTensorInfo(ce),o.disposeIntermediateTensorInfo(le),o.disposeIntermediateTensorInfo(oe),o.disposeIntermediateTensorInfo(J),{real:be,imag:me}}function BFe(t,e,n){const r=new Float32Array(e*2);for(let o=0;o<e;o++){let i=0,s=0;for(let a=0;a<e;a++){const l=aG(o*a,e,n),u=H2(t,a);i+=u.real*l.real-u.imag*l.imag,s+=u.real*l.imag+u.imag*l.real}n&&(i/=e,s/=e),iG(r,i,s,o)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zFe(t){const{inputs:e,backend:n}=t,{input:r}=e,o=re(r.shape),i=r.shape[r.shape.length-1],s=o/i,a=kt({inputs:{x:r},backend:n,attrs:{shape:[s,i]}}),l=W6(a,!1,n),u=kt({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}const jFe={kernelName:SE,backendName:"cpu",kernelFunc:zFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AN(t){const{backend:e,attrs:n}=t,{shape:r,value:o,dtype:i}=n,s=i||af(o),a=Qt(s,re(r));return VFe(a,o,s),e.makeTensorInfo(r,s,a)}const WFe={kernelName:CE,backendName:"cpu",kernelFunc:AN};function VFe(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UFe={kernelName:$E,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,o=n,i=Un(r.dtype,re(r.shape)),[s,a,l,u]=r.shape,c=o.data.get(r.dataId).values;for(let f=0;f<s;f++){const h=f*l*a*u;for(let p=0;p<a;p++){const m=p*(l*u);for(let g=0;g<l;g++){const y=g*u;for(let v=0;v<u;v++){const x=Math.round(l-g-1),b=h+m+y+v;let w=c[b];if(x>=0&&x<l){const S=x*u,$=h+m+S+v;w=c[$]}i[b]=w}}}}return{dataId:o.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:i,bias:s,preluActivationWeights:a}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:p}=r;let m=z6({inputs:{x:o,filter:i},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:f}});if(s){const g=m;if(c==="NCHW"&&s.shape.length===1&&s.shape[0]!==1){const y=kt({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});m=Fd({inputs:{a:m,b:y},backend:n}),n.disposeIntermediateTensorInfo(y)}else m=Fd({inputs:{a:m,b:s},backend:n});n.disposeIntermediateTensorInfo(g)}if(h){const g=m;if(c==="NCHW"&&h==="prelu"&&a.shape.length===1&&a.shape[0]!==1){const y=kt({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});m=M0(n,m,h,y,p),n.disposeIntermediateTensorInfo(y)}else m=M0(n,m,h,a,p);n.disposeIntermediateTensorInfo(g)}return m}const HFe={kernelName:g0,backendName:"cpu",kernelFunc:GFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:i,bias:s,preluActivationWeights:a}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:p}=r;let m=j6({inputs:{x:o,filter:i},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:f}});if(s){const g=m;m=Fd({inputs:{a:m,b:s},backend:n}),n.disposeIntermediateTensorInfo(g)}if(h){const g=m;m=M0(n,m,h,a,p),n.disposeIntermediateTensorInfo(g)}return m}const qFe={kernelName:TV,backendName:"cpu",kernelFunc:KFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XFe(t){const{inputs:e,backend:n}=t,{params:r,indices:o}=e,i=re(r.shape),s=o.shape,a=s[s.length-1],[l,u,c,d]=N2(r,o);if(u===0)return n.makeTensorInfo(l,r.dtype,[]);const f=n.data.get(o.dataId).values,h=n.bufferSync(r),p=ZH(f,h,r.dtype,u,a,c,d,r.shape,i);return n.makeTensorInfo(l,r.dtype,p.values)}const YFe={kernelName:uV,backendName:"cpu",kernelFunc:XFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,indices:i}=e,{axis:s,batchDims:a}=r;Ie([o,i],"gatherV2");const l=Ue(s,o.shape)[0],u=n.data.get(i.dataId).values,c=o.shape[l];for(let b=0;b<u.length;++b){const w=u[b];M(w<=c-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${c-1}]`)}let d=a;a==null&&(d=0);const f=re(i.shape),h=J2(o,i,l,d),p=kt({inputs:{x:o},backend:n,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),m=kt({inputs:{x:i},backend:n,attrs:{shape:[h.batchSize,f/h.batchSize]}}),g=[h.batchSize,h.outerSize,f/h.batchSize,h.sliceSize],y=n.bufferSync(m),v=n.bufferSync(p),x=JH(v,y,g);return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(h.outputShape,x.dtype,x.values)}const ZFe={kernelName:Cb,backendName:"cpu",kernelFunc:QFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JFe(t){const{inputs:e,backend:n}=t,{input:r}=e,o=re(r.shape),i=r.shape[r.shape.length-1],s=o/i,a=kt({inputs:{x:r},backend:n,attrs:{shape:[s,i]}}),l=W6(a,!0,n),u=kt({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}const eLe={kernelName:kE,backendName:"cpu",kernelFunc:JFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tLe=pt(km,t=>Number.isFinite(t)?1:0,"bool"),nLe={kernelName:km,backendName:"cpu",kernelFunc:tLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rLe=pt(Im,t=>Math.abs(t)===1/0?1:0,"bool"),oLe={kernelName:Im,backendName:"cpu",kernelFunc:rLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iLe=pt(Tm,t=>Number.isNaN(t)?1:0,"bool"),sLe={kernelName:Tm,backendName:"cpu",kernelFunc:iLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aLe(t){const{backend:e,attrs:n}=t,{start:r,stop:o,num:i}=n,s=o6(r,o,i);return e.makeTensorInfo([s.length],"float32",s)}const lLe={kernelName:cV,backendName:"cpu",kernelFunc:aLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uLe=pt(Nm,t=>Math.log1p(t)),cLe={kernelName:Nm,backendName:"cpu",kernelFunc:uLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dLe=nn((t,e)=>t&&e),fLe=vn(Eb,dLe,null,"bool"),hLe={kernelName:Eb,backendName:"cpu",kernelFunc:fLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pLe=pt(Nb,t=>t?0:1,"bool"),mLe={kernelName:Nb,backendName:"cpu",kernelFunc:pLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gLe=nn((t,e)=>t||e),yLe=vn(Ab,gLe,null,"bool"),vLe={kernelName:Ab,backendName:"cpu",kernelFunc:yLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{depthRadius:i,bias:s,alpha:a,beta:l}=r;Ie(o,"LRN");const u=o.shape[3],c=u-1,d=n.data.get(o.dataId).values,f=re(o.shape),h=new Float32Array(f);function p(m){const g=m%u;let y=m-g+Math.max(0,g-i);const v=m-g+Math.min(g+i,c);let x=0;for(;y<=v;y++){const b=d[y];x+=b*b}return x}for(let m=0;m<f;m++){const g=p(m),y=d[m]*Math.pow(s+a*g,-l);h[m]=y}return n.makeTensorInfo(o.shape,o.dtype,h)}const bLe={kernelName:Ob,backendName:"cpu",kernelFunc:xLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,y:i,dy:s}=e,{depthRadius:a,bias:l,alpha:u,beta:c}=r;Ie(s,"LRNGrad");const d=re(s.shape),f=s.shape[3],h=n.data.get(s.dataId).values,p=n.data.get(o.dataId).values,m=n.data.get(i.dataId).values,g=new Float32Array(d),y=d;for(let v=0;v<y;v++){const x=v%f,b=v-x+Math.max(0,x-a),w=v-x+Math.min(f,x+a+1);let S=0;for(let $=b;$<w;$++)S+=Math.pow(p[$],2);S=u*S+l;for(let $=b;$<w;$++){let C=-2*u*c*p[$]*m[v]/S;v===$&&(C+=Math.pow(S,-c)),C*=h[v],g[$]+=C}}return n.makeTensorInfo(s.shape,o.dtype,g)}const SLe={kernelName:TE,backendName:"cpu",kernelFunc:wLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V6(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{reductionIndices:i,keepDims:s}=r,a=n;let l=o.shape;const u=l.length,c=Ue(i,l);let d=c;const f=Ut(d,u);let h=a.data.get(o.dataId).values;if(f!=null){const b=new Array(u);for(let w=0;w<b.length;w++)b[w]=l[f[w]];h=kN(h,l,o.dtype,f,b),d=en(d.length,u),l=b}Ie(o,"max"),Fn("max",d,u);const[p,m]=Nn(l,d),g=re(m),y=s6(h,g,p,o.dtype),v=a.write(y,p,o.dtype);let x=p;return s&&(x=an(p,c)),{dataId:v,shape:x,dtype:o.dtype}}const CLe={kernelName:_b,backendName:"cpu",kernelFunc:V6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Le(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e;Ie(o,"maxPool");const{filterSize:i,strides:s,pad:a,dimRoundingMode:l}=r,u=1;M(Kn(s,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${u}'`);const c=Uo(o.shape,i,s,u,a,l);let d;if(c.filterWidth===1&&c.filterHeight===1&&ut(c.inShape,c.outShape))d=cs({inputs:{x:o},backend:n});else{const f=n.data.get(o.dataId).values,h=Ne(o.shape),p=EN(f,o.shape,o.dtype,h,c,"max");d=n.makeTensorInfo(c.outShape,o.dtype,p.values)}return d}const kLe={kernelName:Rb,backendName:"cpu",kernelFunc:$Le};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ILe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{filterSize:i,strides:s,pad:a,dimRoundingMode:l,dataFormat:u}=r;Ie(o,"maxPool3d");const c=Js(o.shape,i,s,1,a,l,u),d=n.data.get(o.dataId).values,f=B6(d,o.shape,o.dtype,Ne(o.shape),c,"max");return n.makeTensorInfo(f.shape,"float32",f.values)}const TLe={kernelName:Pb,backendName:"cpu",kernelFunc:ILe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ELe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:i}=e,{filterSize:s,strides:a,pad:l,dimRoundingMode:u}=r;Ie([o,i],"maxPool3DGrad");const c=Js(i.shape,s,a,1,l,u),d=n.bufferSync(i),f=gMe(d,c),h=c.strideDepth,p=c.strideHeight,m=c.strideWidth,g=c.dilationDepth,y=c.dilationHeight,v=c.dilationWidth,x=c.effectiveFilterDepth,b=c.effectiveFilterHeight,w=c.effectiveFilterWidth,S=x-1-c.padInfo.front,$=w-1-c.padInfo.left,C=b-1-c.padInfo.top,k=Ve(i.shape,"float32"),I=n.bufferSync(o);for(let T=0;T<c.batchSize;++T)for(let E=0;E<c.inChannels;++E)for(let _=0;_<c.inDepth;++_)for(let N=0;N<c.inHeight;++N)for(let P=0;P<c.inWidth;++P){const F=_-S,L=N-C,A=P-$;let O=0;for(let j=0;j<x;j+=g){const V=(F+j)/h;if(!(V<0||V>=c.outDepth||Math.floor(V)!==V))for(let z=0;z<b;z+=y){const U=(L+z)/p;if(!(U<0||U>=c.outHeight||Math.floor(U)!==U))for(let Z=0;Z<w;Z+=v){const te=(A+Z)/m;if(te<0||te>=c.outWidth||Math.floor(te)!==te)continue;const se=x*b*w-1-f.get(T,V,U,te,E),ue=j*b*w+z*w+Z,ce=se===ue?1:0;if(ce===0)continue;const Y=I.get(T,V,U,te,E);O+=Y*ce}}}k.set(O,T,_,N,P,E)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const NLe={kernelName:NE,backendName:"cpu",kernelFunc:ELe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ALe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:i,output:s}=e,a=i;Ie([i,s],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=r,f=Uo(a.shape,l,u,1,c,d),h=n.data.get(a.dataId).values,p=Ve(f.outShape,a.dtype,L6(h,a.shape,a.dtype,f).values),m=f.strideHeight,g=f.strideWidth,y=f.dilationHeight,v=f.dilationWidth,x=f.effectiveFilterHeight,b=f.effectiveFilterWidth,w=b-1-f.padInfo.left,S=x-1-f.padInfo.top,$=Ve(a.shape,"float32"),C=n.data.get(o.dataId).values,k=Ve(o.shape,"float32",C);for(let I=0;I<f.batchSize;++I)for(let T=0;T<f.inChannels;++T)for(let E=0;E<f.inHeight;++E)for(let _=0;_<f.inWidth;++_){const N=E-S,P=_-w;let F=0;for(let L=0;L<x;L+=y){const A=(N+L)/m;if(!(A<0||A>=f.outHeight||Math.floor(A)!==A))for(let O=0;O<b;O+=v){const j=(P+O)/g;if(j<0||j>=f.outWidth||Math.floor(j)!==j)continue;const V=x*b-1-p.get(I,A,j,T),z=L*b+O,U=V===z?1:0;if(U===0)continue;const Z=k.get(I,A,j,T);F+=Z*U}}$.set(F,I,E,_,T)}return n.makeTensorInfo($.shape,$.dtype,$.values)}const OLe={kernelName:EE,backendName:"cpu",kernelFunc:ALe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Le(t,e,n,r,o){const i=Ne(e),s=EN(t,e,n,i,o,"max"),a=L6(t,e,n,o,!0,r);return[s.values,a.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RLe={kernelName:dV,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:o,strides:i,pad:s,includeBatchInIndex:a}=e,l=n;Ie(r,"MaxPoolWithArgmax");const u=l.data.get(r.dataId).values,c=Uo(r.shape,o,i,[1,1],s),[d,f]=_Le(u,r.shape,r.dtype,a,c),h=l.write(d,c.outShape,r.dtype),p=l.write(f,c.outShape,r.dtype);return[{dataId:h,shape:c.outShape,dtype:r.dtype},{dataId:p,shape:c.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:i,keepDims:s}=r,a=Ue(i,o.shape),u=Nn(o.shape,a)[1],c=re(u),d=[],f=n.makeTensorInfo([],"float32",new Float32Array([c]));d.push(f);const h=ol({inputs:{x:o},backend:n,attrs:{dtype:"float32"}});d.push(h);const p=NN({inputs:{a:h,b:f},backend:n});d.push(p);const m=mg({inputs:{x:p},backend:n,attrs:{axis:i,keepDims:s}});return d.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}const DLe={kernelName:Db,backendName:"cpu",kernelFunc:PLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:i,keepDims:s}=r;Ie(o,"min");const a=Ue(i,o.shape);let l=a;const u=Ut(l,o.shape.length);let c=o;u!=null&&(c=$r({inputs:{x:o},backend:n,attrs:{perm:u}}),l=en(l.length,o.shape.length)),Fn("min",l,c.shape.length);const[d,f]=Nn(c.shape,l),h=re(f),p=Gn(re(d),c.dtype),m=n.data.get(c.dataId).values;for(let y=0;y<p.length;++y){const v=y*h;let x=m[v];for(let b=0;b<h;++b){const w=m[v+b];(Number.isNaN(w)||w<x)&&(x=w)}p[y]=x}u!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(d,c.dtype,p);if(s){const y=an(d,a),v=kt({inputs:{x:g},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(g),v}return g}const FLe={kernelName:Mb,backendName:"cpu",kernelFunc:MLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{paddings:i,mode:s}=r;Ie(o,"mirrorPad");const a=i.map((x,b)=>x[0]+o.shape[b]+x[1]),l=i.map(x=>x[0]),u=i.map((x,b)=>x[0]+o.shape[b]),c=s==="reflect"?0:1,d=n.data.get(o.dataId).values,f=o.shape.length,h=Ne(o.shape),p=re(a),m=a.length,g=Ne(a),y=Un(o.dtype,p);for(let x=0;x<p;x++){let b=lf(x,m,g);for(let S=0;S<m;S++)b[S]<l[S]?b[S]=l[S]*2-b[S]-c:b[S]>=u[S]&&(b[S]=(u[S]-1)*2-b[S]+c);b=b.map((S,$)=>S-l[$]);const w=Ji(b,f,h);y[x]=d[w]}return{dataId:n.write(y,a,o.dtype),shape:a,dtype:o.dtype}}const BLe={kernelName:Fb,backendName:"cpu",kernelFunc:LLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zLe=nn((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),jLe=vn(_m,zLe),WLe={kernelName:_m,backendName:"cpu",kernelFunc:jLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U6(t){const{inputs:e,backend:n,attrs:r}=t,{logits:o}=e,{dim:i}=r,s=o.shape.length;let a=i;if(a===-1&&(a=s-1),a!==s-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${s} and dim was ${a}`);const l=Ue([a],o.shape),u=V6({inputs:{x:o},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),c=an(u.shape,l),d=kt({inputs:{x:u},backend:n,attrs:{shape:c}}),f=TN({inputs:{a:o,b:d},backend:n}),h=qH({inputs:{x:f},backend:n}),p=mg({inputs:{x:h},backend:n,attrs:{axis:l,keepDims:!1}}),m=kt({inputs:{x:p},backend:n,attrs:{shape:c}}),g=NN({inputs:{a:h,b:m},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}const VLe={kernelName:t1,backendName:"cpu",kernelFunc:U6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ULe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:o}=e,{numSamples:i,seed:s,normalized:a}=r;Ie(o,"multinomial");const l=a?o:U6({inputs:{logits:o},backend:n,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],d=n.data.get(l.dataId).values,f=[u,i],h=Gn(re(f),"int32");for(let p=0;p<u;++p){const m=p*c,g=new Float32Array(c-1);g[0]=d[m];for(let x=1;x<g.length;++x)g[x]=g[x-1]+d[m+x];const y=m2.alea(s.toString()),v=p*i;for(let x=0;x<i;++x){const b=y();h[v+x]=g.length;for(let w=0;w<g.length;w++)if(b<g[w]){h[v+x]=w;break}}}return a||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(f,"int32",h)}const GLe={kernelName:fV,backendName:"cpu",kernelFunc:ULe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HLe=$2;function KLe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:o,scores:i}=e,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l}=r;Ie(o,"NonMaxSuppression");const u=n.data.get(o.dataId).values,c=n.data.get(i.dataId).values,{selectedIndices:d}=HLe(u,c,s,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const qLe={kernelName:AE,backendName:"cpu",kernelFunc:KLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XLe=k2;function YLe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:o,scores:i}=e,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:u}=r;Ie(o,"NonMaxSuppressionPadded");const c=n.data.get(o.dataId).values,d=n.data.get(i.dataId).values,{selectedIndices:f,validOutputs:h}=XLe(c,d,s,a,l,u);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const QLe={kernelName:OE,backendName:"cpu",kernelFunc:YLe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZLe=I2;function JLe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:o,scores:i}=e,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,softNmsSigma:u}=r;Ie(o,"NonMaxSuppressionWithScore");const c=n.data.get(o.dataId).values,d=n.data.get(i.dataId).values,f=s,h=a,p=l,m=u,{selectedIndices:g,selectedScores:y}=ZLe(c,d,f,h,p,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}const e3e={kernelName:_E,backendName:"cpu",kernelFunc:JLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t3e(t){const{inputs:e,backend:n,attrs:r}=t,{indices:o}=e,{dtype:i,depth:s,onValue:a,offValue:l}=r;Ie(o,"oneHot");const u=re(o.shape),c=new Float32Array(u*s);c.fill(l);const d=n.data.get(o.dataId).values;for(let f=0;f<u;++f)d[f]>=0&&d[f]<s&&(c[f*s+d[f]]=a);return n.makeTensorInfo([...o.shape,s],i,c)}const n3e={kernelName:jb,backendName:"cpu",kernelFunc:t3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L0(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const o=Au({inputs:{input:r},backend:n}),i=L0({inputs:{x:o},backend:n}),s=Ld({inputs:{input:r},backend:n}),a=L0({inputs:{x:s},backend:n}),l=Pr({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),l}else return AN({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const r3e={kernelName:o1,backendName:"cpu",kernelFunc:L0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G6(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const o=Au({inputs:{input:r},backend:n}),i=G6({inputs:{x:o},backend:n}),s=Ld({inputs:{input:r},backend:n}),a=L0({inputs:{x:s},backend:n}),l=Pr({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),l}else return AN({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const o3e={kernelName:zb,backendName:"cpu",kernelFunc:G6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H6(t){const{inputs:e,backend:n,attrs:r}=t,{axis:o}=r;if(e.length===1)return F0({inputs:{input:e[0]},backend:n,attrs:{dim:o}});const i=e[0].shape,s=e[0].dtype;e.forEach(c=>{JT(i,c.shape,"All tensors passed to stack must have matching shapes"),M(s===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(c=>{const d=F0({inputs:{input:c},backend:n,attrs:{dim:o}});return a.push(d),d}),u=Bd({inputs:l,backend:n,attrs:{axis:o}});return a.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const i3e={kernelName:Wb,backendName:"cpu",kernelFunc:H6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{paddings:i,constantValue:s}=r;Ie(o,"pad");const a=i.map((v,x)=>v[0]+o.shape[x]+v[1]),l=i.map(v=>v[0]),u=n.data.get(o.dataId).values,c=re(o.shape),d=o.shape.length,f=Ne(o.shape),h=re(a),p=a.length,m=Ne(a),g=Un(o.dtype,h);s!==0&&g.fill(s);for(let v=0;v<c;v++){const b=lf(v,d,f).map((S,$)=>S+l[$]),w=Ji(b,p,m);g[w]=u[v]}return{dataId:n.write(g,a,o.dtype),shape:a,dtype:o.dtype}}const K6={kernelName:Vb,backendName:"cpu",kernelFunc:s3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a3e=nn((t,e)=>Math.pow(t,e)),l3e=vn(Pm,a3e),u3e={kernelName:Pm,backendName:"cpu",kernelFunc:l3e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c3e(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:o,paramsDenseValues:i,indices:s}=e,a=o.map(g=>n.data.get(g.dataId).values),l=o.map(g=>g.shape),u=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,[d,f,h]=f6(a,l,u,i.shape,i.dtype,c,s.shape),p=d.map(g=>n.makeTensorInfo([g.length],"int32",g)),m=n.makeTensorInfo(h,i.dtype,f);return p.concat([m])}const d3e={kernelName:hV,backendName:"cpu",kernelFunc:c3e};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f3e(t){const{inputs:e,backend:n}=t,{starts:r,limits:o,deltas:i}=e,s=n.data.get(r.dataId).values,a=n.data.get(o.dataId).values,l=n.data.get(i.dataId).values,[u,c]=h6(s,r.shape,r.dtype,a,o.shape,l,i.shape),d=n.makeTensorInfo([u.length],"int32",u),f=n.makeTensorInfo([c.length],r.dtype,c);return[d,f]}const h3e={kernelName:pV,backendName:"cpu",kernelFunc:f3e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p3e(t){const{inputs:e,backend:n,attrs:r}=t,{shape:o,values:i,defaultValue:s,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,u=n.data.get(o.dataId).values,c=n.data.get(i.dataId).values,d=n.data.get(s.dataId).values,f=a.map(g=>n.data.get(g.dataId).values),h=a.map(g=>g.shape),[p,m]=p6(u,o.shape,c,i.shape,i.dtype,d,s.shape,f,h,l);return n.makeTensorInfo(p,i.dtype,m)}const m3e={kernelName:mV,backendName:"cpu",kernelFunc:p3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g3e(t){const{backend:e,attrs:n}=t,{start:r,stop:o,dtype:i,step:s}=n,a=m6(r,o,s,i);return e.makeTensorInfo([a.length],i,a)}const y3e={kernelName:RE,backendName:"cpu",kernelFunc:g3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v3e=pt(Dm,t=>1/t),x3e={kernelName:Dm,backendName:"cpu",kernelFunc:v3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b3e(t){const{inputs:e,backend:n,attrs:r}=t,{images:o}=e,{alignCorners:i,halfPixelCenters:s,size:a}=r;Ie(o,"resizeBilinear");const l=Ne(o.shape),[u,c]=a,[d,f,h,p]=o.shape,m=n.data.get(o.dataId).values,g=new Float32Array(re([d,u,c,p])),y=[i&&u>1?f-1:f,i&&c>1?h-1:h],v=[i&&u>1?u-1:u,i&&c>1?c-1:c];let x=0;const b=y[0]/v[0],w=y[1]/v[1];for(let S=0;S<d;S++)for(let $=0;$<u;$++){let C;s?C=b*($+.5)-.5:C=b*$;const k=Math.max(0,Math.floor(C)),I=C-k,T=Math.min(f-1,Math.ceil(C)),E=S*l[0]+k*l[1],_=S*l[0]+T*l[1];for(let N=0;N<c;N++){let P;s?P=w*(N+.5)-.5:P=w*N;const F=Math.max(0,Math.floor(P)),L=P-F,A=Math.min(h-1,Math.ceil(P)),O=E+F*l[2],j=_+F*l[2],V=E+A*l[2],z=_+A*l[2];for(let U=0;U<p;U++){const Z=m[O+U],te=m[j+U],se=m[V+U],ue=m[z+U],ce=Z+(se-Z)*L,Y=te+(ue-te)*L,le=ce+(Y-ce)*I;g[x++]=le}}}return n.makeTensorInfo([d,u,c,p],"float32",g)}const w3e={kernelName:qb,backendName:"cpu",kernelFunc:b3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S3e(t){const{inputs:e,backend:n,attrs:r}=t,{images:o,dy:i}=e,{alignCorners:s}=r;Ie([i,o],"resizeBilinearGrad");const a=Ne(o.shape),[l,u,c,d]=o.shape,[,f,h]=i.shape,p=new Float32Array(l*u*c*d),m=[s&&f>1?u-1:u,s&&h>1?c-1:c],g=[s&&f>1?f-1:f,s&&h>1?h-1:h],y=m[0]/g[0],v=m[1]/g[1],x=n.data.get(i.dataId).values;let b=0;for(let w=0;w<l;w++){const S=w*a[0];for(let $=0;$<f;$++){const C=$*y,k=Math.floor(C),I=Math.min(Math.ceil(C),u-1),T=S+k*a[1],E=S+I*a[1],_=C-k,N=1-_;for(let P=0;P<h;P++){const F=P*v,L=Math.floor(F),A=Math.min(Math.ceil(F),c-1),O=F-L,j=1-O,V=T+L*a[2],z=T+A*a[2],U=E+L*a[2],Z=E+A*a[2],te=N*j,se=N*O,ue=_*j,ce=_*O;for(let Y=0;Y<d;Y++){const le=x[b++];p[V+Y]+=le*te,p[z+Y]+=le*se,p[U+Y]+=le*ue,p[Z+Y]+=le*ce}}}}return n.makeTensorInfo([l,c,u,d],"float32",p)}const C3e={kernelName:ME,backendName:"cpu",kernelFunc:S3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $3e(t){const{inputs:e,backend:n,attrs:r}=t,{images:o}=e,{alignCorners:i,halfPixelCenters:s,size:a}=r;Ie(o,"resizeNearestNeighbor");const l=Ne(o.shape),[u,c]=a,[d,f,h,p]=o.shape,m=n.data.get(o.dataId).values,g=new Float32Array(d*u*c*p),y=[i&&u>1?f-1:f,i&&c>1?h-1:h],v=[i&&u>1?u-1:u,i&&c>1?c-1:c],x=y[0]/v[0],b=y[1]/v[1];let w=0;for(let S=0;S<d;S++){const $=S*l[0];for(let C=0;C<u;C++){const k=s?x*(C+.5):x*C;let I=Math.min(f-1,i?Math.round(k):Math.floor(k));s&&(I=Math.max(0,I));const T=$+I*l[1];for(let E=0;E<c;E++){const _=s?b*(E+.5):b*E;let N=Math.min(h-1,i?Math.round(_):Math.floor(_));s&&(N=Math.max(0,N));const P=T+N*l[2];for(let F=0;F<p;F++){const L=m[P+F];g[w++]=L}}}}return n.makeTensorInfo([d,u,c,p],o.dtype,g)}const k3e={kernelName:Kb,backendName:"cpu",kernelFunc:$3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I3e(t){const{inputs:e,backend:n,attrs:r}=t,{images:o,dy:i}=e,{alignCorners:s}=r;Ie([i,o],"resizeNearestNeighborGrad");const a=Ne(o.shape),l=Ne(i.shape),[u,c,d,f]=o.shape,[,h,p]=i.shape,m=new Float32Array(u*c*d*f),g=n.data.get(i.dataId).values,y=[s&&h>1?c-1:c,s&&p>1?d-1:d],v=[s&&h>1?h-1:h,s&&p>1?p-1:p],x=y[0]/v[0],b=y[1]/v[1],w=1/x,S=1/b,$=Math.ceil(w)*2+2,C=Math.ceil(S)*2+2;for(let k=0;k<u;k++){const I=k*a[0];for(let T=0;T<c;T++){const E=I+T*a[1],_=Math.floor(T*w),N=Math.floor(_-$/2);for(let P=0;P<d;P++){const F=E+P*a[2],L=Math.floor(P*S),A=Math.floor(L-C/2);for(let O=0;O<f;O++){let j=0;for(let V=0;V<$;V++){const z=V+N;if(z<0||z>=h)continue;const U=I+z*l[1],Z=z*x,te=Math.min(c-1,s?Math.round(Z):Math.floor(Z));if(T===te)for(let se=0;se<C;se++){const ue=se+A;if(ue<0||ue>=p)continue;const ce=U+ue*l[2],Y=ue*b,le=Math.min(d-1,s?Math.round(Y):Math.floor(Y));P===le&&(j+=g[ce+O])}}m[F+O]=j}}}}return n.makeTensorInfo(o.shape,o.dtype,m)}const T3e={kernelName:DE,backendName:"cpu",kernelFunc:I3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{dims:i}=r;Ie(o,"reverse");const s=o.shape.length,a=Ue(i,o.shape);if(s===0)return cs({inputs:{x:o},backend:n});const l=new Pn(o.shape,o.dtype),u=n.bufferSync(o);for(let c=0;c<l.size;c++){const d=l.indexToLoc(c),f=d.slice();a.forEach(h=>f[h]=o.shape[h]-1-f[h]),l.set(u.get(...f),...d)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const N3e={kernelName:Xb,backendName:"cpu",kernelFunc:E3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A3e={kernelName:VE,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:o,fillValue:i,center:s}=e,a=n,l=Un(r.dtype,re(r.shape)),[u,c,d,f]=r.shape,[h,p]=F2(s,c,d),m=255,g=Math.sin(o),y=Math.cos(o),v=a.data.get(r.dataId).values;for(let b=0;b<u;b++){const w=b*d*c*f;for(let S=0;S<c;S++){const $=S*(d*f);for(let C=0;C<d;C++){const k=C*f;for(let I=0;I<f;I++){const T=[u,S,C,I],E=T[2],_=T[1];let N=(E-h)*y-(_-p)*g,P=(E-h)*g+(_-p)*y;N=Math.round(N+h),P=Math.round(P+p);let F=i;if(typeof i!="number"&&(I===3?F=m:F=i[I]),N>=0&&N<d&&P>=0&&P<c){const A=P*(d*f),O=N*f,j=w+A+O+I;F=v[j]}const L=w+$+k+I;l[L]=F}}}}return{dataId:a.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O3e=pt(Lm,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),_3e={kernelName:Lm,backendName:"cpu",kernelFunc:O3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R3e(t){const{inputs:e,backend:n,attrs:r}=t,{indices:o,updates:i}=e,{shape:s}=r,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=Hu(i,o,s),f=!0,h=n.bufferSync(o),p=n.bufferSync(i),m=Kl(h,p,s,d,u,l,a,c,0,f);return n.makeTensorInfo(s,m.dtype,m.values)}const P3e={kernelName:gV,backendName:"cpu",kernelFunc:R3e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D3e(t,e){let n=0,r=t.length,o=0;for(;n<r;)o=Math.floor((n+r)/2),t[o]<e?n=o+1:r=o;return r}function M3e(t,e){let n=0,r=t.length,o=0;for(;n<r;)o=Math.floor((n+r)/2),t[o]<=e?n=o+1:r=o;return r}function F3e(t,e,n,r,o,i){const s=Qt("int32",n*o);for(let a=0;a<n;++a){const l=t.slice(a*r,(a+1)*r),u=a*o;for(let c=0;c<o;++c)s[u+c]=i==="left"?D3e(l,e[c+u]):M3e(l,e[c+u])}return s}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L3e(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:o,values:i}=e,{side:s}=r,a=n.data.get(o.dataId).values,l=n.data.get(i.dataId).values,u=F3e(a,l,o.shape[0],o.shape[1],i.shape[1],s);return n.makeTensorInfo(i.shape,"int32",u)}const B3e={kernelName:vV,backendName:"cpu",kernelFunc:L3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z3e(t){const{inputs:e,backend:n}=t,{condition:r,t:o,e:i}=e;Ie([r,o,i],"select");const s=r.shape.length,a=n.data.get(r.dataId).values,l=n.data.get(o.dataId).values,u=n.data.get(i.dataId).values,c=Vr(o.dtype,i.dtype),d=Gn(re(o.shape),c);let f=0;const h=s===0||s>1||o.shape.length===1?1:re(o.shape.slice(1));for(let p=0;p<a.length;p++)for(let m=0;m<h;m++)a[p]===1?d[f++]=l[p]:d[f++]=u[p];return n.makeTensorInfo(o.shape,c,d)}const j3e={kernelName:Yb,backendName:"cpu",kernelFunc:z3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W3e=g1,V3e=y1,U3e=pt(zm,t=>t>=0?V3e*t:W3e*(Math.exp(t)-1)),G3e={kernelName:zm,backendName:"cpu",kernelFunc:U3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H3e=pt(Vm,t=>t<0?-1:t>0?1:0),K3e={kernelName:Vm,backendName:"cpu",kernelFunc:H3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q3e=pt(jm,t=>Math.sin(t)),X3e={kernelName:jm,backendName:"cpu",kernelFunc:q3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y3e=pt(Wm,t=>Math.sinh(t)),Q3e={kernelName:Wm,backendName:"cpu",kernelFunc:Y3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z3e=11920928955078125e-23,jM=Math.log(Z3e)+2,J3e=pt(Gm,t=>{const e=t>-jM,n=t<jM,r=Math.exp(t);let o;return n?o=r:e?o=t:o=Math.log(1+r),o}),eBe={kernelName:Gm,backendName:"cpu",kernelFunc:J3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{blockShape:i,paddings:s}=r;Ie([o],"spaceToBatchND");const a=re(i),l=[[0,0]];l.push(...s);for(let S=1+i.length;S<o.shape.length;++S)l.push([0,0]);const u=K6.kernelFunc({inputs:{x:o},backend:n,attrs:{paddings:l,constantValue:0}}),c=og(u.shape,i,a,!1),d=ig(c.length,i.length,!1),f=sg(u.shape,i,a,!1),m=kt({inputs:{x:u},backend:n,attrs:{shape:c}}),v=$r({inputs:{x:m},backend:n,attrs:{perm:d}}),w=kt({inputs:{x:v},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),w}const nBe={kernelName:Jb,backendName:"cpu",kernelFunc:tBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rBe(t){const{inputs:e,backend:n}=t,{indices:r,values:o,denseShape:i,defaultValue:s}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(o.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${o.shape}`);if(s.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${s.shape}`);const a=n.data.get(r.dataId).values,l=n.data.get(o.dataId).values,u=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values[0],[d,f,h,p,m]=x6(a,r.shape,r.dtype,l,o.dtype,u,c);return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([f[0]],o.dtype,h),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(g=>Number(g)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const oBe={kernelName:xV,backendName:"cpu",kernelFunc:rBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iBe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:o,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(o.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${o.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const s=Array.from(n.data.get(o.dataId).values),a=n.data.get(r.dataId).values,l=Array.from(n.data.get(i.dataId).values),[u,c,d]=b6(a,r.shape,r.dtype,s,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}const sBe={kernelName:bV,backendName:"cpu",kernelFunc:iBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aBe(t){const{inputs:e,backend:n}=t,{data:r,indices:o,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${o.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${i.shape}`);if(o.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const s=n.data.get(r.dataId).values,a=n.data.get(o.dataId).values,l=n.data.get(i.dataId).values,[u,c]=IN(s,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const lBe={kernelName:wV,backendName:"cpu",kernelFunc:aBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uBe(t){const{inputs:e,backend:n}=t,{data:r,indices:o,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${o.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${i.shape}`);if(o.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const s=n.data.get(r.dataId).values,a=n.data.get(o.dataId).values,l=n.data.get(i.dataId).values,[u,c]=IN(s,r.shape,r.dtype,a,l);return n.makeTensorInfo(c,r.dtype,u)}const cBe={kernelName:SV,backendName:"cpu",kernelFunc:uBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dBe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:o,sparseValues:i,defaultValue:s}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:f}=Hu(i,o,a),h=!1,p=n.bufferSync(o);let m;switch(i.dtype){case"bool":{const g=n.bufferSync(i),y=!!n.data.get(s.dataId).values[0];m=Kl(p,g,a,f,c,u,l,d,y,h);break}case"float32":{const g=n.bufferSync(i),y=n.data.get(s.dataId).values[0];m=Kl(p,g,a,f,c,u,l,d,y,h);break}case"int32":{const g=n.bufferSync(i),y=n.data.get(s.dataId).values[0];m=Kl(p,g,a,f,c,u,l,d,y,h);break}case"string":{const g=n.bufferSync(i),y=Ja(n.data.get(s.dataId).values[0]);m=Kl(p,g,a,f,c,u,l,d,y,h);break}default:throw new Error(`Unsupported type ${i.dtype}`)}return n.makeTensorInfo(a,m.dtype,m.values)}const fBe={kernelName:CV,backendName:"cpu",kernelFunc:dBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{numOrSizeSplits:i,axis:s}=r,a=Ue(s,o.shape)[0],l=Z2(o,i,a),u=new Array(o.shape.length).fill(0),c=o.shape.slice();return l.map(d=>{const f=[...c];f[a]=d;const h=Ou({inputs:{x:o},backend:n,attrs:{begin:u,size:f}});return u[a]+=d,h})}const pBe={kernelName:e1,backendName:"cpu",kernelFunc:hBe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mBe={kernelName:FE,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;Ie(n,"square");const o=r.data.get(n.dataId).values,i=new Float32Array(o.length);for(let a=0;a<o.length;++a){const l=o[a];i[a]=l*l}return{dataId:r.write(i,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gBe=pt(Zm,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),yBe={kernelName:Zm,backendName:"cpu",kernelFunc:gBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{begin:i,end:s,strides:a,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:f}=r;Ie(o,"stridedSlice");const{finalShapeSparse:h,finalShape:p,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:v,end:x,strides:b}=P2(o.shape,i,s,a,l,u,c,d,f);let w;if(m)w=kt({inputs:{x:o},backend:n,attrs:{shape:p}});else if(g||y){M(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);const S=O2(v,x,b),$=Ou({inputs:{x:o},backend:n,attrs:{begin:v,size:S}});w=kt({inputs:{x:$},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo($)}else{const S=n.bufferSync(o),$=C6(h,S,b,v);w=n.makeTensorInfo(p,$.dtype,$.values)}return w}const xBe={kernelName:BE,backendName:"cpu",kernelFunc:vBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bBe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:o,nGramWidths:i,leftPad:s,rightPad:a,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:d}=e,f=n.data.get(c.dataId).values,h=n.data.get(d.dataId).values,[p,m]=$6(f,h,o,i,s,a,l,u);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",m)]}const wBe={kernelName:$V,backendName:"cpu",kernelFunc:bBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SBe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:o}=r,{input:i,delimiter:s}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(s.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${s.shape}`);const a=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values[0],[u,c,d]=k6(a,l,o),f=c.length;return[n.makeTensorInfo([f,2],"int32",u),n.makeTensorInfo([f],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const CBe={kernelName:kV,backendName:"cpu",kernelFunc:SBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Be(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:o}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const s=n.data.get(i.dataId).values,a=I6(s,o);return n.makeTensorInfo(i.shape,"int32",a)}const kBe={kernelName:IV,backendName:"cpu",kernelFunc:$Be};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IBe=pt(Xm,t=>Math.tan(t)),TBe={kernelName:Xm,backendName:"cpu",kernelFunc:IBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EBe=pt(Ym,t=>Math.tanh(t)),NBe={kernelName:Ym,backendName:"cpu",kernelFunc:EBe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ABe(t){const{inputs:e,backend:n}=t,{tensor:r,indices:o,updates:i}=e,{sliceRank:s,numUpdates:a,sliceSize:l,strides:u,outputSize:c}=Hu(i,o,r.shape),d=!1,f=n.bufferSync(o),h=n.bufferSync(i),p=n.bufferSync(r),m=Kl(f,h,r.shape,c,l,a,s,u,p,d);return n.makeTensorInfo(r.shape,m.dtype,m.values)}const OBe={kernelName:yV,backendName:"cpu",kernelFunc:ABe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Be(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{reps:i}=r;Ie(o,"tile");const s=E6(n.bufferSync(o),i);return n.makeTensorInfo(s.shape,s.dtype,s.values)}const RBe={kernelName:Qm,backendName:"cpu",kernelFunc:_Be};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{k:i,sorted:s}=r;Ie(o,"topk");const a=n.data.get(o.dataId).values,[l,u]=A6(a,o.shape,o.dtype,i,s);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}const DBe={kernelName:zE,backendName:"cpu",kernelFunc:PBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MBe(t){const{inputs:e,attrs:n,backend:r}=t,{image:o,transforms:i}=e,{interpolation:s,fillMode:a,fillValue:l,outputShape:u}=n,[c,d,f,h]=o.shape,[p,m]=u??[d,f],g=[c,p,m,h],y=Ne(o.shape),v=y[0],x=y[1],b=y[2],w=Ne(g),S=w[0],$=w[1],C=w[2],k=Un(o.dtype,re(g));k.fill(l);const I=r.data.get(o.dataId).values,T=r.data.get(i.dataId).values;for(let _=0;_<c;++_){const N=i.shape[0]===1?T:T.subarray(_*8,_*8+8);for(let P=0;P<p;++P)for(let F=0;F<m;++F)for(let L=0;L<h;++L){let A;const O=N[6]*F+N[7]*P+1;if(O===0)continue;const j=(N[0]*F+N[1]*P+N[2])/O,V=(N[3]*F+N[4]*P+N[5])/O,z=WM(j,f,a),U=WM(V,d,a);switch(s){case"nearest":A=WBe(I,d,f,v,x,b,_,U,z,L,l);break;case"bilinear":A=VBe(I,d,f,v,x,b,_,U,z,L,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${s}`)}const Z=_*S+P*$+F*C+L;k[Z]=A}return r.makeTensorInfo(g,o.dtype,k)}return{dataId:r.write(k,g,o.dtype),shape:o.shape,dtype:o.dtype}}const FBe={kernelName:jE,backendName:"cpu",kernelFunc:MBe};function WM(t,e,n){switch(n){case"reflect":return LBe(t,e);case"wrap":return BBe(t,e);case"nearest":return jBe(t,e);case"constant":default:return zBe(t)}}function LBe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return xu(0,n,e-1)}function BBe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return xu(0,n,e-1)}function zBe(t,e){return t}function jBe(t,e){return xu(0,t,e-1)}function rh(t,e,n,r,o,i,s,a,l,u,c){const d=s*r+a*o+l*i+u;return 0<=a&&a<e&&0<=l&&l<n?t[d]:c}function WBe(t,e,n,r,o,i,s,a,l,u,c){const d=Math.round(a),f=Math.round(l);return rh(t,e,n,r,o,i,s,d,f,u,c)}function VBe(t,e,n,r,o,i,s,a,l,u,c){const d=Math.floor(a),f=Math.floor(l),h=d+1,p=f+1,m=(p-l)*rh(t,e,n,r,o,i,s,d,f,u,c)+(l-f)*rh(t,e,n,r,o,i,s,d,p,u,c),g=(p-l)*rh(t,e,n,r,o,i,s,h,f,u,c)+(l-f)*rh(t,e,n,r,o,i,s,h,p,u,c);return(h-a)*m+(a-d)*g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UBe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:o}=n,{x:i}=e;Ie(i,"unique");const s=r.data.get(i.dataId).values,{outputValues:a,outputShape:l,indices:u}=O6(s,o,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,a),r.makeTensorInfo([u.length],"int32",u)]}const GBe={kernelName:WE,backendName:"cpu",kernelFunc:UBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HBe(t){const{inputs:e,backend:n,attrs:r}=t,{value:o}=e;let{axis:i}=r;i<0&&(i+=o.shape.length);const s=o.shape.length,a=o.shape[i],l=new Array(s-1);let u=0;for(let h=0;h<s;h++)h!==i&&(l[u++]=o.shape[h]);const c=new Array(s).fill(0),d=o.shape.slice();d[i]=1;const f=new Array(a);for(let h=0;h<f.length;h++){c[i]=h;const p=Ou({inputs:{x:o},backend:n,attrs:{begin:c,size:d}});f[h]=kt({inputs:{x:p},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(p)}return f}const KBe={kernelName:n1,backendName:"cpu",kernelFunc:HBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,segmentIds:i}=e,{numSegments:s}=r;Ie(o,"unsortedSegmentSum");const a=o.shape.length,l=i.shape.length,u=[],c=[],d=a-l;let f=i;for(let p=0;p<d;++p){const m=F0({inputs:{input:f},backend:n,attrs:{dim:p+1}});f=m,c.push(m)}for(let p=0;p<s;++p){const m=ml(p,"int32"),g=n.makeTensorInfo([],"int32",m),y=HH({inputs:{a:g,b:f},backend:n}),v=ol({inputs:{x:y},backend:n,attrs:{dtype:"float32"}}),x=A1({inputs:{a:v,b:o},backend:n}),b=mg({inputs:{x},backend:n,attrs:{axis:0,keepDims:!1}});u.push(b),c.push(g),c.push(y),c.push(v),c.push(x),c.push(b)}const h=H6({inputs:u,backend:n,attrs:{axis:0}});return c.forEach(p=>n.disposeIntermediateTensorInfo(p)),h}const XBe={kernelName:r1,backendName:"cpu",kernelFunc:qBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YBe=[UDe,$Pe,HDe,qDe,APe,YDe,ZDe,eMe,nMe,oMe,sMe,lMe,cMe,hMe,mMe,vMe,bMe,SMe,$Me,WDe,IMe,EMe,AMe,_Pe,_Me,EPe,PPe,PMe,kPe,MMe,LMe,BMe,jMe,VMe,GMe,KMe,XMe,QMe,JMe,tFe,rFe,iFe,aFe,uFe,cFe,fFe,pFe,gFe,yFe,vFe,xFe,wFe,$Fe,DDe,IFe,DPe,PFe,MPe,DFe,LPe,jFe,WFe,UFe,zPe,WPe,HFe,qFe,YFe,ZFe,UPe,HPe,IPe,eLe,FMe,nLe,oLe,sLe,MDe,qPe,YPe,lLe,ZPe,cLe,hLe,mLe,vLe,bLe,SLe,CLe,eDe,kLe,TLe,NLe,OLe,RLe,DLe,FLe,nDe,BLe,WLe,GLe,oDe,sDe,qLe,QLe,e3e,lDe,n3e,o3e,i3e,K6,u3e,LDe,dDe,d3e,h3e,m3e,y3e,TPe,wk,x3e,BDe,zDe,jDe,w3e,C3e,k3e,T3e,N3e,A3e,_3e,xDe,P3e,B3e,j3e,G3e,wDe,K3e,X3e,Q3e,SDe,VLe,eBe,nBe,oBe,sBe,lBe,cBe,fBe,pBe,kDe,mBe,TDe,NDe,yBe,xBe,wBe,CBe,kBe,RDe,SFe,TBe,NBe,OBe,RBe,DBe,FBe,uDe,GBe,KBe,XBe,r3e];for(const t of YBe)EV(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fl={},dy={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function QBe(t,e){Fl[t]=e}function Ni(t,e){if(!(t in Fl)||e!=null){const r=JBe(t,e);if(r!==null)Fl[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=Fl[t];return n==null||n.isContextLost()?(delete Fl[t],Ni(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Fl[t])}function ZBe(t){if(!ee().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function JBe(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??ZBe(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete Fl[t]},!1),ee().getBool("SOFTWARE_WEBGL_ENABLED")&&(dy.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",dy)||n.getContext("experimental-webgl",dy):n.getContext("webgl2",dy)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var _p;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(_p||(_p={}));var no;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(no||(no={}));var _n;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(_n||(_n={}));function gg(t,e){return[e,t]}function eze(t,e){return t*e}function fy(t){const e=re(t),n=Math.ceil(e/4);return V$(n)}function gf(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function tze(t,e){const[n,r]=gf(t,e);return n*r*4}function ON(t,e){const n=t;let r,o,i,s,a,l,u,c,d,f;return ee().getNumber("WEBGL_VERSION")===2?(r=n.R32F,o=n.R16F,i=n.RGBA16F,s=n.RGBA32F,a=n.RED,u=4,c=1,d=n.HALF_FLOAT,f=n.FLOAT,l=n.RGBA8):(r=t.RGBA,o=t.RGBA,i=t.RGBA,s=n.RGBA,a=t.RGBA,u=4,c=4,d=e!=null?e.HALF_FLOAT_OES:null,f=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:o,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:s,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:d,textureTypeFloat:f}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function we(t,e){const n=e();return ee().getBool("DEBUG")&&nze(t),n}function nze(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+sze(t,e))}const rze=596e-10,oze=65504;function ize(t){return!!(ee().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||rze<Math.abs(t)&&Math.abs(t)<oze)}function sze(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function hy(t,e){return ta(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function aze(t,e){const n=ta(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(we(t,()=>t.shaderSource(n,e)),we(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function lze(t,e){const n=ta(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(we(t,()=>t.shaderSource(n,e)),we(t,()=>t.compileShader(n)),ee().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw q6(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const uze=/ERROR: [0-9]+:([0-9]+):/g;function q6(t,e){const n=uze.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],o=t.split(`
`),i=o.length.toString().length+2,s=o.map((d,f)=>Bc((f+1).toString(),i)+d);let a=0;for(let d=0;d<s.length;d++)a=Math.max(s[d].length,a);const l=s.slice(0,r-1),u=s.slice(r-1,r),c=s.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${Bc(u[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function cze(t){return ta(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function dze(t,e){if(we(t,()=>t.linkProgram(e)),!ee().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function nS(t,e){if(we(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function fze(t,e){const n=ta(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return we(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),we(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function hze(t,e){const n=ta(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return we(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),we(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function pze(t){return ta(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function mze(t,e){const n=ee().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,o=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+o+".")}}function gze(t){return ta(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function VM(t,e,n,r,o,i,s){const a=t.getAttribLocation(e,n);return a===-1?!1:(we(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),we(t,()=>t.vertexAttribPointer(a,o,t.FLOAT,!1,i,s)),we(t,()=>t.enableVertexAttribArray(a)),!0)}function yze(t,e,n){Sze(t,n),we(t,()=>t.activeTexture(t.TEXTURE0+n)),we(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function vze(t,e,n){return ta(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function xze(t,e,n){return t.getUniformLocation(e,n)}function bze(t,e,n,r){we(t,()=>yze(t,e,r)),we(t,()=>t.uniform1i(n,r))}function rS(t,e,n){we(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),we(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function UM(t,e){we(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),we(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function py(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+wze(t,e))}function wze(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function ta(t,e,n){const r=we(t,()=>e());if(r==null)throw new Error(n);return r}function Sze(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const o=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${o}.`)}}function zd(t,e=2){return re(t.slice(0,t.length-e))}function jd(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function my(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[zd(t),...jd(t)]),e}function Cze(t,e=!1){let n=ee().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=ee().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&ee().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((a,l)=>l>=t.length-2?ZT(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=pl(t).newShape);let o=re(t),i=null;t.length<=1&&o<=n?i=[1,o]:t.length===2&&t[0]<=n&&t[1]<=n?i=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?i=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?i=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?i=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(i=[t[0],t[1]*t[2]*t[3]]);const s=i!=null&&Math.max(...i)>r&&Math.min(...i)<=(e?2:1)&&Math.min(...i)>0;if(i==null||s)if(e){const a=zd(t);let l=2,u=2;t.length&&([l,u]=jd(t)),o=a*(l/2)*(u/2),i=V$(o).map(c=>c*2)}else i=V$(o);return i}function gy(t){return t%2===0}function B0(t,e){if(t=t.slice(-2),e=e.slice(-2),ut(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||gy(n)&&gy(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&gy(t[0])&&gy(e[0])}let oS,iS;function $ze(t){if(oS==null){const e=Ni(t);oS=e.getParameter(e.MAX_TEXTURE_SIZE)}return oS}function kze(t){if(iS==null){const e=Ni(t);iS=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,iS)}function Ize(t){if(t===0)return 0;let e;const n=Ni(t);return Ro(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:Ro(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function Ro(t,e){return t.getExtension(e)!=null}function GM(t){try{if(Ni(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function Tze(t){if(t===0)return!1;const e=Ni(t);if(t===1){if(!Ro(e,"OES_texture_float"))return!1}else if(!Ro(e,"EXT_color_buffer_float"))return!1;return Ck(e)}function Eze(t){if(t===0)return!1;const e=Ni(t);if(t===1){if(!Ro(e,"OES_texture_float")||!Ro(e,"WEBGL_color_buffer_float"))return!1}else{if(Ro(e,"EXT_color_buffer_float"))return Ck(e);const r="EXT_color_buffer_half_float";if(Ro(e,r)){const o=e.getExtension(r);return Nze(e,o)}return!1}return Ck(e)}function Ck(t){const e=ON(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const s=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(i),s}function Nze(t,e){const n=ON(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(s),a}function Aze(t){return t!==2?!1:Ni(t).fenceSync!=null}function yg(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&M(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Te=ee();Te.registerFlag("HAS_WEBGL",()=>Te.getNumber("WEBGL_VERSION")>0);Te.registerFlag("WEBGL_VERSION",()=>GM(2)?2:GM(1)?1:0);Te.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Te.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Te.get("WEBGL_VERSION")===2);Te.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Te.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Te.registerFlag("WEBGL_PACK",()=>Te.getBool("HAS_WEBGL"));Te.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_PACK_CLIP",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_PACK_REDUCE",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_LAZILY_UNPACK",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_CONV_IM2COL",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>$ze(Te.getNumber("WEBGL_VERSION")));Te.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>kze(Te.getNumber("WEBGL_VERSION")));Te.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=Te.getNumber("WEBGL_VERSION");return t===0?0:Ize(t)});Te.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Te.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!GV());Te.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>Tze(Te.getNumber("WEBGL_VERSION")));Te.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Te.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Te.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Te.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>Eze(Te.getNumber("WEBGL_VERSION")));Te.registerFlag("WEBGL_FENCE_API_ENABLED",()=>Aze(Te.getNumber("WEBGL_VERSION")));Te.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Te.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Te.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});Te.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>GV()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});Te.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Te.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Te.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Te.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Te.registerFlag("WEBGL_EXP_CONV",()=>!1);Te.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Te.getBool("IS_TEST"));Te.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Te.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Te.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Te.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fr(){let t,e,n,r,o,i,s,a,l,u;return ee().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",o="texture",i="outputColor",s="out vec4 outputColor;",a=ee().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",o="texture2D",i="gl_FragColor",s="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:o,output:i,defineOutput:s,defineSpecialNaN:a,defineSpecialInf:l,defineRound:u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xu(t,e,n="index"){const r=Ne(e);return r.map((o,i)=>{const s=`int ${t[i]} = ${n} / ${o}`,a=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${o}`:`index -= ${t[i]} * ${o}`;return`${s}; ${a};`}).join("")}function O1(t,e,n="index"){const r=Ne(e);return r.map((o,i)=>{const s=`int ${t[i]} = ${n} / outShapeStrides[${i}]`,a=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * outShapeStrides[${i}]`:`index -= ${t[i]} * outShapeStrides[${i}]`;return`${s}; ${a};`}).join("")}function Oze(t,e){const n=t.length,r=t.map(i=>`${e}[${i}]`),o=new Array(n-1);o[n-2]=r[n-1];for(let i=n-3;i>=0;--i)o[i]=`(${o[i+1]} * ${r[i+1]})`;return o}function _ze(t,e,n="index"){const r=t.map((i,s)=>s),o=Oze(r,e);return o.map((i,s)=>{const a=`int ${t[s]} = ${n} / ${o[s]}`,l=s===o.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * ${o[s]}`:`index -= ${t[s]} * ${o[s]}`;return`${a}; ${l};`}).join("")}function _N(t){const e=Ne(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function RN(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const X6=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:Y6}=wAe;function Rze(t,e,n){const r=[];if(t.forEach(h=>{const p=re(h.shapeInfo.logicalShape);if(h.shapeInfo.isUniform?r.push(`uniform float ${h.name}${p>1?`[${p}]`:""};`):(r.push(`uniform sampler2D ${h.name};`),r.push(`uniform int offset${h.name};`)),n.enableShapeUniforms){const{uniformShape:m}=PN(n.packedInputs,h.shapeInfo.logicalShape,h.shapeInfo.texShape);switch(m.length){case 1:r.push(`uniform int ${h.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${h.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${h.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${h.name}Shape;`);break}r.push(`uniform ivec2 ${h.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(h=>{r.push(`uniform ${h.type} ${h.name}${h.arrayIndex?`[${h.arrayIndex}]`:""};`)});const o=r.join(`
`),i=t.map(h=>Pze(h,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),s=e.texShape,a=fr(),l=Fze(a);let u,c,d=zze(a);return e.isPacked?(u=Dze(e.logicalShape,s,n.enableShapeUniforms),c=Bze(a)):(u=Mze(e.logicalShape,s,n.enableShapeUniforms),c=Lze(a)),n.packedInputs&&(d+=Uze),[d,l,c,o,u,i,n.userCode].join(`
`)}function yf(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return nje(t,e);case 1:return oje(t,e);case 2:return sje(t,e);case 3:return lje(t,e);case 4:return cje(t,e);case 5:return dje(t);case 6:return fje(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function Q6(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return tje(t);case 1:return rje(t,e);case 2:return ije(t,e);case 3:return aje(t,e);default:return uje(t,e)}}function Pze(t,e,n=!1,r){let o="";n?o+=Q6(t,r):o+=yf(t,r);const i=t.shapeInfo.logicalShape,s=e.logicalShape;return i.length<=s.length&&(n?o+=hje(t,e):o+=pje(t,e)),o}function Dze(t,e,n){switch(t.length){case 0:return Z6();case 1:return Gze(t,e,n);case 2:return Jze(t,e,n);case 3:return Kze(t,e,n);default:return Xze(t,e,n)}}function Mze(t,e,n){switch(t.length){case 0:return Z6();case 1:return Hze(t,e,n);case 2:return eje(t,e,n);case 3:return qze(t,e,n);case 4:return Yze(t,e,n);case 5:return Qze(t,e);case 6:return Zze(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function Fze(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function Lze(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function Bze(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function zze(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${jze}
    ${Wze}
    ${Vze}
  `}const jze=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Wze=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Vze=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Uze=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Z6(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function Gze(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function Hze(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function Kze(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],o=Math.ceil(t[2]/2),i=o*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec3(b, r, c);
    }
  `}function qze(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${O1(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=Xu(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function Xze(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],o=Math.ceil(t[t.length-1]/2),i=o*Math.ceil(t[t.length-2]/2);let s=i,a="",l="b, r, c";for(let u=2;u<t.length-1;u++)s*=t[t.length-u-1],a=`
      int b${u} = index / ${s};
      index -= b${u} * ${s};
    `+a,l=`b${u}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${a}

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec${t.length}(${l});
    }
  `}function Yze(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${O1(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=Xu(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function Qze(t,e){const n=Xu(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function Zze(t,e){const n=Xu(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function Jze(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(ut(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const o=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec2(r, c);
    }
  `}function eje(t,e,n){return ut(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function Yu(t){return`offset${t}`}function tje(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=fr();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function nje(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[o,i]=t.shapeInfo.texShape;if(o===1&&i===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const s=Yu(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${s});
      return sampleTexture(${n}, uv);
    }
  `;const[a,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${s});
      return sampleTexture(${n}, uv);
    }
  `}function rje(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t.shapeInfo.texShape,i=fr();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${i.texture2D}(${n}, uv);
    }
  `;const s=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${s[0]}, ${s[1]}, index);
      return ${i.texture2D}(${n}, uv);
    }
  `}function oje(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${vf(t)}
      }
    `;const o=t.shapeInfo.texShape,i=o[0],s=o[1];if(s===1&&i===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=Yu(n);return s===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${i}.0);
        return sampleTexture(${n}, uv);
      }
    `:i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${s}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${i}, ${s}, index + ${a});
      return sampleTexture(${n}, uv);
    }
  `}function ije(t,e){const n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,s=i[0],a=i[1],l=fr();if(i!=null&&ut(n,i))return e?`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${s}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${o}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const u=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],c=Math.ceil(n[1]/2);return`
    vec4 ${o}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c}, ${u[0]}, ${u[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function sje(t,e){const n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape;if(i!=null&&ut(n,i)){if(e)return`
      float ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const f=i[0],h=i[1];return`
    float ${o}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${h}.0, ${f}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:s,keptDims:a}=pl(n),l=s;if(l.length<n.length){const f=xf(t,l),h=["row","col"];return`
      ${yf(f,e)}
      float ${o}(int row, int col) {
        return ${o}(${bf(h,a)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${vf(t)}
      }
    `;const u=i[0],c=i[1],d=Yu(r);return c===1?e?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);
      return sampleTexture(${r}, uv);
    }
  `:u===1?e?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${o}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${o}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${u}, ${c}, index);
    return sampleTexture(${r}, uv);
  }
`}function aje(t,e){const n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,s=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(n[0]===1){const f=n.slice(1),h=[1,2],p=xf(t,f),m=["b","row","col"];return`
        ${Q6(p,e)}
        vec4 ${o}(int b, int row, int col) {
          return ${o}(${bf(m,h)});
        }
      `}const a=fr();if(e)return`
    vec4 ${o}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `;const l=s[0],u=s[1],c=Math.ceil(n[2]/2),d=c*Math.ceil(n[1]/2);return`
    vec4 ${o}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${u}, ${d}, ${c}, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `}function lje(t,e){const n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],s=n[2],{newShape:a,keptDims:l}=pl(n),u=a;if(u.length<n.length){const m=xf(t,u),g=["row","col","depth"];return`
        ${yf(m,e)}
        float ${o}(int row, int col, int depth) {
          return ${o}(${bf(g,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${i}, ${s}, 1)));
        ${vf(t)}
      }
    `;const c=t.shapeInfo.texShape,d=c[0],f=c[1],h=t.shapeInfo.flatOffset;if(f===i&&h==null)return e?`
      float ${o}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${o}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${s}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${f}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(f===s&&h==null)return e?`
      float ${o}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${o}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${f}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;const p=Yu(r);return e?`
    float ${o}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${p};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${o}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i} + col * ${s} + depth + ${p};
        vec2 uv = uvFromFlat(${d}, ${f}, index);
        return sampleTexture(${r}, uv);
      }
  `}function uje(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=fr();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${o.texture2D}(${n}, uv);
    }
  `;const i=t.shapeInfo.logicalShape,s=i.length,a=t.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],u=l[0],c=l[1],d=Math.ceil(i[s-1]/2);let f=d*Math.ceil(i[s-2]/2),h="int b, int row, int col",p=`b * ${f} + (row / 2) * ${d} + (col / 2)`;for(let m=2;m<s-1;m++)h=`int b${m}, `+h,f*=i[s-m-1],p=`b${m} * ${f} + `+p;return`
    vec4 ${r}(${h}) {
      int index = ${p};
      int texR = index / ${c};
      int texC = index - texR * ${c};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${u});
      return ${o.texture2D}(${n}, uv);
    }
  `}function cje(t,e){const n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],s=n[2]*i,a=n[1]*s,{newShape:l,keptDims:u}=pl(n);if(l.length<n.length){const v=xf(t,l),x=["row","col","depth","depth2"];return`
      ${yf(v,e)}
      float ${o}(int row, int col, int depth, int depth2) {
        return ${o}(${bf(x,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${s}, ${i}, 1)));
        ${vf(t)}
      }
    `;const c=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,f=d[0],h=d[1],p=`int stride2 = ${r}Shape[3];`,m=`int stride1 = ${r}Shape[2] * stride2;`,g=`int stride0 = ${r}Shape[1] * stride1;`;if(h===a&&c==null)return e?`
      float ${o}(int row, int col, int depth, int depth2) {
        ${p}
        ${m}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${s}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(h===i&&c==null)return e?`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;const y=Yu(r);return e?`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${p}
      ${m}
      ${g}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${y});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${s} +
          depth * ${i} + depth2;
      vec2 uv = uvFromFlat(${f}, ${h}, index + ${y});
      return sampleTexture(${r}, uv);
    }
  `}function dje(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e[4],i=e[3]*o,s=e[2]*i,a=e[1]*s,{newShape:l,keptDims:u}=pl(e);if(l.length<e.length){const m=xf(t,l),g=["row","col","depth","depth2","depth3"];return`
      ${yf(m)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${bf(g,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${s}, ${i}, ${o})) +
          depth3;
        ${vf(t)}
      }
    `;const c=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,f=d[0],h=d[1];if(h===a&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${s}, ${i}, ${o}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(h===o&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;const p=Yu(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${s} + depth * ${i} +
          depth2 * ${o} + depth3 + ${p};
      vec2 uv = uvFromFlat(${f}, ${h}, index);
      return sampleTexture(${n}, uv);
    }
  `}function fje(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:o,keptDims:i}=pl(e);if(o.length<e.length){const g=xf(t,o),y=["row","col","depth","depth2","depth3","depth4"];return`
      ${yf(g)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${bf(y,i)});
      }
    `}const s=e[5],a=e[4]*s,l=e[3]*a,u=e[2]*l,c=e[1]*u;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${u}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${s}, 1)));
        ${vf(t)}
      }
    `;const d=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,h=f[0],p=f[1];if(p===c&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${u}, ${l}, ${a}, ${s})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(p===s&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const m=Yu(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${u} + depth * ${l} +
          depth2 * ${a} + depth3 * ${s} + depth4 + ${m};
      vec2 uv = uvFromFlat(${h}, ${p}, index);
      return sampleTexture(${n}, uv);
    }
  `}function vf(t){const e=t.name,n=re(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function hje(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",i=t.shapeInfo.logicalShape.length,s=e.logicalShape.length,a=Y6(t.shapeInfo.logicalShape,e.logicalShape),l=yt(s),u=s-i;let c;const d=["x","y","z","w","u","v"];i===0?c="":s<2&&a.length>=1?c="coords = 0;":c=a.map(v=>`coords.${d[v+u]} = 0;`).join(`
`);let f="";s<2&&i>0?f="coords":f=t.shapeInfo.logicalShape.map((v,x)=>`coords.${d[x+u]}`).join(", ");let h="return outputValue;";const m=re(t.shapeInfo.logicalShape)===1,y=re(e.logicalShape)===1;if(i===1&&!m&&!y)h=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(m&&!y)s===1?h=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:h=`
        return vec4(outputValue.x);
      `;else if(a.length){const v=i-2,x=i-1;a.indexOf(v)>-1&&a.indexOf(x)>-1?h="return vec4(outputValue.x);":a.indexOf(v)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(x)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${o}() {
      ${l} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${r}(${f});
      ${h}
    }
  `}function pje(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",i=e.texShape,s=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&a===l&&t.shapeInfo.flatOffset==null&&ut(s,i))return`
      float ${o}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const u=yt(l),c=Y6(t.shapeInfo.logicalShape,e.logicalShape),d=l-a;let f;const h=["x","y","z","w","u","v"];a===0?f="":l<2&&c.length>=1?f="coords = 0;":f=c.map(m=>`coords.${h[m+d]} = 0;`).join(`
`);let p="";return l<2&&a>0?p="coords":p=t.shapeInfo.logicalShape.map((m,g)=>`coords.${h[g+d]}`).join(", "),`
    float ${o}() {
      ${u} coords = getOutputCoords();
      ${f}
      return get${r}(${p});
    }
  `}function yt(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function PN(t,e,n){const{newShape:r,keptDims:o}=pl(e),i=e.length,s=t&&i===3&&e[0]===1,a=s?e.slice(1):r,l=!t&&i>1&&!ut(e,n)&&r.length<i||s;return{useSqueezeShape:l,uniformShape:l?a:e,keptDims:o}}function xf(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function bf(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mje(t,e,n,r){const o=n.map((c,d)=>{const f={logicalShape:c.shape,texShape:c.isUniform?null:c.texData.texShape,isUniform:c.isUniform,isPacked:c.isUniform?!1:c.texData.isPacked,flatOffset:null};return c.texData!=null&&c.texData.slice!=null&&c.texData.slice.flatOffset>0&&(f.flatOffset=c.texData.slice.flatOffset),{name:e.variableNames[d],shapeInfo:f}}),i=o.map(c=>c.shapeInfo),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},a=Rze(o,s,e),l=lze(t.gl,a),u=t.createProgram(l);return ee().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:a,webGLProgram:u,inShapeInfos:i,outShapeInfo:s,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(u),Object.assign({program:e,fragmentShader:l,source:a,webGLProgram:u,inShapeInfos:i,outShapeInfo:s},J6(t,e,u)))}function J6(t,e,n){const r=[],o=[];let i,s,a,l=null,u=null;u=t.getUniformLocation(n,"NAN",!1),ee().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const c=!1;for(const d of e.variableNames){const f={name:d,uniform:t.getUniformLocation(n,d,c),offset:t.getUniformLocation(n,`offset${d}`,c)};e.enableShapeUniforms&&(f.shape=t.getUniformLocation(n,`${d}Shape`,c),f.texShape=t.getUniformLocation(n,`${d}TexShape`,c)),r.push(f)}if(e.enableShapeUniforms&&(i=t.getUniformLocation(n,"outShape",c),a=t.getUniformLocation(n,"outShapeStrides",c),s=t.getUniformLocation(n,"outTexShape",c)),e.customUniforms)for(const d of e.customUniforms)o.push(t.getUniformLocation(n,d.name,c));return{variablesLocations:r,customUniformLocations:o,infLoc:l,nanLoc:u,outShapeLocation:i,outShapeStridesLocation:a,outTexShapeLocation:s}}function HM(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const o=n.logicalShape,i=e[r],s=i.shape;if(!ut(o,s))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${o} and ${s} must match`);if(n.isUniform&&i.isUniform)return;const a=n.texShape,l=i.isUniform?null:i.texData.texShape;if(!ut(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function gje(t,e,n,r,o){e.program.enableShapeUniforms||(HM(e.inShapeInfos,n),HM([e.outShapeInfo],[r]));const i=r.texData.texture,s=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(i.texture,s[0],s[1]):t.setOutputMatrixTexture(i.texture,s[0],s[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),ee().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const u=n[l],{uniform:c,offset:d,shape:f,texShape:h}=e.variablesLocations[l];if(f){const{uniformShape:p}=PN(e.program.packedInputs,u.shape,u.texData.texShape);switch(p.length){case 1:t.gl.uniform1iv(f,new Int32Array(p));break;case 2:t.gl.uniform2iv(f,new Int32Array(p));break;case 3:t.gl.uniform3iv(f,new Int32Array(p));break;case 4:t.gl.uniform4iv(f,new Int32Array(p));break}}if(h&&t.gl.uniform2i(h,u.texData.texShape[0],u.texData.texShape[1]),c!=null){if(u.isUniform){if(re(u.shape)<2)t.gl.uniform1f(c,u.uniformValues[0]);else{let p=u.uniformValues;p instanceof Float32Array||(p=new Float32Array(p)),t.gl.uniform1fv(c,p)}continue}u.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,u.texData.slice.flatOffset),t.setInputMatrixTexture(u.texData.texture.texture,c,l)}}const a=e.outShapeLocation;if(a)switch(r.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=Ne(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&o)for(let l=0;l<e.program.customUniforms.length;++l){const u=e.program.customUniforms[l],c=e.customUniformLocations[l],d=o[l];if(u.type==="float")t.gl.uniform1fv(c,d);else if(u.type==="vec2")t.gl.uniform2fv(c,d);else if(u.type==="vec3")t.gl.uniform3fv(c,d);else if(u.type==="vec4")t.gl.uniform4fv(c,d);else if(u.type==="int")t.gl.uniform1iv(c,d);else if(u.type==="ivec2")t.gl.uniform2iv(c,d);else if(u.type==="ivec3")t.gl.uniform3iv(c,d);else if(u.type==="ivec4")t.gl.uniform4iv(c,d);else throw Error(`uniform type ${u.type} is not supported yet.`)}t.executeProgram()}function yje(t,e,n){let r="";e.concat(n).forEach(s=>{const a=s.texData!=null&&s.texData.slice!=null&&s.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!s.isUniform){const l=s.texData.texShape,{useSqueezeShape:u,uniformShape:c,keptDims:d}=PN(t.packedInputs,s.shape,l);let f="",h="",p="";if(c.length===1&&t.packedInputs){const w=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];f=`${w[0]>1}_${w[1]>1}`}else if(c.length===2&&!t.packedInputs)h=`${c[0]>1}_${c[1]>1}`;else if(c.length>2&&!t.packedInputs){const w=Ne(c);p=`${w[0]===l[1]}_${w[w.length-1]===l[1]}`}const m=s.shape.length,g=c.length===2&&ut(s.shape,l),y=re(s.shape)===1,v=Rd(s.shape,n.shape),x=!t.packedInputs&&m===n.shape.length&&ut(l,n.texData.texShape),b=t.packedInputs||c.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${m}_${x}_${u?d:""}_${c.length}_${y}_${v}_${g}_${f}_${h}_${p}_${b}_${a}`}else{const l=s.isUniform?"uniform":s.texData.texShape;r+=`${s.shape}_${l}_${a}`}});const o=t.userCode;let i=t.constructor.name;return i+="_"+r+"_"+o+`${ee().getNumber("WEBGL_VERSION")}`,i}function Xn(t){return ee().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vje{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=_p.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=fr();this.outputShape=e,this.enableShapeUniforms=Xn(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?O1(["r","c","d"],e):Xu(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xje{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=_p.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=fr();this.outputShape=e,this.enableShapeUniforms=Xn(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?O1(["r","c","d"],e):Xu(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bje{constructor(e){this.variableNames=["A"],this.outTexUsage=no.DOWNLOAD;const n=fr();this.outputShape=e,this.userCode=`
      ${X6}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wje{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=no.DOWNLOAD;const n=fr();this.outputShape=e,this.userCode=`
      ${X6}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sje={R:0,G:1,B:2,A:3};class KM{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const o=fr();this.outputShape=e,this.enableShapeUniforms=Xn(this.outputShape.length);let i="result";n&&(i="floor(result * 255. + 0.5)");let s="";for(let a=0;a<r.length;a++){const l=r[a];s+=`
          if(offset == ${a}) {
            result = values[${Sje[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?RN():_N(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${o.texture2D}(A, uv);
          ${s}
        }
        ${o.output} = vec4(${i}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cje{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=fr();this.outputShape=e,this.enableShapeUniforms=Xn(this.outputShape.length);let o="",i="result";n&&(i="floor(result * 255. + 0.5)");for(let s=0;s<=1;s++)for(let a=0;a<=1;a++){const l=s*2+a;o+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${s} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${s};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?RN():_N(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${o}

          ${r.output} = ${i};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $je(t){const e=fr(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return aze(t,n)}function kje(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return fze(t,e)}function Ije(t){const e=new Uint16Array([0,1,2,2,1,3]);return hze(t,e)}function vg(t,e,n,r,o,i){mze(e,n);const s=pze(t),a=t.TEXTURE_2D;return we(t,()=>t.bindTexture(a,s)),we(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),we(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),we(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),we(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),ee().getNumber("WEBGL_VERSION")===1?we(t,()=>t.texImage2D(a,0,r,e,n,0,o,i,null)):we(t,()=>t.texStorage2D(a,1,r,e,n)),we(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:s,texShape:[n,e]}}function e8(t){return t.internalFormatFloat}function Tje(t,e,n,r){const[o,i]=gg(e,n);return vg(t,o,i,e8(r),r.textureFormatFloat,t.FLOAT)}function t8(t){return t.internalFormatHalfFloat}function Eje(t,e,n,r){const[o,i]=gg(e,n);return vg(t,o,i,t8(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function n8(t){return t.downloadTextureFormat}function Nje(t,e,n,r){const[o,i]=gg(e,n);return vg(t,o,i,n8(r),t.RGBA,t.UNSIGNED_BYTE)}function r8(t){return t.internalFormatPackedFloat}function Aje(t,e,n,r){const[o,i]=gf(e,n);return vg(t,o,i,r8(r),t.RGBA,t.FLOAT)}function o8(t){return t.internalFormatPackedHalfFloat}function Oje(t,e,n,r){const[o,i]=gf(e,n);return vg(t,o,i,o8(r),t.RGBA,r.textureTypeHalfFloat)}function _je(t,e,n){return we(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),VM(t,e,"clipSpacePos",n,3,20,0)&&VM(t,e,"uv",n,2,20,12)}function Rje(t,e,n,r,o,i){we(t,()=>t.bindTexture(t.TEXTURE_2D,e));let s,a,l;o instanceof Uint8Array?(s=new Uint8Array(n*r*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(s=new Float32Array(n*r*4),a=t.FLOAT,l=i.internalFormatPackedFloat),s.set(o),ee().getNumber("WEBGL_VERSION")===2?we(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,a,s)):we(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,a,s)),we(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function Pje(t,e,n){we(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?ee().getNumber("WEBGL_VERSION")===2?we(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):we(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):ee().getNumber("WEBGL_VERSION")===2?we(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):we(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),we(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function Dje(t,e,n,r){const o=t.createBuffer();we(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,o));const a=4*4*e*n;return we(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),we(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),we(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),o}function Mje(t,e,n){const r=t,o=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,o),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),o}function Fje(t,e,n,r){const[o,i]=gg(e,n),s=4,a=new Uint8Array(eze(e*n,s));return we(t,()=>t.readPixels(0,0,o,i,r.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function Lje(t,e,n,r,o,i,s,a){const l=t,u=new Float32Array(tze(i,s));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function Bje(t,e,n){const r=new Float32Array(e*n*4);return we(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sS{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=ee().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,QBe(n,e)):this.gl=Ni(n),e=this.gl,ee().getNumber("WEBGL_VERSION")===2){const i=e;this.createVertexArray=()=>we(i,()=>i.createVertexArray()),this.bindVertexArray=s=>we(i,()=>i.bindVertexArray(s)),this.deleteVertexArray=s=>we(i,()=>i.deleteVertexArray(s)),this.getVertexArray=()=>we(i,()=>i.getParameter(i.VERTEX_ARRAY_BINDING))}else if(e!=null){const i=e.getExtension("OES_vertex_array_object");if(i==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>we(e,()=>i.createVertexArrayOES()),this.bindVertexArray=s=>we(e,()=>i.bindVertexArrayOES(s)),this.deleteVertexArray=s=>we(e,()=>i.deleteVertexArrayOES(s)),this.getVertexArray=()=>we(e,()=>e.getParameter(i.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const o="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),ee().getNumber("WEBGL_VERSION")===1){const i="OES_texture_float",s="OES_texture_half_float";if(this.textureFloatExtension=hy(this.gl,i),Ro(this.gl,s))this.textureHalfFloatExtension=hy(this.gl,s);else if(ee().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Ro(this.gl,o))this.colorBufferHalfFloatExtension=hy(this.gl,o);else if(ee().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Ro(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(Ro(this.gl,o))this.colorBufferHalfFloatExtension=this.gl.getExtension(o);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=kje(this.gl),this.indexBuffer=Ije(this.gl),this.framebuffer=gze(this.gl),this.textureConfig=ON(this.gl,this.textureHalfFloatExtension)}get debug(){return ee().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;we(e,()=>e.finish()),we(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),we(e,()=>e.deleteFramebuffer(this.framebuffer)),we(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),we(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),we(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),Tje(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),Eje(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),Nje(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),Pje(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,o){this.throwIfDisposed(),Rje(this.gl,e,n,r,o,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),Oje(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),Aje(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(UM(this.gl,this.framebuffer),this.outputTexture=null),we(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>Fje(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,o,i,s){return Lje(this.gl,e,n,r,o,i,s,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return Mje(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const o=Dje(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),o}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(ee().getBool("WEBGL_FENCE_API_ENABLED")){const o=e,i=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const s=o.clientWaitSync(i,0,0);return s===o.ALREADY_SIGNALED||s===o.CONDITION_SATISFIED},n=i}else ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>Bje(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=$je(n));const r=cze(n);we(n,()=>n.attachShader(r,this.vertexShader)),we(n,()=>n.attachShader(r,e)),dze(n,r);const o=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&nS(n,o),o}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;we(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),_je(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(we(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&nS(this.gl,this.program),we(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?vze(this.gl,e,n):xze(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),we(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),bze(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[o,i]=gf(n,r);this.setOutputMatrixTextureDriver(e,o,i)}setOutputMatrixWriteRegion(e,n,r,o){this.setOutputMatrixWriteRegionDriver(r,e,o,n)}setOutputPackedMatrixWriteRegion(e,n,r,o){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&nS(this.gl,this.program),py(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}we(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),we(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=hy(this.gl,ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,o=this.getQueryTimerExtensionWebGL2(),i=r.createQuery();return r.beginQuery(o.TIME_ELAPSED_EXT,i),i}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await _D(()=>this.disposed||this.isQueryAvailable(e,ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,o=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),i&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),o=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=zje(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in ee().platform&&(r=ee().platform.setTimeoutCustom.bind(ee().platform)),_D(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),rS(this.gl,e,this.framebuffer),this.debug&&py(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(rS(this.gl,this.outputTexture,this.framebuffer),this.debug&&py(this.gl)):UM(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const o=this.gl;rS(o,e,this.framebuffer),this.debug&&py(o),this.outputTexture=e,we(o,()=>o.viewport(0,0,n,r)),we(o,()=>o.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,o){this.throwIfDisposed(),we(this.gl,()=>this.gl.scissor(e,n,r,o))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function zje(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:jje,bincountImpl:i8,bincountReduceImpl:Wje,bitwiseAndImpl:Vje,castImpl:Uje,ceilImpl:Gje,concatImpl:Hje,equalImpl:Kje,expImpl:qje,expm1Impl:Xje,floorImpl:Yje,gatherNdImpl:Qje,gatherV2Impl:Zje,greaterImpl:Jje,greaterEqualImpl:e4e,lessImpl:t4e,lessEqualImpl:n4e,linSpaceImpl:r4e,logImpl:o4e,maxImpl:i4e,maximumImpl:s4e,minimumImpl:a4e,multiplyImpl:l4e,negImpl:u4e,notEqualImpl:c4e,prodImpl:d4e,raggedGatherImpl:f4e,raggedRangeImpl:h4e,raggedTensorToTensorImpl:p4e,rangeImpl:m4e,rsqrtImpl:g4e,scatterImpl:y4e,sigmoidImpl:v4e,simpleAbsImpl:s8,sliceImpl:x4e,sparseFillEmptyRowsImpl:b4e,sparseReshapeImpl:w4e,sparseSegmentReductionImpl:a8,sqrtImpl:S4e,staticRegexReplaceImpl:C4e,stridedSliceImpl:$4e,stringNGramsImpl:k4e,stringSplitImpl:I4e,stringToHashBucketFastImpl:T4e,subImpl:E4e,tileImpl:N4e,topKImpl:A4e,transposeImpl:DN,uniqueImpl:O4e}=PDe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l8(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function ar(t,e){return e===1?[t]:l8(t,e)}function _4e(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class R4e{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=Xn(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=ar("rc",this.rank),r=yt(this.rank),o=this.getOutOfBoundsCondition(n),i=this.getSetup(n),s=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${o}) {
            setOutput(vec4(0));
          } else {
            ${i}

            setOutput(vec4(${s}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let o=0;o<=1;o++){let i=`${r===0?"r":"rp1"}, ${o===0?"c":"cp1"}`;for(let s=2;s<this.rank;s++)i=`${e[e.length-1-s]},`+i;n.push(i)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],o=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${o};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class u8{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=Xn(this.outputShape.length);let r="";for(let o=0;o<4;o++){let i="thisRC = rc;";o%2===1&&(i+="thisRC.z += 1;"),o>1&&(i+="thisRC.y += 1;"),r+=`
        ${i}
        ${o>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${o}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${o>0?"}":""}
      `}this.userCode=`
      ${P4e(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?RN():_N(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function P4e(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?_ze(["r","c","d"],"inputShape"):Xu(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class D4e{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const o=XM(n,r),i=YM(e,o,r);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const s=qM(e,o,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=s,this.log();const l=this.freeTextures[i].pop();return this.usedTextures[i].push(l),l}let a;return o===_n.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):o===_n.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):o===_n.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):o===_n.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):o===_n.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(a),this.numUsedTextures++,this._numBytesAllocated+=s,this.log(),a}releaseTexture(e,n,r,o){if(this.freeTextures==null)return;const i=XM(r,o),s=YM(n,i,o);s in this.freeTextures||(this.freeTextures[s]=[]);const a=qM(n,i,this.gpgpu.gl,this.gpgpu.textureConfig,o),l=ee().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[s].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const u=this.usedTextures[s],c=u&&u.indexOf(e);if(c==null||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u[c]=u[u.length-1],u.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function M4e(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function qM(t,e,n,r,o){const i=F4e(e,r);let s;if(o){const[l,u]=gf(t[0],t[1]);s=l*u}else{const[l,u]=gg(t[0],t[1]);s=l*u}const a=M4e(n,i);return s*a}function F4e(t,e){switch(t){case _n.PACKED_2X2_FLOAT32:return r8(e);case _n.PACKED_2X2_FLOAT16:return o8(e);case _n.UNPACKED_FLOAT32:return e8(e);case _n.UNPACKED_FLOAT16:return t8(e);case _n.PACKED_4X1_UNSIGNED_BYTE:return n8(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function L4e(t){return ee().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?_n.PACKED_2X2_FLOAT32:_n.UNPACKED_FLOAT32:t?_n.PACKED_2X2_FLOAT16:_n.UNPACKED_FLOAT16}function XM(t,e){if(t===no.UPLOAD)return _n.PACKED_2X2_FLOAT32;if(t===no.RENDER||t==null)return L4e(e);if(t===no.DOWNLOAD||t===no.PIXELS)return _n.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function YM(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ki{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=Xn(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const Ho="if (isnan(x)) return x;",B4e="return x;",QM="return abs(x);",z4e="return (x >= 0.0) ? x : (exp(x) - 1.0);",j4e=Ho+`
  return (x < 0.0) ? 0.0 : x;
`,W4e=Ho+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,fa="return x;",V4e="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U4e="return x;",G4e=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,H4e=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,K4e=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,q4e="return 1.0 / (1.0 + exp(-1.0 * x));";class Ta{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=Xn(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class X4e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=Xn(this.outputShape.length);const n=e.length,r=ar("rc",n),o=yt(n),i=_4e(n,r),s=r.slice(-2),a=n<=1?"rc":`vec2(${s.join(",")})`;this.userCode=`
      void main() {
        ${o} rc = getOutputCoords();
        vec4 packedInput = getA(${i});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y4e=PU,Q4e=1e-7,Z4e=1e-4,yy={};function J4e(t){return t in yy||(yy[t]={}),yy[t]}const eWe=ee().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),tWe=600;function nWe(){return ee().global.screen==null?1024:ee().global.screen.height*ee().global.screen.width*window.devicePixelRatio*tWe/1024/1024}class _1 extends QT{nextDataId(){return _1.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!ee().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof sS)n=e;else{const r=Ni(ee().getNumber("WEBGL_VERSION"),e);n=new sS(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=Ni(ee().getNumber("WEBGL_VERSION"));n=new sS(r),this.binaryCache=J4e(ee().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new D4e(this.gpgpu),this.numMBBeforeWarning=nWe(),this.texData=new JW(this,Mi())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,o,i,s){const a=this.makeTensorInfo(n,r),l=this.texData.get(a.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[o,i]},l.texShape=[o,i];const u=my(n),c=new KM(u,!1,s),d=this.runWebGLProgram(c,[a],r,[[o,i]]);return d.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(a),d.dataId}write(e,n,r){if((ee().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||ee().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const o={id:this.nextDataId()};return this.texData.set(o,{shape:n,dtype:r,values:e,usage:no.UPLOAD,refCount:1}),o}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,o,i){if(ee().getBool("DEBUG")&&this.checkNumericalProblems(n),o==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:o,values:n,usage:no.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:o,complexTensorInfos:i,slice:s,shape:a,isPacked:l}=n;if(s!=null){let f;l?f=new Ta(a,fa):f=new Ki(a,fa);const h=this.runWebGLProgram(f,[{dataId:e,shape:a,dtype:o}],o),p=this.readSync(h.dataId);return this.disposeIntermediateTensorInfo(h),p}if(r!=null)return this.convertAndCacheOnCPU(e);if(o==="string")return r;const u=this.activeTimers!=null;let c;u&&(c=gr());let d;if(o==="complex64"){const f=this.readSync(i.real.dataId),h=this.readSync(i.imag.dataId);d=Hs(f,h)}else d=this.getValuesFromTexture(e);return u&&(this.downloadWaitMs+=gr()-c),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const p=this.pendingRead.get(e);return new Promise(m=>p.push(m))}const n=this.texData.get(e),{values:r,shape:o,slice:i,dtype:s,complexTensorInfos:a,isPacked:l}=n;if(i!=null){let p;l?p=new Ta(o,fa):p=new Ki(o,fa);const m=this.runWebGLProgram(p,[{dataId:e,shape:o,dtype:s}],s),g=this.read(m.dataId);return this.disposeIntermediateTensorInfo(m),g}if(r!=null)return this.convertAndCacheOnCPU(e);if(ee().getBool("DEBUG")&&!ee().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&ee().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,c;if(s!=="complex64"&&ee().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(e);const p=this.texData.get(c.dataId);u=this.gpgpu.createBufferFromTexture(p.texture.texture,...fy(o))}this.pendingRead.set(e,[]),s!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(s==="complex64"){const p=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),m=p[0],g=p[1];d=Hs(m,g)}else if(u==null)d=this.getValuesFromTexture(e);else{const p=re(o);d=this.gpgpu.downloadFloat32MatrixFromBuffer(u,p)}if(c!=null&&this.disposeIntermediateTensorInfo(c),u!=null){const p=this.gpgpu.gl;we(p,()=>p.deleteBuffer(u))}const f=this.convertAndCacheOnCPU(e,d),h=this.pendingRead.get(e);return this.pendingRead.delete(e),h.forEach(p=>p(f)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Mi().removeDataId(e,this),this.pendingDeletes--),f}readToGPU(e,n={}){const r=this.texData.get(e),{values:o,shape:i,slice:s,dtype:a,isPacked:l,texture:u}=r;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(s!=null){let h;l?h=new Ta(i,fa):h=new Ki(i,fa);const p=this.runWebGLProgram(h,[{dataId:e,shape:i,dtype:a}],a),m=this.readToGPU(p,n);return this.disposeIntermediateTensorInfo(p),m}if(u==null)throw o!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(e,n.customTexShape),d=Mi().makeTensorFromTensorInfo(c),f=this.texData.get(c.dataId);return Object.assign({tensorRef:d},f.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(o=>Ja(o));return Ve(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Ve(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!ize(r))throw ee().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:o}=this.texData.get(e),i=re(n);if(ee().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const f=this.decode(e),h=this.texData.get(f.dataId),p=this.gpgpu.downloadMatrixFromPackedTexture(h.texture.texture,...fy(n)).subarray(0,i);return this.disposeIntermediateTensorInfo(f),p}const s=ee().getBool("WEBGL_PACK")&&o===!0,a=s?my(n):n,l=s?new wje(a):new bje(a),u=this.runWebGLProgram(l,[{shape:a,dtype:r,dataId:e}],"float32"),c=this.texData.get(u.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(u),d}timerAvailable(){return ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let o=!1;this.programTimersStack==null?(this.programTimersStack=r,o=!0):this.activeTimers.push(r),this.activeTimers=r,e();const i=bu(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),s=bu(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,o&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(i);a.kernelMs=j$e(l),a.getExtraProfileInfo=()=>l.map((u,c)=>({name:s[c],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:gr(),endMs:null}}endTimer(e){return ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=gr(),e)}async getQueryTime(e){if(ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:o,usage:i,isPacked:s,slice:a}=this.texData.get(e),l=a&&a.origDataId||e,u=this.dataRefCount.get(l);u>1?this.dataRefCount.set(l,u-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(o,r),this.textureManager.releaseTexture(n,o,i,s)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=eWe){return ee().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&re(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){eo("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return Y4e(e.shape,n)}packedUnaryOp(e,n,r){const o=new Ta(e.shape,n),i=this.compileAndRun(o,[e],r);return Mi().makeTensorFromTensorInfo(i)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const o=s8(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,o)}if(ee().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,QM,e.dtype);const n=new Ki(e.shape,QM),r=this.compileAndRun(n,[e]);return Mi().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let o;if(n==="string"&&r!=null&&r.length>0&&rm(r[0])){const i=r.map(s=>Ba(s));o=this.write(i,e,n)}else o=this.write(r,e,n);return this.texData.get(o).usage=null,{dataId:o,shape:e,dtype:n}}makeOutput(e,n,r){return Mi().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new X4e(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new R4e(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[zd(e.shape),...jd(e.shape)],o={dtype:e.dtype,shape:r,dataId:e.dataId},i=[zd(n),...jd(n)],s=new u8(i,r),a=!0,l=[r],u=this.runWebGLProgram(s,[o],e.dtype,l,a);return{dataId:u.dataId,shape:n,dtype:u.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:o,shape:i,dtype:s}=r;if(n!=null){const f=re(i),h=n[0]*n[1]*4;M(f<=h,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=my(i);let l;o?l=new xje(a):l=new vje(a);const u=!0,c=[n??fy(a)],d=this.runWebGLProgram(l,[{shape:a,dtype:s,dataId:e}],s,c,u,n);return{dtype:s,shape:i,dataId:d.dataId}}runWebGLProgram(e,n,r,o,i=!1,s){const a=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(a.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===_p.DENSE){const y=s??fy(e.outputShape);l.texShape=y.map(v=>v*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),re(a.shape)===0)return l.values=Un(a.dtype,0),a;const u=[],c=n.map(y=>{if(y.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let v=this.texData.get(y.dataId);if(v.texture==null){if(!e.packedInputs&&re(y.shape)<=ee().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:y.shape,texData:null,isUniform:!0,uniformValues:v.values};e.packedInputs&&(v.isPacked=!0,v.shape=y.shape)}if(this.uploadToGPU(y.dataId),!!v.isPacked!=!!e.packedInputs)y=v.isPacked?this.unpackTensor(y):this.packTensor(y),u.push(y),v=this.texData.get(y.dataId);else if(v.isPacked&&!B0(v.shape,y.shape)){const x=y,b=y.shape;y.shape=v.shape,y=this.packedReshape(y,b),u.push(y),v=this.texData.get(y.dataId),x.shape=b}return{shape:y.shape,texData:v,isUniform:!1}});this.uploadToGPU(a.dataId);const d={shape:a.shape,texData:l,isUniform:!1},f=yje(e,c,d),h=this.getAndSaveBinary(f,()=>mje(this.gpgpu,e,c,d)),p=this.activeTimers!=null;let m;p&&(m=this.startTimer()),ee().get("ENGINE_COMPILE_ONLY")||gje(this.gpgpu,h,c,d,o),u.forEach(y=>this.disposeIntermediateTensorInfo(y)),p&&(m=this.endTimer(m),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(m)}));const g=ee().getNumber("WEBGL_FLUSH_THRESHOLD");if(g>0){const y=gr();y-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=y)}if(!ee().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&i===!1){const y=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),y}return a}compileAndRun(e,n,r,o,i=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,o,i)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(ee().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Q(()=>{if(!ee().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=ee().getBool("DEBUG");ee().set("DEBUG",!1);const n=this.abs(at(1e-8)).dataSync()[0];if(ee().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?Q4e:Z4e}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:o,values:i,texture:s,usage:a,isPacked:l}=n;if(s!=null)return;const u=this.activeTimers!=null;let c;u&&(c=gr());let d=n.texShape;if(d==null&&(d=Cze(r,l),n.texShape=d),i!=null){const f=my(r);let h,p=d[1],m=d[0];const g=i instanceof Uint8Array||i instanceof Uint8ClampedArray;(l||!g)&&([p,m]=gf(d[0],d[1])),l?h=new Cje(f,g):h=new KM(f,g);const y=g?[m,p]:d,v=this.makeTensorInfo(y,o),x=this.texData.get(v.dataId);g?x.usage=no.PIXELS:x.usage=no.UPLOAD,x.texShape=y,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(v.dataId),p,m,i);const b=[[m,p]],S=this.runWebGLProgram(h,[v],o,b,!0),$=this.texData.get(S.dataId);n.texShape=$.texShape,n.isPacked=$.isPacked,n.usage=$.usage,ee().get("ENGINE_COMPILE_ONLY")?this.disposeData(S.dataId):(n.texture=$.texture,n.values=null,this.texData.delete(S.dataId)),this.disposeIntermediateTensorInfo(v),u&&(this.uploadWaitMs+=gr()-c)}else{const f=this.acquireTexture(d,a,o,l);n.texture=f}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:o}=r;return n!=null&&(r.values=rWe(n,o)),r.values}acquireTexture(e,n,r,o){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${i} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,o)}computeBytes(e,n){return e[0]*e[1]*p0(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(o=>{try{this.checkCompletion_(n),o(!0)}catch(i){throw i}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await QU(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(q6(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:o,nanLoc:i,outShapeLocation:s,outShapeStridesLocation:a,outTexShapeLocation:l}=J6(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=o,e.nanLoc=i,e.outShapeLocation=s,e.outShapeStridesLocation=a,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:o,height:i,width:s,channels:a}=e,l=Mi().backend;if(!l.gpgpu.gl.isTexture(o))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const u=l.writeTexture(o,n,r,i,s,a);return Mi().makeTensorFromDataId(u,n,r,l)}}_1.nextDataId=0;function rWe(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */HV()&&YV("webgl",()=>new _1,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MN=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class _u{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=Fe(n,r),this.enableShapeUniforms=Xn(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qu=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class wf{constructor(e,n,r,o=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Fe(n,r);const i=this.outputShape.length;this.enableShapeUniforms=Xn(i);let s="";if(o)if(i===0||re(this.outputShape)===1)s=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(s=`
          ${yt(i)} coords = getOutputCoords();
        `,i===1)this.enableShapeUniforms?s+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:s+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=ar("coords",i);this.enableShapeUniforms?s+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= outShape[${i} - 2];
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= outShape[${i} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:s+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= ${this.outputShape[i-2]};
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= ${this.outputShape[i-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${s}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gr(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const oWe={kernelName:$m,backendName:"webgl",kernelFunc:Gr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cl(t){const{inputs:e,backend:n}=t,{real:r,imag:o}=e,i=n.makeTensorInfo(r.shape,"complex64"),s=n.texData.get(i.dataId),a=Gr({inputs:{x:r},backend:n}),l=Gr({inputs:{x:o},backend:n});return s.complexTensorInfos={real:a,imag:l},i}const iWe={kernelName:cE,backendName:"webgl",kernelFunc:Cl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c8="return (a < 0.) ? b * a : a;",d8=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function sWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{alpha:i}=r,s=n.makeTensorInfo([],"float32",ml(i,"float32")),a=ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new wf(d8,o.shape,s.shape):new _u(c8,o.shape,s.shape),l=n.runWebGLProgram(a,[o,s],"float32");return n.disposeIntermediateTensorInfo(s),l}const aWe={kernelName:kb,backendName:"webgl",kernelFunc:sWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f8="return (a < 0.) ? b * a : a;",h8=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function lWe(t){const{inputs:e,backend:n}=t,{x:r,alpha:o}=e,i=ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new wf(h8,r.shape,o.shape):new _u(f8,r.shape,o.shape);return n.runWebGLProgram(i,[r,o],"float32")}const uWe={kernelName:Ub,backendName:"webgl",kernelFunc:lWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sf="if (isnan(x)) return x;";function tt({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:o,backend:i})=>{const{x:s}=o,a=i,l=r||s.dtype;if(a.shouldExecuteOnCPU([s])&&n!=null){const d=a.texData.get(s.dataId),f=n(d.values,l);return a.makeTensorInfo(s.shape,l,f)}const u=ee().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let c;return u?c=new Ta(s.shape,e):c=new Ki(s.shape,t),a.runWebGLProgram(c,[s],l)}}function Ln({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:o,dtype:i}){return({inputs:s,backend:a})=>{const{a:l,b:u}=s,c=a;if(r&&l.dtype==="complex64"){const p=c.texData.get(l.dataId),m=c.texData.get(u.dataId),[g,y]=[[p.complexTensorInfos.real,m.complexTensorInfos.real],[p.complexTensorInfos.imag,m.complexTensorInfos.imag]].map(x=>{const[b,w]=x,S={dataId:b.dataId,dtype:b.dtype,shape:l.shape},$={dataId:w.dataId,dtype:w.dtype,shape:u.shape},C=new _u(t,l.shape,u.shape);return c.runWebGLProgram(C,[S,$],Vr(b.dtype,w.dtype))}),v=Cl({inputs:{real:g,imag:y},backend:c});return c.disposeIntermediateTensorInfo(g),c.disposeIntermediateTensorInfo(y),v}const d=i||Vr(l.dtype,u.dtype);if((l.dtype==="string"||u.dtype==="string"||c.shouldExecuteOnCPU([l,u]))&&o!=null){const p=c.texData.get(l.dataId).values,m=c.texData.get(u.dataId).values,g=l.dtype==="string"?Ks(p):p,y=l.dtype==="string"?Ks(m):m,[v,x]=o(l.shape,u.shape,g,y,d),b=c.makeTensorInfo(x,d),w=c.texData.get(b.dataId);return w.values=v,b}const f=ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let h;return f?h=new wf(e,l.shape,u.shape,n):h=new _u(t,l.shape,u.shape),c.runWebGLProgram(h,[l,u],d)}}function Rp(t,e=!1){if(t==="linear")return e?U4e:B4e;if(t==="relu")return e?H4e:j4e;if(t==="elu")return e?G4e:z4e;if(t==="relu6")return e?K4e:W4e;if(t==="prelu")return e?h8:f8;if(t==="leakyrelu")return e?d8:c8;if(t==="sigmoid")return e?q4e:V4e;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class p8{constructor(e,n,r,o=!1,i=!1,s=!1,a=null,l=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Xn(this.outputShape.length);const c=o?e[1]:e[2],d=Math.ceil(c/2),f=o?"i * 2, rc.y":"rc.y, i * 2",h=i?"rc.z, i * 2":"i * 2, rc.z",p=o?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let g="",y="";a&&(l?g=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:u?g=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:g=`vec4 activation(vec4 x) {
          ${a}
        }`,y="result = activation(result);");const v=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let x="rc.x",b="rc.x";e[0]<n[0]?x=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(b=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${g}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${x};
        int batchB = ${b};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${f});
          vec4 b = getMatrixB(batchB, ${h});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${p[0]} * ${m[0]});
          result += (${p[1]} * ${m[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${v}

        ${y}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZM={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class JM{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Fe(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eF="return a * b;";function FN(t){const{inputs:e,backend:n}=t,{a:r,b:o}=e,i=Vr(r.dtype,o.dtype);if(r.dtype==="complex64"){const a=n.texData.get(r.dataId),l=n.texData.get(o.dataId),u=new JM(ZM.REAL,r.shape,o.shape),c=new JM(ZM.IMAG,r.shape,o.shape),d=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:r.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:o.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:o.shape}],f=n.runWebGLProgram(u,d,"float32"),h=n.runWebGLProgram(c,d,"float32"),p=Cl({inputs:{real:f,imag:h},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),p}if(n.shouldExecuteOnCPU([r,o])){const a=n.texData.get(r.dataId),l=n.texData.get(o.dataId),[u,c]=l4e(r.shape,o.shape,a.values,l.values,i),d=n.makeTensorInfo(c,i),f=n.texData.get(d.dataId);return f.values=u,d}let s;return ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")?s=new wf(eF,r.shape,o.shape):s=new _u(eF,r.shape,o.shape),n.runWebGLProgram(s,[r,o],i)}const cWe={kernelName:Rm,backendName:"webgl",kernelFunc:FN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dWe(t,e,n){const r=[zd(t.shape),...jd(t.shape)],o={dtype:t.dtype,shape:r,dataId:t.dataId},i=[zd(e),...jd(e)],s=new u8(i,r),a=!0,l=[r],u=n.runWebGLProgram(s,[o],t.dtype,l,a);return{dataId:u.dataId,shape:e,dtype:u.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ye(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{shape:i}=r,s=n,a=re(o.shape),l=tV(i,a),u=re(l);M(a===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${o.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const c=s.texData.get(o.dataId);return c.isPacked&&!B0(o.shape,l)&&!(c.texture!==null&&B0(c.shape,l))?dWe(o,l,s):(s.incRef(o.dataId),{dataId:o.dataId,shape:l,dtype:o.dtype})}const fWe={kernelName:Hb,backendName:"webgl",kernelFunc:ye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tF{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:o,inSize:i,outSize:s}=e;this.outputShape=[o,s];const a=Math.floor(r/4)*4,l=r%4;let u="sumValue += dot(values, ones);";if(n!=null){const d=1/n;u=`sumValue += dot(values * ${Nd(d)?d.toPrecision(2):d}, ones);`}let c="";i%r>0&&(c=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${u}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${u}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${u}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${u}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hWe{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:o,inSize:i,outSize:s}=e;this.outputShape=[o,s];let a="0.0",l="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",l="min"):n==="max"&&(a="-1.0 / 1e-20",l="max");let u=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?u="sumValue":n==="prod"?u="prodValue":n==="all"?u="allValue":n==="any"&&(u="anyValue");const c=Math.floor(r/4)*4,d=r%4;let f=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,h="vec4";n==="all"?(a="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):n==="any"&&(a="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");let p="";i%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${f}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===2}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===3}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${f}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pWe(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=m1(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function Zu(t,e,n,r){const o=pWe(t.shape);let i=t;for(let s=0;s<o.length;s++){const{inSize:a,windowSize:l,outSize:u}=o[s];let c,d;n==="mean"?c=s===0?new tF({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:u},a):new tF({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:u}):c=new hWe({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:u},n),d=i,i=r.runWebGLProgram(c,[i],e),d.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(d)}return i}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mWe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let s=0;s<r.length;s++)r[s]=e[n[s]];this.outputShape=r,this.rank=r.length;const o=yt(this.rank),i=gWe(n);this.userCode=`
    void main() {
      ${o} resRC = getOutputCoords();
      setOutput(getA(${i}));
    }
    `}}function gWe(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let o=0;o<t.length;o++)r[t[o]]=n[o];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yWe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let c=0;c<r.length;c++)r[c]=e[n[c]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const o=yt(this.rank),i=l8("rc",this.rank),s=new Array(this.rank);for(let c=0;c<n.length;c++)s[n[c]]=i[c];const a=`vec2(${s.slice(-2).join()})`,l=`++${i[this.rank-1]} < ${r[this.rank-1]}`,u=`getChannel(getA(${s.join()}), ${a})`;this.userCode=`
    void main() {
      ${o} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${u};
      if(${l}) {
        result[1] = ${u};
      }
      --${i[this.rank-1]};
      if(++${i[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${u};
        if(${l}) {
          result[3] = ${u};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R1(t,e,n){const r=ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new yWe(t.shape,e):new mWe(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vWe(t,e,n,r){const o=e,i=t.shape.length,s=Ue(o,t.shape);let a=s;const l=Ut(a,i),u=l!=null;let c=t;u&&(c=R1(t,l,r),a=en(a.length,i)),Fn("sum",a,i);const[d,f]=Nn(c.shape,a);let h=d;n&&(h=an(d,s));const p=re(f),g=re(t.shape)/p,y=ye({inputs:{x:c},attrs:{shape:[g,p]},backend:r}),v=GE(t.dtype),x=Zu(y,v,"sum",r),b=ye({inputs:{x},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(y),r.disposeIntermediateTensorInfo(x),u&&r.disposeIntermediateTensorInfo(c),b}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P1(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:i,keepDims:s}=r;return vWe(o,i,s,n)}const xWe={kernelName:Zb,backendName:"webgl",kernelFunc:P1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cr(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{perm:i}=r,s=n,a=o.shape.length,l=new Array(a);for(let c=0;c<l.length;c++)l[c]=o.shape[i[c]];let u;if(s.shouldExecuteOnCPU([o])){const d=s.texData.get(o.dataId).values,f=DN(d,o.shape,o.dtype,i,l);u=s.makeTensorInfo(l,o.dtype);const h=s.texData.get(u.dataId);h.values=f}else u=R1(o,i,s);return u}const bWe={kernelName:zc,backendName:"webgl",kernelFunc:cr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m8=1e3;function z0({a:t,b:e,transposeA:n,transposeB:r,backend:o,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:a=0,activation:l=null}){const u=t.shape.length,c=e.shape.length,d=n?t.shape[u-2]:t.shape[u-1],f=r?e.shape[c-1]:e.shape[c-2],h=n?t.shape[u-1]:t.shape[u-2],p=r?e.shape[c-2]:e.shape[c-1],m=t.shape.slice(0,-2),g=e.shape.slice(0,-2),y=re(m),v=re(g),b=Fe(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([h,p]);M(d===f,()=>`Error in matMul: inner shapes (${d}) and (${f}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const w=n?[y,d,h]:[y,h,d],S=r?[v,p,f]:[v,f,p],$=ye({inputs:{x:t},backend:o,attrs:{shape:w}}),C=ye({inputs:{x:e},backend:o,attrs:{shape:S}}),k=[$,C],I=Math.max(y,v),T=n?$.shape[1]:$.shape[2],E=i!=null,_=s!=null,N=l==="leakyrelu",P=l!=null?Rp(l,!0):null,F=E||_||N||P!=null;let L;if((h===1||p===1)&&T>m8&&F===!1){let O=$,j=C;n&&(O=cr({inputs:{x:$},backend:o,attrs:{perm:[0,2,1]}}),k.push(O)),r&&(j=cr({inputs:{x:C},backend:o,attrs:{perm:[0,2,1]}}),k.push(j));const V=p!==1,z=p===1;let U=O;V&&(U=ye({inputs:{x:O},backend:o,attrs:{shape:[I,T,1]}}),k.push(U));const Z=p===1?2:1;let te=j;z&&(te=ye({inputs:{x:j},backend:o,attrs:{shape:[I,1,T]}}),k.push(te));const se=FN({inputs:{a:U,b:te},backend:o});L=P1({inputs:{x:se},backend:o,attrs:{axis:Z,keepDims:!0}}),k.push(se)}else{const O=Vr(t.dtype,e.dtype),j=new p8(w,S,[I,h,p],n,r,E,P,_,N),V=[$,C];if(i!=null&&V.push(i),_&&V.push(s),N){const z=o.makeTensorInfo([],"float32",ml(a,"float32"));V.push(z),k.push(z)}L=o.runWebGLProgram(j,V,O)}const A=ye({inputs:{x:L},backend:o,attrs:{shape:b}});k.push(L);for(const O of k)o.disposeIntermediateTensorInfo(O);return A}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wWe(t){const{inputs:e,backend:n,attrs:r}=t,{a:o,b:i,bias:s,preluActivationWeights:a}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=r;return z0({a:o,b:i,transposeA:l,transposeB:u,backend:n,bias:s,preluActivationWeights:a,leakyreluAlpha:d,activation:c})}const SWe={kernelName:m0,backendName:"webgl",kernelFunc:wWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nF="return abs(x);";function CWe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const i=n.texData.get(r.dataId),s=s8(i.values);return n.makeTensorInfo(r.shape,r.dtype,s)}let o;return ee().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new Ta(r.shape,nF):o=new Ki(r.shape,nF),n.runWebGLProgram(o,[r],r.dtype)}const $We={kernelName:ib,backendName:"webgl",kernelFunc:CWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kWe=Ho+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,IWe=tt({opSnippet:kWe}),TWe={kernelName:om,backendName:"webgl",kernelFunc:IWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EWe=Ho+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,NWe=tt({opSnippet:EWe}),AWe={kernelName:im,backendName:"webgl",kernelFunc:NWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rF="return a + b;",OWe=Ln({opSnippet:rF,packedOpSnippet:rF,supportsComplex:!0,cpuKernelImpl:jje}),_We={kernelName:uf,backendName:"webgl",kernelFunc:OWe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RWe{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((i,s)=>`T${s}`);const r=[];this.variableNames.forEach(i=>{r.push(`float v${i} = get${i}AtOutCoords();`)});const o=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${o};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PWe{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((i,s)=>`T${s}`);const r=[];this.variableNames.forEach(i=>{r.push(`vec4 v${i} = get${i}AtOutCoords();`)});const o=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${o};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dy(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return Gr({inputs:{x:r[0]},backend:n});if(r.length>ee().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),u=Dy({inputs:r.slice(0,l),backend:n}),c=Dy({inputs:r.slice(l),backend:n});return Dy({inputs:[u,c],backend:n})}const o=r.map(l=>l.dtype).reduce((l,u)=>Vr(l,u)),i=r.map(l=>l.shape),a=ee().getBool("WEBGL_PACK")?new PWe(r[0].shape,i):new RWe(r[0].shape,i);return n.runWebGLProgram(a,r,o)}const DWe={kernelName:rE,backendName:"webgl",kernelFunc:Dy};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:i,keepDims:s}=r,a=o.shape.length,l=Ue(i,o.shape);let u=l;const c=Ut(u,a);let d=o;c!=null&&(d=cr({inputs:{x:o},backend:n,attrs:{perm:c}}),u=en(u.length,a)),Fn("all",u,a);const[f,h]=Nn(d.shape,u),p=re(h),m=ye({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),g=Zu(m,m.dtype,"all",n);let y;if(s){const v=an(f,l);y=ye({inputs:{x:g},backend:n,attrs:{shape:v}})}else y=ye({inputs:{x:g},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(d),y}const FWe={kernelName:oE,backendName:"webgl",kernelFunc:MWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:i,keepDims:s}=r,a=o.shape.length,l=Ue(i,o.shape);let u=l;const c=Ut(u,a);let d=o;c!=null&&(d=cr({inputs:{x:o},backend:n,attrs:{perm:c}}),u=en(u.length,a)),Fn("any",u,a);const[f,h]=Nn(d.shape,u),p=re(h),m=ye({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),g=Zu(m,m.dtype,"any",n);let y;if(s){const v=an(f,l);y=ye({inputs:{x:g},backend:n,attrs:{shape:v}})}else y=ye({inputs:{x:g},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(d),y}const BWe={kernelName:iE,backendName:"webgl",kernelFunc:LWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zWe{constructor(e,n,r){this.variableNames=["A"];const{windowSize:o,batchSize:i,outSize:s}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,s];const a=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${o};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${o}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jWe{constructor(e,n,r,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,M(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const i=e[e.length-1],s=Math.ceil(i/n);this.outputShape=e.slice(0,-1),s>1&&this.outputShape.push(s),o||this.variableNames.push("bestIndicesA");const a=this.outputShape,l=a.length,u=yt(l),c=ar("coords",l);let d,f;if(s===1){f=l+1;const C=yt(f);d=`
        ${C} sourceLocR = ${C}(${c.join()}, 0);
        ++${c[l-1]};
        ${C} sourceLocG = ${C}(${c.join()}, 0);
        ++${c[l-2]};
        ${C} sourceLocA = ${C}(${c.join()}, 0);
        --${c[l-1]};
        ${C} sourceLocB = ${C}(${c.join()}, 0);
        --${c[l-2]};`}else f=l,d=`
        ${u} sourceLocR = coords;
        ++${c[l-1]};
        ${u} sourceLocG = coords;
        ++${c[l-2]};
        ${u} sourceLocA = coords;
        --${c[l-1]};
        ${u} sourceLocB = coords;
        --${c[l-2]};`;const h=["x","y","z","w","u","v"].slice(0,f),p="."+h[f-1],m=h.map(C=>"int "+C),g=ar("sourceLocR",f-1).concat("inIdx.r"),y=ar("sourceLocG",f-1).concat("inIdx.g"),v=ar("sourceLocB",f-1).concat("inIdx.b"),x=ar("sourceLocA",f-1).concat("inIdx.a"),b=r==="max"?"greaterThan":"lessThan",w=o?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${x.join()})));`,S=`vec4(
            getAChannel(${g.join()}),
            hasNextCol ? getAChannel(${y.join()}) : 0.,
            hasNextRow ? getAChannel(${v.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${x.join()}) : 0.)`,$=o?"":`
      float getBestIndicesAChannel(${m.join()}) {
        return getChannel(getBestIndicesA(${h.join()}),
                                          vec2(${h.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${m.join()}) {
        return getChannel(getA(${h.join()}),
                               vec2(${h.slice(-2).join()}));
      }
      ${$}
      void main() {
        ${u} coords = getOutputCoords();
        bool hasNextCol = ${c[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${c[l-2]} < ${a[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},
          sourceLocB${p}, sourceLocA${p}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${S};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${w}
          vec4 candidate = ${S};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${b}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g8(t,e,n,r=null){let o=e.shape[0],i=e.shape[1];r!=null&&(o=r.shape[0],i=r.shape[1]);const s=m1(i),a={windowSize:s,inSize:i,batchSize:o,outSize:Math.ceil(i/s)},l=new zWe(a,n,r==null),u=[e];r!=null&&u.push(r);const c=t.runWebGLProgram(l,u,"int32");if(c.shape[1]===1)return c;const d=g8(t,e,n,c);return t.disposeIntermediateTensorInfo(c),d}function y8(t,e,n,r=null){const o=r!=null?r.shape:e.shape,i=o[o.length-1],s=m1(i),a=new jWe(o,s,n,r==null),l=r==null?[e]:[e,r],u=t.runWebGLProgram(a,l,"int32");if(u.shape.length===e.shape.length){const c=y8(t,e,n,u);return t.disposeIntermediateTensorInfo(u),c}return u}function v8(t,e,n,r){const o=[n];if(Fn("arg"+r.charAt(0).toUpperCase()+r.slice(1),o,e.shape.length),!ee().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const i=[],s=t.texData.get(e.dataId),a=s!==null&&s.isPacked;let l=e;a&&(l=t.unpackTensor(e),i.push(l));const[u,c]=Nn(l.shape,o),d=re(c),f=ye({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});i.push(f);const h=g8(t,f,r);i.push(h);const p=ye({inputs:{x:h},backend:t,attrs:{shape:u}});return i.forEach(m=>t.disposeIntermediateTensorInfo(m)),p}return y8(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:i}=r;let s=Ue(i,o.shape);const a=Ut(s,o.shape.length);let l=o;const u=[];a!=null&&(l=cr({inputs:{x:o},backend:n,attrs:{perm:a}}),u.push(l),s=en(s.length,l.shape.length)),Fn("argMax",[s[0]],l.shape.length);const c=v8(n,l,s[0],"max");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const VWe={kernelName:sb,backendName:"webgl",kernelFunc:WWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:i}=r;let s=Ue(i,o.shape);const a=Ut(s,o.shape.length);let l=o;const u=[];a!=null&&(l=cr({inputs:{x:o},backend:n,attrs:{perm:a}}),u.push(l),s=en(s.length,l.shape.length)),Fn("argMin",[s[0]],l.shape.length);const c=v8(n,l,s[0],"min");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const GWe={kernelName:ab,backendName:"webgl",kernelFunc:UWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HWe=Ho+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,KWe=tt({opSnippet:HWe}),qWe={kernelName:sm,backendName:"webgl",kernelFunc:KWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XWe=Ho+"return log(x + sqrt(x * x + 1.0));",YWe=tt({opSnippet:XWe}),QWe={kernelName:am,backendName:"webgl",kernelFunc:YWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZWe=Ho+`
  return atan(x);
`,JWe=tt({opSnippet:ZWe}),eVe={kernelName:lm,backendName:"webgl",kernelFunc:JWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tVe=MN+`
  return atan(a, b);
`,nVe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Qu+`
  return result;
`,rVe=Ln({opSnippet:tVe,packedOpSnippet:nVe}),oVe={kernelName:cm,backendName:"webgl",kernelFunc:rVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iVe=Ho+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,sVe=tt({opSnippet:iVe}),aVe={kernelName:um,backendName:"webgl",kernelFunc:sVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pp{constructor(e,n,r,o=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const s=e.filterWidth,a=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterHeight,f=e.effectiveFilterWidth,h=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const m=n==="avg",g=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,y=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let v="0.0";if(m||(v="-1.0 / 1e-20"),r){const C=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${h}, ${p});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${u}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f};
                wC += ${c}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${C} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${o?i?g:y:`wR * ${f} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const x="max";let b=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(b="avgValue / max(count, 1.0)");const w=Math.floor(s/4)*4,S=s%4,$=`
      if (${m}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${x}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${h}, ${p});
      const float initializationValue = ${v};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${v});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${u}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${w}; wC += 4) {
            int xC = xCCorner + wC * ${c};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              getValue(batch, xR, xC + 3 * ${c}, d)
            );

            ${$}
          }

          int xC = xCCorner + ${w};
          if (${S===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${$}
          } else if (${S===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              initializationValue,
              initializationValue
            );

            ${$}
          } else if (${S===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              initializationValue
            );

            ${$}
          }
        }
        setOutput(${b});
      }
    `}}class LN{constructor(e,n,r,o=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const s=e.filterWidth,a=e.strideDepth,l=e.strideHeight,u=e.strideWidth,c=e.dilationDepth,d=e.dilationHeight,f=e.dilationWidth,h=e.effectiveFilterDepth,p=e.effectiveFilterHeight,m=e.effectiveFilterWidth,g=e.padInfo.front,y=e.padInfo.top,v=e.padInfo.left;this.outputShape=e.outShape;const x=n==="avg";let b="0.0";if(x||(b="-1.0 / 1e-20"),r){const I=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${u});
        const ivec3 pads = ivec3(${g}, ${y}, ${v});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${h};
              wD += ${c}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${p};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${m};
                  wC += ${f}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${I} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${o?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${p} * ${m} +
                      wR * ${m} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const w="max";let S=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(S="avgValue / max(count, 1.0)");const $=Math.floor(s/4)*4,C=s%4,k=`
      if (${x}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${u});
      const ivec3 pads = ivec3(${g}, ${y}, ${v});
      const float initializationValue = ${b};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${b});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${c}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${$}; wC += 4) {
              int xC = xCCorner + wC * ${f};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                getValue(batch, xD, xR, xC + 3 * ${f}, ch)
              );

              ${k}
            }

            int xC = xCCorner + ${$};
            if (${C===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${k}
            } else if (${C===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                initializationValue,
                initializationValue
              );

              ${k}
            } else if (${C===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                initializationValue
              );

              ${k}
            }
          }
        }
        setOutput(${S});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e;yg(o,"avgPool");const{filterSize:i,strides:s,pad:a,dimRoundingMode:l}=r,u=1;M(Kn(s,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${u}'`);const c=Uo(o.shape,i,s,u,a,l);if(c.filterWidth===1&&c.filterHeight===1&&ut(c.inShape,c.outShape))return Gr({inputs:{x:o},backend:n});const d=new Pp(c,"avg",!1);return n.runWebGLProgram(d,[o],"float32")}const uVe={kernelName:lb,backendName:"webgl",kernelFunc:lVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{filterSize:i,strides:s,pad:a,dimRoundingMode:l,dataFormat:u}=r,c=[1,1,1],d=Js(o.shape,i,s,c,a,l,u),f=new LN(d,"avg",!1);return n.runWebGLProgram(f,[o],"float32")}const dVe={kernelName:ub,backendName:"webgl",kernelFunc:cVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fVe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,o=e.strideHeight,i=e.strideWidth,s=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=l-1-e.padInfo.top,d=u-1-e.padInfo.left,f=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${c}, ${d});
      const float avgMultiplier = float(${f});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${u};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class hVe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,o=e.filterWidth,i=e.strideDepth,s=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterDepth,f=e.effectiveFilterHeight,h=e.effectiveFilterWidth,p=d-1-e.padInfo.front,m=f-1-e.padInfo.top,g=h-1-e.padInfo.left,y=1/(n*r*o);this.userCode=`
      const ivec3 pads = ivec3(${p}, ${m}, ${g});
      const float avgMultiplier = float(${y});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${f};
              wR += ${u}) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${c}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pVe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:i}=e,s=i,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=r,d=[1,1,1],f=Js(s.shape,a,l,d,u,c),h=new hVe(f);return n.runWebGLProgram(h,[o],s.dtype)}const mVe={kernelName:aE,backendName:"webgl",kernelFunc:pVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gVe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:i}=e,s=i;yg([o,i],"avgPoolGrad");const{filterSize:a,strides:l,pad:u}=r,c=Uo(s.shape,a,l,1,u),d=new fVe(c);return n.runWebGLProgram(d,[o],s.dtype)}const yVe={kernelName:sE,backendName:"webgl",kernelFunc:gVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vVe(t){const{inputs:e,backend:n,attrs:r}=t,{a:o,b:i}=e,{transposeA:s,transposeB:a}=r;return z0({a:o,b:i,transposeA:s,transposeB:a,backend:n})}const xVe={kernelName:cb,backendName:"webgl",kernelFunc:vVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bVe{constructor(e,n,r,o,i,s){this.outputShape=[],this.variableNames=["x","mean","variance"],Fe(e,n),Fe(e,r);let a="0.0";o!=null&&(Fe(e,o),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";i!=null&&(Fe(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${s}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wVe{constructor(e,n,r,o,i,s){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Fe(e,n),Fe(e,r);let a="vec4(0.0)";o!=null&&(Fe(e,o),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";i!=null&&(Fe(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${s}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SVe=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:o,variance:i,offset:s,scale:a}=t;M(o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),M(s==null||o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),M(a==null||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const u=[r,o,i];let c=null;s!=null&&(c=s.shape,u.push(s));let d=null;a!=null&&(d=a.shape,u.push(a));const f=ee().getBool("WEBGL_PACK_NORMALIZATION")?new wVe(r.shape,o.shape,i.shape,c,d,l):new bVe(r.shape,o.shape,i.shape,c,d,l);return e.runWebGLProgram(f,u,u[0].dtype)},CVe={kernelName:Sb,backendName:"webgl",kernelFunc:SVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $Ve{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=yt(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=kVe(this.rank);let o;const i=e.map((s,a)=>`sourceLoc.${$k[a]} = start[${a}] + coords.${$k[a]};`);o=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${i.join(`
`)}
      `,this.userCode=`
      void main() {
        ${o}
        setOutput(getSource(${r}));
      }
    `}}const $k=["x","y","z","w","u","v"];function kVe(t){if(t===1)return"sourceLoc";if(t<=6)return $k.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IVe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=yt(this.rank),r=ar("coords",this.rank),o=ar("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":`vec2(${o.slice(-2).join()})`,s=`getChannel(getSource(${o.join()}), ${i})`,a=`
      result.x = ${s};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${o[this.rank-1]};
        result.y = ${s};
        --${o[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${o[this.rank-2]};
        result.z = ${s};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${o[this.rank-1]};
          result.w = ${s};
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((c,d)=>`start[${d}]`).join()});`:e.map((c,d)=>`${o[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${u}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TVe(t,e,n,r){const o=r.texData.get(t.dataId),i=r.makeTensorInfo(n,t.dtype),s=r.texData.get(i.dataId);Object.assign(s,o),s.refCount=1,s.shape=n,s.dtype=t.dtype;let a=R2(e,Ne(t.shape));o.slice&&(a+=o.slice.flatOffset),s.slice={flatOffset:a,origDataId:o.slice&&o.slice.origDataId||t.dataId};const l=r.dataRefCount.get(s.slice.origDataId)||1;return r.dataRefCount.set(s.slice.origDataId,l+1),i}function Cf(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{begin:i,size:s}=r,[a,l]=p1(o,i,s);if(A2(o,a,l),re(l)===0)return n.makeTensorInfo(l,o.dtype,[]);if(n.shouldExecuteOnCPU([o])||o.dtype==="string"){const d=n.texData.get(o.dataId),f=x4e(d.values,a,l,o.shape,o.dtype);return n.makeTensorInfo(l,o.dtype,f)}const{isPacked:u}=n.texData.get(o.dataId),c=_2(o.shape,a,l);if(u||!c){const d=ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new IVe(l):new $Ve(l),f=[a];return n.runWebGLProgram(d,[o],o.dtype,f)}return n.uploadToGPU(o.dataId),TVe(o,a,l,n)}const EVe={kernelName:Qb,backendName:"webgl",kernelFunc:Cf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NVe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{blockShape:i,crops:s}=r;M(o.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=i.reduce((v,x)=>v*x),l=og(o.shape,i,a),u=ig(l.length,i.length),c=sg(o.shape,i,a),d=L2(s,i.length),f=B2(c,s,i.length),h=[],p=ye({inputs:{x:o},backend:n,attrs:{shape:l}}),m=cr({inputs:{x:p},backend:n,attrs:{perm:u}}),g=ye({inputs:{x:m},backend:n,attrs:{shape:c}}),y=Cf({inputs:{x:g},backend:n,attrs:{begin:d,size:f}});return h.push(p),h.push(m),h.push(g),h.forEach(v=>n.disposeIntermediateTensorInfo(v)),y},AVe={kernelName:db,backendName:"webgl",kernelFunc:NVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,weights:i}=e,{size:s}=r,a=n.readSync(o.dataId),l=n.readSync(i.dataId),u=i8(a,l,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,u)}const _Ve={kernelName:lE,backendName:"webgl",kernelFunc:OVe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RVe=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,PVe=`
  return float(int(a.r) & int(b.r));
`;function DVe(t){const{inputs:e,backend:n}=t,{a:r,b:o}=e,i=ee().getBool("WEBGL_PACK_BINARY_OPERATIONS"),s=ee().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,o])||s===1){const l=n.texData.get(r.dataId).values,u=n.texData.get(o.dataId).values,[c,d]=Vje(r.shape,o.shape,l,u,r.dtype),f=n.makeTensorInfo(d,r.dtype),h=n.texData.get(f.dataId);return h.values=c,f}let a;return i?a=new wf(RVe,r.shape,o.shape,!1):a=new _u(PVe,r.shape,o.shape),n.runWebGLProgram(a,[r,o],r.dtype)}const MVe={kernelName:uE,backendName:"webgl",kernelFunc:DVe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FVe(t){const{inputs:e,backend:n}=t,{s0:r,s1:o}=e,i=n.readSync(r.dataId),s=n.readSync(o.dataId),a=Fe(Array.from(i),Array.from(s));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const LVe={kernelName:aV,backendName:"webgl",kernelFunc:FVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BVe="return float(a != b);",x8=Ln({opSnippet:BVe,cpuKernelImpl:c4e,dtype:"bool"}),zVe={kernelName:Bb,backendName:"webgl",kernelFunc:x8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xg(t){const{inputs:e,backend:n}=t,{input:r}=e,o=n.texData.get(r.dataId);return Gr({inputs:{x:o.complexTensorInfos.real},backend:n})}const jVe={kernelName:PE,backendName:"webgl",kernelFunc:xg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WVe="return float(int(x));";function VVe(t,e){const n=new Ki(t.shape,WVe),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kk(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{dtype:i}=r;if(i==="complex64"){if(o.dtype==="complex64")return Gr({inputs:{x:o},backend:n});const s=$n(o.shape),a=kk({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),l=Cl({inputs:{real:a,imag:s},backend:n});return s.dispose(),n.disposeIntermediateTensorInfo(a),l}if(o.dtype==="complex64"){const s=xg({inputs:{input:o},backend:n}),a=kk({inputs:{x:s},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(s),a}if(!nV(o.dtype,i)){const s=Gr({inputs:{x:o},backend:n});return{dataId:s.dataId,shape:s.shape,dtype:i}}if(n.shouldExecuteOnCPU([o])){const s=n.texData.get(o.dataId).values,[a,l,u]=Uje(s,o.shape,o.dtype,i);return n.makeTensorInfo(a,l,u)}if(i==="int32")return VVe(o,n);if(i==="bool"){const s=n.makeTensorInfo([],"bool",Un("bool",1)),l=x8({inputs:{a:o,b:s},backend:n});return n.disposeIntermediateTensorInfo(s),l}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${i}`)}const UVe={kernelName:dm,backendName:"webgl",kernelFunc:kk};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oF="return ceil(x);",GVe=tt({opSnippet:oF,packedOpSnippet:oF,cpuKernelImpl:Gje}),HVe={kernelName:fm,backendName:"webgl",kernelFunc:GVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KVe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qVe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{clipValueMin:i,clipValueMax:s}=r;let a;ee().getBool("WEBGL_PACK_CLIP")?a=new qVe(o.shape):a=new KVe(o.shape);const l=[[i],[s]];return n.runWebGLProgram(a,[o],o.dtype,l)}const YVe={kernelName:hm,backendName:"webgl",kernelFunc:XVe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QVe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iF(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function ZVe(t){const{inputs:e,backend:n}=t,{x:r}=e,o=n.texData.get(r.dataId),i=new QVe(r.shape),s=[iF(r,o.complexTensorInfos.real),iF(r,o.complexTensorInfos.imag)];return n.runWebGLProgram(i,s,s[0].dtype)}const JVe={kernelName:fb,backendName:"webgl",kernelFunc:ZVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eUe{constructor(e){this.outputShape=[],this.outputShape=ts(e,1),this.variableNames=e.map((s,a)=>`T${a}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let s=1;s<n.length;s++)n[s]=n[s-1]+e[s][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let s=1;s<n.length;s++){const a=n[s-1];r.push(`else if (yC < ${n[s]}) setOutput(getT${s}(yR, yC-${a}));`)}const o=n.length,i=n[n.length-1];r.push(`else setOutput(getT${o}(yR, yC-${i}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tUe{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=ts(e,n);const r=this.outputShape,o=r.length,i=yt(o),s=ar("coords",o),a=["x","y","z","w","u","v"].slice(0,o);this.variableNames=e.map((m,g)=>`T${g}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let m=1;m<l.length;m++)l[m]=l[m-1]+e[m][n];const u=a[n],c=a.slice(-2),d=a.join();let f=`if (${u} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${c.join()}));
        }`;for(let m=1;m<l.length;m++){const g=l[m-1];f+=`
        if (${u} < ${l[m]}  && ${u} >= ${l[m-1]}) {
          return getChannel(
            getT${m}(${vy(a,u,g)}),
            vec2(${vy(c,u,g)}));
        }`}const h=l.length,p=l[l.length-1];f+=`
        return getChannel(
          getT${h}(${vy(a,u,p)}),
          vec2(${vy(c,u,p)}));`,this.userCode=`
      float getValue(${a.map(m=>"int "+m)}) {
        ${f}
      }

      void main() {
        ${i} coords = getOutputCoords();
        vec4 result = vec4(getValue(${s}), 0., 0., 0.);

        ${s[o-1]} = ${s[o-1]} + 1;
        if (${s[o-1]} < ${r[o-1]}) {
          result.g = getValue(${s});
        }

        ${s[o-2]} = ${s[o-2]} + 1;
        if (${s[o-2]} < ${r[o-2]}) {
          result.a = getValue(${s});
        }

        ${s[o-1]} = ${s[o-1]} - 1;
        if (${s[o-2]} < ${r[o-2]} &&
            ${s[o-1]} < ${r[o-1]}) {
          result.b = getValue(${s});
        }
        setOutput(result);
      }
    `}}function vy(t,e,n){const r=t.indexOf(e);return t.map((i,s)=>s===r?`${i} - ${n}`:i).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D1(t){const{inputs:e,backend:n}=t,{input:r}=e,o=n.texData.get(r.dataId);return Gr({inputs:{x:o.complexTensorInfos.imag},backend:n})}const nUe={kernelName:IE,backendName:"webgl",kernelFunc:D1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oh(t,e,n){const r=t[0].dtype;if(r==="complex64"){const h=t.map(v=>xg({inputs:{input:v},backend:n})),p=t.map(v=>D1({inputs:{input:v},backend:n})),m=oh(h,e,n),g=oh(p,e,n),y=Cl({inputs:{real:m,imag:g},backend:n});return h.forEach(v=>n.disposeIntermediateTensorInfo(v)),p.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),y}let o=n.shouldExecuteOnCPU(t);if(r==="string"&&(o=!0),o){const h=t.map(b=>{const S=[-1,re(b.shape.slice(e))];return ye({inputs:{x:b},backend:n,attrs:{shape:S}})}),p=h.map(b=>({vals:n.readSync(b.dataId),shape:b.shape})),m=ts(h.map(b=>b.shape),1),g=h[0].shape[0]===1,y=Hje(p,m,r,g),v=ts(t.map(b=>b.shape),e),x=n.makeTensorInfo(v,r,y);return h.forEach(b=>n.disposeIntermediateTensorInfo(b)),x}const i=t.filter(h=>re(h.shape)>0),s=ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&i[0].shape.length>1;if(i.length===1){const h=s?new Ki(t[0].shape,fa):new Ta(t[0].shape,fa);return n.runWebGLProgram(h,t,r)}const a=ee().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(i.length>a){const h=[];for(let m=0;m<i.length;m+=a){const g=i.slice(m,m+a);h.push(oh(g,e,n))}const p=oh(h,e,n);for(const m of h)n.disposeIntermediateTensorInfo(m);return p}if(s){const h=new tUe(i.map(p=>p.shape),e);return n.runWebGLProgram(h,i,r)}const{tensors2D:l,outShape:u}=rUe(i,e,n),c=new eUe(l.map(h=>h.shape)),d=n.runWebGLProgram(c,l,r);l.forEach(h=>n.disposeIntermediateTensorInfo(h));const f=ye({inputs:{x:d},attrs:{shape:u},backend:n});return n.disposeIntermediateTensorInfo(d),f}function rUe(t,e,n){const r=ts(t.map(i=>i.shape),e);return{tensors2D:t.map(i=>ye({inputs:{x:i},attrs:{shape:[-1,re(i.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b8(t){const{inputs:e,backend:n,attrs:r}=t,{axis:o}=r,i=Ue(o,e[0].shape)[0],s=e.map(u=>u.shape);D2(s,i);const a=ts(e.map(u=>u.shape),i);if(re(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(u=>re(u.shape)>0);return l.length===1?Gr({inputs:{x:l[0]},backend:n}):oh(l,i,n)}const oUe={kernelName:hb,backendName:"webgl",kernelFunc:b8};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class w8{constructor(e,n=!1,r=null,o=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const s=e.padInfo.top,a=e.padInfo.left,l=e.strideHeight,u=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,f=e.filterHeight,h=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4,g=e.dataFormat==="channelsLast",y=g?1:2,v=g?2:3,x=g?3:1;let b="",w="";r&&(o?b=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?b=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:b=`
          float activation(float x) {
            ${r}
          }
        `,w="result = activation(result);");const S=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${b}

      const ivec2 strides = ivec2(${l}, ${u});
      const ivec2 pads = ivec2(${s}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${x}];

        ivec2 xRCCorner =
            ivec2(coords[${y}], coords[${v}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${f}; wR++) {
          int xR = xRCorner + wR * ${c};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${h}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${p}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${g}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${m===1}) {

              if (${g}) {
                dotProd +=
                    getX(batch, xR, xC, ${p}) *
                    getW(wR, wC, ${p}, d2);
              } else {
                dotProd +=
                    getX(batch, ${p}, xR, xC) *
                    getW(wR, wC, ${p}, d2);
              }

            } else if (${m===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2)
              );

              if (${g}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${m===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2),
                getW(wR, wC, ${p} + 2, d2)
              );

              if (${g}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1),
                  getX(batch, xR, xC, ${p} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC),
                  getX(batch, ${p} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${S}
        ${w}
        setOutput(result);
      }
    `}}class iUe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,o=e.padInfo.left,i=e.strideDepth,s=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,d=e.filterDepth,f=e.filterHeight,h=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${i}, ${s}, ${a});
      const ivec3 pads = ivec3(${n}, ${r}, ${o});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${f}; wR++) {
            int xR = xRCorner + wR * ${u};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h}; wC++) {
              int xC = xCCorner + wC * ${c};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${p}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${m===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${p}) *
                  getW(wF, wR, wC, ${p}, d2);
              } else if (${m===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${m===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1),
                  getX(batch, xF, xR, xC, ${p} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2),
                  getW(wF, wR, wC, ${p} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class S8{constructor(e,n=!1,r=null,o=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Xn(this.outputShape.length);const s=e.padInfo.left,a=e.strideWidth,l=e.dilationWidth,u=e.filterHeight,c=e.filterWidth,d=c;let f=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let g=0;g<c;g++)f+=`
           vec4 xTexelC${g*2};
           int xTexelC${g*2}Ready;
           vec4 xTexelC${g*2+1};
           int xTexelC${g*2+1}Ready;
           vec4 xC${g};`;f+=`
     for (int r = 0; r < ${u}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let g=0;g<c;g++)f+=`
           xTexelC${g*2} = vec4(0.0);
           xTexelC${g*2}Ready = 0;
           xTexelC${g*2+1} = vec4(0.0);
           xTexelC${g*2+1}Ready = 0;
           xC${g} = vec4(0.0);`;f+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let g=0;g<(d+1)/2;g++){const y=g*2;if(f+=`
           xC = xCCorner + ${y*l};
           `,a===1){if(y<c&&(s%2===1?(f+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }
               `,l===1&&y>0?f+=`
                 xC${y} = vec4(xTexelC${y-2}.zw, xTexelC${y}.xy);
                 `:f+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${y} = vec4(previous.zw, xTexelC${y}.xy);
                   } else {
                     xC${y} = vec4(0.0, 0.0, xTexelC${y}.xy);
                   }
                   `):f+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 xC${y} = xTexelC${y};
                 `,y+1<c)){const v=s%2===0?ZT(l):l;l%2===0&&s%2===1||l%2!==0&&s%2!==1?(f+=`
                   xCOffset = xC + imod(pads[1], 2) + ${v};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                     xTexelC${y+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${y+1}.zw = vec2(0.0);
                     }
                     xTexelC${y+1}Ready = 1;
                   }
                   `,l>1?f+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${y+1} = vec4(previous.zw, xTexelC${y+1}.xy);
                     } else {
                      xC${y+1} = vec4(0.0, 0.0, xTexelC${y+1}.xy);
                     }
                     `:f+=`
                     xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.xy);
                     `):v===1?f+=`
                     xC${y+1} = xTexelC${y};
                     `:f+=`
                     xCOffset = xC + ${v};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                       xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${y+1}.zw = vec2(0.0);
                       }
                       xTexelC${y+1}Ready = 1;
                     }

                     xC${y+1} = xTexelC${y+1};
                     `}}else y<c&&(s%2===1?(f+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${y+1}Ready == 0) {
                   xTexelC${y+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${y+1}.zw = vec2(0.0);
                   }
                   xTexelC${y+1}Ready = 1;
                 }

                 xC${y} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
               `,y+1<c&&(f+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${y+1} = vec4(xTexelC${y+1}.xy, final.xy);
                 `)):(f+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                   xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y+1}.zw = vec2(0.);
                   }
                   xTexelC${y+1}Ready = 1;
                 }

                 xC${y} = vec4(
                   xTexelC${y}.xy, xTexelC${y+1}.xy);
               `,y+1<c&&(f+=`
                   xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
                 `)));y<c&&(f+=`
             wTexel = getW(r, ${y}, d1, d2);
             dotProd += xC${y}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${y}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,y+1<c&&(f+=`
               wTexel = getW(r, ${y+1}, d1, d2);
               dotProd += xC${y+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${y+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}f+=`
     }
   `,f+=`
     }
   `,f+=`
     }
   `;let h="",p="";r&&(o?h=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:i?h=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:h=`vec4 activation(vec4 x) {
           ${r}
         }`,p="result = activation(result);");const m=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${h}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${f}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${m}
         ${p}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sUe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=Xn(this.outputShape.length);const{dataFormat:r}=n,o=fr(),i=r==="channelsLast",s=i?1:2,a=i?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let u="";for(let c=0;c<=1;c++)for(let d=0;d<=1;d++)u+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${c};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${s}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${i}) {
                  innerDims = vec2(d1, ch);
                  result[${c*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${c*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${u}

        ${o.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j0(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function C8({x:t,filter:e,convInfo:n,backend:r,bias:o=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:a=null}){const l=t.shape,u=r.texData.get(t.dataId),c=n.inChannels,d=l[0]*l[1]*l[2],f=n.outChannels,h=n.dataFormat==="channelsLast",p=!1,m=!1;let g;const y=[];if(i!=null){const b=j0(i.shape,h);b!=null&&(i=ye({inputs:{x:i},backend:r,attrs:{shape:b}}),y.push(i))}if(o!=null){const b=j0(o.shape,h);b!=null&&(o=ye({inputs:{x:o},backend:r,attrs:{shape:b}}),y.push(o))}if(!((d===1||f===1)&&c>m8)&&u.isPacked&&h&&u.texture!=null&&l[2]%2!==0&&ut(u.shape.slice(-3),l.slice(-3))){const b=l[0]*l[1]*(l[2]+1),w={dataId:t.dataId,shape:[1,b,n.inChannels],dtype:t.dtype},S=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,M(B0(u.shape,w.shape),()=>`packed reshape ${u.shape} to ${w.shape} isn't free`);const $=ye({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});y.push($);const C=z0({a:w,b:$,backend:r,transposeA:p,transposeB:m,bias:o,activation:a,preluActivationWeights:i,leakyreluAlpha:s}),k=r.texData.get(C.dataId);M(k.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=S,k.shape=n.outShape,g=Gr({inputs:{x:C},backend:r}),g.shape=n.outShape,y.push(C)}else{const b=n.outHeight*n.outWidth,w=ye({inputs:{x:t},backend:r,attrs:{shape:h?[n.batchSize,b,n.inChannels]:[n.batchSize,n.inChannels,b]}}),S=ye({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),$=z0({a:h?w:S,b:h?S:w,transposeA:!h,transposeB:m,backend:r,bias:o,activation:a,preluActivationWeights:i,leakyreluAlpha:s});g=ye({inputs:{x:$},backend:r,attrs:{shape:n.outShape}}),y.push(w),y.push(S),y.push($)}for(const b of y)r.disposeIntermediateTensorInfo(b);return g}function $8({x:t,filter:e,convInfo:n,backend:r,bias:o=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:a=null}){const{filterWidth:l,filterHeight:u,inChannels:c,outWidth:d,outHeight:f,dataFormat:h}=n,p=h==="channelsLast",m=l*u*c,g=f*d,y=[n.batchSize,m,g],v=!0,x=!1,b=[];if(i!=null){const A=j0(i.shape,p);A!=null&&(i=ye({inputs:{x:i},backend:r,attrs:{shape:A}}),b.push(i))}if(o!=null){const A=j0(o.shape,p);A!=null&&(o=ye({inputs:{x:o},backend:r,attrs:{shape:A}}),b.push(o))}const w=ye({inputs:{x:e},backend:r,attrs:{shape:[1,m,re(e.shape)/m]}});b.push(w);const S=new sUe(y,n),$=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],C=r.runWebGLProgram(S,[t],"float32",$),k=ye({inputs:{x:C},backend:r,attrs:{shape:y}});b.push(C),b.push(k);const I=o!=null,T=i!=null,E=a==="leakyrelu",_=a?Rp(a,!0):null,N=new p8(p?k.shape:w.shape,p?w.shape:k.shape,p?[n.batchSize,g,n.outChannels]:[n.batchSize,n.outChannels,g],v,x,I,_,T,E),P=p?[k,w]:[w,k];if(o&&P.push(o),T&&P.push(i),E){const A=r.makeTensorInfo([],"float32",ml(s,"float32"));P.push(A),b.push(A)}const F=r.runWebGLProgram(N,P,"float32"),L=ye({inputs:{x:F},backend:r,attrs:{shape:n.outShape}});b.push(F);for(const A of b)r.disposeIntermediateTensorInfo(A);return L}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:i}=e,{strides:s,pad:a,dataFormat:l,dilations:u,dimRoundingMode:c}=r,d=ea(l),f=Mn(o.shape,i.shape,s,u,a,c,!1,d);let h;if(f.filterHeight===1&&f.filterWidth===1&&f.dilationHeight===1&&f.dilationWidth===1&&f.strideHeight===1&&f.strideWidth===1&&(f.padInfo.type==="SAME"||f.padInfo.type==="VALID"))h=C8({x:o,filter:i,convInfo:f,backend:n});else if(f.strideWidth<=2&&d==="channelsLast"&&ee().getBool("WEBGL_EXP_CONV")){const m=new S8(f),g=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];h=n.runWebGLProgram(m,[o,i],"float32",g)}else if(ee().getBool("WEBGL_CONV_IM2COL"))h=$8({x:o,filter:i,convInfo:f,backend:n});else{const m=new w8(f);h=n.runWebGLProgram(m,[o,i],"float32")}const p=ye({inputs:{x:h},backend:n,attrs:{shape:f.outShape}});return n.disposeIntermediateTensorInfo(h),p}const lUe={kernelName:pb,backendName:"webgl",kernelFunc:aUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uUe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,o=e.padInfo.top,i=e.padInfo.left,s=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${o};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${s?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class cUe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,o=e.strideHeight,i=e.strideWidth,s=e.dataFormat==="channelsLast",a=n-1-e.padInfo.top,l=r-1-e.padInfo.left,u=s?1:2,c=s?2:3,d=s?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${u}], coords[${c}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${s}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class dUe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,o=e.strideWidth,i=e.padInfo.front,s=e.padInfo.top,a=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${i};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${s};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${o} - ${a};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class fUe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,o=e.filterWidth,i=e.strideDepth,s=e.strideHeight,a=e.strideWidth,l=n-1-e.padInfo.front,u=r-1-e.padInfo.top,c=o-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${u}, ${c});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${i}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${o}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${o} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,dy:i}=e,{strides:s,pad:a,dataFormat:l,dimRoundingMode:u,filterShape:c}=r,d=ea(l),f=Mn(o.shape,c,s,1,a,u,!1,d),h=new uUe(f);return n.runWebGLProgram(h,[o,i],"float32")}const pUe={kernelName:dE,backendName:"webgl",kernelFunc:hUe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mUe{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=Xn(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,o=n-1-e.padInfo.top,i=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${i});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gUe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,filter:i}=e,{inputShape:s,strides:a,pad:l,dataFormat:u,dimRoundingMode:c}=r,d=ea(u),f=Mn(s,i.shape,a,1,l,c,!1,d);if(ee().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){const h=[[f.strideHeight,f.strideWidth]],p=new mUe(f);return n.runWebGLProgram(p,[o,i],"float32",h)}else{const h=new cUe(f);return n.runWebGLProgram(h,[o,i],"float32")}}const yUe={kernelName:mb,backendName:"webgl",kernelFunc:gUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:i}=e,{strides:s,pad:a,dilations:l}=r,u=gl(o.shape,i.shape,s,l,a),c=new iUe(u);return n.runWebGLProgram(c,[o,i],"float32")}const xUe={kernelName:gb,backendName:"webgl",kernelFunc:vUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,dy:i}=e,{strides:s,pad:a,filterShape:l}=r,u=gl(o.shape,l,s,1,a),c=new dUe(u);return n.runWebGLProgram(c,[o,i],"float32")}const wUe={kernelName:fE,backendName:"webgl",kernelFunc:bUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SUe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,filter:i}=e,{pad:s,strides:a,inputShape:l}=r,u=gl(l,i.shape,a,1,s),c=new fUe(u);return n.runWebGLProgram(c,[o,i],"float32")}const CUe={kernelName:hE,backendName:"webgl",kernelFunc:SUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ue=Sf+`
  return cos(x);
`,kUe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Qu}
  return result;
`,IUe=tt({opSnippet:$Ue,packedOpSnippet:kUe}),TUe={kernelName:pm,backendName:"webgl",kernelFunc:IUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EUe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,NUe=tt({opSnippet:EUe}),AUe={kernelName:mm,backendName:"webgl",kernelFunc:NUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OUe{constructor(e,n,r,o,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[s,a,l,u]=e,[c]=n,[d,f]=r;this.outputShape=[c,d,f,u];const h=o==="bilinear"?1:0,[p,m]=[`${a-1}.0`,`${l-1}.0`],[g,y,v]=d>1?[`${(a-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[x,b,w]=f>1?[`${(l-1)/(f-1)}`,"(x2-x1) * width_ratio",`x1*${m} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${m}`];this.userCode=`
      const float height_ratio = float(${g});
      const float width_ratio = float(${x});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${s}) {
          return;
        }

        float height_scale = ${y};
        float width_scale = ${b};

        float in_y = ${v};
        if( in_y < 0.0 || in_y > ${p} ) {
          setOutput(float(${i}));
          return;
        }
        float in_x = ${w};
        if( in_x < 0.0 || in_x > ${m} ) {
          setOutput(float(${i}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${h} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ue=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:o,boxes:i,boxInd:s}=e,{cropSize:a,method:l,extrapolationValue:u}=r,c=new OUe(o.shape,i.shape,a,l,u);return n.runWebGLProgram(c,[o,i,s],"float32")},RUe={kernelName:mE,backendName:"webgl",kernelFunc:_Ue};var Dp;(function(t){t.Prod="*",t.Sum="+"})(Dp||(Dp={}));class sF{constructor(e,n,r,o){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const i=this.outputShape.length,s=this.op===Dp.Prod?"1.0":"0.0",a=r?s:`getX(${aF(i,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let u="",c="";r?(u=o?`end != ${l-1}`:"end != 0",c=o?"end + 1":"end - 1"):(u=o?`end + pow2 < ${l}`:"end >= pow2",c=o?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${yt(i)} coords = getOutputCoords();
        int end = ${lF(i,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${u}) {
          int idx = ${c};
          ${lF(i,"coords",this.op)} = idx;
          val ${this.op}= getX(${aF(i,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function aF(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function lF(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k8(t,e,n,r,o,i){const s=e.shape.length,a=Ut([r],s);let l=e;a!=null&&(l=cr({inputs:{x:e},backend:n,attrs:{perm:a}}));const u=en(1,s)[0];if(u!==s-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const c=l.shape[u];let d=Gr({inputs:{x:l},backend:n});for(let f=0;f<=Math.ceil(Math.log2(c))-1;f++){const h=new sF(t,l.shape,!1,i),p=[[f]],m=d;d=n.runWebGLProgram(h,[d],d.dtype,p),n.disposeIntermediateTensorInfo(m)}if(o){const f=new sF(t,l.shape,o,i),h=d;d=n.runWebGLProgram(f,[d],d.dtype),n.disposeIntermediateTensorInfo(h)}if(a!=null){const f=yl(a),h=cr({inputs:{x:d},backend:n,attrs:{perm:f}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),h}return d}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:i,exclusive:s,reverse:a}=r;return k8(Dp.Prod,o,n,i,s,a)}const DUe={kernelName:pE,backendName:"webgl",kernelFunc:PUe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:i,exclusive:s,reverse:a}=r;return k8(Dp.Sum,o,n,i,s,a)}const FUe={kernelName:yb,backendName:"webgl",kernelFunc:MUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,weights:i}=e,{size:s,binaryOutput:a}=r;if(o.shape.length===1){const l=n.readSync(o.dataId),u=n.readSync(i.dataId),c=i8(l,u,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,c)}else if(o.shape.length===2){const l=n.bufferSync(o),u=n.bufferSync(i),c=Wje(l,u,s,a);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}const BUe={kernelName:gE,backendName:"webgl",kernelFunc:LUe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zUe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{blockSize:i,dataFormat:s}=r,a=o.shape[0],l=s==="NHWC"?o.shape[1]:o.shape[2],u=s==="NHWC"?o.shape[2]:o.shape[3],c=s==="NHWC"?o.shape[3]:o.shape[1],d=l*i,f=u*i,h=c/(i*i),p=s==="NHWC"?[a,d,f,h]:[a,h,d,f],m=new zUe(p,i,s);return n.runWebGLProgram(m,[o],o.dtype)}const WUe={kernelName:yE,backendName:"webgl",kernelFunc:jUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class I8{constructor(e,n=!1,r=null,o=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Xn(this.outputShape.length);const s=e.filterHeight,a=e.filterWidth,l=e.outChannels/e.inChannels;let u="",c="";r&&(o?u=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?u=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:u=`
          float activation(float x) {
            ${r}
          }
        `,c="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${u}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${s}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${c}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class T8{constructor(e,n=!1,r=null,o=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Xn(this.outputShape.length);const s=e.outChannels/e.inChannels,a=e.padInfo.left,l=e.strideWidth,u=e.dilationWidth,c=e.filterHeight,d=e.filterWidth,f=d;let h=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let y=0;y<d;y++)h+=`
          vec4 xTexelC${y*2};
          int xTexelC${y*2}Ready;
          vec4 xTexelC${y*2+1};
          int xTexelC${y*2+1}Ready;
          vec4 xC${y};`;h+=`
    for (int r = 0; r < ${c}; r++) {
      `;for(let y=0;y<d;y++)h+=`
          xTexelC${y*2} = vec4(0.0);
          xTexelC${y*2}Ready = 0;
          xTexelC${y*2+1} = vec4(0.0);
          xTexelC${y*2+1}Ready = 0;
          xC${y} = vec4(0.0);`;h+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let y=0;y<(f+1)/2;y++){const v=y*2;if(h+=`
          xC = xCCorner + ${v*u};
          `,l===1){if(v<d&&(a%2===1?(h+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }
              `,u===1&&v>0?h+=`
                xC${v} = vec4(xTexelC${v-2}.zw, xTexelC${v}.xy);
                `:h+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${v} = vec4(previous.zw, xTexelC${v}.xy);
                  } else {
                    xC${v} = vec4(0.0, 0.0, xTexelC${v}.xy);
                  }
                  `):h+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                xC${v} = xTexelC${v};
                `,v+1<d)){const x=a%2===0?ZT(u):u;u%2===0&&a%2===1||u%2!==0&&a%2!==1?(h+=`
                  xCOffset = xC + imod(pads[1], 2) + ${x};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                    xTexelC${v+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${v+1}.zw = vec2(0.0);
                    }
                    xTexelC${v+1}Ready = 1;
                  }
                  `,u>1?h+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${v+1} = vec4(previous.zw, xTexelC${v+1}.xy);
                    } else {
                     xC${v+1} = vec4(0.0, 0.0, xTexelC${v+1}.xy);
                    }
                    `:h+=`
                    xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.xy);
                    `):x===1?h+=`
                    xC${v+1} = xTexelC${v};
                    `:h+=`
                    xCOffset = xC + ${x};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                      xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${v+1}.zw = vec2(0.0);
                      }
                      xTexelC${v+1}Ready = 1;
                    }

                    xC${v+1} = xTexelC${v+1};
                    `}}else v<d&&(a%2===1?(h+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${v+1}Ready == 0) {
                  xTexelC${v+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${v+1}.zw = vec2(0.0);
                  }
                  xTexelC${v+1}Ready = 1;
                }

                xC${v} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
              `,v+1<d&&(h+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${v+1} = vec4(xTexelC${v+1}.xy, final.xy);
                `)):(h+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                  xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v+1}.zw = vec2(0.);
                  }
                  xTexelC${v+1}Ready = 1;
                }

                xC${v} = vec4(
                  xTexelC${v}.xy, xTexelC${v+1}.xy);
              `,v+1<d&&(h+=`
                  xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
                `)));v<d&&(h+=`
            wTexel = getW(r, ${v}, d1, q);
            dotProd += xC${v} * vec4(wTexel.xz, wTexel.xz);
          `,v+1<d&&(h+=`
              wTexel = getW(r, ${v+1}, d1, q);
              dotProd += xC${v+1} * vec4(wTexel.xz, wTexel.xz);
            `))}h+=`
    }
  `,h+=`
      }
    `;let p="",m="";r&&(o?p=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?p=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:p=`vec4 activation(vec4 x) {
          ${r}
        }`,m="result = activation(result);");const g=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${p}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${s};
        int q = d2 - d1 * ${s};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${h}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${g}
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:i}=e,{strides:s,pad:a,dilations:l,dimRoundingMode:u}=r;let c=l;c==null&&(c=[1,1]),M(Kn(s,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);const d=Mn(o.shape,i.shape,s,c,a,u,!0);let f;ee().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?f=new T8(d):f=new I8(d);const h=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(f,[o,i],"float32",h)}const UUe={kernelName:vb,backendName:"webgl",kernelFunc:VUe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GUe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,o=e.padInfo.top,i=e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${s} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${o};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class HUe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,o=e.strideHeight,i=e.strideWidth,s=n-1-e.padInfo.top,a=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,dy:i}=e,{strides:s,dilations:a,pad:l,dimRoundingMode:u,filterShape:c}=r,d=Mn(o.shape,c,s,a,l,u,!0),f=new GUe(d);return n.runWebGLProgram(f,[o,i],"float32")}const qUe={kernelName:vE,backendName:"webgl",kernelFunc:KUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XUe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,filter:i}=e,{strides:s,dilations:a,pad:l,dimRoundingMode:u,inputShape:c}=r,d=Mn(c,i.shape,s,a,l,u,!0),f=new HUe(d);return n.runWebGLProgram(f,[o,i],"float32")}const YUe={kernelName:xE,backendName:"webgl",kernelFunc:XUe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QUe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZUe(t){const{inputs:e,backend:n}=t,{x:r}=e,o=[...r.shape,...r.shape],i=re(r.shape),s=ye({inputs:{x:r},backend:n,attrs:{shape:[i]}}),a=new QUe(i),l=n.runWebGLProgram(a,[s],s.dtype),u=ye({inputs:{x:l},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),u}const JUe={kernelName:lV,backendName:"webgl",kernelFunc:ZUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eGe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:o,strideHeight:i,strideWidth:s,filterHeight:a,filterWidth:l,dilationHeight:u,dilationWidth:c}=e,{top:d,left:f}=o;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${s});
      const ivec2 pads = ivec2(${d}, ${f});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${u};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${c};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:i}=e,{strides:s,pad:a,dilations:l}=r,u=Jm(o.shape,i.shape,s,a,"NHWC",l);let c;const d=new eGe(u);c=n.runWebGLProgram(d,[o,i],"float32");const f=ye({inputs:{x:c},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(c),f}const nGe={kernelName:xb,backendName:"webgl",kernelFunc:tGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rGe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:o}=r,i=e,{allDims:s,summedDims:a,idDims:l}=K2(o,i.length);X2(s.length,l,i);const{path:u,steps:c}=Y2(a,l),d=c.length;let f=null,h=s.length;const p=[];for(let m=0;m<d;++m){for(const g of c[m]){const{permutationIndices:y,expandDims:v}=q2(h,l[g]);let x;Q2(y)?x=i[g]:(x=cr({inputs:{x:i[g]},backend:n,attrs:{perm:y}}),p.push(x));const b=x.shape.slice();for(let w=0;w<v.length;++w)b.splice(v[w],0,1);ut(x.shape,b)||(x=ye({inputs:{x},backend:n,attrs:{shape:b}}),p.push(x)),f===null?f=x:(f=FN({inputs:{a:x,b:f},backend:n}),p.push(f))}m<d-1&&(u[m]>=0&&(f=P1({inputs:{x:f},backend:n,attrs:{axis:u[m]-(s.length-h),keepDims:!1}}),p.push(f)),h--)}for(const m of p)m!==f&&n.disposeIntermediateTensorInfo(m);return f}const oGe={kernelName:bE,backendName:"webgl",kernelFunc:rGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iGe="return (x >= 0.0) ? x : (exp(x) - 1.0);",sGe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,aGe=tt({opSnippet:iGe,packedOpSnippet:sGe}),lGe={kernelName:ym,backendName:"webgl",kernelFunc:aGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uGe="return (b >= 0.0) ? a : a * (b + 1.0);",cGe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,dGe=t=>{const{inputs:e,backend:n}=t,{dy:r,y:o}=e,i=ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new wf(cGe,r.shape,o.shape):new _u(uGe,r.shape,o.shape);return n.runWebGLProgram(i,[r,o],r.dtype)},fGe={kernelName:wE,backendName:"webgl",kernelFunc:dGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hGe=`
  return vec4(equal(a, b));
`,pGe="return float(a == b);",mGe=Ln({opSnippet:pGe,packedOpSnippet:hGe,dtype:"bool",cpuKernelImpl:Kje}),gGe={kernelName:bb,backendName:"webgl",kernelFunc:mGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yGe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${z2};
  float a1 = ${j2};
  float a2 = ${W2};
  float a3 = ${V2};
  float a4 = ${U2};
  float a5 = ${G2};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,vGe=tt({opSnippet:yGe}),xGe={kernelName:vm,backendName:"webgl",kernelFunc:vGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bGe=Sf+`
  return exp(x);
`,wGe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,E8=tt({opSnippet:bGe,packedOpSnippet:wGe,cpuKernelImpl:qje,dtype:"float32"}),SGe={kernelName:xm,backendName:"webgl",kernelFunc:E8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ik(t){const{inputs:e,attrs:n,backend:r}=t,{dim:o}=n,{input:i}=e,s=i.shape.length,a=i.shape.slice();let l=o;return o<0&&(M(-(s+1)<=o,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),l=s+o+1),a.splice(l,0,1),ye({inputs:{x:i},backend:r,attrs:{shape:a}})}const CGe={kernelName:wb,backendName:"webgl",kernelFunc:Ik};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uF="return exp(x) - 1.0;",$Ge=tt({opSnippet:uF,packedOpSnippet:uF,cpuKernelImpl:Xje}),kGe={kernelName:bm,backendName:"webgl",kernelFunc:$Ge};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cF{constructor(e,n,r){this.variableNames=["real","imag"];const o=n[1];this.outputShape=n;const i=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,s=r?`${o}.0`:"1.0";let a;if(e==="real")a="return real * expR - imag * expI;";else if(e==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${i};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${o});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${o}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${s};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N8(t,e,n){const r=n.texData.get(t.dataId),o=re(t.shape),i=t.shape[t.shape.length-1],s=o/i,a=ye({inputs:{x:t},backend:n,attrs:{shape:[s,i]}}),l=a.shape,u=new cF("real",l,e),c=new cF("imag",l,e),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],f=n.runWebGLProgram(u,d,"float32"),h=n.runWebGLProgram(c,d,"float32"),p=Cl({inputs:{real:f,imag:h},backend:n});n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h);const m=ye({inputs:{x:p},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(p),m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IGe(t){const{inputs:e,backend:n}=t,{input:r}=e;return N8(r,!1,n)}const TGe={kernelName:SE,backendName:"webgl",kernelFunc:IGe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EGe{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bg(t){const{backend:e,attrs:n}=t,{shape:r,value:o}=n;let{dtype:i}=n;if(i=i||af(o),i==="string"){const s=Qt(i,re(r));return s.fill(o),e.makeTensorInfo(r,i,s)}else{const s=new EGe(r,o),a=[[o]];return e.runWebGLProgram(s,[],i,a)}}const NGe={kernelName:CE,backendName:"webgl",kernelFunc:bg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AGe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OGe={kernelName:$E,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,o=new AGe(n.shape);return r.runWebGLProgram(o,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dF="return floor(x);",_Ge=tt({opSnippet:dF,packedOpSnippet:dF,cpuKernelImpl:Yje}),RGe={kernelName:wm,backendName:"webgl",kernelFunc:_Ge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PGe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,DGe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,MGe=Ln({opSnippet:PGe,packedOpSnippet:DGe,dtype:"int32"}),FGe={kernelName:Sm,backendName:"webgl",kernelFunc:MGe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LGe{constructor(e){this.variableNames=["A"];const n=fr(),[r,o]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${o}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BGe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=fr(),[r,o]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${o}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zGe={kernelName:nke,backendName:"webgl",kernelFunc:jGe};let sc,aS=ee().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function jGe(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:o}=e;const{numChannels:i}=r,s=typeof HTMLVideoElement<"u"&&o instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&o instanceof HTMLImageElement,[l,u]=s?[o.videoWidth,o.videoHeight]:[o.width,o.height],c=[u,l],d=[u,l,i];if(a||s){const m=ee().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(sc==null||m!==aS)&&(aS=m,sc=document.createElement("canvas").getContext("2d",{willReadFrequently:aS})),sc.canvas.width=l,sc.canvas.height=u,sc.drawImage(o,0,0,l,u),o=sc.canvas}const f=n.makeTensorInfo(c,"int32");n.texData.get(f.dataId).usage=no.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(f.dataId),o);const h=ee().getBool("WEBGL_PACK")?new BGe(d):new LGe(d),p=n.runWebGLProgram(h,[f],"int32");return n.disposeData(f.dataId),p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:i,bias:s,preluActivationWeights:a}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:p}=r,m=ea(c),g=Mn(o.shape,i.shape,l,d,u,f,!1,m);let y;const v=[],x=s!=null,b=a!=null,w=h==="leakyrelu",S=()=>{const C=[o,i],k=(I,T)=>{if(T==="NCHW"&&I.shape.length===1&&I.shape[0]!==1){const E=ye({inputs:{x:I},backend:n,attrs:{shape:[I.shape[0],1,1]}});return v.push(E),E}return I};if(x&&C.push(k(s,c)),b&&C.push(k(a,c)),w){const I=n.makeTensorInfo([],"float32",ml(p,"float32"));C.push(I),v.push(I)}return C};if(g.filterHeight===1&&g.filterWidth===1&&g.dilationHeight===1&&g.dilationWidth===1&&g.strideHeight===1&&g.strideWidth===1&&(g.padInfo.type==="SAME"||g.padInfo.type==="VALID"))y=C8({x:o,filter:i,convInfo:g,backend:n,bias:s,activation:h,preluActivationWeights:a,leakyreluAlpha:p});else if(g.strideWidth<=2&&m==="channelsLast"&&ee().getBool("WEBGL_EXP_CONV")){const C=h?Rp(h,!0):null,k=new S8(g,x,C,b,w),I=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],T=S();y=n.runWebGLProgram(k,T,"float32",I)}else if(ee().getBool("WEBGL_CONV_IM2COL"))y=$8({x:o,filter:i,convInfo:g,backend:n,bias:s,activation:h,preluActivationWeights:a,leakyreluAlpha:p});else{const C=h?Rp(h,!1):null,k=new w8(g,x,C,b,w),I=S();y=n.runWebGLProgram(k,I,"float32")}const $=ye({inputs:{x:y},backend:n,attrs:{shape:g.outShape}});return v.push(y),v.forEach(C=>n.disposeIntermediateTensorInfo(C)),$}const VGe={kernelName:g0,backendName:"webgl",kernelFunc:WGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:i,bias:s,preluActivationWeights:a}=e,{strides:l,pad:u,dilations:c,dimRoundingMode:d,activation:f,leakyreluAlpha:h}=r,p=[];let m=c;m==null&&(m=[1,1]),M(Kn(l,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${m}'`);const g=Mn(o.shape,i.shape,l,m,u,d,!0),y=ee().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,v=f?Rp(f,y):null,x=[o,i],b=s!=null,w=a!=null,S=f==="leakyrelu";if(b&&x.push(s),w&&x.push(a),S){const I=n.makeTensorInfo([],"float32",ml(h,"float32"));x.push(I),p.push(I)}let $;y?$=new T8(g,b,v,w,S):$=new I8(g,b,v,w,S);const C=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],k=n.runWebGLProgram($,x,"float32",C);return p.forEach(I=>n.disposeIntermediateTensorInfo(I)),k}const GGe={kernelName:TV,backendName:"webgl",kernelFunc:UGe};class HGe{constructor(e,n,r,o){this.sliceDim=e,this.strides=n,this.paramsShape=o,this.variableNames=["x","indices"],this.outputShape=r;const i=yt(r.length);let s=`
    int index;`;for(let a=0;a<this.sliceDim;a++)s+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${i} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${s}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KGe(t){const{inputs:e,backend:n}=t,{params:r,indices:o}=e,i=o.shape,s=i[i.length-1],a=re(r.shape),[l,u,c,d]=N2(r,o),f=ye({inputs:{x:o},backend:n,attrs:{shape:[u,s]}}),h=ye({inputs:{x:r},backend:n,attrs:{shape:[re(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,o])||r.dtype==="string"){const y=n.readSync(o.dataId),v=n.bufferSync(r),x=Qje(y,v,r.dtype,u,s,c,d,r.shape,a);return n.makeTensorInfo(l,r.dtype,x.values)}const p=new HGe(s,d,[u,c],r.shape),m=n.runWebGLProgram(p,[h,f],h.dtype),g=ye({inputs:{x:m},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}const qGe={kernelName:uV,backendName:"webgl",kernelFunc:KGe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XGe{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=yt(this.rank),o=YGe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${o}));
      }
    `}}function YGe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let o=0;o<t.length;o++)o===2?r.push("index"):r.push(`${n[o]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A8(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,indices:i}=e,{axis:s,batchDims:a}=r,l=Ue(s,o.shape)[0];if(ee().get("DEBUG")){const v=n.readSync(i.dataId),x=o.shape[l];for(let b=0;b<v.length;++b){const w=v[b];M(w<=x-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${x-1}]`)}}const u=J2(o,i,l,a),c=re(i.shape),d=[],f=ye({inputs:{x:o},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),h=ye({inputs:{x:i},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});d.push(f),d.push(h);const p=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([o,i])||o.dtype==="string"){const v=n.bufferSync(h),x=n.bufferSync(f),b=Zje(x,v,p);return d.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.makeTensorInfo(u.outputShape,b.dtype,b.values)}const m=new XGe(f.shape,p),g=n.runWebGLProgram(m,[f,h],f.dtype);d.push(g);const y=ye({inputs:{x:g},backend:n,attrs:{shape:u.outputShape}});return d.forEach(v=>n.disposeIntermediateTensorInfo(v)),y}const QGe={kernelName:Cb,backendName:"webgl",kernelFunc:A8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZGe="return float(a > b);",JGe=`
  return vec4(greaterThan(a, b));
`,e5e=Ln({opSnippet:ZGe,packedOpSnippet:JGe,cpuKernelImpl:Jje,dtype:"bool"}),t5e={kernelName:$b,backendName:"webgl",kernelFunc:e5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n5e="return float(a >= b);",r5e=`
  return vec4(greaterThanEqual(a, b));
`,o5e=Ln({opSnippet:n5e,packedOpSnippet:r5e,dtype:"bool",cpuKernelImpl:e4e}),i5e={kernelName:Cm,backendName:"webgl",kernelFunc:o5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s5e(t){const{inputs:e,backend:n}=t,{input:r}=e;return N8(r,!0,n)}const a5e={kernelName:kE,backendName:"webgl",kernelFunc:s5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l5e="return float(!isnan(x) && !isinf(x));",u5e=tt({opSnippet:l5e,dtype:"bool"}),c5e={kernelName:km,backendName:"webgl",kernelFunc:u5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d5e="return float(isinf(x));",f5e=tt({opSnippet:d5e,dtype:"bool"}),h5e={kernelName:Im,backendName:"webgl",kernelFunc:f5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p5e="return float(isnan(x));",m5e=tt({opSnippet:p5e,dtype:"bool"}),g5e={kernelName:Tm,backendName:"webgl",kernelFunc:m5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y5e="return float(a < b);",v5e=`
  return vec4(lessThan(a, b));
`,x5e=Ln({opSnippet:y5e,packedOpSnippet:v5e,cpuKernelImpl:t4e,dtype:"bool"}),b5e={kernelName:Ib,backendName:"webgl",kernelFunc:x5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w5e="return float(a <= b);",S5e=`
  return vec4(lessThanEqual(a, b));
`,C5e=Ln({opSnippet:w5e,packedOpSnippet:S5e,cpuKernelImpl:n4e,dtype:"bool"}),$5e={kernelName:Tb,backendName:"webgl",kernelFunc:C5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k5e(t){const{backend:e,attrs:n}=t,{start:r,stop:o,num:i}=n,s=r4e(r,o,i);return e.makeTensorInfo([s.length],"float32",s)}const I5e={kernelName:cV,backendName:"webgl",kernelFunc:k5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T5e=Sf+`
  return x < 0.0 ? 0./0. : log(x);
`,E5e=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,N5e=tt({opSnippet:T5e,packedOpSnippet:E5e,cpuKernelImpl:o4e}),A5e={kernelName:Em,backendName:"webgl",kernelFunc:N5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O5e=Sf+`
  return log(1.0 + x);
`,_5e=tt({opSnippet:O5e}),R5e={kernelName:Nm,backendName:"webgl",kernelFunc:_5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P5e="return float(a >= 1.0 && b >= 1.0);",D5e=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,M5e=Ln({opSnippet:P5e,packedOpSnippet:D5e,dtype:"bool"}),F5e={kernelName:Eb,backendName:"webgl",kernelFunc:M5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L5e="return float(!(x >= 1.0));",B5e=tt({opSnippet:L5e}),z5e={kernelName:Nb,backendName:"webgl",kernelFunc:B5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j5e="return float(a >= 1.0 || b >= 1.0);",W5e=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,V5e=Ln({opSnippet:j5e,packedOpSnippet:W5e,dtype:"bool"}),U5e={kernelName:Ab,backendName:"webgl",kernelFunc:V5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class G5e{constructor(e,n,r,o,i){this.variableNames=["x"],this.outputShape=[];const s=n,a=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${o}) * sum`;i===.5?l=`inversesqrt(${u})`:i===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${s}; j <= ${s}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class H5e{constructor(e,n,r,o,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const s=n,a=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${o}) * sum`;i===.5?l=`inversesqrt(${u})`:i===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${s};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${s}; j <= ${s}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K5e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{depthRadius:i,bias:s,alpha:a,beta:l}=r,u=ee().getBool("WEBGL_PACK_NORMALIZATION")?new H5e(o.shape,i,s,a,l):new G5e(o.shape,i,s,a,l);return n.runWebGLProgram(u,[o],o.dtype)},q5e={kernelName:Ob,backendName:"webgl",kernelFunc:K5e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class X5e{constructor(e,n,r,o,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=o,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${o}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${o})
                * float(${i})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${i});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y5e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:o,y:i,dy:s}=e,{depthRadius:a,bias:l,alpha:u,beta:c}=r,d=new X5e(o.shape,a,l,u,c);return n.runWebGLProgram(d,[o,i,s],o.dtype)},Q5e={kernelName:TE,backendName:"webgl",kernelFunc:Y5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z5e(t,e,n,r){const o=re(e),s=re(t.shape)/o,a=ye({inputs:{x:t},attrs:{shape:[s,o]},backend:r}),l=Zu(a,t.dtype,"max",r),u=ye({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O8(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{reductionIndices:i,keepDims:s}=r,a=o.shape.length,l=Ue(i,o.shape);let u=l;const c=Ut(u,a),d=c!=null,f=n.shouldExecuteOnCPU([o]);let h=o;if(d){if(f){const x=n.texData.get(h.dataId).values,b=new Array(a);for(let $=0;$<b.length;$++)b[$]=o.shape[c[$]];const w=DN(x,o.shape,o.dtype,c,b);h=n.makeTensorInfo(b,o.dtype);const S=n.texData.get(h.dataId);S.values=w}else h=R1(o,c,n);u=en(u.length,a)}Fn("max",u,a);const[p,m]=Nn(h.shape,u);let g=p;s&&(g=an(p,l));let y;if(f){const x=n.texData.get(h.dataId).values,b=i4e(x,re(m),g,o.dtype);y=n.makeTensorInfo(g,o.dtype);const w=n.texData.get(y.dataId);w.values=b}else y=Z5e(h,m,g,n);return d&&n.disposeIntermediateTensorInfo(h),y}const J5e={kernelName:_b,backendName:"webgl",kernelFunc:O8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eHe=MN+`
  return max(a, b);
`,tHe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Qu+`
  return result;
`,nHe=Ln({opSnippet:eHe,packedOpSnippet:tHe,cpuKernelImpl:s4e}),rHe={kernelName:Am,backendName:"webgl",kernelFunc:nHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e;yg(o,"maxPool");const{filterSize:i,strides:s,pad:a,dimRoundingMode:l}=r,u=1;M(Kn(s,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${u}'`);const c=Uo(o.shape,i,s,u,a,l);if(c.filterWidth===1&&c.filterHeight===1&&ut(c.inShape,c.outShape))return Gr({inputs:{x:o},backend:n});const d=new Pp(c,"max",!1);return n.runWebGLProgram(d,[o],o.dtype)}const iHe={kernelName:Rb,backendName:"webgl",kernelFunc:oHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{filterSize:i,strides:s,pad:a,dataFormat:l,dimRoundingMode:u}=r,c=[1,1,1],d=Js(o.shape,i,s,c,a,u,l),f=new LN(d,"max",!1);return n.runWebGLProgram(f,[o],o.dtype)}const aHe={kernelName:Pb,backendName:"webgl",kernelFunc:sHe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lHe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,o=e.dilationHeight,i=e.effectiveFilterHeight,s=e.effectiveFilterWidth,a=i-1-e.padInfo.top,l=s-1-e.padInfo.left,u=i*s-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
          wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${u} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${s} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class uHe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,o=e.strideWidth,i=e.dilationDepth,s=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterDepth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,d=l-1-e.padInfo.front,f=u-1-e.padInfo.top,h=c-1-e.padInfo.left,p=l*u*c-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${f}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${u};
              wR += ${s}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${c};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${p} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${u} * ${c} +
                  wR * ${c} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cHe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:i}=e,s=i,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=r,d=[1,1,1],f=Js(s.shape,a,l,d,u,c),h=new LN(f,"max",!0),p=n.runWebGLProgram(h,[s],s.dtype),m=new uHe(f),g=n.runWebGLProgram(m,[o,p],s.dtype);return n.disposeIntermediateTensorInfo(p),g}const dHe={kernelName:NE,backendName:"webgl",kernelFunc:cHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fHe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:i,output:s}=e,a=i;yg([i,s],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=r,f=Uo(a.shape,l,u,1,c,d),h=!0,p=new Pp(f,"max",h),m=n.runWebGLProgram(p,[a],a.dtype),g=new lHe(f),y=n.runWebGLProgram(g,[o,m],a.dtype);return n.disposeIntermediateTensorInfo(m),y}const hHe={kernelName:EE,backendName:"webgl",kernelFunc:fHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pHe(t,e,n,r){let o=new Pp(n,"max",!1);const i=r.runWebGLProgram(o,[t],"float32");o=new Pp(n,"max",!0,!0,e);const s=r.runWebGLProgram(o,[t],"float32");return[i,s]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mHe={kernelName:dV,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:o,strides:i,pad:s,includeBatchInIndex:a}=e,l=n;M(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const u=[1,1];M(Kn(i,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=Uo(r.shape,o,i,u,s),[d,f]=pHe(r,a,c,l);return[d,f]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gHe(t,e,n,r){const o=re(e),s=re(t.shape)/o,a=ye({inputs:{x:t},attrs:{shape:[s,o]},backend:r}),l=Zu(a,"float32","mean",r),u=ye({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yHe={kernelName:Db,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:o,axis:i}=e,s=n,a=r.shape.length,l=Ue(i,r.shape);let u=l;const c=Ut(u,a),d=c!=null,f=s.shouldExecuteOnCPU([r]),h=[];let p=r;if(d){if(f){const b=s.texData.get(p.dataId).values,w=new Array(a);for(let C=0;C<w.length;C++)w[C]=r.shape[c[C]];const S=DN(b,r.shape,r.dtype,c,w);p=s.makeTensorInfo(w,r.dtype);const $=s.texData.get(p.dataId);$.values=S}else p=R1(r,c,s);h.push(p),u=en(u.length,a)}Fn("sum",u,a);const[m,g]=Nn(p.shape,u);let y=m;o&&(y=an(m,l));const v=gHe(p,g,y,s);for(const x of h)s.disposeIntermediateTensorInfo(x);return v}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:i,keepDims:s}=r,a=o.shape.length,l=Ue(i,o.shape);let u=l;const c=Ut(u,a);let d=o;c!=null&&(d=cr({inputs:{x:o},backend:n,attrs:{perm:c}}),u=en(u.length,o.shape.length)),Fn("min",u,a);const[f,h]=Nn(d.shape,u),p=re(h),m=ye({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),g=Zu(m,m.dtype,"min",n);let y;if(s){const v=an(f,l);y=ye({inputs:{x:g},backend:n,attrs:{shape:v}})}else y=ye({inputs:{x:g},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(d),y}const xHe={kernelName:Mb,backendName:"webgl",kernelFunc:vHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bHe=MN+`
  return min(a, b);
`,wHe=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Qu+`
  return result;
`,SHe=Ln({opSnippet:bHe,packedOpSnippet:wHe,cpuKernelImpl:a4e}),CHe={kernelName:Om,backendName:"webgl",kernelFunc:SHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $He{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((c,d)=>c[0]+e[d]+c[1]);const o=e.length,i=yt(o),s=n.map(c=>c[0]).join(","),a=n.map((c,d)=>c[0]+e[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o),u=r==="reflect"?0:1;if(o===1){this.userCode=`
        int start = ${s};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${u};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${u};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${s});
      ${i} end = ${i}(${a});

      void main() {
        ${i} outC = getOutputCoords();
        for (int i = 0; i < ${o}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${u};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${u};
          }
        }
        ${i} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kHe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((p,m)=>p[0]+e[m]+p[1]);const o=e.length,i=yt(o),s=n.map(p=>p[0]).join(","),a=n.map((p,m)=>p[0]+e[m]).join(","),l=ar("rc",o),u=ar("source",o),c=`${l[o-1]} < ${this.outputShape[o-1]}`,d=o===1?"source":`vec2(${u.slice(-2).join()})`,f=r==="reflect"?0:1;let h="";if(o===1){const p=`
        ${i} source = rc;
        if (source < start) {
          source = start * 2 - source - ${f};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${f};
        }
        source -= start;
      `;h=`
        ${i} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${u.join()}), ${d});
        ${l[o-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${u.join()}), ${d});
        }
      `}else{const p=`
        ${i} source = rc;
        ${i} lt = ${i}(lessThan(source, start));
        ${i} gte = ${i}(greaterThanEqual(source, end));
        ${i} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${f}) +
                gte * ((end - 1) * 2 - source + ${f});
        source -= start;
      `;h=`
        ${i} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${u.join()}), ${d});
        ${l[o-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${u.join()}), ${d});
        }
        rc = outputLoc;
        ${l[o-2]} += 1;
        if(${l[o-2]} < ${this.outputShape[o-2]}) {
          ${p}
          result[2] = getChannel(getX(${u.join()}), ${d});
          ${l[o-1]} += 1;
          if(${c}) {
            ${p}
            result[3] = getChannel(getX(${u.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${i} start = ${i}(${s});
      const ${i} end = ${i}(${a});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IHe=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:o,mode:i}=n,s=ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new kHe(r.shape,o,i):new $He(r.shape,o,i);return e.runWebGLProgram(s,[r],r.dtype)},THe={kernelName:Fb,backendName:"webgl",kernelFunc:IHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EHe=`if (b == 0.0) return NAN;
  return mod(a, b);`,NHe=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Qu+`
  return result;
`,AHe=Ln({opSnippet:EHe,packedOpSnippet:NHe}),OHe={kernelName:_m,backendName:"webgl",kernelFunc:AHe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _He{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RHe=`
if (a == b) {
  return 1.0;
};
return a / b;`,PHe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,_8=Ln({opSnippet:RHe,packedOpSnippet:PHe,checkOutOfBounds:!0}),DHe={kernelName:gm,backendName:"webgl",kernelFunc:_8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fF="return a - b;",R8=Ln({opSnippet:fF,packedOpSnippet:fF,supportsComplex:!0,cpuKernelImpl:E4e}),MHe={kernelName:qm,backendName:"webgl",kernelFunc:R8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P8(t){const{inputs:e,backend:n,attrs:r}=t,{logits:o}=e,{dim:i}=r,s=Ue([i],o.shape),a=O8({inputs:{x:o},backend:n,attrs:{reductionIndices:s,keepDims:!1}}),l=an(a.shape,s),u=ye({inputs:{x:a},backend:n,attrs:{shape:l}}),c=R8({inputs:{a:o,b:u},backend:n}),d=E8({inputs:{x:c},backend:n}),f=P1({inputs:{x:d},backend:n,attrs:{axis:s,keepDims:!1}}),h=ye({inputs:{x:f},backend:n,attrs:{shape:l}}),p=_8({inputs:{a:d,b:h},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),p}const FHe={kernelName:t1,backendName:"webgl",kernelFunc:P8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LHe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:o}=e,{numSamples:i,seed:s,normalized:a}=r,l=a?o:P8({inputs:{logits:o},backend:n,attrs:{dim:o.shape.length-1}}),u=l.shape[0],c=l.shape[1],d=new _He(u,c,i),f=[[s]],h=n.runWebGLProgram(d,[l],"int32",f);return a||n.disposeIntermediateTensorInfo(l),h}const BHe={kernelName:fV,backendName:"webgl",kernelFunc:LHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zHe=Ho+`
  return -x;
`,jHe=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function WHe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const i=n.texData.get(r.dataId),[s,a]=u4e(i.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,s)}let o;return ee().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new Ta(r.shape,jHe):o=new Ki(r.shape,zHe),n.runWebGLProgram(o,[r],r.dtype)}const VHe={kernelName:Lb,backendName:"webgl",kernelFunc:WHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UHe=$2;function GHe(t){eo("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:o,scores:i}=e,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l}=r,u=n.readSync(o.dataId),c=n.readSync(i.dataId),{selectedIndices:d}=UHe(u,c,s,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const HHe={kernelName:AE,backendName:"webgl",kernelFunc:GHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KHe=k2;function qHe(t){eo("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:o,scores:i}=e,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:u}=r,c=n.readSync(o.dataId),d=n.readSync(i.dataId),{selectedIndices:f,validOutputs:h}=KHe(c,d,s,a,l,u);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const XHe={kernelName:OE,backendName:"webgl",kernelFunc:qHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YHe=I2;function QHe(t){eo("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:o,scores:i}=e,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,softNmsSigma:u}=r,c=n.readSync(o.dataId),d=n.readSync(i.dataId),f=s,h=a,p=l,m=u,{selectedIndices:g,selectedScores:y}=YHe(c,d,f,h,p,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}const ZHe={kernelName:_E,backendName:"webgl",kernelFunc:QHe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JHe{constructor(e,n,r,o){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${o}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e6e=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:o}=e,{dtype:i,depth:s,onValue:a,offValue:l}=r,u=re(o.shape),c=new JHe(u,s,a,l),d=ye({inputs:{x:o},backend:n,attrs:{shape:[u]}}),f=n.runWebGLProgram(c,[d],i);n.disposeIntermediateTensorInfo(d);const h=[...o.shape,s],p=ye({inputs:{x:f},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(f),p},t6e={kernelName:jb,backendName:"webgl",kernelFunc:e6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W0(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const o=xg({inputs:{input:r},backend:n}),i=W0({inputs:{x:o},backend:n}),s=D1({inputs:{input:r},backend:n}),a=W0({inputs:{x:s},backend:n}),l=Cl({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),l}else return bg({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const n6e={kernelName:o1,backendName:"webgl",kernelFunc:W0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D8(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const o=xg({inputs:{input:r},backend:n}),i=D8({inputs:{x:o},backend:n}),s=D1({inputs:{input:r},backend:n}),a=W0({inputs:{x:s},backend:n}),l=Cl({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),l}else return bg({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const r6e={kernelName:zb,backendName:"webgl",kernelFunc:D8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o6e(t){const{inputs:e,backend:n,attrs:r}=t,{axis:o}=r;if(e.length===1)return Ik({inputs:{input:e[0]},backend:n,attrs:{dim:o}});const i=e[0].shape,s=e[0].dtype;e.forEach(c=>{JT(i,c.shape,"All tensors passed to stack must have matching shapes"),M(s===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(c=>{const d=Ik({inputs:{input:c},backend:n,attrs:{dim:o}});return a.push(d),d}),u=b8({inputs:l,backend:n,attrs:{axis:o}});return a.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const i6e={kernelName:Wb,backendName:"webgl",kernelFunc:o6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class s6e{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((u,c)=>u[0]+e[c]+u[1]);const o=e.length,i=yt(o),s=n.map(u=>u[0]).join(","),a=n.map((u,c)=>u[0]+e[c]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o);if(o===1){this.userCode=`
        int start = ${s};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${s});
      ${i} end = ${i}(${a});

      void main() {
        ${i} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${i} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a6e{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((m,g)=>m[0]+e[g]+m[1]);const o=e.length,i=yt(o),s=n.map(m=>m[0]).join(","),a=n.map((m,g)=>m[0]+e[g]).join(","),l=ar("rc",o),u=ar("source",o),c=`${l[o-1]} < ${this.outputShape[o-1]}`,d=o===1?"source":`vec2(${u.slice(-2).join()})`,f=[`${i} rc = outputLoc;`,`${l[o-1]} += 1;
       if(${c}) {
      `,o===1?"":`}
       rc = outputLoc;
       ${l[o-2]} += 1;
       if(${l[o-2]} < ${this.outputShape[o-2]}) {`,o===1?"":`  ${l[o-1]} += 1;
         if(${c}) {`],h=o===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let m=0,g=o===1?2:4;m<g;m++)p+=`
        ${f[m]}
        if (${h}) {
          result[${m}] = float(value);
        } else {
          ${i} source = rc - start;
          result[${m}] = getChannel(getX(${u.join()}), ${d});
        }
      `;p+=o===1?"} ":"}}",this.userCode=`
      const ${i} start = ${i}(${s});
      const ${i} end = ${i}(${a});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M8=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{paddings:i,constantValue:s}=r;if(re(o.shape)===0){const u=i.map((c,d)=>c[0]+o.shape[d]+c[1]);return bg({backend:n,attrs:{shape:u,value:s,dtype:o.dtype}})}const a=ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new a6e(o.shape,i,s):new s6e(o.shape,i,s),l=[[s]];return n.runWebGLProgram(a,[o],o.dtype,l)},l6e={kernelName:Vb,backendName:"webgl",kernelFunc:M8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u6e=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,c6e=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Qu+`
  return result;
`,d6e=Ln({opSnippet:u6e,packedOpSnippet:c6e}),f6e={kernelName:Pm,backendName:"webgl",kernelFunc:d6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:i,keepDims:s}=r,a=o.shape.length,l=[],u=Ue(i,o.shape);let c=u;const d=Ut(c,a);let f=o;d!=null&&(f=cr({inputs:{x:o},backend:n,attrs:{perm:d}}),c=en(c.length,a),l.push(f)),Fn("prod",c,a);let h;if(n.shouldExecuteOnCPU([f])){const p=n.texData.get(f.dataId).values,{outVals:m,outShape:g,outDtype:y}=d4e(f.shape,f.dtype,p,c);h=n.makeTensorInfo(g,y,m)}else{const[p,m]=Nn(f.shape,c),g=re(m),y=ye({inputs:{x:f},backend:n,attrs:{shape:[-1,g]}}),v=GE(o.dtype),x=Zu(y,v,"prod",n);h=ye({inputs:{x},backend:n,attrs:{shape:p}}),l.push(y),l.push(x)}if(s){l.push(h);const p=an(h.shape,u);h=ye({inputs:{x:h},backend:n,attrs:{shape:p}})}return l.forEach(p=>n.disposeIntermediateTensorInfo(p)),h}const p6e={kernelName:Gb,backendName:"webgl",kernelFunc:h6e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m6e(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:o,paramsDenseValues:i,indices:s}=e,{outputRaggedRank:a}=r,l=o.map(y=>n.readSync(y.dataId)),u=o.map(y=>y.shape),c=n.readSync(i.dataId),d=n.readSync(s.dataId),[f,h,p]=f4e(l,u,c,i.shape,i.dtype,d,s.shape,a),m=f.map(y=>n.makeTensorInfo([y.length],"int32",y)),g=n.makeTensorInfo(p,i.dtype,h);return m.concat([g])}const g6e={kernelName:hV,backendName:"webgl",kernelFunc:m6e};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y6e(t){const{inputs:e,backend:n}=t,{starts:r,limits:o,deltas:i}=e,s=n.readSync(r.dataId),a=n.readSync(o.dataId),l=n.readSync(i.dataId),[u,c]=h4e(s,r.shape,r.dtype,a,o.shape,l,i.shape),d=n.makeTensorInfo([u.length],"int32",u),f=n.makeTensorInfo([c.length],r.dtype,c);return[d,f]}const v6e={kernelName:pV,backendName:"webgl",kernelFunc:y6e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x6e(t){const{inputs:e,backend:n,attrs:r}=t,{shape:o,values:i,defaultValue:s,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,u=n.readSync(o.dataId),c=n.readSync(i.dataId),d=n.readSync(s.dataId),f=a.map(g=>n.readSync(g.dataId)),h=a.map(g=>g.shape),[p,m]=p4e(u,o.shape,c,i.shape,i.dtype,d,s.shape,f,h,l);return n.makeTensorInfo(p,i.dtype,m)}const b6e={kernelName:mV,backendName:"webgl",kernelFunc:x6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F8=t=>{const{backend:e,attrs:n}=t,{start:r,stop:o,step:i,dtype:s}=n,a=m4e(r,o,i,s);return e.makeTensorInfo([a.length],s,a)},w6e={kernelName:RE,backendName:"webgl",kernelFunc:F8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S6e="return 1.0 / x;",C6e=tt({opSnippet:S6e}),$6e={kernelName:Dm,backendName:"webgl",kernelFunc:C6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k6e=Ho+`
  return (x < 0.0) ? 0.0 : x;
`,I6e=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,T6e=tt({opSnippet:k6e,packedOpSnippet:I6e}),E6e={kernelName:Mm,backendName:"webgl",kernelFunc:T6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N6e=Ho+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,A6e=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,O6e=tt({opSnippet:N6e,packedOpSnippet:A6e}),_6e={kernelName:Fm,backendName:"webgl",kernelFunc:O6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class R6e{constructor(e,n,r,o,i){this.variableNames=["A"],this.outputShape=[];const[s,a,l,u]=e;this.outputShape=[s,n,r,u];const c=[o&&n>1?a-1:a,o&&r>1?l-1:l],d=[o&&n>1?n-1:n,o&&r>1?r-1:r];let f;i?f="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class P6e{constructor(e,n,r,o,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[s,a,l,u]=e;this.outputShape=[s,n,r,u];const c=[o&&n>1?a-1:a,o&&r>1?l-1:l],d=[o&&n>1?n-1:n,o&&r>1?r-1:r];let f;i?f="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D6e(t){const{inputs:e,backend:n,attrs:r}=t,{images:o}=e,{alignCorners:i,halfPixelCenters:s,size:a}=r,[l,u]=a,c=ee().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new P6e(o.shape,l,u,i,s):new R6e(o.shape,l,u,i,s);return n.runWebGLProgram(c,[o],"float32")}const M6e={kernelName:qb,backendName:"webgl",kernelFunc:D6e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class F6e{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,o,i]=n,[,s,a]=e,l=[r&&s>1?o-1:o,r&&a>1?i-1:i],u=[r&&s>1?s-1:s,r&&a>1?a-1:a],c=l[0]/u[0],d=l[1]/u[1],f=1/c,h=1/d,p=Math.ceil(f)*2+2,m=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${h});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${s}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${o-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L6e(t){const{inputs:e,backend:n,attrs:r}=t,{images:o,dy:i}=e,{alignCorners:s}=r,a=new F6e(i.shape,o.shape,s);return n.runWebGLProgram(a,[i],i.dtype)}const B6e={kernelName:ME,backendName:"webgl",kernelFunc:L6e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class z6e{constructor(e,n,r,o,i){this.variableNames=["A"],this.outputShape=[];const[s,a,l,u]=e;this.outputShape=[s,n,r,u];const c=[o&&n>1?a-1:a,o&&r>1?l-1:l],d=[o&&n>1?n-1:n,o&&r>1?r-1:r],f=o?"0.5":"0.0";let h;i?h="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class j6e{constructor(e,n,r,o,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[s,a,l,u]=e;this.outputShape=[s,n,r,u];const c=[o&&n>1?a-1:a,o&&r>1?l-1:l],d=[o&&n>1?n-1:n,o&&r>1?r-1:r],f=o?"0.5":"0.0";let h;i?h="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W6e(t){const{inputs:e,backend:n,attrs:r}=t,{images:o}=e,{alignCorners:i,halfPixelCenters:s,size:a}=r,[l,u]=a,c=ee().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new j6e(o.shape,l,u,i,s):new z6e(o.shape,l,u,i,s);return n.runWebGLProgram(c,[o],o.dtype)}const V6e={kernelName:Kb,backendName:"webgl",kernelFunc:W6e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class U6e{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,o,i]=n,[,s,a]=e,l=[r&&s>1?o-1:o,r&&a>1?i-1:i],u=[r&&s>1?s-1:s,r&&a>1?a-1:a],c=l[0]/u[0],d=l[1]/u[1],f=1/c,h=1/d,p=Math.ceil(f)*2+2,m=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${h});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${s}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${u[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${u[1]}));

            int sourceNearestRow = int(min(
                float(int(${o}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G6e(t){const{inputs:e,backend:n,attrs:r}=t,{images:o,dy:i}=e,{alignCorners:s}=r,a=new U6e(i.shape,o.shape,s);return n.runWebGLProgram(a,[i],i.dtype)}const H6e={kernelName:DE,backendName:"webgl",kernelFunc:G6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class K6e{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const o=a=>n.indexOf(a)!==-1&&e[a]!==1?`${e[a]} - coords[${a}] - 1`:`coords[${a}]`,i=e.map((a,l)=>o(l)).join(","),s=yt(r);this.userCode=`
      void main() {
        ${s} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class q6e{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const o=ar("rc",r),i=`${o[r-1]} + 1 < ${this.outputShape[r-1]}`,s=`${o[r-2]} + 1 < ${this.outputShape[r-2]}`,a=yt(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${i}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(o.slice())};
          if(${i}){
            result.g = ${u(o.slice())};
          }
          if(${s}) {
            result.b = ${c(o.slice())};
            if(${i}) {
              result.a = ${d(o.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(p){return f(p)}function u(p){return p[r-1]="("+p[r-1]+" + 1)",f(p)}function c(p){return p[r-2]="("+p[r-2]+" + 1)",f(p)}function d(p){return p[r-1]="("+p[r-1]+" + 1)",p[r-2]="("+p[r-2]+" + 1)",f(p)}function f(p){const m=e.map((v,x)=>h(x,p)),g=m.join(","),y=m.slice(-2).join(",");return`getChannel(getX(${g}), vec2(${y}))`}function h(p,m){return n.indexOf(p)!==-1&&e[p]!==1?`${e[p]} - ${m[p]} - 1`:`${m[p]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{dims:i}=r,s=o.shape.length,a=Ue(i,o.shape);if(s===0)return Gr({inputs:{x:o},backend:n});const l=ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new q6e(o.shape,a):new K6e(o.shape,a);return n.runWebGLProgram(l,[o],o.dtype)}const Y6e={kernelName:Xb,backendName:"webgl",kernelFunc:X6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Q6e{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],o=e[2];this.outputShape=e;let i="";typeof n=="number"?i=`float outputValue = ${n.toFixed(2)};`:i=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${i}
          if(coordX >= 0 && coordX < ${o} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z6e={kernelName:VE,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:o,fillValue:i,center:s}=e,a=n,l=new Q6e(r.shape,i),[u,c]=F2(s,r.shape[1],r.shape[2]),d=[[u,c,Math.sin(o),Math.cos(o)]];return a.runWebGLProgram(l,[r],r.dtype,d)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J6e=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,e8e=tt({opSnippet:J6e}),t8e={kernelName:Lm,backendName:"webgl",kernelFunc:e8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n8e="return inversesqrt(x);",r8e=tt({opSnippet:n8e,cpuKernelImpl:g4e}),o8e={kernelName:Bm,backendName:"webgl",kernelFunc:r8e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BN{constructor(e,n,r,o,i,s,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=s;const u=yt(i.length),c=yt(s.length);let d="";r===1?d="i":r===2&&(d="i, j");const f=`getIndices(${d})`;let h="";o===1?h="i":o===2&&(h="i, coords[1]");const p=`getUpdates(${h})`;let m="";l&&(m="coords[0], coords[1]");const g=`getDefaultValue(${m})`,y=n>1?"strides[j]":"strides";this.userCode=`
        ${u} strides = ${u}(${i});

        void main() {
          ${c} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${f});
              flattenedIndex += index * ${y};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${p};
              found = true;
            }
          }
          setOutput(mix(${g}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i8e{constructor(e,n,r,o,i,s,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=s;const u=yt(i.length),c=yt(s.length);let d="";r===1?d="i":r===2&&(d="i, j");const f=`getIndices(${d})`;let h="";o===1?h="i":o===2&&(h="i, coords[1]");const p=`getUpdates(${h})`;let m="";l&&(m="coords[0], coords[1]");const g=`getDefaultValue(${m})`,y=n>1?"strides[j]":"strides",v=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${u} strides = ${u}(${i});

        void main() {
          ${c} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${f});
              flattenedIndex += index.xz * ${y};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${v};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${p};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${g}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s8e(t){const{inputs:e,backend:n,attrs:r}=t,{indices:o,updates:i}=e,{shape:s}=r,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=Hu(i,o,s),f=[d/u,u];if(d===0)return n.makeTensorInfo(s,o.dtype);const h=ye({inputs:{x:o},backend:n,attrs:{shape:[l,a]}}),p=ye({inputs:{x:i},backend:n,attrs:{shape:[l,u]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0]));let g;ee().getBool("WEBGL_PACK")?g=new i8e(l,a,h.shape.length,p.shape.length,c,f):g=new BN(l,a,h.shape.length,p.shape.length,c,f);const y=n.runWebGLProgram(g,[p,h,m],p.dtype),v=ye({inputs:{x:y},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(m),v}const a8e={kernelName:gV,backendName:"webgl",kernelFunc:s8e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class l8e{constructor(e,n,r,o){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const i="while (left < right) {",s=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,a=ee().getNumber("WEBGL_VERSION")===2?i:s,l=o==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u8e(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:o,values:i}=e,{side:s}=r,a=new l8e(o.shape[0],o.shape[1],i.shape[1],s),l=[[o.shape[1]]];return n.runWebGLProgram(a,[o,i],"int32",l)}const c8e={kernelName:vV,backendName:"webgl",kernelFunc:u8e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class d8e{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let o,i;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)i="resRC",o="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],u=[];for(let c=0;c<n.length;c++)u.push(`${a[c]}`),c<e&&l.push(`${a[c]}`);o=l.join(),i=u.join()}const s=yt(r);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        float cVal = getC(${o});
        if (cVal >= 1.0) {
          setOutput(getA(${i}));
        } else {
          setOutput(getB(${i}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f8e(t){const{inputs:e,backend:n}=t,{condition:r,t:o,e:i}=e,s=new d8e(r.shape.length,o.shape,o.shape.length);return n.runWebGLProgram(s,[r,o,i],Vr(o.dtype,i.dtype))}const h8e={kernelName:Yb,backendName:"webgl",kernelFunc:f8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p8e=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${g1};
  float scale = ${y1};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,m8e=tt({opSnippet:p8e}),g8e={kernelName:zm,backendName:"webgl",kernelFunc:m8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y8e=Sf+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,v8e=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,x8e=tt({opSnippet:y8e,packedOpSnippet:v8e,cpuKernelImpl:v4e}),b8e={kernelName:Um,backendName:"webgl",kernelFunc:x8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w8e=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,S8e=tt({opSnippet:w8e}),C8e={kernelName:Vm,backendName:"webgl",kernelFunc:S8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $8e=Sf+`
  return sin(x);
`,k8e=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Qu}
  return result;
`,I8e=tt({opSnippet:$8e,packedOpSnippet:k8e}),T8e={kernelName:jm,backendName:"webgl",kernelFunc:I8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E8e=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,N8e=tt({opSnippet:E8e}),A8e={kernelName:Wm,backendName:"webgl",kernelFunc:N8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O8e=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,_8e=tt({opSnippet:O8e}),R8e={kernelName:Gm,backendName:"webgl",kernelFunc:_8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P8e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{blockShape:i,paddings:s}=r;M(o.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=i.reduce((y,v)=>y*v),l=[[0,0]];l.push(...s);for(let y=1+i.length;y<o.shape.length;++y)l.push([0,0]);const u=[],c=M8({inputs:{x:o},backend:n,attrs:{paddings:l,constantValue:0}}),d=og(c.shape,i,a,!1),f=ig(d.length,i.length,!1),h=sg(c.shape,i,a,!1),p=ye({inputs:{x:c},backend:n,attrs:{shape:d}}),m=cr({inputs:{x:p},backend:n,attrs:{perm:f}}),g=ye({inputs:{x:m},backend:n,attrs:{shape:h}});return u.push(c),u.push(p),u.push(m),u.forEach(y=>n.disposeIntermediateTensorInfo(y)),g},D8e={kernelName:Jb,backendName:"webgl",kernelFunc:P8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M8e(t){const{inputs:e,backend:n}=t,{indices:r,values:o,denseShape:i,defaultValue:s}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(o.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${o.shape}`);if(s.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${s.shape}`);const a=n.readSync(r.dataId),l=n.readSync(o.dataId),u=n.readSync(i.dataId),c=n.readSync(s.dataId)[0],[d,f,h,p,m]=b4e(a,r.shape,r.dtype,l,o.dtype,u,c);return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([f[0]],o.dtype,h),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(g=>Number(g)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const F8e={kernelName:xV,backendName:"webgl",kernelFunc:M8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L8e(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:o,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(o.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${o.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const s=Array.from(n.readSync(o.dataId)),a=n.readSync(r.dataId),l=Array.from(n.readSync(i.dataId)),[u,c,d]=w4e(a,r.shape,r.dtype,s,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}const B8e={kernelName:bV,backendName:"webgl",kernelFunc:L8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z8e(t){const{inputs:e,backend:n}=t,{data:r,indices:o,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${o.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${i.shape}`);const s=n.readSync(r.dataId),a=n.readSync(o.dataId),l=n.readSync(i.dataId),[u,c]=a8(s,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const j8e={kernelName:wV,backendName:"webgl",kernelFunc:z8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W8e(t){const{inputs:e,backend:n}=t,{data:r,indices:o,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${o.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${i.shape}`);const s=n.readSync(r.dataId),a=n.readSync(o.dataId),l=n.readSync(i.dataId),[u,c]=a8(s,r.shape,r.dtype,a,l);return n.makeTensorInfo(c,r.dtype,u)}const V8e={kernelName:SV,backendName:"webgl",kernelFunc:W8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U8e(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:o,sparseValues:i,defaultValue:s}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:f}=Hu(i,o,a),h=!1;if(i.dtype==="string"){const y=n.bufferSync(o),v=n.bufferSync(i),x=Ja(n.readSync(s.dataId)[0]),b=y4e(y,v,a,f,c,u,l,d,x,h);return n.makeTensorInfo(a,b.dtype,b.values)}const p=new BN(u,l,o.shape.length,i.shape.length,d,[f,1],h),m=n.runWebGLProgram(p,[i,o,s],i.dtype),g=ye({inputs:{x:m},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(m),g}const G8e={kernelName:CV,backendName:"webgl",kernelFunc:U8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{numOrSizeSplits:i,axis:s}=r,a=Ue(s,o.shape)[0],l=Z2(o,i,a),u=o.shape.length,c=new Array(u).fill(0),d=o.shape.slice();return l.map(f=>{const h=[...d];h[a]=f;const p=Cf({inputs:{x:o},backend:n,attrs:{begin:c,size:h}});return c[a]+=f,p})}const K8e={kernelName:e1,backendName:"webgl",kernelFunc:H8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hF="return sqrt(x);",q8e=tt({opSnippet:hF,packedOpSnippet:hF,cpuKernelImpl:S4e}),X8e={kernelName:Hm,backendName:"webgl",kernelFunc:q8e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y8e="return x * x;",Q8e=tt({opSnippet:Y8e}),Z8e={kernelName:FE,backendName:"webgl",kernelFunc:Q8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pF="return (a - b) * (a - b);",J8e=Ln({opSnippet:pF,packedOpSnippet:pF}),eKe={kernelName:Km,backendName:"webgl",kernelFunc:J8e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e;if(o.dtype!=="string")throw new Error("Input must be of datatype string");const i=n.readSync(o.dataId),s=Ks(i),a=C4e(s,"string",r);return n.makeTensorInfo(o.shape,"string",a)}const nKe={kernelName:LE,backendName:"webgl",kernelFunc:tKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rKe({inputs:t,attrs:e,backend:n}){const{x:r}=t,o=Ho+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,i=new Ki(r.shape,o);return n.runWebGLProgram(i,[r],r.dtype)}const oKe={kernelName:Zm,backendName:"webgl",kernelFunc:rKe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iKe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const o=r.length,i=yt(r.length),s=yt(r.length);let a="";if(o===1)a="coords * strides + begin";else{let l=0;a=r.map((u,c)=>(l++,r.length===1?`coords * strides[${c}] + begin[${c}]`:`coords[${l-1}] * strides[${c}] + begin[${c}]`)).join(",")}this.userCode=`
      ${i} begin = ${i}(${e});
      ${i} strides = ${i}(${n});

      void main() {
        ${s} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{begin:i,end:s,strides:a,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:f}=r,{finalShapeSparse:h,finalShape:p,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:v,end:x,strides:b}=P2(o.shape,i,s,a,l,u,c,d,f);let w;if(m)w=ye({inputs:{x:o},backend:n,attrs:{shape:p}});else if(g||y){M(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);const $=O2(v,x,b),C=Cf({inputs:{x:o},backend:n,attrs:{begin:v,size:$}});w=ye({inputs:{x:C},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(C)}else if(n.shouldExecuteOnCPU([o])){const C=n.readSync(o.dataId),k=Ve(o.shape,o.dtype,C),I=$4e(h,k,b,v);w=n.makeTensorInfo(p,o.dtype,I.values)}else{const C=new iKe(v,b,h);w=n.runWebGLProgram(C,[o],o.dtype)}const S=ye({inputs:{x:w},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(w),S}const aKe={kernelName:BE,backendName:"webgl",kernelFunc:sKe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lKe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:o,nGramWidths:i,leftPad:s,rightPad:a,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:d}=e,f=n.readSync(c.dataId),h=n.readSync(d.dataId),[p,m]=k4e(f,h,o,i,s,a,l,u);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",m)]}const uKe={kernelName:$V,backendName:"webgl",kernelFunc:lKe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cKe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:o}=r,{input:i,delimiter:s}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(s.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${s.shape}`);const a=n.readSync(i.dataId),l=n.readSync(s.dataId)[0],[u,c,d]=I4e(a,l,o),f=c.length;return[n.makeTensorInfo([f,2],"int32",u),n.makeTensorInfo([f],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const dKe={kernelName:kV,backendName:"webgl",kernelFunc:cKe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fKe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:o}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const s=n.readSync(i.dataId),a=T4e(s,o);return n.makeTensorInfo(i.shape,"int32",a)}const hKe={kernelName:IV,backendName:"webgl",kernelFunc:fKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pKe="return tan(x);",mKe=tt({opSnippet:pKe}),gKe={kernelName:Xm,backendName:"webgl",kernelFunc:mKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yKe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,vKe=tt({opSnippet:yKe}),xKe={kernelName:Ym,backendName:"webgl",kernelFunc:vKe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bKe(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:o,indices:i,updates:s}=e,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=Hu(s,i,o.shape),f=[d/u,u];if(d===0)return n.makeTensorInfo(o.shape,i.dtype);const h=ye({inputs:{x:i},backend:n,attrs:{shape:[l,a]}}),p=ye({inputs:{x:s},backend:n,attrs:{shape:[l,u]}}),m=ye({inputs:{x:o},backend:n,attrs:{shape:f}}),g=new BN(l,a,h.shape.length,p.shape.length,c,f,!1,!0),y=n.runWebGLProgram(g,[p,h,m],m.dtype),v=ye({inputs:{x:y},backend:n,attrs:{shape:o.shape}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),v}const wKe={kernelName:yV,backendName:"webgl",kernelFunc:bKe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SKe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let s=0;s<r.length;s++)r[s]=e[s]*n[s];this.outputShape=r,this.rank=r.length;const o=yt(this.rank),i=CKe(e);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}}function CKe(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let o=0;o<t.length;o++)r.push(`imod(${n[o]}, ${t[o]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L8(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{reps:i}=r;if(o.dtype==="string"||o.shape.length>5){const l=n.readSync(o.dataId),u=o.dtype==="string"?l.map(f=>Ja(f)):l,c=Ve(o.shape,o.dtype,u),d=N4e(c,i);return n.makeTensorInfo(d.shape,d.dtype,d.values)}const s=new SKe(o.shape,i);return n.runWebGLProgram(s,[o],o.dtype)}const $Ke={kernelName:Qm,backendName:"webgl",kernelFunc:L8};class kKe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class IKe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tl(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function mF(t){let e=1;for(;e<t;)e*=2;return e}function TKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{k:i,sorted:s}=r,a=ee().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=ee().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=o.shape,c=u[u.length-1];if(n.shouldExecuteOnCPU([o])||c<a||i>l){const I=n.readSync(o.dataId),[T,E]=A4e(I,u,o.dtype,i,s);return[n.makeTensorInfo(T.shape,T.dtype,T.values),n.makeTensorInfo(E.shape,E.dtype,E.values)]}if(i===0)return u[u.length-1]=0,[n.makeTensorInfo(u,o.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(c===1)return[o,bg({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const d=n.texData.get(o.dataId),f=d!==null&&d.isPacked,h=f?n.unpackTensor(o):o,m=re(u)/c,g=ye({inputs:{x:h},attrs:{shape:[m,c]},backend:n});f&&Tl(n,h);const y=mF(i),v=mF(c);let x=null;const b=()=>x===null?[g,g]:[g,x],w=(I,T,E)=>{const _=b(),N=new kKe(E),F=[[c],[x===null?1:0],[Number.NEGATIVE_INFINITY],[I],[T]],L=x;x=n.runWebGLProgram(N,_,"int32",F),Tl(n,L)};for(let I=1;I<y;I*=2){const T=I*2;for(let E=I;E>=1;E/=2)w(T,E,[m,v])}for(let I=v;I>y;I/=2){const T=b(),E=new IKe([m,I/2]),N=[[c],[x===null?1:0],[y]],P=x;x=n.runWebGLProgram(E,T,"int32",N),Tl(n,P);const F=y/2,L=F*2;for(let A=F;A>=1;A/=2)w(L,A,x.shape)}let S=x;x=Cf({inputs:{x},backend:n,attrs:{begin:0,size:[m,i]}}),Tl(n,S);let $=A8({inputs:{x:g,indices:x},backend:n,attrs:{axis:1,batchDims:1}});Tl(n,g);const C=u.slice(0,-1);C.push(i),S=x,x=ye({inputs:{x},attrs:{shape:C},backend:n}),Tl(n,S);const k=$;return $=ye({inputs:{x:$},attrs:{shape:C},backend:n}),Tl(n,k),[$,x]}const EKe={kernelName:zE,backendName:"webgl",kernelFunc:TKe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NKe{constructor(e,n,r,o,i,s){this.variableNames=["Image","Transforms"],this.outputShape=s;const a=r==="nearest"?1:2;let l;switch(o){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${i});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${i});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AKe(t){const{inputs:e,backend:n,attrs:r}=t,{image:o,transforms:i}=e,{interpolation:s,fillMode:a,fillValue:l,outputShape:u}=r,[c,d,f,h]=o.shape,[p,m]=u??[d,f],g=[c,p,m,h],y=new NKe(d,f,s,a,l,g);return n.runWebGLProgram(y,[o,i],"float32")}const OKe={kernelName:jE,backendName:"webgl",kernelFunc:AKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ke(t){const{inputs:e,attrs:n,backend:r}=t,{axis:o}=n,{x:i}=e;yg(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const s=r.readSync(i.dataId),{outputValues:a,outputShape:l,indices:u}=O4e(s,o,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,a),r.makeTensorInfo([u.length],"int32",u)]}const RKe={kernelName:WE,backendName:"webgl",kernelFunc:_Ke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PKe(t){const{inputs:e,backend:n,attrs:r}=t,{value:o}=e;let{axis:i}=r;i<0&&(i+=o.shape.length);const s=o,a=s.shape.length,l=o.shape[i],u=new Array(a-1);let c=0;for(let m=0;m<a;m++)m!==i&&(u[c++]=s.shape[m]);const d=[],f=new Array(a).fill(0),h=s.shape.slice();h[i]=1;const p=new Array(l);for(let m=0;m<p.length;m++){f[i]=m;const g=Cf({inputs:{x:s},backend:n,attrs:{begin:f,size:h}}),y=ye({inputs:{x:g},backend:n,attrs:{shape:u}});p[m]=y,d.push(g)}return d.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const DKe={kernelName:n1,backendName:"webgl",kernelFunc:PKe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MKe{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,o=e.batchSize,i=e.inSize,s=e.numSegments,a=s*Math.ceil(i/r);this.outputShape=[o,a];const l="0.0",u="sumValue",c=Math.floor(r/4)*4,d=r%4,f=`
        sumValue += dot(values, segFilter);
    `;let h="";i%r>0&&(h=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `);let p="";i%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${p}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${s})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${s})));

        float sumValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${f}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${f}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${f}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${f}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,segmentIds:i}=e,{numSegments:s}=r,a=o.shape.length,l=[];let u=0;const c=Ut([u],a);let d=o;c!=null&&(d=cr({inputs:{x:o},backend:n,attrs:{perm:c}}),l.push(d),u=en(1,a)[0]);const f=bG(d.shape,u,s),h=re([d.shape[u]]),p=ye({inputs:{x:d},backend:n,attrs:{shape:[-1,h]}});l.push(p);const m=GE(o.dtype),g=(b,w,S,$,C)=>{const k=b.shape[0],I=b.shape[1],T=xG(I,C),E={windowSize:T,inSize:I,batchSize:k,numSegments:C},_=new MKe(E,w),N=n.compileAndRun(_,[b,S],$);if(l.push(N),N.shape[1]===C)return N;const P=F8({backend:n,attrs:{start:0,stop:C,step:1,dtype:"float32"}}),F=L8({inputs:{x:P},backend:n,attrs:{reps:[I/T]}});return l.push(P),l.push(F),g(N,w,F,$,C)},y=g(p,"unsortedSegmentSum",i,m,s),v=ye({inputs:{x:y},backend:n,attrs:{shape:f}});let x=v;if(c!=null){l.push(v);const b=yl(c);x=cr({inputs:{x},backend:n,attrs:{perm:b}})}return l.forEach(b=>n.disposeIntermediateTensorInfo(b)),x}const LKe={kernelName:r1,backendName:"webgl",kernelFunc:FKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BKe=[SWe,$We,TWe,AWe,_We,DWe,FWe,BWe,VWe,GWe,qWe,QWe,eVe,oVe,aVe,uVe,dVe,mVe,yVe,xVe,CVe,AVe,_Ve,MVe,LVe,UVe,HVe,YVe,iWe,JVe,oUe,lUe,pUe,yUe,xUe,wUe,CUe,TUe,AUe,RUe,DUe,FUe,BUe,WUe,UUe,qUe,YUe,JUe,nGe,oGe,lGe,fGe,gGe,xGe,SGe,CGe,kGe,TGe,NGe,OGe,RGe,FGe,zGe,VGe,GGe,qGe,QGe,t5e,i5e,oWe,a5e,nUe,c5e,h5e,g5e,aWe,b5e,$5e,I5e,A5e,R5e,F5e,z5e,U5e,q5e,Q5e,J5e,rHe,iHe,aHe,dHe,hHe,mHe,yHe,xHe,CHe,THe,OHe,BHe,cWe,VHe,HHe,XHe,ZHe,zVe,t6e,r6e,i6e,l6e,f6e,uWe,p6e,g6e,v6e,b6e,w6e,jVe,DHe,$6e,E6e,_6e,fWe,M6e,B6e,V6e,H6e,Y6e,Z6e,t8e,o8e,a8e,c8e,h8e,g8e,b8e,C8e,T8e,A8e,EVe,FHe,R8e,D8e,F8e,B8e,j8e,V8e,G8e,K8e,X8e,Z8e,eKe,nKe,oKe,aKe,uKe,dKe,hKe,MHe,xWe,gKe,xKe,wKe,$Ke,EKe,OKe,bWe,RKe,DKe,LKe,n6e];for(const t of BKe)EV(t);var B8={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((n,r)=>{t.exports=r()})(Io,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},o,i=!r.document&&!!r.postMessage,s=r.IS_PAPA_WORKER||!1,a={},l=0,u={};function c(C){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(k){var I=w(k);I.chunkSize=parseInt(I.chunkSize),k.step||k.chunk||(I.chunkSize=null),this._handle=new m(I),(this._handle.streamer=this)._config=I}).call(this,C),this.parseChunk=function(k,I){var T=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<T){let _=this._config.newline;_||(E=this._config.quoteChar||'"',_=this._handle.guessLineEndings(k,E)),k=[...k.split(_).slice(T)].join(_)}this.isFirstChunk&&$(this._config.beforeFirstChunk)&&(E=this._config.beforeFirstChunk(k))!==void 0&&(k=E),this.isFirstChunk=!1,this._halted=!1;var T=this._partialLine+k,E=(this._partialLine="",this._handle.parse(T,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(k=E.meta.cursor,T=(this._finished||(this._partialLine=T.substring(k-this._baseIndex),this._baseIndex=k),E&&E.data&&(this._rowCount+=E.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),s)r.postMessage({results:E,workerId:u.WORKER_ID,finished:T});else if($(this._config.chunk)&&!I){if(this._config.chunk(E,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=E=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(E.data),this._completeResults.errors=this._completeResults.errors.concat(E.errors),this._completeResults.meta=E.meta),this._completed||!T||!$(this._config.complete)||E&&E.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),T||E&&E.meta.paused||this._nextChunk(),E}this._halted=!0},this._sendError=function(k){$(this._config.error)?this._config.error(k):s&&this._config.error&&r.postMessage({workerId:u.WORKER_ID,error:k,finished:!1})}}function d(C){var k;(C=C||{}).chunkSize||(C.chunkSize=u.RemoteChunkSize),c.call(this,C),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(I){this._input=I,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(k=new XMLHttpRequest,this._config.withCredentials&&(k.withCredentials=this._config.withCredentials),i||(k.onload=S(this._chunkLoaded,this),k.onerror=S(this._chunkError,this)),k.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var I,T=this._config.downloadRequestHeaders;for(I in T)k.setRequestHeader(I,T[I])}var E;this._config.chunkSize&&(E=this._start+this._config.chunkSize-1,k.setRequestHeader("Range","bytes="+this._start+"-"+E));try{k.send(this._config.downloadRequestBody)}catch(_){this._chunkError(_.message)}i&&k.status===0&&this._chunkError()}},this._chunkLoaded=function(){k.readyState===4&&(k.status<200||400<=k.status?this._chunkError():(this._start+=this._config.chunkSize||k.responseText.length,this._finished=!this._config.chunkSize||this._start>=(I=>(I=I.getResponseHeader("Content-Range"))!==null?parseInt(I.substring(I.lastIndexOf("/")+1)):-1)(k),this.parseChunk(k.responseText)))},this._chunkError=function(I){I=k.statusText||I,this._sendError(new Error(I))}}function f(C){(C=C||{}).chunkSize||(C.chunkSize=u.LocalChunkSize),c.call(this,C);var k,I,T=typeof FileReader<"u";this.stream=function(E){this._input=E,I=E.slice||E.webkitSlice||E.mozSlice,T?((k=new FileReader).onload=S(this._chunkLoaded,this),k.onerror=S(this._chunkError,this)):k=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var E=this._input,_=(this._config.chunkSize&&(_=Math.min(this._start+this._config.chunkSize,this._input.size),E=I.call(E,this._start,_)),k.readAsText(E,this._config.encoding));T||this._chunkLoaded({target:{result:_}})},this._chunkLoaded=function(E){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(E.target.result)},this._chunkError=function(){this._sendError(k.error)}}function h(C){var k;c.call(this,C=C||{}),this.stream=function(I){return k=I,this._nextChunk()},this._nextChunk=function(){var I,T;if(!this._finished)return I=this._config.chunkSize,k=I?(T=k.substring(0,I),k.substring(I)):(T=k,""),this._finished=!k,this.parseChunk(T)}}function p(C){c.call(this,C=C||{});var k=[],I=!0,T=!1;this.pause=function(){c.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){c.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(E){this._input=E,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){T&&k.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),k.length?this.parseChunk(k.shift()):I=!0},this._streamData=S(function(E){try{k.push(typeof E=="string"?E:E.toString(this._config.encoding)),I&&(I=!1,this._checkIsFinished(),this.parseChunk(k.shift()))}catch(_){this._streamError(_)}},this),this._streamError=S(function(E){this._streamCleanUp(),this._sendError(E)},this),this._streamEnd=S(function(){this._streamCleanUp(),T=!0,this._streamData("")},this),this._streamCleanUp=S(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function m(C){var k,I,T,E,_=Math.pow(2,53),N=-_,P=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,F=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,L=this,A=0,O=0,j=!1,V=!1,z=[],U={data:[],errors:[],meta:{}};function Z(ce){return C.skipEmptyLines==="greedy"?ce.join("").trim()==="":ce.length===1&&ce[0].length===0}function te(){if(U&&T&&(ue("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+u.DefaultDelimiter+"'"),T=!1),C.skipEmptyLines&&(U.data=U.data.filter(function(J){return!Z(J)})),se()){let J=function(be,me){$(C.transformHeader)&&(be=C.transformHeader(be,me)),z.push(be)};var oe=J;if(U)if(Array.isArray(U.data[0])){for(var ce=0;se()&&ce<U.data.length;ce++)U.data[ce].forEach(J);U.data.splice(0,1)}else U.data.forEach(J)}function Y(J,be){for(var me=C.header?{}:[],ve=0;ve<J.length;ve++){var pe=ve,Ee=J[ve],Ee=((Ce,De)=>(Me=>(C.dynamicTypingFunction&&C.dynamicTyping[Me]===void 0&&(C.dynamicTyping[Me]=C.dynamicTypingFunction(Me)),(C.dynamicTyping[Me]||C.dynamicTyping)===!0))(Ce)?De==="true"||De==="TRUE"||De!=="false"&&De!=="FALSE"&&((Me=>{if(P.test(Me)&&(Me=parseFloat(Me),N<Me&&Me<_))return 1})(De)?parseFloat(De):F.test(De)?new Date(De):De===""?null:De):De)(pe=C.header?ve>=z.length?"__parsed_extra":z[ve]:pe,Ee=C.transform?C.transform(Ee,pe):Ee);pe==="__parsed_extra"?(me[pe]=me[pe]||[],me[pe].push(Ee)):me[pe]=Ee}return C.header&&(ve>z.length?ue("FieldMismatch","TooManyFields","Too many fields: expected "+z.length+" fields but parsed "+ve,O+be):ve<z.length&&ue("FieldMismatch","TooFewFields","Too few fields: expected "+z.length+" fields but parsed "+ve,O+be)),me}var le;U&&(C.header||C.dynamicTyping||C.transform)&&(le=1,!U.data.length||Array.isArray(U.data[0])?(U.data=U.data.map(Y),le=U.data.length):U.data=Y(U.data,0),C.header&&U.meta&&(U.meta.fields=z),O+=le)}function se(){return C.header&&z.length===0}function ue(ce,Y,le,oe){ce={type:ce,code:Y,message:le},oe!==void 0&&(ce.row=oe),U.errors.push(ce)}$(C.step)&&(E=C.step,C.step=function(ce){U=ce,se()?te():(te(),U.data.length!==0&&(A+=ce.data.length,C.preview&&A>C.preview?I.abort():(U.data=U.data[0],E(U,L))))}),this.parse=function(ce,Y,le){var oe=C.quoteChar||'"',oe=(C.newline||(C.newline=this.guessLineEndings(ce,oe)),T=!1,C.delimiter?$(C.delimiter)&&(C.delimiter=C.delimiter(ce),U.meta.delimiter=C.delimiter):((oe=((J,be,me,ve,pe)=>{var Ee,Ce,De,Me;pe=pe||[",","	","|",";",u.RECORD_SEP,u.UNIT_SEP];for(var mt=0;mt<pe.length;mt++){for(var Ye,Ot=pe[mt],rt=0,_t=0,We=0,ct=(De=void 0,new y({comments:ve,delimiter:Ot,newline:be,preview:10}).parse(J)),ln=0;ln<ct.data.length;ln++)me&&Z(ct.data[ln])?We++:(Ye=ct.data[ln].length,_t+=Ye,De===void 0?De=Ye:0<Ye&&(rt+=Math.abs(Ye-De),De=Ye));0<ct.data.length&&(_t/=ct.data.length-We),(Ce===void 0||rt<=Ce)&&(Me===void 0||Me<_t)&&1.99<_t&&(Ce=rt,Ee=Ot,Me=_t)}return{successful:!!(C.delimiter=Ee),bestDelimiter:Ee}})(ce,C.newline,C.skipEmptyLines,C.comments,C.delimitersToGuess)).successful?C.delimiter=oe.bestDelimiter:(T=!0,C.delimiter=u.DefaultDelimiter),U.meta.delimiter=C.delimiter),w(C));return C.preview&&C.header&&oe.preview++,k=ce,I=new y(oe),U=I.parse(k,Y,le),te(),j?{meta:{paused:!0}}:U||{meta:{paused:!1}}},this.paused=function(){return j},this.pause=function(){j=!0,I.abort(),k=$(C.chunk)?"":k.substring(I.getCharIndex())},this.resume=function(){L.streamer._halted?(j=!1,L.streamer.parseChunk(k,!0)):setTimeout(L.resume,3)},this.aborted=function(){return V},this.abort=function(){V=!0,I.abort(),U.meta.aborted=!0,$(C.complete)&&C.complete(U),k=""},this.guessLineEndings=function(J,oe){J=J.substring(0,1048576);var oe=new RegExp(g(oe)+"([^]*?)"+g(oe),"gm"),le=(J=J.replace(oe,"")).split("\r"),oe=J.split(`
`),J=1<oe.length&&oe[0].length<le[0].length;if(le.length===1||J)return`
`;for(var be=0,me=0;me<le.length;me++)le[me][0]===`
`&&be++;return be>=le.length/2?`\r
`:"\r"}}function g(C){return C.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function y(C){var k=(C=C||{}).delimiter,I=C.newline,T=C.comments,E=C.step,_=C.preview,N=C.fastMode,P=null,F=!1,L=C.quoteChar==null?'"':C.quoteChar,A=L;if(C.escapeChar!==void 0&&(A=C.escapeChar),(typeof k!="string"||-1<u.BAD_DELIMITERS.indexOf(k))&&(k=","),T===k)throw new Error("Comment character same as delimiter");T===!0?T="#":(typeof T!="string"||-1<u.BAD_DELIMITERS.indexOf(T))&&(T=!1),I!==`
`&&I!=="\r"&&I!==`\r
`&&(I=`
`);var O=0,j=!1;this.parse=function(V,z,U){if(typeof V!="string")throw new Error("Input must be a string");var Z=V.length,te=k.length,se=I.length,ue=T.length,ce=$(E),Y=[],le=[],oe=[],J=O=0;if(!V)return rt();if(N||N!==!1&&V.indexOf(L)===-1){for(var be=V.split(I),me=0;me<be.length;me++){if(oe=be[me],O+=oe.length,me!==be.length-1)O+=I.length;else if(U)return rt();if(!T||oe.substring(0,ue)!==T){if(ce){if(Y=[],Me(oe.split(k)),_t(),j)return rt()}else Me(oe.split(k));if(_&&_<=me)return Y=Y.slice(0,_),rt(!0)}}return rt()}for(var ve=V.indexOf(k,O),pe=V.indexOf(I,O),Ee=new RegExp(g(A)+g(L),"g"),Ce=V.indexOf(L,O);;)if(V[O]===L)for(Ce=O,O++;;){if((Ce=V.indexOf(L,Ce+1))===-1)return U||le.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Y.length,index:O}),Ye();if(Ce===Z-1)return Ye(V.substring(O,Ce).replace(Ee,L));if(L===A&&V[Ce+1]===A)Ce++;else if(L===A||Ce===0||V[Ce-1]!==A){ve!==-1&&ve<Ce+1&&(ve=V.indexOf(k,Ce+1));var De=mt((pe=pe!==-1&&pe<Ce+1?V.indexOf(I,Ce+1):pe)===-1?ve:Math.min(ve,pe));if(V.substr(Ce+1+De,te)===k){oe.push(V.substring(O,Ce).replace(Ee,L)),V[O=Ce+1+De+te]!==L&&(Ce=V.indexOf(L,O)),ve=V.indexOf(k,O),pe=V.indexOf(I,O);break}if(De=mt(pe),V.substring(Ce+1+De,Ce+1+De+se)===I){if(oe.push(V.substring(O,Ce).replace(Ee,L)),Ot(Ce+1+De+se),ve=V.indexOf(k,O),Ce=V.indexOf(L,O),ce&&(_t(),j))return rt();if(_&&Y.length>=_)return rt(!0);break}le.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Y.length,index:O}),Ce++}}else if(T&&oe.length===0&&V.substring(O,O+ue)===T){if(pe===-1)return rt();O=pe+se,pe=V.indexOf(I,O),ve=V.indexOf(k,O)}else if(ve!==-1&&(ve<pe||pe===-1))oe.push(V.substring(O,ve)),O=ve+te,ve=V.indexOf(k,O);else{if(pe===-1)break;if(oe.push(V.substring(O,pe)),Ot(pe+se),ce&&(_t(),j))return rt();if(_&&Y.length>=_)return rt(!0)}return Ye();function Me(We){Y.push(We),J=O}function mt(We){var ct=0;return ct=We!==-1&&(We=V.substring(Ce+1,We))&&We.trim()===""?We.length:ct}function Ye(We){return U||(We===void 0&&(We=V.substring(O)),oe.push(We),O=Z,Me(oe),ce&&_t()),rt()}function Ot(We){O=We,Me(oe),oe=[],pe=V.indexOf(I,O)}function rt(We){if(C.header&&!z&&Y.length&&!F){var ct=Y[0],ln=Object.create(null),Ko=new Set(ct);let qo=!1;for(let po=0;po<ct.length;po++){let hr=ct[po];if(ln[hr=$(C.transformHeader)?C.transformHeader(hr,po):hr]){let Ar,Xo=ln[hr];for(;Ar=hr+"_"+Xo,Xo++,Ko.has(Ar););Ko.add(Ar),ct[po]=Ar,ln[hr]++,qo=!0,(P=P===null?{}:P)[Ar]=hr}else ln[hr]=1,ct[po]=hr;Ko.add(hr)}qo&&console.warn("Duplicate headers found and renamed."),F=!0}return{data:Y,errors:le,meta:{delimiter:k,linebreak:I,aborted:j,truncated:!!We,cursor:J+(z||0),renamedHeaders:P}}}function _t(){E(rt()),Y=[],le=[]}},this.abort=function(){j=!0},this.getCharIndex=function(){return O}}function v(C){var k=C.data,I=a[k.workerId],T=!1;if(k.error)I.userError(k.error,k.file);else if(k.results&&k.results.data){var E={abort:function(){T=!0,x(k.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:b,resume:b};if($(I.userStep)){for(var _=0;_<k.results.data.length&&(I.userStep({data:k.results.data[_],errors:k.results.errors,meta:k.results.meta},E),!T);_++);delete k.results}else $(I.userChunk)&&(I.userChunk(k.results,E,k.file),delete k.results)}k.finished&&!T&&x(k.workerId,k.results)}function x(C,k){var I=a[C];$(I.userComplete)&&I.userComplete(k),I.terminate(),delete a[C]}function b(){throw new Error("Not implemented.")}function w(C){if(typeof C!="object"||C===null)return C;var k,I=Array.isArray(C)?[]:{};for(k in C)I[k]=w(C[k]);return I}function S(C,k){return function(){C.apply(k,arguments)}}function $(C){return typeof C=="function"}return u.parse=function(C,k){var I=(k=k||{}).dynamicTyping||!1;if($(I)&&(k.dynamicTypingFunction=I,I={}),k.dynamicTyping=I,k.transform=!!$(k.transform)&&k.transform,!k.worker||!u.WORKERS_SUPPORTED)return I=null,u.NODE_STREAM_INPUT,typeof C=="string"?(C=(T=>T.charCodeAt(0)!==65279?T:T.slice(1))(C),I=new(k.download?d:h)(k)):C.readable===!0&&$(C.read)&&$(C.on)?I=new p(k):(r.File&&C instanceof File||C instanceof Object)&&(I=new f(k)),I.stream(C);(I=(()=>{var T;return!!u.WORKERS_SUPPORTED&&(T=(()=>{var E=r.URL||r.webkitURL||null,_=n.toString();return u.BLOB_URL||(u.BLOB_URL=E.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",_,")();"],{type:"text/javascript"})))})(),(T=new r.Worker(T)).onmessage=v,T.id=l++,a[T.id]=T)})()).userStep=k.step,I.userChunk=k.chunk,I.userComplete=k.complete,I.userError=k.error,k.step=$(k.step),k.chunk=$(k.chunk),k.complete=$(k.complete),k.error=$(k.error),delete k.worker,I.postMessage({input:C,config:k,workerId:I.id})},u.unparse=function(C,k){var I=!1,T=!0,E=",",_=`\r
`,N='"',P=N+N,F=!1,L=null,A=!1,O=((()=>{if(typeof k=="object"){if(typeof k.delimiter!="string"||u.BAD_DELIMITERS.filter(function(z){return k.delimiter.indexOf(z)!==-1}).length||(E=k.delimiter),typeof k.quotes!="boolean"&&typeof k.quotes!="function"&&!Array.isArray(k.quotes)||(I=k.quotes),typeof k.skipEmptyLines!="boolean"&&typeof k.skipEmptyLines!="string"||(F=k.skipEmptyLines),typeof k.newline=="string"&&(_=k.newline),typeof k.quoteChar=="string"&&(N=k.quoteChar),typeof k.header=="boolean"&&(T=k.header),Array.isArray(k.columns)){if(k.columns.length===0)throw new Error("Option columns is empty");L=k.columns}k.escapeChar!==void 0&&(P=k.escapeChar+N),k.escapeFormulae instanceof RegExp?A=k.escapeFormulae:typeof k.escapeFormulae=="boolean"&&k.escapeFormulae&&(A=/^[=+\-@\t\r].*$/)}})(),new RegExp(g(N),"g"));if(typeof C=="string"&&(C=JSON.parse(C)),Array.isArray(C)){if(!C.length||Array.isArray(C[0]))return j(null,C,F);if(typeof C[0]=="object")return j(L||Object.keys(C[0]),C,F)}else if(typeof C=="object")return typeof C.data=="string"&&(C.data=JSON.parse(C.data)),Array.isArray(C.data)&&(C.fields||(C.fields=C.meta&&C.meta.fields||L),C.fields||(C.fields=Array.isArray(C.data[0])?C.fields:typeof C.data[0]=="object"?Object.keys(C.data[0]):[]),Array.isArray(C.data[0])||typeof C.data[0]=="object"||(C.data=[C.data])),j(C.fields||[],C.data||[],F);throw new Error("Unable to serialize unrecognized input");function j(z,U,Z){var te="",se=(typeof z=="string"&&(z=JSON.parse(z)),typeof U=="string"&&(U=JSON.parse(U)),Array.isArray(z)&&0<z.length),ue=!Array.isArray(U[0]);if(se&&T){for(var ce=0;ce<z.length;ce++)0<ce&&(te+=E),te+=V(z[ce],ce);0<U.length&&(te+=_)}for(var Y=0;Y<U.length;Y++){var le=(se?z:U[Y]).length,oe=!1,J=se?Object.keys(U[Y]).length===0:U[Y].length===0;if(Z&&!se&&(oe=Z==="greedy"?U[Y].join("").trim()==="":U[Y].length===1&&U[Y][0].length===0),Z==="greedy"&&se){for(var be=[],me=0;me<le;me++){var ve=ue?z[me]:me;be.push(U[Y][ve])}oe=be.join("").trim()===""}if(!oe){for(var pe=0;pe<le;pe++){0<pe&&!J&&(te+=E);var Ee=se&&ue?z[pe]:pe;te+=V(U[Y][Ee],pe)}Y<U.length-1&&(!Z||0<le&&!J)&&(te+=_)}}return te}function V(z,U){var Z,te;return z==null?"":z.constructor===Date?JSON.stringify(z).slice(1,25):(te=!1,A&&typeof z=="string"&&A.test(z)&&(z="'"+z,te=!0),Z=z.toString().replace(O,P),(te=te||I===!0||typeof I=="function"&&I(z,U)||Array.isArray(I)&&I[U]||((se,ue)=>{for(var ce=0;ce<ue.length;ce++)if(-1<se.indexOf(ue[ce]))return!0;return!1})(Z,u.BAD_DELIMITERS)||-1<Z.indexOf(E)||Z.charAt(0)===" "||Z.charAt(Z.length-1)===" ")?N+Z+N:Z)}},u.RECORD_SEP="",u.UNIT_SEP="",u.BYTE_ORDER_MARK="\uFEFF",u.BAD_DELIMITERS=["\r",`
`,'"',u.BYTE_ORDER_MARK],u.WORKERS_SUPPORTED=!i&&!!r.Worker,u.NODE_STREAM_INPUT=1,u.LocalChunkSize=10485760,u.RemoteChunkSize=5242880,u.DefaultDelimiter=",",u.Parser=y,u.ParserHandle=m,u.NetworkStreamer=d,u.FileStreamer=f,u.StringStreamer=h,u.ReadableStreamStreamer=p,r.jQuery&&((o=r.jQuery).fn.parse=function(C){var k=C.config||{},I=[];return this.each(function(_){if(!(o(this).prop("tagName").toUpperCase()==="INPUT"&&o(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var N=0;N<this.files.length;N++)I.push({file:this.files[N],inputElem:this,instanceConfig:o.extend({},k)})}),T(),this;function T(){if(I.length===0)$(C.complete)&&C.complete();else{var _,N,P,F,L=I[0];if($(C.before)){var A=C.before(L.file,L.inputElem);if(typeof A=="object"){if(A.action==="abort")return _="AbortError",N=L.file,P=L.inputElem,F=A.reason,void($(C.error)&&C.error({name:_},N,P,F));if(A.action==="skip")return void E();typeof A.config=="object"&&(L.instanceConfig=o.extend(L.instanceConfig,A.config))}else if(A==="skip")return void E()}var O=L.instanceConfig.complete;L.instanceConfig.complete=function(j){$(O)&&O(j,L.file,L.inputElem),E()},u.parse(L.file,L.instanceConfig)}}function E(){I.splice(0,1),T()}}),s&&(r.onmessage=function(C){C=C.data,u.WORKER_ID===void 0&&C&&(u.WORKER_ID=C.workerId),typeof C.input=="string"?r.postMessage({workerId:u.WORKER_ID,results:u.parse(C.input,C.config),finished:!0}):(r.File&&C.input instanceof File||C.input instanceof Object)&&(C=u.parse(C.input,C.config))&&r.postMessage({workerId:u.WORKER_ID,results:C,finished:!0})}),(d.prototype=Object.create(c.prototype)).constructor=d,(f.prototype=Object.create(c.prototype)).constructor=f,(h.prototype=Object.create(h.prototype)).constructor=h,(p.prototype=Object.create(c.prototype)).constructor=p,u})})(B8);var zKe=B8.exports;const jKe=ht(zKe);async function lS(t){const n=await(await fetch(t)).text();return new Promise((r,o)=>{jKe.parse(n,{header:!0,dynamicTyping:!0,skipEmptyLines:!0,complete:i=>{r(i.data)},error:i=>{o(i)}})})}function uS(t){const e=[...new Set(t.map(a=>a["Power Station"]))],n=new Map(e.map((a,l)=>[a,l])),r=[],o=[];t.forEach(a=>{if(a["Deviation (MW)"]!==null&&a["Deviation (MW)"]!==void 0){const l=[n.get(a["Power Station"])||0,a["Monitored Cap.(MW)"]||0,a["Total Cap. Under Maintenace (MW)"]||0,a["Planned Maintanence (MW)"]||0,a["Forced Maintanence(MW)"]||0,a["Other Reasons (MW)"]||0,a["Programme (MW)"]||0,a["Actual (MW)"]||0,a["Excess(+) / Shortfall (-) (MW)"]||0];r.push(l),o.push(a["Deviation (MW)"])}});const i=WKe(r);return{features:VKe(r,i),labels:o,stationEncoder:n,featureStats:i}}function WKe(t){const e=t[0].length,n=new Array(e).fill(0),r=new Array(e).fill(0);return t.forEach(o=>{o.forEach((i,s)=>{n[s]+=i})}),n.forEach((o,i)=>{n[i]/=t.length}),t.forEach(o=>{o.forEach((i,s)=>{r[s]+=Math.pow(i-n[s],2)})}),r.forEach((o,i)=>{r[i]=Math.sqrt(r[i]/t.length)||1}),{mean:n,std:r}}function VKe(t,e){return t.map(n=>n.map((r,o)=>(r-e.mean[o])/e.std[o]))}async function UKe(t,e,n){const r=rPe({layers:[cy({inputShape:[t[0].length],units:64,activation:"relu"}),RM({rate:.2}),cy({units:32,activation:"relu"}),RM({rate:.2}),cy({units:16,activation:"relu"}),cy({units:1})]});r.compile({optimizer:Pl.adam(.001),loss:"meanSquaredError",metrics:["mae"]});const o=za(t),i=za(e,[e.length,1]);return await r.fit(o,i,{epochs:50,batchSize:32,validationSplit:.2,callbacks:{onEpochEnd:(s,a)=>{n&&a&&n(s,a.loss)}}}),o.dispose(),i.dispose(),r}async function GKe(t,e,n){const r=za(e),o=za(n,[n.length,1]),i=t.predict(r),s=await i.array(),a=n.reduce((p,m,g)=>p+Math.abs(m-s[g][0]),0)/n.length,l=n.reduce((p,m,g)=>p+Math.pow(m-s[g][0],2),0)/n.length,u=Math.sqrt(l),c=n.reduce((p,m)=>p+m,0)/n.length,d=n.reduce((p,m)=>p+Math.pow(m-c,2),0),h=1-n.reduce((p,m,g)=>p+Math.pow(m-s[g][0],2),0)/d;return r.dispose(),o.dispose(),i.dispose(),{mae:a,rmse:u,r2:h}}async function HKe(t,e){const n=za(e),r=t.predict(n),o=await r.array();return n.dispose(),r.dispose(),o.map(i=>i[0])}function KKe(t){return["Power Station","Monitored Capacity","Total Maintenance","Planned Maintenance","Forced Maintenance","Other Reasons","Programme","Actual","Excess/Shortfall"].map((r,o)=>{const i=t.features.map(a=>a[o]),s=qKe(i,t.labels);return{feature:r,importance:Math.abs(s)*100}}).sort((r,o)=>o.importance-r.importance)}function qKe(t,e){const n=t.length,r=t.reduce((c,d)=>c+d,0),o=e.reduce((c,d)=>c+d,0),i=t.reduce((c,d,f)=>c+d*e[f],0),s=t.reduce((c,d)=>c+d*d,0),a=e.reduce((c,d)=>c+d*d,0),l=n*i-r*o,u=Math.sqrt((n*s-r*r)*(n*a-o*o));return u===0?0:l/u}const XKe=()=>{const[t,e]=R.useState(!1),[n,r]=R.useState(0),[o,i]=R.useState([]),[s,a]=R.useState(null),[l,u]=R.useState(null),[c,d]=R.useState([]),[f,h]=R.useState(null),[p,m]=R.useState([]);R.useEffect(()=>{Ake().then(()=>{console.log("TensorFlow.js initialized")})},[]);const g=async()=>{e(!0),i([]),r(0);try{Pi.info("Loading training data...");const v=await lS("/data/training.csv"),x=await lS("/data/evaluation.csv");Pi.info("Preprocessing data...");const b=uS(v),w=uS(x);h(b);const S=KKe(b);d(S),Pi.success("Starting model training...");const $=await UKe(b.features,b.labels,(E,_)=>{r(Math.round((E+1)/50*100)),i(N=>[...N,{epoch:E+1,loss:_}])});a($),Pi.info("Evaluating model...");const C=await GKe($,w.features,w.labels);u(C),Pi.success("Model training completed!"),Pi.info("Generating predictions for test data...");const k=await lS("/data/test.csv"),I=uS(k),T=await HKe($,I.features);m(T),Pi.success(`Generated ${T.length} predictions for test dataset!`)}catch(v){console.error("Training error:",v),Pi.error("An error occurred during training. Please try again.")}finally{e(!1)}},y=()=>{if(p.length===0){Pi.error("No predictions available. Please train the model first.");return}const v=`Index,Predicted Deviation (MW)
`+p.map((S,$)=>`${$+1},${S.toFixed(4)}`).join(`
`),x=new Blob([v],{type:"text/csv"}),b=URL.createObjectURL(x),w=document.createElement("a");w.href=b,w.download="test_predictions.csv",document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(b),Pi.success("Predictions downloaded successfully!")};return D.jsxs("div",{className:"min-h-screen",children:[D.jsx(FZ,{}),D.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-12 space-y-12",children:[D.jsxs(Xa,{className:"border-border shadow-lg",children:[D.jsx(Ya,{children:D.jsxs("div",{className:"flex items-center gap-3",children:[D.jsx("div",{className:"p-3 rounded-lg bg-gradient-to-br from-primary to-secondary",children:D.jsx(S7,{className:"w-6 h-6 text-primary-foreground"})}),D.jsxs("div",{children:[D.jsx(Qa,{children:"Dataset Overview"}),D.jsx(hu,{children:"Pre-loaded power generation data from Indian grid stations"})]})]})}),D.jsx(Za,{children:D.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[D.jsxs("div",{className:"p-4 rounded-lg bg-primary/5 border border-primary/20",children:[D.jsx("div",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Training Set"}),D.jsx("div",{className:"text-2xl font-bold text-primary",children:"267,325 records"}),D.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Historical power generation data"})]}),D.jsxs("div",{className:"p-4 rounded-lg bg-secondary/5 border border-secondary/20",children:[D.jsx("div",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Evaluation Set"}),D.jsx("div",{className:"text-2xl font-bold text-secondary",children:"16,751 records"}),D.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Model validation data"})]}),D.jsxs("div",{className:"p-4 rounded-lg bg-accent/5 border border-accent/20",children:[D.jsx("div",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Test Set"}),D.jsx("div",{className:"text-2xl font-bold text-accent",children:"50,921 records"}),D.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Prediction targets"})]})]})})]}),D.jsx(P$e,{onTrainComplete:()=>{},trainingProgress:n,trainingLoss:o,isTraining:t,onStartTraining:g}),l&&D.jsx(D$e,{metrics:l}),c.length>0&&D.jsx(M$e,{importance:c}),p.length>0&&D.jsxs(Xa,{className:"border-border shadow-lg",children:[D.jsxs(Ya,{children:[D.jsx(Qa,{children:"Test Predictions Ready"}),D.jsxs(hu,{children:["Successfully generated ",p.length.toLocaleString()," predictions for the test dataset"]})]}),D.jsx(Za,{children:D.jsxs(BI,{onClick:y,variant:"glow",size:"lg",className:"w-full md:w-auto",children:[D.jsx(C7,{className:"w-5 h-5 mr-2"}),"Download Predictions (CSV)"]})})]}),D.jsx(F$e,{})]}),D.jsx("footer",{className:"border-t border-border mt-20 py-8",children:D.jsx("div",{className:"max-w-7xl mx-auto px-6 text-center text-sm text-muted-foreground",children:D.jsx("p",{children:"Power Generation Deviation Forecasting System • Built with TensorFlow.js & React"})})})]})},YKe=()=>{const t=vz();return R.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),D.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:D.jsxs("div",{className:"text-center",children:[D.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),D.jsx("p",{className:"mb-4 text-xl text-gray-600",children:"Oops! Page not found"}),D.jsx("a",{href:"/",className:"text-blue-500 underline hover:text-blue-700",children:"Return to Home"})]})})},QKe=new XQ,ZKe=()=>D.jsx(QQ,{client:QKe,children:D.jsxs(kQ,{children:[D.jsx(l9,{}),D.jsx(z9,{}),D.jsx(MZ,{children:D.jsxs(RZ,{children:[D.jsx(gC,{path:"/",element:D.jsx(XKe,{})}),D.jsx(gC,{path:"*",element:D.jsx(YKe,{})})]})})]})});B3(document.getElementById("root")).render(D.jsx(ZKe,{}));
